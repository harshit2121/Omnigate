import{j as u,B as vo,A as Fn,Z as wy,S as gi,T as e2,a as r1,L as To,H as _h,C as nn,b as tE,m as Oe,c as Ny,d as hl,e as fl,R as nE,f as qd,g as cl,U as Hc,h as Rr,i as wo,k as t2,l as Uc,P as sE,F as ul,n as sh,o as fi,p as Qc,q as Wd,r as Zc,s as Cy,t as iE,u as Ey,v as rE,X as _a,w as aE,x as lE,y as Io,z as oE,D as Ti,E as Cs,I as U0,G as Vc,J as Dm,K as Ay,M as ih,N as Xd,O as zc,Q as Sy,V as cE,W as uE,Y as dE,_ as a1,$ as hE,a0 as n2,a1 as fE,a2 as mE,a3 as z0,a4 as Om,a5 as gE,a6 as xE,a7 as pE,a8 as bE,a9 as yE,aa as vE,ab as wE,ac as NE,ad as CE}from"./ui-CJMkKiht.js";import{a as _y,b as EE,r as j,R as l1,u as Da,g as Ty,c as AE,d as SE,e as Md,O as _E,f as TE,B as IE,h as RE,i as Er}from"./vendor-DyizMVXg.js";import{L as Iy,g as Ry,i as o1,a as My,_ as jm,C as Lm,r as rh,b as ME,S as jo,E as c1,c as Xi,d as Oa,e as Js,f as DE,h as u1,F as d1,j as OE,q as Lo,k as nu,l as Dy,m as h1,n as jE,o as ah,p as Oy,u as jy,s as LE,t as km,v as kE,w as Ue,x as ds,y as f1,z as Lr,A as Ro,B as lh,D as BE,G as PE,H as UE,I as su,J as zE,K as Ly,M as FE,N as HE,O as VE,P as Th,Q as GE,R as YE,T as qE,U as WE,V as XE,W as QE,X as ja,Y as Zi,Z as Ih,$ as ky,a0 as By,a1 as Rh,a2 as Mh,a3 as Dh,a4 as ZE,a5 as KE}from"./firebase-C43iT2ZY.js";function JE(r,e){for(var s=0;s<e.length;s++){const l=e[s];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in r)){const g=Object.getOwnPropertyDescriptor(l,h);g&&Object.defineProperty(r,h,g.get?g:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&l(y)}).observe(document,{childList:!0,subtree:!0});function s(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(h){if(h.ep)return;h.ep=!0;const g=s(h);fetch(h.href,g)}})();var F0={exports:{}},Dc={},H0={exports:{}},V0={};var s2;function $E(){return s2||(s2=1,(function(r){function e(V,ue){var ye=V.length;V.push(ue);e:for(;0<ye;){var tt=ye-1>>>1,Ke=V[tt];if(0<h(Ke,ue))V[tt]=ue,V[ye]=Ke,ye=tt;else break e}}function s(V){return V.length===0?null:V[0]}function l(V){if(V.length===0)return null;var ue=V[0],ye=V.pop();if(ye!==ue){V[0]=ye;e:for(var tt=0,Ke=V.length,ht=Ke>>>1;tt<ht;){var ze=2*(tt+1)-1,Be=V[ze],_e=ze+1,st=V[_e];if(0>h(Be,ye))_e<Ke&&0>h(st,Be)?(V[tt]=st,V[_e]=ye,tt=_e):(V[tt]=Be,V[ze]=ye,tt=ze);else if(_e<Ke&&0>h(st,ye))V[tt]=st,V[_e]=ye,tt=_e;else break e}}return ue}function h(V,ue){var ye=V.sortIndex-ue.sortIndex;return ye!==0?ye:V.id-ue.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;r.unstable_now=function(){return g.now()}}else{var y=Date,C=y.now();r.unstable_now=function(){return y.now()-C}}var A=[],N=[],I=1,T=null,k=3,U=!1,X=!1,z=!1,ae=!1,fe=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function te(V){for(var ue=s(N);ue!==null;){if(ue.callback===null)l(N);else if(ue.startTime<=V)l(N),ue.sortIndex=ue.expirationTime,e(A,ue);else break;ue=s(N)}}function ne(V){if(z=!1,te(V),!X)if(s(A)!==null)X=!0,ce||(ce=!0,se());else{var ue=s(N);ue!==null&&Y(ne,ue.startTime-V)}}var ce=!1,G=-1,J=5,Q=-1;function Ce(){return ae?!0:!(r.unstable_now()-Q<J)}function Z(){if(ae=!1,ce){var V=r.unstable_now();Q=V;var ue=!0;try{e:{X=!1,z&&(z=!1,B(G),G=-1),U=!0;var ye=k;try{t:{for(te(V),T=s(A);T!==null&&!(T.expirationTime>V&&Ce());){var tt=T.callback;if(typeof tt=="function"){T.callback=null,k=T.priorityLevel;var Ke=tt(T.expirationTime<=V);if(V=r.unstable_now(),typeof Ke=="function"){T.callback=Ke,te(V),ue=!0;break t}T===s(A)&&l(A),te(V)}else l(A);T=s(A)}if(T!==null)ue=!0;else{var ht=s(N);ht!==null&&Y(ne,ht.startTime-V),ue=!1}}break e}finally{T=null,k=ye,U=!1}ue=void 0}}finally{ue?se():ce=!1}}}var se;if(typeof W=="function")se=function(){W(Z)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Ae=ge.port2;ge.port1.onmessage=Z,se=function(){Ae.postMessage(null)}}else se=function(){fe(Z,0)};function Y(V,ue){G=fe(function(){V(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_next=function(V){switch(k){case 1:case 2:case 3:var ue=3;break;default:ue=k}var ye=k;k=ue;try{return V()}finally{k=ye}},r.unstable_requestPaint=function(){ae=!0},r.unstable_runWithPriority=function(V,ue){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ye=k;k=V;try{return ue()}finally{k=ye}},r.unstable_scheduleCallback=function(V,ue,ye){var tt=r.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?tt+ye:tt):ye=tt,V){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ye+Ke,V={id:I++,callback:ue,priorityLevel:V,startTime:ye,expirationTime:Ke,sortIndex:-1},ye>tt?(V.sortIndex=ye,e(N,V),s(A)===null&&V===s(N)&&(z?(B(G),G=-1):z=!0,Y(ne,ye-tt))):(V.sortIndex=Ke,e(A,V),X||U||(X=!0,ce||(ce=!0,se()))),V},r.unstable_shouldYield=Ce,r.unstable_wrapCallback=function(V){var ue=k;return function(){var ye=k;k=ue;try{return V.apply(this,arguments)}finally{k=ye}}}})(V0)),V0}var i2;function e3(){return i2||(i2=1,H0.exports=$E()),H0.exports}var r2;function t3(){if(r2)return Dc;r2=1;var r=e3(),e=_y(),s=EE();function l(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function g(t){var i=t,c=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(c=i.return),t=i.return;while(t)}return i.tag===3?c:null}function y(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function C(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function A(t){if(g(t)!==t)throw Error(l(188))}function N(t){var i=t.alternate;if(!i){if(i=g(t),i===null)throw Error(l(188));return i!==t?null:t}for(var c=t,m=i;;){var b=c.return;if(b===null)break;var w=b.alternate;if(w===null){if(m=b.return,m!==null){c=m;continue}break}if(b.child===w.child){for(w=b.child;w;){if(w===c)return A(b),t;if(w===m)return A(b),i;w=w.sibling}throw Error(l(188))}if(c.return!==m.return)c=b,m=w;else{for(var _=!1,O=b.child;O;){if(O===c){_=!0,c=b,m=w;break}if(O===m){_=!0,m=b,c=w;break}O=O.sibling}if(!_){for(O=w.child;O;){if(O===c){_=!0,c=w,m=b;break}if(O===m){_=!0,m=w,c=b;break}O=O.sibling}if(!_)throw Error(l(189))}}if(c.alternate!==m)throw Error(l(190))}if(c.tag!==3)throw Error(l(188));return c.stateNode.current===c?t:i}function I(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=I(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),ae=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),W=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),Ce=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=Z&&t[Z]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ge?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case fe:return"Profiler";case ae:return"StrictMode";case ne:return"Suspense";case ce:return"SuspenseList";case Q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case W:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case te:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G:return i=t.displayName||null,i!==null?i:Ae(t.type)||"Memo";case J:i=t._payload,t=t._init;try{return Ae(t(i))}catch{}}return null}var Y=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},tt=[],Ke=-1;function ht(t){return{current:t}}function ze(t){0>Ke||(t.current=tt[Ke],tt[Ke]=null,Ke--)}function Be(t,i){Ke++,tt[Ke]=t.current,t.current=i}var _e=ht(null),st=ht(null),Le=ht(null),Ye=ht(null);function rt(t,i){switch(Be(Le,i),Be(st,t),Be(_e,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Cp(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Cp(i),t=Ep(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ze(_e),Be(_e,t)}function wt(){ze(_e),ze(st),ze(Le)}function Et(t){t.memoizedState!==null&&Be(Ye,t);var i=_e.current,c=Ep(i,t.type);i!==c&&(Be(st,t),Be(_e,c))}function pt(t){st.current===t&&(ze(_e),ze(st)),Ye.current===t&&(ze(Ye),Tc._currentValue=ye)}var it,de;function Ge(t){if(it===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);it=i&&i[1]||"",de=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+t+de}var He=!1;function mt(t,i){if(!t||He)return"";He=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(pe){var he=pe}Reflect.construct(t,[],Ne)}else{try{Ne.call()}catch(pe){he=pe}t.call(Ne.prototype)}}else{try{throw Error()}catch(pe){he=pe}(Ne=t())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(pe){if(pe&&he&&typeof pe.stack=="string")return[pe.stack,he.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),_=w[0],O=w[1];if(_&&O){var F=_.split(`
`),oe=O.split(`
`);for(b=m=0;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;for(;b<oe.length&&!oe[b].includes("DetermineComponentFrameRoot");)b++;if(m===F.length||b===oe.length)for(m=F.length-1,b=oe.length-1;1<=m&&0<=b&&F[m]!==oe[b];)b--;for(;1<=m&&0<=b;m--,b--)if(F[m]!==oe[b]){if(m!==1||b!==1)do if(m--,b--,0>b||F[m]!==oe[b]){var ve=`
`+F[m].replace(" at new "," at ");return t.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",t.displayName)),ve}while(1<=m&&0<=b);break}}}finally{He=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?Ge(c):""}function vt(t,i){switch(t.tag){case 26:case 27:case 5:return Ge(t.type);case 16:return Ge("Lazy");case 13:return t.child!==i&&i!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return mt(t.type,!1);case 11:return mt(t.type.render,!1);case 1:return mt(t.type,!0);case 31:return Ge("Activity");default:return""}}function be(t){try{var i="",c=null;do i+=vt(t,c),c=t,t=t.return;while(t);return i}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ie=Object.prototype.hasOwnProperty,Nt=r.unstable_scheduleCallback,je=r.unstable_cancelCallback,Tn=r.unstable_shouldYield,De=r.unstable_requestPaint,ft=r.unstable_now,ee=r.unstable_getCurrentPriorityLevel,ke=r.unstable_ImmediatePriority,Pe=r.unstable_UserBlockingPriority,nt=r.unstable_NormalPriority,lt=r.unstable_LowPriority,In=r.unstable_IdlePriority,gs=r.log,pi=r.unstable_setDisableYieldValue,Gt=null,Re=null;function Jt(t){if(typeof gs=="function"&&pi(t),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(Gt,t)}catch{}}var yt=Math.clz32?Math.clz32:La,pn=Math.log,tr=Math.LN2;function La(t){return t>>>=0,t===0?32:31-(pn(t)/tr|0)|0}var ka=256,Lt=262144,$s=4194304;function ji(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ba(t,i,c){var m=t.pendingLanes;if(m===0)return 0;var b=0,w=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var O=m&134217727;return O!==0?(m=O&~w,m!==0?b=ji(m):(_&=O,_!==0?b=ji(_):c||(c=O&~t,c!==0&&(b=ji(c))))):(O=m&~w,O!==0?b=ji(O):_!==0?b=ji(_):c||(c=m&~t,c!==0&&(b=ji(c)))),b===0?0:i!==0&&i!==b&&(i&w)===0&&(w=b&-b,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:b}function rs(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Vo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xn(){var t=$s;return $s<<=1,($s&62914560)===0&&($s=4194304),t}function Li(t){for(var i=[],c=0;31>c;c++)i.push(t);return i}function ki(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ei(t,i,c,m,b,w){var _=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var O=t.entanglements,F=t.expirationTimes,oe=t.hiddenUpdates;for(c=_&~c;0<c;){var ve=31-yt(c),Ne=1<<ve;O[ve]=0,F[ve]=-1;var he=oe[ve];if(he!==null)for(oe[ve]=null,ve=0;ve<he.length;ve++){var pe=he[ve];pe!==null&&(pe.lane&=-536870913)}c&=~Ne}m!==0&&mu(t,m,0),w!==0&&b===0&&t.tag!==0&&(t.suspendedLanes|=w&~(_&~i))}function mu(t,i,c){t.pendingLanes|=i,t.suspendedLanes&=~i;var m=31-yt(i);t.entangledLanes|=i,t.entanglements[m]=t.entanglements[m]|1073741824|c&261930}function Bi(t,i){var c=t.entangledLanes|=i;for(t=t.entanglements;c;){var m=31-yt(c),b=1<<m;b&i|t[m]&i&&(t[m]|=i),c&=~b}}function Al(t,i){var c=i&-i;return c=(c&42)!==0?1:es(c),(c&(t.suspendedLanes|i))!==0?0:c}function es(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function bi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function xs(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:Wp(t.type))}function Fe(t,i){var c=ue.p;try{return ue.p=t,i()}finally{ue.p=c}}var ps=Math.random().toString(36).slice(2),kn="__reactFiber$"+ps,rn="__reactProps$"+ps,ks="__reactContainer$"+ps,kr="__reactEvents$"+ps,Sl="__reactListeners$"+ps,ti="__reactHandles$"+ps,gu="__reactResources$"+ps,Pa="__reactMarker$"+ps;function Es(t){delete t[kn],delete t[rn],delete t[kr],delete t[Sl],delete t[ti]}function Rn(t){var i=t[kn];if(i)return i;for(var c=t.parentNode;c;){if(i=c[ks]||c[kn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(t=Mp(t);t!==null;){if(c=t[kn])return c;t=Mp(t)}return i}t=c,c=t.parentNode}return null}function Qt(t){if(t=t[kn]||t[ks]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Br(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(l(33))}function bs(t){var i=t[gu];return i||(i=t[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mn(t){t[Pa]=!0}var Ee=new Set,xu={};function $t(t,i){Bs(t,i),Bs(t+"Capture",i)}function Bs(t,i){for(xu[t]=i,t=0;t<i.length;t++)Ee.add(i[t])}var Gh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yt={},Ft={};function Dt(t){return Ie.call(Ft,t)?!0:Ie.call(Yt,t)?!1:Gh.test(t)?Ft[t]=!0:(Yt[t]=!0,!1)}function Pr(t,i,c){if(Dt(i))if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var m=i.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+c)}}function Ur(t,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+c)}}function Ps(t,i,c,m){if(m===null)t.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(i,c,""+m)}}function qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yi(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yh(t,i,c){var m=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,w=m.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return b.call(this)},set:function(_){c=""+_,w.call(this,_)}}),Object.defineProperty(t,i,{enumerable:m.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function bn(t){if(!t._valueTracker){var i=yi(t)?"checked":"value";t._valueTracker=Yh(t,i,""+t[i])}}function vi(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return t&&(m=yi(t)?t.checked?"true":"false":t.value),t=m,t!==c?(i.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zr=/[\n"\\]/g;function It(t){return t.replace(zr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Hn(t,i,c,m,b,w,_,O){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+qt(i)):t.value!==""+qt(i)&&(t.value=""+qt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?L(t,_,qt(i)):c!=null?L(t,_,qt(c)):m!=null&&t.removeAttribute("value"),b==null&&w!=null&&(t.defaultChecked=!!w),b!=null&&(t.checked=b&&typeof b!="function"&&typeof b!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.name=""+qt(O):t.removeAttribute("name")}function re(t,i,c,m,b,w,_,O){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){bn(t);return}c=c!=null?""+qt(c):"",i=i!=null?""+qt(i):c,O||i===t.value||(t.value=i),t.defaultValue=i}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,t.checked=O?t.checked:!!m,t.defaultChecked=!!m,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),bn(t)}function L(t,i,c){i==="number"&&_l(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Qe(t,i,c,m){if(t=t.options,i){i={};for(var b=0;b<c.length;b++)i["$"+c[b]]=!0;for(c=0;c<t.length;c++)b=i.hasOwnProperty("$"+t[c].value),t[c].selected!==b&&(t[c].selected=b),b&&m&&(t[c].defaultSelected=!0)}else{for(c=""+qt(c),i=null,b=0;b<t.length;b++){if(t[b].value===c){t[b].selected=!0,m&&(t[b].defaultSelected=!0);return}i!==null||t[b].disabled||(i=t[b])}i!==null&&(i.selected=!0)}}function Bn(t,i,c){if(i!=null&&(i=""+qt(i),i!==t.value&&(t.value=i),c==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=c!=null?""+qt(c):""}function ys(t,i,c,m){if(i==null){if(m!=null){if(c!=null)throw Error(l(92));if(Y(m)){if(1<m.length)throw Error(l(93));m=m[0]}c=m}c==null&&(c=""),i=c}c=qt(i),t.defaultValue=c,m=t.textContent,m===c&&m!==""&&m!==null&&(t.value=m),bn(t)}function Fr(t,i){if(i){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=i;return}}t.textContent=i}var Go=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vs(t,i,c){var m=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":m?t.setProperty(i,c):typeof c!="number"||c===0||Go.has(i)?i==="float"?t.cssFloat=c:t[i]=(""+c).trim():t[i]=c+"px"}function at(t,i,c){if(i!=null&&typeof i!="object")throw Error(l(62));if(t=t.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||i!=null&&i.hasOwnProperty(m)||(m.indexOf("--")===0?t.setProperty(m,""):m==="float"?t.cssFloat="":t[m]="");for(var b in i)m=i[b],i.hasOwnProperty(b)&&c[b]!==m&&vs(t,b,m)}else for(var w in i)i.hasOwnProperty(w)&&vs(t,w,i[w])}function fn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(t){return qh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function As(){}var Ua=null;function Yo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yn=null,ni=null;function wi(t){var i=Qt(t);if(i&&(t=i.stateNode)){var c=t[rn]||null;e:switch(t=i.stateNode,i.type){case"input":if(Hn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+It(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==t&&m.form===t.form){var b=m[rn]||null;if(!b)throw Error(l(90));Hn(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(i=0;i<c.length;i++)m=c[i],m.form===t.form&&vi(m)}break e;case"textarea":Bn(t,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Qe(t,!!c.multiple,i,!1)}}}var ct=!1;function bu(t,i,c){if(ct)return t(i,c);ct=!0;try{var m=t(i);return m}finally{if(ct=!1,(yn!==null||ni!==null)&&(cd(),yn&&(i=yn,t=ni,ni=yn=null,wi(i),t)))for(i=0;i<t.length;i++)wi(t[i])}}function xt(t,i){var c=t.stateNode;if(c===null)return null;var m=c[rn]||null;if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(l(231,i,typeof c));return c}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qo=!1;if(mn)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){qo=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{qo=!1}var Ni=null,Ci=null,Tl=null;function Vr(){if(Tl)return Tl;var t,i=Ci,c=i.length,m,b="value"in Ni?Ni.value:Ni.textContent,w=b.length;for(t=0;t<c&&i[t]===b[t];t++);var _=c-t;for(m=1;m<=_&&i[c-m]===b[w-m];m++);return Tl=b.slice(t,1<m?1-m:void 0)}function Pi(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ui(){return!0}function Wo(){return!1}function Vn(t){function i(c,m,b,w,_){this._reactName=c,this._targetInst=b,this.type=m,this.nativeEvent=w,this.target=_,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(c=t[O],this[O]=c?c(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ui:Wo,this.isPropagationStopped=Wo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),i}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qn=Vn(Us),Gr=T({},Us,{view:0,detail:0}),yu=Vn(Gr),Il,Xo,za,Rl=T({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==za&&(za&&t.type==="mousemove"?(Il=t.screenX-za.screenX,Xo=t.screenY-za.screenY):Xo=Il=0,za=t),Il)},movementY:function(t){return"movementY"in t?t.movementY:Xo}}),Zt=Vn(Rl),vu=T({},Rl,{dataTransfer:0}),Ml=Vn(vu),zi=T({},Gr,{relatedTarget:0}),Qo=Vn(zi),xe=T({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),At=Vn(xe),Zn=T({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dl=Vn(Zn),wu=T({},Us,{data:0}),Nu=Vn(wu),Wh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pn(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Zo[t])?!!i[t]:!1}function Fa(){return Pn}var Sn=T({},Gr,{key:function(t){if(t.key){var i=Wh[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Pi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fa,charCode:function(t){return t.type==="keypress"?Pi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ol=Vn(Sn),sr=T({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),en=Vn(sr),ut=T({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fa}),Qh=Vn(ut),gn=T({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),ir=Vn(gn),Yr=T({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zh=Vn(Yr),si=T({},Us,{newState:0,oldState:0}),Ko=Vn(si),Cu=[9,13,27,32],Ha=mn&&"CompositionEvent"in window,qr=null;mn&&"documentMode"in document&&(qr=document.documentMode);var Eu=mn&&"TextEvent"in window&&!qr,Au=mn&&(!Ha||qr&&8<qr&&11>=qr),rr=" ",jl=!1;function Su(t,i){switch(t){case"keyup":return Cu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function Fi(t,i){switch(t){case"compositionend":return Wr(i);case"keypress":return i.which!==32?null:(jl=!0,rr);case"textInput":return t=i.data,t===rr&&jl?null:t;default:return null}}function Ll(t,i){if(Xr)return t==="compositionend"||!Ha&&Su(t,i)?(t=Vr(),Tl=Ci=Ni=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Au&&i.locale!=="ko"?null:i.data;default:return null}}var Ss={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jo(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ss[t.type]:i==="textarea"}function zs(t,i,c,m){yn?ni?ni.push(m):ni=[m]:yn=m,i=xd(i,"onChange"),0<i.length&&(c=new Qn("onChange","change",null,c,m),t.push({event:c,listeners:i}))}var Va=null,ar=null;function Kh(t){pp(t,0)}function Ga(t){var i=Br(t);if(vi(i))return t}function Fs(t,i){if(t==="change")return i}var _u=!1;if(mn){var Ya;if(mn){var lr="oninput"in document;if(!lr){var kt=document.createElement("div");kt.setAttribute("oninput","return;"),lr=typeof kt.oninput=="function"}Ya=lr}else Ya=!1;_u=Ya&&(!document.documentMode||9<document.documentMode)}function qa(){Va&&(Va.detachEvent("onpropertychange",R),ar=Va=null)}function R(t){if(t.propertyName==="value"&&Ga(ar)){var i=[];zs(i,ar,t,Yo(t)),bu(Kh,i)}}function n(t,i,c){t==="focusin"?(qa(),Va=i,ar=c,Va.attachEvent("onpropertychange",R)):t==="focusout"&&qa()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ga(ar)}function o(t,i){if(t==="click")return Ga(i)}function d(t,i){if(t==="input"||t==="change")return Ga(i)}function f(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var x=typeof Object.is=="function"?Object.is:f;function p(t,i){if(x(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var c=Object.keys(t),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var b=c[m];if(!Ie.call(i,b)||!x(t[b],i[b]))return!1}return!0}function v(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E(t,i){var c=v(t);t=0;for(var m;c;){if(c.nodeType===3){if(m=t+c.textContent.length,t<=i&&m>=i)return{node:c,offset:i-t};t=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=v(c)}}function S(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?S(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function M(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=_l(t.document);i instanceof t.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)t=i.contentWindow;else break;i=_l(t.document)}return i}function D(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var P=mn&&"documentMode"in document&&11>=document.documentMode,H=null,q=null,ie=null,me=!1;function Me(t,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;me||H==null||H!==_l(m)||(m=H,"selectionStart"in m&&D(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ie&&p(ie,m)||(ie=m,m=xd(q,"onSelect"),0<m.length&&(i=new Qn("onSelect","select",null,i,c),t.push({event:i,listeners:m}),i.target=H)))}function Te(t,i){var c={};return c[t.toLowerCase()]=i.toLowerCase(),c["Webkit"+t]="webkit"+i,c["Moz"+t]="moz"+i,c}var Se={animationend:Te("Animation","AnimationEnd"),animationiteration:Te("Animation","AnimationIteration"),animationstart:Te("Animation","AnimationStart"),transitionrun:Te("Transition","TransitionRun"),transitionstart:Te("Transition","TransitionStart"),transitioncancel:Te("Transition","TransitionCancel"),transitionend:Te("Transition","TransitionEnd")},_t={},bt={};mn&&(bt=document.createElement("div").style,"AnimationEvent"in window||(delete Se.animationend.animation,delete Se.animationiteration.animation,delete Se.animationstart.animation),"TransitionEvent"in window||delete Se.transitionend.transition);function Dn(t){if(_t[t])return _t[t];if(!Se[t])return t;var i=Se[t],c;for(c in i)if(i.hasOwnProperty(c)&&c in bt)return _t[t]=i[c];return t}var _s=Dn("animationend"),as=Dn("animationiteration"),tn=Dn("animationstart"),Kn=Dn("transitionrun"),ws=Dn("transitionstart"),Qr=Dn("transitioncancel"),or=Dn("transitionend"),Tu=new Map,$o="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$o.push("scrollEnd");function Ei(t,i){Tu.set(t,i),$t(i,[t])}var Iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ii=[],kl=0,Jh=0;function Ru(){for(var t=kl,i=Jh=kl=0;i<t;){var c=ii[i];ii[i++]=null;var m=ii[i];ii[i++]=null;var b=ii[i];ii[i++]=null;var w=ii[i];if(ii[i++]=null,m!==null&&b!==null){var _=m.pending;_===null?b.next=b:(b.next=_.next,_.next=b),m.pending=b}w!==0&&J1(c,b,w)}}function Mu(t,i,c,m){ii[kl++]=t,ii[kl++]=i,ii[kl++]=c,ii[kl++]=m,Jh|=m,t.lanes|=m,t=t.alternate,t!==null&&(t.lanes|=m)}function $h(t,i,c,m){return Mu(t,i,c,m),Du(t)}function Wa(t,i){return Mu(t,null,null,i),Du(t)}function J1(t,i,c){t.lanes|=c;var m=t.alternate;m!==null&&(m.lanes|=c);for(var b=!1,w=t.return;w!==null;)w.childLanes|=c,m=w.alternate,m!==null&&(m.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(b=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,b&&i!==null&&(b=31-yt(c),t=w.hiddenUpdates,m=t[b],m===null?t[b]=[i]:m.push(i),i.lane=c|536870912),w):null}function Du(t){if(50<wc)throw wc=0,c0=null,Error(l(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Bl={};function PN(t,i,c,m){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(t,i,c,m){return new PN(t,i,c,m)}function ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cr(t,i){var c=t.alternate;return c===null?(c=Hs(t.tag,i,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=i,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,i=t.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function $1(t,i){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,i=c.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Ou(t,i,c,m,b,w){var _=0;if(m=t,typeof t=="function")ef(t)&&(_=1);else if(typeof t=="string")_=VC(t,c,_e.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Q:return t=Hs(31,c,i,b),t.elementType=Q,t.lanes=w,t;case z:return Xa(c.children,b,w,i);case ae:_=8,b|=24;break;case fe:return t=Hs(12,c,i,b|2),t.elementType=fe,t.lanes=w,t;case ne:return t=Hs(13,c,i,b),t.elementType=ne,t.lanes=w,t;case ce:return t=Hs(19,c,i,b),t.elementType=ce,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:_=10;break e;case B:_=9;break e;case te:_=11;break e;case G:_=14;break e;case J:_=16,m=null;break e}_=29,c=Error(l(130,t===null?"null":typeof t,"")),m=null}return i=Hs(_,c,i,b),i.elementType=t,i.type=m,i.lanes=w,i}function Xa(t,i,c,m){return t=Hs(7,t,m,i),t.lanes=c,t}function tf(t,i,c){return t=Hs(6,t,null,i),t.lanes=c,t}function eg(t){var i=Hs(18,null,null,0);return i.stateNode=t,i}function nf(t,i,c){return i=Hs(4,t.children!==null?t.children:[],t.key,i),i.lanes=c,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var tg=new WeakMap;function ri(t,i){if(typeof t=="object"&&t!==null){var c=tg.get(t);return c!==void 0?c:(i={value:t,source:i,stack:be(i)},tg.set(t,i),i)}return{value:t,source:i,stack:be(i)}}var Pl=[],Ul=0,ju=null,ec=0,ai=[],li=0,Zr=null,Hi=1,Vi="";function ur(t,i){Pl[Ul++]=ec,Pl[Ul++]=ju,ju=t,ec=i}function ng(t,i,c){ai[li++]=Hi,ai[li++]=Vi,ai[li++]=Zr,Zr=t;var m=Hi;t=Vi;var b=32-yt(m)-1;m&=~(1<<b),c+=1;var w=32-yt(i)+b;if(30<w){var _=b-b%5;w=(m&(1<<_)-1).toString(32),m>>=_,b-=_,Hi=1<<32-yt(i)+b|c<<b|m,Vi=w+t}else Hi=1<<w|c<<b|m,Vi=t}function sf(t){t.return!==null&&(ur(t,1),ng(t,1,0))}function rf(t){for(;t===ju;)ju=Pl[--Ul],Pl[Ul]=null,ec=Pl[--Ul],Pl[Ul]=null;for(;t===Zr;)Zr=ai[--li],ai[li]=null,Vi=ai[--li],ai[li]=null,Hi=ai[--li],ai[li]=null}function sg(t,i){ai[li++]=Hi,ai[li++]=Vi,ai[li++]=Zr,Hi=i.id,Vi=i.overflow,Zr=t}var ls=null,vn=null,Ut=!1,Kr=null,oi=!1,af=Error(l(519));function Jr(t){var i=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tc(ri(i,t)),af}function ig(t){var i=t.stateNode,c=t.type,m=t.memoizedProps;switch(i[kn]=t,i[rn]=m,c){case"dialog":jt("cancel",i),jt("close",i);break;case"iframe":case"object":case"embed":jt("load",i);break;case"video":case"audio":for(c=0;c<Cc.length;c++)jt(Cc[c],i);break;case"source":jt("error",i);break;case"img":case"image":case"link":jt("error",i),jt("load",i);break;case"details":jt("toggle",i);break;case"input":jt("invalid",i),re(i,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":jt("invalid",i);break;case"textarea":jt("invalid",i),ys(i,m.value,m.defaultValue,m.children)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||m.suppressHydrationWarning===!0||wp(i.textContent,c)?(m.popover!=null&&(jt("beforetoggle",i),jt("toggle",i)),m.onScroll!=null&&jt("scroll",i),m.onScrollEnd!=null&&jt("scrollend",i),m.onClick!=null&&(i.onclick=As),i=!0):i=!1,i||Jr(t,!0)}function rg(t){for(ls=t.return;ls;)switch(ls.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:ls=ls.return}}function zl(t){if(t!==ls)return!1;if(!Ut)return rg(t),Ut=!0,!1;var i=t.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||E0(t.type,t.memoizedProps)),c=!c),c&&vn&&Jr(t),rg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));vn=Rp(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));vn=Rp(t)}else i===27?(i=vn,ha(t.type)?(t=I0,I0=null,vn=t):vn=i):vn=ls?ui(t.stateNode.nextSibling):null;return!0}function Qa(){vn=ls=null,Ut=!1}function lf(){var t=Kr;return t!==null&&(Ms===null?Ms=t:Ms.push.apply(Ms,t),Kr=null),t}function tc(t){Kr===null?Kr=[t]:Kr.push(t)}var of=ht(null),Za=null,dr=null;function $r(t,i,c){Be(of,i._currentValue),i._currentValue=c}function hr(t){t._currentValue=of.current,ze(of)}function cf(t,i,c){for(;t!==null;){var m=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),t===c)break;t=t.return}}function uf(t,i,c,m){var b=t.child;for(b!==null&&(b.return=t);b!==null;){var w=b.dependencies;if(w!==null){var _=b.child;w=w.firstContext;e:for(;w!==null;){var O=w;w=b;for(var F=0;F<i.length;F++)if(O.context===i[F]){w.lanes|=c,O=w.alternate,O!==null&&(O.lanes|=c),cf(w.return,c,t),m||(_=null);break e}w=O.next}}else if(b.tag===18){if(_=b.return,_===null)throw Error(l(341));_.lanes|=c,w=_.alternate,w!==null&&(w.lanes|=c),cf(_,c,t),_=null}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===t){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}}function Fl(t,i,c,m){t=null;for(var b=i,w=!1;b!==null;){if(!w){if((b.flags&524288)!==0)w=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var _=b.alternate;if(_===null)throw Error(l(387));if(_=_.memoizedProps,_!==null){var O=b.type;x(b.pendingProps.value,_.value)||(t!==null?t.push(O):t=[O])}}else if(b===Ye.current){if(_=b.alternate,_===null)throw Error(l(387));_.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(t!==null?t.push(Tc):t=[Tc])}b=b.return}t!==null&&uf(i,t,c,m),i.flags|=262144}function Lu(t){for(t=t.firstContext;t!==null;){if(!x(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ka(t){Za=t,dr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function os(t){return ag(Za,t)}function ku(t,i){return Za===null&&Ka(t),ag(t,i)}function ag(t,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},dr===null){if(t===null)throw Error(l(308));dr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else dr=dr.next=i;return c}var UN=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(c,m){t.push(m)}};this.abort=function(){i.aborted=!0,t.forEach(function(c){return c()})}},zN=r.unstable_scheduleCallback,FN=r.unstable_NormalPriority,Gn={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function df(){return{controller:new UN,data:new Map,refCount:0}}function nc(t){t.refCount--,t.refCount===0&&zN(FN,function(){t.controller.abort()})}var sc=null,hf=0,Hl=0,Vl=null;function HN(t,i){if(sc===null){var c=sc=[];hf=0,Hl=g0(),Vl={status:"pending",value:void 0,then:function(m){c.push(m)}}}return hf++,i.then(lg,lg),i}function lg(){if(--hf===0&&sc!==null){Vl!==null&&(Vl.status="fulfilled");var t=sc;sc=null,Hl=0,Vl=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function VN(t,i){var c=[],m={status:"pending",value:null,reason:null,then:function(b){c.push(b)}};return t.then(function(){m.status="fulfilled",m.value=i;for(var b=0;b<c.length;b++)(0,c[b])(i)},function(b){for(m.status="rejected",m.reason=b,b=0;b<c.length;b++)(0,c[b])(void 0)}),m}var og=V.S;V.S=function(t,i){Yx=ft(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&HN(t,i),og!==null&&og(t,i)};var Ja=ht(null);function ff(){var t=Ja.current;return t!==null?t:xn.pooledCache}function Bu(t,i){i===null?Be(Ja,Ja.current):Be(Ja,i.pool)}function cg(){var t=ff();return t===null?null:{parent:Gn._currentValue,pool:t}}var Gl=Error(l(460)),mf=Error(l(474)),Pu=Error(l(542)),Uu={then:function(){}};function ug(t){return t=t.status,t==="fulfilled"||t==="rejected"}function dg(t,i,c){switch(c=t[c],c===void 0?t.push(i):c!==i&&(i.then(As,As),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,fg(t),t;default:if(typeof i.status=="string")i.then(As,As);else{if(t=xn,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=i,t.status="pending",t.then(function(m){if(i.status==="pending"){var b=i;b.status="fulfilled",b.value=m}},function(m){if(i.status==="pending"){var b=i;b.status="rejected",b.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,fg(t),t}throw el=i,Gl}}function $a(t){try{var i=t._init;return i(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(el=c,Gl):c}}var el=null;function hg(){if(el===null)throw Error(l(459));var t=el;return el=null,t}function fg(t){if(t===Gl||t===Pu)throw Error(l(483))}var Yl=null,ic=0;function zu(t){var i=ic;return ic+=1,Yl===null&&(Yl=[]),dg(Yl,t,i)}function rc(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Fu(t,i){throw i.$$typeof===k?Error(l(525)):(t=Object.prototype.toString.call(i),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function mg(t){function i($,K){if(t){var le=$.deletions;le===null?($.deletions=[K],$.flags|=16):le.push(K)}}function c($,K){if(!t)return null;for(;K!==null;)i($,K),K=K.sibling;return null}function m($){for(var K=new Map;$!==null;)$.key!==null?K.set($.key,$):K.set($.index,$),$=$.sibling;return K}function b($,K){return $=cr($,K),$.index=0,$.sibling=null,$}function w($,K,le){return $.index=le,t?(le=$.alternate,le!==null?(le=le.index,le<K?($.flags|=67108866,K):le):($.flags|=67108866,K)):($.flags|=1048576,K)}function _($){return t&&$.alternate===null&&($.flags|=67108866),$}function O($,K,le,we){return K===null||K.tag!==6?(K=tf(le,$.mode,we),K.return=$,K):(K=b(K,le),K.return=$,K)}function F($,K,le,we){var ot=le.type;return ot===z?ve($,K,le.props.children,we,le.key):K!==null&&(K.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===J&&$a(ot)===K.type)?(K=b(K,le.props),rc(K,le),K.return=$,K):(K=Ou(le.type,le.key,le.props,null,$.mode,we),rc(K,le),K.return=$,K)}function oe($,K,le,we){return K===null||K.tag!==4||K.stateNode.containerInfo!==le.containerInfo||K.stateNode.implementation!==le.implementation?(K=nf(le,$.mode,we),K.return=$,K):(K=b(K,le.children||[]),K.return=$,K)}function ve($,K,le,we,ot){return K===null||K.tag!==7?(K=Xa(le,$.mode,we,ot),K.return=$,K):(K=b(K,le),K.return=$,K)}function Ne($,K,le){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=tf(""+K,$.mode,le),K.return=$,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case U:return le=Ou(K.type,K.key,K.props,null,$.mode,le),rc(le,K),le.return=$,le;case X:return K=nf(K,$.mode,le),K.return=$,K;case J:return K=$a(K),Ne($,K,le)}if(Y(K)||se(K))return K=Xa(K,$.mode,le,null),K.return=$,K;if(typeof K.then=="function")return Ne($,zu(K),le);if(K.$$typeof===W)return Ne($,ku($,K),le);Fu($,K)}return null}function he($,K,le,we){var ot=K!==null?K.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return ot!==null?null:O($,K,""+le,we);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case U:return le.key===ot?F($,K,le,we):null;case X:return le.key===ot?oe($,K,le,we):null;case J:return le=$a(le),he($,K,le,we)}if(Y(le)||se(le))return ot!==null?null:ve($,K,le,we,null);if(typeof le.then=="function")return he($,K,zu(le),we);if(le.$$typeof===W)return he($,K,ku($,le),we);Fu($,le)}return null}function pe($,K,le,we,ot){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return $=$.get(le)||null,O(K,$,""+we,ot);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case U:return $=$.get(we.key===null?le:we.key)||null,F(K,$,we,ot);case X:return $=$.get(we.key===null?le:we.key)||null,oe(K,$,we,ot);case J:return we=$a(we),pe($,K,le,we,ot)}if(Y(we)||se(we))return $=$.get(le)||null,ve(K,$,we,ot,null);if(typeof we.then=="function")return pe($,K,le,zu(we),ot);if(we.$$typeof===W)return pe($,K,le,ku(K,we),ot);Fu(K,we)}return null}function qe($,K,le,we){for(var ot=null,Wt=null,$e=K,St=K=0,Pt=null;$e!==null&&St<le.length;St++){$e.index>St?(Pt=$e,$e=null):Pt=$e.sibling;var Xt=he($,$e,le[St],we);if(Xt===null){$e===null&&($e=Pt);break}t&&$e&&Xt.alternate===null&&i($,$e),K=w(Xt,K,St),Wt===null?ot=Xt:Wt.sibling=Xt,Wt=Xt,$e=Pt}if(St===le.length)return c($,$e),Ut&&ur($,St),ot;if($e===null){for(;St<le.length;St++)$e=Ne($,le[St],we),$e!==null&&(K=w($e,K,St),Wt===null?ot=$e:Wt.sibling=$e,Wt=$e);return Ut&&ur($,St),ot}for($e=m($e);St<le.length;St++)Pt=pe($e,$,St,le[St],we),Pt!==null&&(t&&Pt.alternate!==null&&$e.delete(Pt.key===null?St:Pt.key),K=w(Pt,K,St),Wt===null?ot=Pt:Wt.sibling=Pt,Wt=Pt);return t&&$e.forEach(function(pa){return i($,pa)}),Ut&&ur($,St),ot}function dt($,K,le,we){if(le==null)throw Error(l(151));for(var ot=null,Wt=null,$e=K,St=K=0,Pt=null,Xt=le.next();$e!==null&&!Xt.done;St++,Xt=le.next()){$e.index>St?(Pt=$e,$e=null):Pt=$e.sibling;var pa=he($,$e,Xt.value,we);if(pa===null){$e===null&&($e=Pt);break}t&&$e&&pa.alternate===null&&i($,$e),K=w(pa,K,St),Wt===null?ot=pa:Wt.sibling=pa,Wt=pa,$e=Pt}if(Xt.done)return c($,$e),Ut&&ur($,St),ot;if($e===null){for(;!Xt.done;St++,Xt=le.next())Xt=Ne($,Xt.value,we),Xt!==null&&(K=w(Xt,K,St),Wt===null?ot=Xt:Wt.sibling=Xt,Wt=Xt);return Ut&&ur($,St),ot}for($e=m($e);!Xt.done;St++,Xt=le.next())Xt=pe($e,$,St,Xt.value,we),Xt!==null&&(t&&Xt.alternate!==null&&$e.delete(Xt.key===null?St:Xt.key),K=w(Xt,K,St),Wt===null?ot=Xt:Wt.sibling=Xt,Wt=Xt);return t&&$e.forEach(function(eE){return i($,eE)}),Ut&&ur($,St),ot}function dn($,K,le,we){if(typeof le=="object"&&le!==null&&le.type===z&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case U:e:{for(var ot=le.key;K!==null;){if(K.key===ot){if(ot=le.type,ot===z){if(K.tag===7){c($,K.sibling),we=b(K,le.props.children),we.return=$,$=we;break e}}else if(K.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===J&&$a(ot)===K.type){c($,K.sibling),we=b(K,le.props),rc(we,le),we.return=$,$=we;break e}c($,K);break}else i($,K);K=K.sibling}le.type===z?(we=Xa(le.props.children,$.mode,we,le.key),we.return=$,$=we):(we=Ou(le.type,le.key,le.props,null,$.mode,we),rc(we,le),we.return=$,$=we)}return _($);case X:e:{for(ot=le.key;K!==null;){if(K.key===ot)if(K.tag===4&&K.stateNode.containerInfo===le.containerInfo&&K.stateNode.implementation===le.implementation){c($,K.sibling),we=b(K,le.children||[]),we.return=$,$=we;break e}else{c($,K);break}else i($,K);K=K.sibling}we=nf(le,$.mode,we),we.return=$,$=we}return _($);case J:return le=$a(le),dn($,K,le,we)}if(Y(le))return qe($,K,le,we);if(se(le)){if(ot=se(le),typeof ot!="function")throw Error(l(150));return le=ot.call(le),dt($,K,le,we)}if(typeof le.then=="function")return dn($,K,zu(le),we);if(le.$$typeof===W)return dn($,K,ku($,le),we);Fu($,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,K!==null&&K.tag===6?(c($,K.sibling),we=b(K,le),we.return=$,$=we):(c($,K),we=tf(le,$.mode,we),we.return=$,$=we),_($)):c($,K)}return function($,K,le,we){try{ic=0;var ot=dn($,K,le,we);return Yl=null,ot}catch($e){if($e===Gl||$e===Pu)throw $e;var Wt=Hs(29,$e,null,$.mode);return Wt.lanes=we,Wt.return=$,Wt}}}var tl=mg(!0),gg=mg(!1),ea=!1;function gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ta(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function na(t,i,c){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(Kt&2)!==0){var b=m.pending;return b===null?i.next=i:(i.next=b.next,b.next=i),m.pending=i,i=Du(t),J1(t,null,c),i}return Mu(t,m,i,c),Du(t)}function ac(t,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var m=i.lanes;m&=t.pendingLanes,c|=m,i.lanes=c,Bi(t,c)}}function pf(t,i){var c=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var b=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?b=w=_:w=w.next=_,c=c.next}while(c!==null);w===null?b=w=i:w=w.next=i}else b=w=i;c={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=i:t.next=i,c.lastBaseUpdate=i}var bf=!1;function lc(){if(bf){var t=Vl;if(t!==null)throw t}}function oc(t,i,c,m){bf=!1;var b=t.updateQueue;ea=!1;var w=b.firstBaseUpdate,_=b.lastBaseUpdate,O=b.shared.pending;if(O!==null){b.shared.pending=null;var F=O,oe=F.next;F.next=null,_===null?w=oe:_.next=oe,_=F;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,O=ve.lastBaseUpdate,O!==_&&(O===null?ve.firstBaseUpdate=oe:O.next=oe,ve.lastBaseUpdate=F))}if(w!==null){var Ne=b.baseState;_=0,ve=oe=F=null,O=w;do{var he=O.lane&-536870913,pe=he!==O.lane;if(pe?(Bt&he)===he:(m&he)===he){he!==0&&he===Hl&&(bf=!0),ve!==null&&(ve=ve.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var qe=t,dt=O;he=i;var dn=c;switch(dt.tag){case 1:if(qe=dt.payload,typeof qe=="function"){Ne=qe.call(dn,Ne,he);break e}Ne=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=dt.payload,he=typeof qe=="function"?qe.call(dn,Ne,he):qe,he==null)break e;Ne=T({},Ne,he);break e;case 2:ea=!0}}he=O.callback,he!==null&&(t.flags|=64,pe&&(t.flags|=8192),pe=b.callbacks,pe===null?b.callbacks=[he]:pe.push(he))}else pe={lane:he,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ve===null?(oe=ve=pe,F=Ne):ve=ve.next=pe,_|=he;if(O=O.next,O===null){if(O=b.shared.pending,O===null)break;pe=O,O=pe.next,pe.next=null,b.lastBaseUpdate=pe,b.shared.pending=null}}while(!0);ve===null&&(F=Ne),b.baseState=F,b.firstBaseUpdate=oe,b.lastBaseUpdate=ve,w===null&&(b.shared.lanes=0),la|=_,t.lanes=_,t.memoizedState=Ne}}function xg(t,i){if(typeof t!="function")throw Error(l(191,t));t.call(i)}function pg(t,i){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)xg(c[t],i)}var ql=ht(null),Hu=ht(0);function bg(t,i){t=wr,Be(Hu,t),Be(ql,i),wr=t|i.baseLanes}function yf(){Be(Hu,wr),Be(ql,ql.current)}function vf(){wr=Hu.current,ze(ql),ze(Hu)}var Vs=ht(null),ci=null;function sa(t){var i=t.alternate;Be(Un,Un.current&1),Be(Vs,t),ci===null&&(i===null||ql.current!==null||i.memoizedState!==null)&&(ci=t)}function wf(t){Be(Un,Un.current),Be(Vs,t),ci===null&&(ci=t)}function yg(t){t.tag===22?(Be(Un,Un.current),Be(Vs,t),ci===null&&(ci=t)):ia()}function ia(){Be(Un,Un.current),Be(Vs,Vs.current)}function Gs(t){ze(Vs),ci===t&&(ci=null),ze(Un)}var Un=ht(0);function Vu(t){for(var i=t;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||_0(c)||T0(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fr=0,Ct=null,cn=null,Yn=null,Gu=!1,Wl=!1,nl=!1,Yu=0,cc=0,Xl=null,GN=0;function On(){throw Error(l(321))}function Nf(t,i){if(i===null)return!1;for(var c=0;c<i.length&&c<t.length;c++)if(!x(t[c],i[c]))return!1;return!0}function Cf(t,i,c,m,b,w){return fr=w,Ct=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=t===null||t.memoizedState===null?nx:Pf,nl=!1,w=c(m,b),nl=!1,Wl&&(w=wg(i,c,m,b)),vg(t),w}function vg(t){V.H=hc;var i=cn!==null&&cn.next!==null;if(fr=0,Yn=cn=Ct=null,Gu=!1,cc=0,Xl=null,i)throw Error(l(300));t===null||qn||(t=t.dependencies,t!==null&&Lu(t)&&(qn=!0))}function wg(t,i,c,m){Ct=t;var b=0;do{if(Wl&&(Xl=null),cc=0,Wl=!1,25<=b)throw Error(l(301));if(b+=1,Yn=cn=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}V.H=sx,w=i(c,m)}while(Wl);return w}function YN(){var t=V.H,i=t.useState()[0];return i=typeof i.then=="function"?uc(i):i,t=t.useState()[0],(cn!==null?cn.memoizedState:null)!==t&&(Ct.flags|=1024),i}function Ef(){var t=Yu!==0;return Yu=0,t}function Af(t,i,c){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~c}function Sf(t){if(Gu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Gu=!1}fr=0,Yn=cn=Ct=null,Wl=!1,cc=Yu=0,Xl=null}function Ns(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?Ct.memoizedState=Yn=t:Yn=Yn.next=t,Yn}function zn(){if(cn===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var i=Yn===null?Ct.memoizedState:Yn.next;if(i!==null)Yn=i,cn=t;else{if(t===null)throw Ct.alternate===null?Error(l(467)):Error(l(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},Yn===null?Ct.memoizedState=Yn=t:Yn=Yn.next=t}return Yn}function qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(t){var i=cc;return cc+=1,Xl===null&&(Xl=[]),t=dg(Xl,t,i),i=Ct,(Yn===null?i.memoizedState:Yn.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?nx:Pf),t}function Wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return uc(t);if(t.$$typeof===W)return os(t)}throw Error(l(438,String(t)))}function _f(t){var i=null,c=Ct.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var m=Ct.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(b){return b.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=qu(),Ct.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(t),m=0;m<t;m++)c[m]=Ce;return i.index++,c}function mr(t,i){return typeof i=="function"?i(t):i}function Xu(t){var i=zn();return Tf(i,cn,t)}function Tf(t,i,c){var m=t.queue;if(m===null)throw Error(l(311));m.lastRenderedReducer=c;var b=t.baseQueue,w=m.pending;if(w!==null){if(b!==null){var _=b.next;b.next=w.next,w.next=_}i.baseQueue=b=w,m.pending=null}if(w=t.baseState,b===null)t.memoizedState=w;else{i=b.next;var O=_=null,F=null,oe=i,ve=!1;do{var Ne=oe.lane&-536870913;if(Ne!==oe.lane?(Bt&Ne)===Ne:(fr&Ne)===Ne){var he=oe.revertLane;if(he===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Ne===Hl&&(ve=!0);else if((fr&he)===he){oe=oe.next,he===Hl&&(ve=!0);continue}else Ne={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},F===null?(O=F=Ne,_=w):F=F.next=Ne,Ct.lanes|=he,la|=he;Ne=oe.action,nl&&c(w,Ne),w=oe.hasEagerState?oe.eagerState:c(w,Ne)}else he={lane:Ne,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},F===null?(O=F=he,_=w):F=F.next=he,Ct.lanes|=Ne,la|=Ne;oe=oe.next}while(oe!==null&&oe!==i);if(F===null?_=w:F.next=O,!x(w,t.memoizedState)&&(qn=!0,ve&&(c=Vl,c!==null)))throw c;t.memoizedState=w,t.baseState=_,t.baseQueue=F,m.lastRenderedState=w}return b===null&&(m.lanes=0),[t.memoizedState,m.dispatch]}function If(t){var i=zn(),c=i.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=t;var m=c.dispatch,b=c.pending,w=i.memoizedState;if(b!==null){c.pending=null;var _=b=b.next;do w=t(w,_.action),_=_.next;while(_!==b);x(w,i.memoizedState)||(qn=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,m]}function Ng(t,i,c){var m=Ct,b=zn(),w=Ut;if(w){if(c===void 0)throw Error(l(407));c=c()}else c=i();var _=!x((cn||b).memoizedState,c);if(_&&(b.memoizedState=c,qn=!0),b=b.queue,Df(Ag.bind(null,m,b,t),[t]),b.getSnapshot!==i||_||Yn!==null&&Yn.memoizedState.tag&1){if(m.flags|=2048,Ql(9,{destroy:void 0},Eg.bind(null,m,b,c,i),null),xn===null)throw Error(l(349));w||(fr&127)!==0||Cg(m,i,c)}return c}function Cg(t,i,c){t.flags|=16384,t={getSnapshot:i,value:c},i=Ct.updateQueue,i===null?(i=qu(),Ct.updateQueue=i,i.stores=[t]):(c=i.stores,c===null?i.stores=[t]:c.push(t))}function Eg(t,i,c,m){i.value=c,i.getSnapshot=m,Sg(i)&&_g(t)}function Ag(t,i,c){return c(function(){Sg(i)&&_g(t)})}function Sg(t){var i=t.getSnapshot;t=t.value;try{var c=i();return!x(t,c)}catch{return!0}}function _g(t){var i=Wa(t,2);i!==null&&Ds(i,t,2)}function Rf(t){var i=Ns();if(typeof t=="function"){var c=t;if(t=c(),nl){Jt(!0);try{c()}finally{Jt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:t},i}function Tg(t,i,c,m){return t.baseState=c,Tf(t,cn,typeof m=="function"?m:mr)}function qN(t,i,c,m,b){if(Ku(t))throw Error(l(485));if(t=i.action,t!==null){var w={payload:b,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){w.listeners.push(_)}};V.T!==null?c(!0):w.isTransition=!1,m(w),c=i.pending,c===null?(w.next=i.pending=w,Ig(i,w)):(w.next=c.next,i.pending=c.next=w)}}function Ig(t,i){var c=i.action,m=i.payload,b=t.state;if(i.isTransition){var w=V.T,_={};V.T=_;try{var O=c(b,m),F=V.S;F!==null&&F(_,O),Rg(t,i,O)}catch(oe){Mf(t,i,oe)}finally{w!==null&&_.types!==null&&(w.types=_.types),V.T=w}}else try{w=c(b,m),Rg(t,i,w)}catch(oe){Mf(t,i,oe)}}function Rg(t,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){Mg(t,i,m)},function(m){return Mf(t,i,m)}):Mg(t,i,c)}function Mg(t,i,c){i.status="fulfilled",i.value=c,Dg(i),t.state=c,i=t.pending,i!==null&&(c=i.next,c===i?t.pending=null:(c=c.next,i.next=c,Ig(t,c)))}function Mf(t,i,c){var m=t.pending;if(t.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=c,Dg(i),i=i.next;while(i!==m)}t.action=null}function Dg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Og(t,i){return i}function jg(t,i){if(Ut){var c=xn.formState;if(c!==null){e:{var m=Ct;if(Ut){if(vn){t:{for(var b=vn,w=oi;b.nodeType!==8;){if(!w){b=null;break t}if(b=ui(b.nextSibling),b===null){b=null;break t}}w=b.data,b=w==="F!"||w==="F"?b:null}if(b){vn=ui(b.nextSibling),m=b.data==="F!";break e}}Jr(m)}m=!1}m&&(i=c[0])}}return c=Ns(),c.memoizedState=c.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:i},c.queue=m,c=$g.bind(null,Ct,m),m.dispatch=c,m=Rf(!1),w=Bf.bind(null,Ct,!1,m.queue),m=Ns(),b={state:i,dispatch:null,action:t,pending:null},m.queue=b,c=qN.bind(null,Ct,b,w,c),b.dispatch=c,m.memoizedState=t,[i,c,!1]}function Lg(t){var i=zn();return kg(i,cn,t)}function kg(t,i,c){if(i=Tf(t,i,Og)[0],t=Xu(mr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=uc(i)}catch(_){throw _===Gl?Pu:_}else m=i;i=zn();var b=i.queue,w=b.dispatch;return c!==i.memoizedState&&(Ct.flags|=2048,Ql(9,{destroy:void 0},WN.bind(null,b,c),null)),[m,w,t]}function WN(t,i){t.action=i}function Bg(t){var i=zn(),c=cn;if(c!==null)return kg(i,c,t);zn(),i=i.memoizedState,c=zn();var m=c.queue.dispatch;return c.memoizedState=t,[i,m,!1]}function Ql(t,i,c,m){return t={tag:t,create:c,deps:m,inst:i,next:null},i=Ct.updateQueue,i===null&&(i=qu(),Ct.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=t.next=t:(m=c.next,c.next=t,t.next=m,i.lastEffect=t),t}function Pg(){return zn().memoizedState}function Qu(t,i,c,m){var b=Ns();Ct.flags|=t,b.memoizedState=Ql(1|i,{destroy:void 0},c,m===void 0?null:m)}function Zu(t,i,c,m){var b=zn();m=m===void 0?null:m;var w=b.memoizedState.inst;cn!==null&&m!==null&&Nf(m,cn.memoizedState.deps)?b.memoizedState=Ql(i,w,c,m):(Ct.flags|=t,b.memoizedState=Ql(1|i,w,c,m))}function Ug(t,i){Qu(8390656,8,t,i)}function Df(t,i){Zu(2048,8,t,i)}function XN(t){Ct.flags|=4;var i=Ct.updateQueue;if(i===null)i=qu(),Ct.updateQueue=i,i.events=[t];else{var c=i.events;c===null?i.events=[t]:c.push(t)}}function zg(t){var i=zn().memoizedState;return XN({ref:i,nextImpl:t}),function(){if((Kt&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}function Fg(t,i){return Zu(4,2,t,i)}function Hg(t,i){return Zu(4,4,t,i)}function Vg(t,i){if(typeof i=="function"){t=t();var c=i(t);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Gg(t,i,c){c=c!=null?c.concat([t]):null,Zu(4,4,Vg.bind(null,i,t),c)}function Of(){}function Yg(t,i){var c=zn();i=i===void 0?null:i;var m=c.memoizedState;return i!==null&&Nf(i,m[1])?m[0]:(c.memoizedState=[t,i],t)}function qg(t,i){var c=zn();i=i===void 0?null:i;var m=c.memoizedState;if(i!==null&&Nf(i,m[1]))return m[0];if(m=t(),nl){Jt(!0);try{t()}finally{Jt(!1)}}return c.memoizedState=[m,i],m}function jf(t,i,c){return c===void 0||(fr&1073741824)!==0&&(Bt&261930)===0?t.memoizedState=i:(t.memoizedState=c,t=Wx(),Ct.lanes|=t,la|=t,c)}function Wg(t,i,c,m){return x(c,i)?c:ql.current!==null?(t=jf(t,c,m),x(t,i)||(qn=!0),t):(fr&42)===0||(fr&1073741824)!==0&&(Bt&261930)===0?(qn=!0,t.memoizedState=c):(t=Wx(),Ct.lanes|=t,la|=t,i)}function Xg(t,i,c,m,b){var w=ue.p;ue.p=w!==0&&8>w?w:8;var _=V.T,O={};V.T=O,Bf(t,!1,i,c);try{var F=b(),oe=V.S;if(oe!==null&&oe(O,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ve=VN(F,m);dc(t,i,ve,Ws(t))}else dc(t,i,m,Ws(t))}catch(Ne){dc(t,i,{then:function(){},status:"rejected",reason:Ne},Ws())}finally{ue.p=w,_!==null&&O.types!==null&&(_.types=O.types),V.T=_}}function QN(){}function Lf(t,i,c,m){if(t.tag!==5)throw Error(l(476));var b=Qg(t).queue;Xg(t,b,i,ye,c===null?QN:function(){return Zg(t),c(m)})}function Qg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:ye},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:c},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Zg(t){var i=Qg(t);i.next===null&&(i=t.alternate.memoizedState),dc(t,i.next.queue,{},Ws())}function kf(){return os(Tc)}function Kg(){return zn().memoizedState}function Jg(){return zn().memoizedState}function ZN(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var c=Ws();t=ta(c);var m=na(i,t,c);m!==null&&(Ds(m,i,c),ac(m,i,c)),i={cache:df()},t.payload=i;return}i=i.return}}function KN(t,i,c){var m=Ws();c={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(t)?ex(i,c):(c=$h(t,i,c,m),c!==null&&(Ds(c,t,m),tx(c,i,m)))}function $g(t,i,c){var m=Ws();dc(t,i,c,m)}function dc(t,i,c,m){var b={lane:m,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(t))ex(i,b);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var _=i.lastRenderedState,O=w(_,c);if(b.hasEagerState=!0,b.eagerState=O,x(O,_))return Mu(t,i,b,0),xn===null&&Ru(),!1}catch{}if(c=$h(t,i,b,m),c!==null)return Ds(c,t,m),tx(c,i,m),!0}return!1}function Bf(t,i,c,m){if(m={lane:2,revertLane:g0(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Ku(t)){if(i)throw Error(l(479))}else i=$h(t,c,m,2),i!==null&&Ds(i,t,2)}function Ku(t){var i=t.alternate;return t===Ct||i!==null&&i===Ct}function ex(t,i){Wl=Gu=!0;var c=t.pending;c===null?i.next=i:(i.next=c.next,c.next=i),t.pending=i}function tx(t,i,c){if((c&4194048)!==0){var m=i.lanes;m&=t.pendingLanes,c|=m,i.lanes=c,Bi(t,c)}}var hc={readContext:os,use:Wu,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useLayoutEffect:On,useInsertionEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useSyncExternalStore:On,useId:On,useHostTransitionStatus:On,useFormState:On,useActionState:On,useOptimistic:On,useMemoCache:On,useCacheRefresh:On};hc.useEffectEvent=On;var nx={readContext:os,use:Wu,useCallback:function(t,i){return Ns().memoizedState=[t,i===void 0?null:i],t},useContext:os,useEffect:Ug,useImperativeHandle:function(t,i,c){c=c!=null?c.concat([t]):null,Qu(4194308,4,Vg.bind(null,i,t),c)},useLayoutEffect:function(t,i){return Qu(4194308,4,t,i)},useInsertionEffect:function(t,i){Qu(4,2,t,i)},useMemo:function(t,i){var c=Ns();i=i===void 0?null:i;var m=t();if(nl){Jt(!0);try{t()}finally{Jt(!1)}}return c.memoizedState=[m,i],m},useReducer:function(t,i,c){var m=Ns();if(c!==void 0){var b=c(i);if(nl){Jt(!0);try{c(i)}finally{Jt(!1)}}}else b=i;return m.memoizedState=m.baseState=b,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:b},m.queue=t,t=t.dispatch=KN.bind(null,Ct,t),[m.memoizedState,t]},useRef:function(t){var i=Ns();return t={current:t},i.memoizedState=t},useState:function(t){t=Rf(t);var i=t.queue,c=$g.bind(null,Ct,i);return i.dispatch=c,[t.memoizedState,c]},useDebugValue:Of,useDeferredValue:function(t,i){var c=Ns();return jf(c,t,i)},useTransition:function(){var t=Rf(!1);return t=Xg.bind(null,Ct,t.queue,!0,!1),Ns().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,c){var m=Ct,b=Ns();if(Ut){if(c===void 0)throw Error(l(407));c=c()}else{if(c=i(),xn===null)throw Error(l(349));(Bt&127)!==0||Cg(m,i,c)}b.memoizedState=c;var w={value:c,getSnapshot:i};return b.queue=w,Ug(Ag.bind(null,m,w,t),[t]),m.flags|=2048,Ql(9,{destroy:void 0},Eg.bind(null,m,w,c,i),null),c},useId:function(){var t=Ns(),i=xn.identifierPrefix;if(Ut){var c=Vi,m=Hi;c=(m&~(1<<32-yt(m)-1)).toString(32)+c,i="_"+i+"R_"+c,c=Yu++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=GN++,i="_"+i+"r_"+c.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:kf,useFormState:jg,useActionState:jg,useOptimistic:function(t){var i=Ns();i.memoizedState=i.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Bf.bind(null,Ct,!0,c),c.dispatch=i,[t,i]},useMemoCache:_f,useCacheRefresh:function(){return Ns().memoizedState=ZN.bind(null,Ct)},useEffectEvent:function(t){var i=Ns(),c={impl:t};return i.memoizedState=c,function(){if((Kt&2)!==0)throw Error(l(440));return c.impl.apply(void 0,arguments)}}},Pf={readContext:os,use:Wu,useCallback:Yg,useContext:os,useEffect:Df,useImperativeHandle:Gg,useInsertionEffect:Fg,useLayoutEffect:Hg,useMemo:qg,useReducer:Xu,useRef:Pg,useState:function(){return Xu(mr)},useDebugValue:Of,useDeferredValue:function(t,i){var c=zn();return Wg(c,cn.memoizedState,t,i)},useTransition:function(){var t=Xu(mr)[0],i=zn().memoizedState;return[typeof t=="boolean"?t:uc(t),i]},useSyncExternalStore:Ng,useId:Kg,useHostTransitionStatus:kf,useFormState:Lg,useActionState:Lg,useOptimistic:function(t,i){var c=zn();return Tg(c,cn,t,i)},useMemoCache:_f,useCacheRefresh:Jg};Pf.useEffectEvent=zg;var sx={readContext:os,use:Wu,useCallback:Yg,useContext:os,useEffect:Df,useImperativeHandle:Gg,useInsertionEffect:Fg,useLayoutEffect:Hg,useMemo:qg,useReducer:If,useRef:Pg,useState:function(){return If(mr)},useDebugValue:Of,useDeferredValue:function(t,i){var c=zn();return cn===null?jf(c,t,i):Wg(c,cn.memoizedState,t,i)},useTransition:function(){var t=If(mr)[0],i=zn().memoizedState;return[typeof t=="boolean"?t:uc(t),i]},useSyncExternalStore:Ng,useId:Kg,useHostTransitionStatus:kf,useFormState:Bg,useActionState:Bg,useOptimistic:function(t,i){var c=zn();return cn!==null?Tg(c,cn,t,i):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:_f,useCacheRefresh:Jg};sx.useEffectEvent=zg;function Uf(t,i,c,m){i=t.memoizedState,c=c(m,i),c=c==null?i:T({},i,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var zf={enqueueSetState:function(t,i,c){t=t._reactInternals;var m=Ws(),b=ta(m);b.payload=i,c!=null&&(b.callback=c),i=na(t,b,m),i!==null&&(Ds(i,t,m),ac(i,t,m))},enqueueReplaceState:function(t,i,c){t=t._reactInternals;var m=Ws(),b=ta(m);b.tag=1,b.payload=i,c!=null&&(b.callback=c),i=na(t,b,m),i!==null&&(Ds(i,t,m),ac(i,t,m))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var c=Ws(),m=ta(c);m.tag=2,i!=null&&(m.callback=i),i=na(t,m,c),i!==null&&(Ds(i,t,c),ac(i,t,c))}};function ix(t,i,c,m,b,w,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,w,_):i.prototype&&i.prototype.isPureReactComponent?!p(c,m)||!p(b,w):!0}function rx(t,i,c,m){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==t&&zf.enqueueReplaceState(i,i.state,null)}function sl(t,i){var c=i;if("ref"in i){c={};for(var m in i)m!=="ref"&&(c[m]=i[m])}if(t=t.defaultProps){c===i&&(c=T({},c));for(var b in t)c[b]===void 0&&(c[b]=t[b])}return c}function ax(t){Iu(t)}function lx(t){console.error(t)}function ox(t){Iu(t)}function Ju(t,i){try{var c=t.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function cx(t,i,c){try{var m=t.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Ff(t,i,c){return c=ta(c),c.tag=3,c.payload={element:null},c.callback=function(){Ju(t,i)},c}function ux(t){return t=ta(t),t.tag=3,t}function dx(t,i,c,m){var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var w=m.value;t.payload=function(){return b(w)},t.callback=function(){cx(i,c,m)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){cx(i,c,m),typeof b!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function JN(t,i,c,m,b){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=c.alternate,i!==null&&Fl(i,c,b,!0),c=Vs.current,c!==null){switch(c.tag){case 31:case 13:return ci===null?ud():c.alternate===null&&jn===0&&(jn=3),c.flags&=-257,c.flags|=65536,c.lanes=b,m===Uu?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([m]):i.add(m),h0(t,m,b)),!1;case 22:return c.flags|=65536,m===Uu?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([m]):c.add(m)),h0(t,m,b)),!1}throw Error(l(435,c.tag))}return h0(t,m,b),ud(),!1}if(Ut)return i=Vs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=b,m!==af&&(t=Error(l(422),{cause:m}),tc(ri(t,c)))):(m!==af&&(i=Error(l(423),{cause:m}),tc(ri(i,c))),t=t.current.alternate,t.flags|=65536,b&=-b,t.lanes|=b,m=ri(m,c),b=Ff(t.stateNode,m,b),pf(t,b),jn!==4&&(jn=2)),!1;var w=Error(l(520),{cause:m});if(w=ri(w,c),vc===null?vc=[w]:vc.push(w),jn!==4&&(jn=2),i===null)return!0;m=ri(m,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,t=b&-b,c.lanes|=t,t=Ff(c.stateNode,m,t),pf(c,t),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oa===null||!oa.has(w))))return c.flags|=65536,b&=-b,c.lanes|=b,b=ux(b),dx(b,t,c,m),pf(c,b),!1}c=c.return}while(c!==null);return!1}var Hf=Error(l(461)),qn=!1;function cs(t,i,c,m){i.child=t===null?gg(i,null,c,m):tl(i,t.child,c,m)}function hx(t,i,c,m,b){c=c.render;var w=i.ref;if("ref"in m){var _={};for(var O in m)O!=="ref"&&(_[O]=m[O])}else _=m;return Ka(i),m=Cf(t,i,c,_,w,b),O=Ef(),t!==null&&!qn?(Af(t,i,b),gr(t,i,b)):(Ut&&O&&sf(i),i.flags|=1,cs(t,i,m,b),i.child)}function fx(t,i,c,m,b){if(t===null){var w=c.type;return typeof w=="function"&&!ef(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,mx(t,i,w,m,b)):(t=Ou(c.type,null,m,i,i.mode,b),t.ref=i.ref,t.return=i,i.child=t)}if(w=t.child,!Zf(t,b)){var _=w.memoizedProps;if(c=c.compare,c=c!==null?c:p,c(_,m)&&t.ref===i.ref)return gr(t,i,b)}return i.flags|=1,t=cr(w,m),t.ref=i.ref,t.return=i,i.child=t}function mx(t,i,c,m,b){if(t!==null){var w=t.memoizedProps;if(p(w,m)&&t.ref===i.ref)if(qn=!1,i.pendingProps=m=w,Zf(t,b))(t.flags&131072)!==0&&(qn=!0);else return i.lanes=t.lanes,gr(t,i,b)}return Vf(t,i,c,m,b)}function gx(t,i,c,m){var b=m.children,w=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(m=i.child=t.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~w}else m=0,i.child=null;return xx(t,i,w,c,m)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Bu(i,w!==null?w.cachePool:null),w!==null?bg(i,w):yf(),yg(i);else return m=i.lanes=536870912,xx(t,i,w!==null?w.baseLanes|c:c,c,m)}else w!==null?(Bu(i,w.cachePool),bg(i,w),ia(),i.memoizedState=null):(t!==null&&Bu(i,null),yf(),ia());return cs(t,i,b,c),i.child}function fc(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function xx(t,i,c,m,b){var w=ff();return w=w===null?null:{parent:Gn._currentValue,pool:w},i.memoizedState={baseLanes:c,cachePool:w},t!==null&&Bu(i,null),yf(),yg(i),t!==null&&Fl(t,i,m,!0),i.childLanes=b,null}function $u(t,i){return i=td({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function px(t,i,c){return tl(i,t.child,null,c),t=$u(i,i.pendingProps),t.flags|=2,Gs(i),i.memoizedState=null,t}function $N(t,i,c){var m=i.pendingProps,b=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ut){if(m.mode==="hidden")return t=$u(i,m),i.lanes=536870912,fc(null,t);if(wf(i),(t=vn)?(t=Ip(t,oi),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Zr!==null?{id:Hi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},c=eg(t),c.return=i,i.child=c,ls=i,vn=null)):t=null,t===null)throw Jr(i);return i.lanes=536870912,null}return $u(i,m)}var w=t.memoizedState;if(w!==null){var _=w.dehydrated;if(wf(i),b)if(i.flags&256)i.flags&=-257,i=px(t,i,c);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(l(558));else if(qn||Fl(t,i,c,!1),b=(c&t.childLanes)!==0,qn||b){if(m=xn,m!==null&&(_=Al(m,c),_!==0&&_!==w.retryLane))throw w.retryLane=_,Wa(t,_),Ds(m,t,_),Hf;ud(),i=px(t,i,c)}else t=w.treeContext,vn=ui(_.nextSibling),ls=i,Ut=!0,Kr=null,oi=!1,t!==null&&sg(i,t),i=$u(i,m),i.flags|=4096;return i}return t=cr(t.child,{mode:m.mode,children:m.children}),t.ref=i.ref,i.child=t,t.return=i,t}function ed(t,i){var c=i.ref;if(c===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(l(284));(t===null||t.ref!==c)&&(i.flags|=4194816)}}function Vf(t,i,c,m,b){return Ka(i),c=Cf(t,i,c,m,void 0,b),m=Ef(),t!==null&&!qn?(Af(t,i,b),gr(t,i,b)):(Ut&&m&&sf(i),i.flags|=1,cs(t,i,c,b),i.child)}function bx(t,i,c,m,b,w){return Ka(i),i.updateQueue=null,c=wg(i,m,c,b),vg(t),m=Ef(),t!==null&&!qn?(Af(t,i,w),gr(t,i,w)):(Ut&&m&&sf(i),i.flags|=1,cs(t,i,c,w),i.child)}function yx(t,i,c,m,b){if(Ka(i),i.stateNode===null){var w=Bl,_=c.contextType;typeof _=="object"&&_!==null&&(w=os(_)),w=new c(m,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=zf,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=m,w.state=i.memoizedState,w.refs={},gf(i),_=c.contextType,w.context=typeof _=="object"&&_!==null?os(_):Bl,w.state=i.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Uf(i,c,_,m),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(_=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),_!==w.state&&zf.enqueueReplaceState(w,w.state,null),oc(i,m,w,b),lc(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(t===null){w=i.stateNode;var O=i.memoizedProps,F=sl(c,O);w.props=F;var oe=w.context,ve=c.contextType;_=Bl,typeof ve=="object"&&ve!==null&&(_=os(ve));var Ne=c.getDerivedStateFromProps;ve=typeof Ne=="function"||typeof w.getSnapshotBeforeUpdate=="function",O=i.pendingProps!==O,ve||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O||oe!==_)&&rx(i,w,m,_),ea=!1;var he=i.memoizedState;w.state=he,oc(i,m,w,b),lc(),oe=i.memoizedState,O||he!==oe||ea?(typeof Ne=="function"&&(Uf(i,c,Ne,m),oe=i.memoizedState),(F=ea||ix(i,c,F,m,he,oe,_))?(ve||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=oe),w.props=m,w.state=oe,w.context=_,m=F):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{w=i.stateNode,xf(t,i),_=i.memoizedProps,ve=sl(c,_),w.props=ve,Ne=i.pendingProps,he=w.context,oe=c.contextType,F=Bl,typeof oe=="object"&&oe!==null&&(F=os(oe)),O=c.getDerivedStateFromProps,(oe=typeof O=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(_!==Ne||he!==F)&&rx(i,w,m,F),ea=!1,he=i.memoizedState,w.state=he,oc(i,m,w,b),lc();var pe=i.memoizedState;_!==Ne||he!==pe||ea||t!==null&&t.dependencies!==null&&Lu(t.dependencies)?(typeof O=="function"&&(Uf(i,c,O,m),pe=i.memoizedState),(ve=ea||ix(i,c,ve,m,he,pe,F)||t!==null&&t.dependencies!==null&&Lu(t.dependencies))?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,pe,F),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,pe,F)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||_===t.memoizedProps&&he===t.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&he===t.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=pe),w.props=m,w.state=pe,w.context=F,m=ve):(typeof w.componentDidUpdate!="function"||_===t.memoizedProps&&he===t.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&he===t.memoizedState||(i.flags|=1024),m=!1)}return w=m,ed(t,i),m=(i.flags&128)!==0,w||m?(w=i.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,t!==null&&m?(i.child=tl(i,t.child,null,b),i.child=tl(i,null,c,b)):cs(t,i,c,b),i.memoizedState=w.state,t=i.child):t=gr(t,i,b),t}function vx(t,i,c,m){return Qa(),i.flags|=256,cs(t,i,c,m),i.child}var Gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(t){return{baseLanes:t,cachePool:cg()}}function qf(t,i,c){return t=t!==null?t.childLanes&~c:0,i&&(t|=qs),t}function wx(t,i,c){var m=i.pendingProps,b=!1,w=(i.flags&128)!==0,_;if((_=w)||(_=t!==null&&t.memoizedState===null?!1:(Un.current&2)!==0),_&&(b=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ut){if(b?sa(i):ia(),(t=vn)?(t=Ip(t,oi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Zr!==null?{id:Hi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},c=eg(t),c.return=i,i.child=c,ls=i,vn=null)):t=null,t===null)throw Jr(i);return T0(t)?i.lanes=32:i.lanes=536870912,null}var O=m.children;return m=m.fallback,b?(ia(),b=i.mode,O=td({mode:"hidden",children:O},b),m=Xa(m,b,c,null),O.return=i,m.return=i,O.sibling=m,i.child=O,m=i.child,m.memoizedState=Yf(c),m.childLanes=qf(t,_,c),i.memoizedState=Gf,fc(null,m)):(sa(i),Wf(i,O))}var F=t.memoizedState;if(F!==null&&(O=F.dehydrated,O!==null)){if(w)i.flags&256?(sa(i),i.flags&=-257,i=Xf(t,i,c)):i.memoizedState!==null?(ia(),i.child=t.child,i.flags|=128,i=null):(ia(),O=m.fallback,b=i.mode,m=td({mode:"visible",children:m.children},b),O=Xa(O,b,c,null),O.flags|=2,m.return=i,O.return=i,m.sibling=O,i.child=m,tl(i,t.child,null,c),m=i.child,m.memoizedState=Yf(c),m.childLanes=qf(t,_,c),i.memoizedState=Gf,i=fc(null,m));else if(sa(i),T0(O)){if(_=O.nextSibling&&O.nextSibling.dataset,_)var oe=_.dgst;_=oe,m=Error(l(419)),m.stack="",m.digest=_,tc({value:m,source:null,stack:null}),i=Xf(t,i,c)}else if(qn||Fl(t,i,c,!1),_=(c&t.childLanes)!==0,qn||_){if(_=xn,_!==null&&(m=Al(_,c),m!==0&&m!==F.retryLane))throw F.retryLane=m,Wa(t,m),Ds(_,t,m),Hf;_0(O)||ud(),i=Xf(t,i,c)}else _0(O)?(i.flags|=192,i.child=t.child,i=null):(t=F.treeContext,vn=ui(O.nextSibling),ls=i,Ut=!0,Kr=null,oi=!1,t!==null&&sg(i,t),i=Wf(i,m.children),i.flags|=4096);return i}return b?(ia(),O=m.fallback,b=i.mode,F=t.child,oe=F.sibling,m=cr(F,{mode:"hidden",children:m.children}),m.subtreeFlags=F.subtreeFlags&65011712,oe!==null?O=cr(oe,O):(O=Xa(O,b,c,null),O.flags|=2),O.return=i,m.return=i,m.sibling=O,i.child=m,fc(null,m),m=i.child,O=t.child.memoizedState,O===null?O=Yf(c):(b=O.cachePool,b!==null?(F=Gn._currentValue,b=b.parent!==F?{parent:F,pool:F}:b):b=cg(),O={baseLanes:O.baseLanes|c,cachePool:b}),m.memoizedState=O,m.childLanes=qf(t,_,c),i.memoizedState=Gf,fc(t.child,m)):(sa(i),c=t.child,t=c.sibling,c=cr(c,{mode:"visible",children:m.children}),c.return=i,c.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=c,i.memoizedState=null,c)}function Wf(t,i){return i=td({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function td(t,i){return t=Hs(22,t,null,i),t.lanes=0,t}function Xf(t,i,c){return tl(i,t.child,null,c),t=Wf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Nx(t,i,c){t.lanes|=i;var m=t.alternate;m!==null&&(m.lanes|=i),cf(t.return,i,c)}function Qf(t,i,c,m,b,w){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:b,treeForkCount:w}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=c,_.tailMode=b,_.treeForkCount=w)}function Cx(t,i,c){var m=i.pendingProps,b=m.revealOrder,w=m.tail;m=m.children;var _=Un.current,O=(_&2)!==0;if(O?(_=_&1|2,i.flags|=128):_&=1,Be(Un,_),cs(t,i,m,c),m=Ut?ec:0,!O&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nx(t,c,i);else if(t.tag===19)Nx(t,c,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(b){case"forwards":for(c=i.child,b=null;c!==null;)t=c.alternate,t!==null&&Vu(t)===null&&(b=c),c=c.sibling;c=b,c===null?(b=i.child,i.child=null):(b=c.sibling,c.sibling=null),Qf(i,!1,b,c,w,m);break;case"backwards":case"unstable_legacy-backwards":for(c=null,b=i.child,i.child=null;b!==null;){if(t=b.alternate,t!==null&&Vu(t)===null){i.child=b;break}t=b.sibling,b.sibling=c,c=b,b=t}Qf(i,!0,c,null,w,m);break;case"together":Qf(i,!1,null,null,void 0,m);break;default:i.memoizedState=null}return i.child}function gr(t,i,c){if(t!==null&&(i.dependencies=t.dependencies),la|=i.lanes,(c&i.childLanes)===0)if(t!==null){if(Fl(t,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(l(153));if(i.child!==null){for(t=i.child,c=cr(t,t.pendingProps),i.child=c,c.return=i;t.sibling!==null;)t=t.sibling,c=c.sibling=cr(t,t.pendingProps),c.return=i;c.sibling=null}return i.child}function Zf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Lu(t)))}function eC(t,i,c){switch(i.tag){case 3:rt(i,i.stateNode.containerInfo),$r(i,Gn,t.memoizedState.cache),Qa();break;case 27:case 5:Et(i);break;case 4:rt(i,i.stateNode.containerInfo);break;case 10:$r(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,wf(i),null;break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(sa(i),i.flags|=128,null):(c&i.child.childLanes)!==0?wx(t,i,c):(sa(i),t=gr(t,i,c),t!==null?t.sibling:null);sa(i);break;case 19:var b=(t.flags&128)!==0;if(m=(c&i.childLanes)!==0,m||(Fl(t,i,c,!1),m=(c&i.childLanes)!==0),b){if(m)return Cx(t,i,c);i.flags|=128}if(b=i.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Be(Un,Un.current),m)break;return null;case 22:return i.lanes=0,gx(t,i,c,i.pendingProps);case 24:$r(i,Gn,t.memoizedState.cache)}return gr(t,i,c)}function Ex(t,i,c){if(t!==null)if(t.memoizedProps!==i.pendingProps)qn=!0;else{if(!Zf(t,c)&&(i.flags&128)===0)return qn=!1,eC(t,i,c);qn=(t.flags&131072)!==0}else qn=!1,Ut&&(i.flags&1048576)!==0&&ng(i,ec,i.index);switch(i.lanes=0,i.tag){case 16:e:{var m=i.pendingProps;if(t=$a(i.elementType),i.type=t,typeof t=="function")ef(t)?(m=sl(t,m),i.tag=1,i=yx(null,i,t,m,c)):(i.tag=0,i=Vf(null,i,t,m,c));else{if(t!=null){var b=t.$$typeof;if(b===te){i.tag=11,i=hx(null,i,t,m,c);break e}else if(b===G){i.tag=14,i=fx(null,i,t,m,c);break e}}throw i=Ae(t)||t,Error(l(306,i,""))}}return i;case 0:return Vf(t,i,i.type,i.pendingProps,c);case 1:return m=i.type,b=sl(m,i.pendingProps),yx(t,i,m,b,c);case 3:e:{if(rt(i,i.stateNode.containerInfo),t===null)throw Error(l(387));m=i.pendingProps;var w=i.memoizedState;b=w.element,xf(t,i),oc(i,m,null,c);var _=i.memoizedState;if(m=_.cache,$r(i,Gn,m),m!==w.cache&&uf(i,[Gn],c,!0),lc(),m=_.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=vx(t,i,m,c);break e}else if(m!==b){b=ri(Error(l(424)),i),tc(b),i=vx(t,i,m,c);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,vn=ui(t.firstChild),ls=i,Ut=!0,Kr=null,oi=!0,c=gg(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Qa(),m===b){i=gr(t,i,c);break e}cs(t,i,m,c)}i=i.child}return i;case 26:return ed(t,i),t===null?(c=Lp(i.type,null,i.pendingProps,null))?i.memoizedState=c:Ut||(c=i.type,t=i.pendingProps,m=pd(Le.current).createElement(c),m[kn]=i,m[rn]=t,us(m,c,t),Mn(m),i.stateNode=m):i.memoizedState=Lp(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Et(i),t===null&&Ut&&(m=i.stateNode=Dp(i.type,i.pendingProps,Le.current),ls=i,oi=!0,b=vn,ha(i.type)?(I0=b,vn=ui(m.firstChild)):vn=b),cs(t,i,i.pendingProps.children,c),ed(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ut&&((b=m=vn)&&(m=RC(m,i.type,i.pendingProps,oi),m!==null?(i.stateNode=m,ls=i,vn=ui(m.firstChild),oi=!1,b=!0):b=!1),b||Jr(i)),Et(i),b=i.type,w=i.pendingProps,_=t!==null?t.memoizedProps:null,m=w.children,E0(b,w)?m=null:_!==null&&E0(b,_)&&(i.flags|=32),i.memoizedState!==null&&(b=Cf(t,i,YN,null,null,c),Tc._currentValue=b),ed(t,i),cs(t,i,m,c),i.child;case 6:return t===null&&Ut&&((t=c=vn)&&(c=MC(c,i.pendingProps,oi),c!==null?(i.stateNode=c,ls=i,vn=null,t=!0):t=!1),t||Jr(i)),null;case 13:return wx(t,i,c);case 4:return rt(i,i.stateNode.containerInfo),m=i.pendingProps,t===null?i.child=tl(i,null,m,c):cs(t,i,m,c),i.child;case 11:return hx(t,i,i.type,i.pendingProps,c);case 7:return cs(t,i,i.pendingProps,c),i.child;case 8:return cs(t,i,i.pendingProps.children,c),i.child;case 12:return cs(t,i,i.pendingProps.children,c),i.child;case 10:return m=i.pendingProps,$r(i,i.type,m.value),cs(t,i,m.children,c),i.child;case 9:return b=i.type._context,m=i.pendingProps.children,Ka(i),b=os(b),m=m(b),i.flags|=1,cs(t,i,m,c),i.child;case 14:return fx(t,i,i.type,i.pendingProps,c);case 15:return mx(t,i,i.type,i.pendingProps,c);case 19:return Cx(t,i,c);case 31:return $N(t,i,c);case 22:return gx(t,i,c,i.pendingProps);case 24:return Ka(i),m=os(Gn),t===null?(b=ff(),b===null&&(b=xn,w=df(),b.pooledCache=w,w.refCount++,w!==null&&(b.pooledCacheLanes|=c),b=w),i.memoizedState={parent:m,cache:b},gf(i),$r(i,Gn,b)):((t.lanes&c)!==0&&(xf(t,i),oc(i,null,null,c),lc()),b=t.memoizedState,w=i.memoizedState,b.parent!==m?(b={parent:m,cache:m},i.memoizedState=b,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=b),$r(i,Gn,m)):(m=w.cache,$r(i,Gn,m),m!==b.cache&&uf(i,[Gn],c,!0))),cs(t,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(l(156,i.tag))}function xr(t){t.flags|=4}function Kf(t,i,c,m,b){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(b&335544128)===b)if(t.stateNode.complete)t.flags|=8192;else if(Kx())t.flags|=8192;else throw el=Uu,mf}else t.flags&=-16777217}function Ax(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!zp(i))if(Kx())t.flags|=8192;else throw el=Uu,mf}function nd(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Xn():536870912,t.lanes|=i,$l|=i)}function mc(t,i){if(!Ut)switch(t.tailMode){case"hidden":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function wn(t){var i=t.alternate!==null&&t.alternate.child===t.child,c=0,m=0;if(i)for(var b=t.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=t,b=b.sibling;else for(b=t.child;b!==null;)c|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=t,b=b.sibling;return t.subtreeFlags|=m,t.childLanes=c,i}function tC(t,i,c){var m=i.pendingProps;switch(rf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(i),null;case 1:return wn(i),null;case 3:return c=i.stateNode,m=null,t!==null&&(m=t.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),hr(Gn),wt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(zl(i)?xr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lf())),wn(i),null;case 26:var b=i.type,w=i.memoizedState;return t===null?(xr(i),w!==null?(wn(i),Ax(i,w)):(wn(i),Kf(i,b,null,m,c))):w?w!==t.memoizedState?(xr(i),wn(i),Ax(i,w)):(wn(i),i.flags&=-16777217):(t=t.memoizedProps,t!==m&&xr(i),wn(i),Kf(i,b,t,m,c)),null;case 27:if(pt(i),c=Le.current,b=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==m&&xr(i);else{if(!m){if(i.stateNode===null)throw Error(l(166));return wn(i),null}t=_e.current,zl(i)?ig(i):(t=Dp(b,m,c),i.stateNode=t,xr(i))}return wn(i),null;case 5:if(pt(i),b=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==m&&xr(i);else{if(!m){if(i.stateNode===null)throw Error(l(166));return wn(i),null}if(w=_e.current,zl(i))ig(i);else{var _=pd(Le.current);switch(w){case 1:w=_.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:w=_.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":w=_.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":w=_.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":w=_.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?_.createElement("select",{is:m.is}):_.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?_.createElement(b,{is:m.is}):_.createElement(b)}}w[kn]=i,w[rn]=m;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)w.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=w;e:switch(us(w,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&xr(i)}}return wn(i),Kf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,c),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==m&&xr(i);else{if(typeof m!="string"&&i.stateNode===null)throw Error(l(166));if(t=Le.current,zl(i)){if(t=i.stateNode,c=i.memoizedProps,m=null,b=ls,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}t[kn]=i,t=!!(t.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||wp(t.nodeValue,c)),t||Jr(i,!0)}else t=pd(t).createTextNode(m),t[kn]=i,i.stateNode=t}return wn(i),null;case 31:if(c=i.memoizedState,t===null||t.memoizedState!==null){if(m=zl(i),c!==null){if(t===null){if(!m)throw Error(l(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[kn]=i}else Qa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wn(i),t=!1}else c=lf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return i.flags&256?(Gs(i),i):(Gs(i),null);if((i.flags&128)!==0)throw Error(l(558))}return wn(i),null;case 13:if(m=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(b=zl(i),m!==null&&m.dehydrated!==null){if(t===null){if(!b)throw Error(l(318));if(b=i.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(l(317));b[kn]=i}else Qa(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wn(i),b=!1}else b=lf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=b),b=!0;if(!b)return i.flags&256?(Gs(i),i):(Gs(i),null)}return Gs(i),(i.flags&128)!==0?(i.lanes=c,i):(c=m!==null,t=t!==null&&t.memoizedState!==null,c&&(m=i.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==b&&(m.flags|=2048)),c!==t&&c&&(i.child.flags|=8192),nd(i,i.updateQueue),wn(i),null);case 4:return wt(),t===null&&y0(i.stateNode.containerInfo),wn(i),null;case 10:return hr(i.type),wn(i),null;case 19:if(ze(Un),m=i.memoizedState,m===null)return wn(i),null;if(b=(i.flags&128)!==0,w=m.rendering,w===null)if(b)mc(m,!1);else{if(jn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(w=Vu(t),w!==null){for(i.flags|=128,mc(m,!1),t=w.updateQueue,i.updateQueue=t,nd(i,t),i.subtreeFlags=0,t=c,c=i.child;c!==null;)$1(c,t),c=c.sibling;return Be(Un,Un.current&1|2),Ut&&ur(i,m.treeForkCount),i.child}t=t.sibling}m.tail!==null&&ft()>ld&&(i.flags|=128,b=!0,mc(m,!1),i.lanes=4194304)}else{if(!b)if(t=Vu(w),t!==null){if(i.flags|=128,b=!0,t=t.updateQueue,i.updateQueue=t,nd(i,t),mc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!Ut)return wn(i),null}else 2*ft()-m.renderingStartTime>ld&&c!==536870912&&(i.flags|=128,b=!0,mc(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(t=m.last,t!==null?t.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=ft(),t.sibling=null,c=Un.current,Be(Un,b?c&1|2:c&1),Ut&&ur(i,m.treeForkCount),t):(wn(i),null);case 22:case 23:return Gs(i),vf(),m=i.memoizedState!==null,t!==null?t.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(c&536870912)!==0&&(i.flags&128)===0&&(wn(i),i.subtreeFlags&6&&(i.flags|=8192)):wn(i),c=i.updateQueue,c!==null&&nd(i,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==c&&(i.flags|=2048),t!==null&&ze(Ja),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),hr(Gn),wn(i),null;case 25:return null;case 30:return null}throw Error(l(156,i.tag))}function nC(t,i){switch(rf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return hr(Gn),wt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return pt(i),null;case 31:if(i.memoizedState!==null){if(Gs(i),i.alternate===null)throw Error(l(340));Qa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Gs(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(l(340));Qa()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ze(Un),null;case 4:return wt(),null;case 10:return hr(i.type),null;case 22:case 23:return Gs(i),vf(),t!==null&&ze(Ja),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return hr(Gn),null;case 25:return null;default:return null}}function Sx(t,i){switch(rf(i),i.tag){case 3:hr(Gn),wt();break;case 26:case 27:case 5:pt(i);break;case 4:wt();break;case 31:i.memoizedState!==null&&Gs(i);break;case 13:Gs(i);break;case 19:ze(Un);break;case 10:hr(i.type);break;case 22:case 23:Gs(i),vf(),t!==null&&ze(Ja);break;case 24:hr(Gn)}}function gc(t,i){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var b=m.next;c=b;do{if((c.tag&t)===t){m=void 0;var w=c.create,_=c.inst;m=w(),_.destroy=m}c=c.next}while(c!==b)}}catch(O){ln(i,i.return,O)}}function ra(t,i,c){try{var m=i.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var w=b.next;m=w;do{if((m.tag&t)===t){var _=m.inst,O=_.destroy;if(O!==void 0){_.destroy=void 0,b=i;var F=c,oe=O;try{oe()}catch(ve){ln(b,F,ve)}}}m=m.next}while(m!==w)}}catch(ve){ln(i,i.return,ve)}}function _x(t){var i=t.updateQueue;if(i!==null){var c=t.stateNode;try{pg(i,c)}catch(m){ln(t,t.return,m)}}}function Tx(t,i,c){c.props=sl(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(m){ln(t,i,m)}}function xc(t,i){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var m=t.stateNode;break;case 30:m=t.stateNode;break;default:m=t.stateNode}typeof c=="function"?t.refCleanup=c(m):c.current=m}}catch(b){ln(t,i,b)}}function Gi(t,i){var c=t.ref,m=t.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(b){ln(t,i,b)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(b){ln(t,i,b)}else c.current=null}function Ix(t){var i=t.type,c=t.memoizedProps,m=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(b){ln(t,t.return,b)}}function Jf(t,i,c){try{var m=t.stateNode;EC(m,t.type,c,i),m[rn]=i}catch(b){ln(t,t.return,b)}}function Rx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ha(t.type)||t.tag===4}function $f(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ha(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function e0(t,i,c){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(t),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=As));else if(m!==4&&(m===27&&ha(t.type)&&(c=t.stateNode,i=null),t=t.child,t!==null))for(e0(t,i,c),t=t.sibling;t!==null;)e0(t,i,c),t=t.sibling}function sd(t,i,c){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?c.insertBefore(t,i):c.appendChild(t);else if(m!==4&&(m===27&&ha(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(sd(t,i,c),t=t.sibling;t!==null;)sd(t,i,c),t=t.sibling}function Mx(t){var i=t.stateNode,c=t.memoizedProps;try{for(var m=t.type,b=i.attributes;b.length;)i.removeAttributeNode(b[0]);us(i,m,c),i[kn]=t,i[rn]=c}catch(w){ln(t,t.return,w)}}var pr=!1,Wn=!1,t0=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,ts=null;function sC(t,i){if(t=t.containerInfo,N0=Ed,t=M(t),D(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var b=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var _=0,O=-1,F=-1,oe=0,ve=0,Ne=t,he=null;t:for(;;){for(var pe;Ne!==c||b!==0&&Ne.nodeType!==3||(O=_+b),Ne!==w||m!==0&&Ne.nodeType!==3||(F=_+m),Ne.nodeType===3&&(_+=Ne.nodeValue.length),(pe=Ne.firstChild)!==null;)he=Ne,Ne=pe;for(;;){if(Ne===t)break t;if(he===c&&++oe===b&&(O=_),he===w&&++ve===m&&(F=_),(pe=Ne.nextSibling)!==null)break;Ne=he,he=Ne.parentNode}Ne=pe}c=O===-1||F===-1?null:{start:O,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(C0={focusedElem:t,selectionRange:c},Ed=!1,ts=i;ts!==null;)if(i=ts,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,ts=t;else for(;ts!==null;){switch(i=ts,w=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)b=t[c],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=i,b=w.memoizedProps,w=w.memoizedState,m=c.stateNode;try{var qe=sl(c.type,b);t=m.getSnapshotBeforeUpdate(qe,w),m.__reactInternalSnapshotBeforeUpdate=t}catch(dt){ln(c,c.return,dt)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,c=t.nodeType,c===9)S0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":S0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=i.sibling,t!==null){t.return=i.return,ts=t;break}ts=i.return}}function Ox(t,i,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:yr(t,c),m&4&&gc(5,c);break;case 1:if(yr(t,c),m&4)if(t=c.stateNode,i===null)try{t.componentDidMount()}catch(_){ln(c,c.return,_)}else{var b=sl(c.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(b,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ln(c,c.return,_)}}m&64&&_x(c),m&512&&xc(c,c.return);break;case 3:if(yr(t,c),m&64&&(t=c.updateQueue,t!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{pg(t,i)}catch(_){ln(c,c.return,_)}}break;case 27:i===null&&m&4&&Mx(c);case 26:case 5:yr(t,c),i===null&&m&4&&Ix(c),m&512&&xc(c,c.return);break;case 12:yr(t,c);break;case 31:yr(t,c),m&4&&kx(t,c);break;case 13:yr(t,c),m&4&&Bx(t,c),m&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=hC.bind(null,c),DC(t,c))));break;case 22:if(m=c.memoizedState!==null||pr,!m){i=i!==null&&i.memoizedState!==null||Wn,b=pr;var w=Wn;pr=m,(Wn=i)&&!w?vr(t,c,(c.subtreeFlags&8772)!==0):yr(t,c),pr=b,Wn=w}break;case 30:break;default:yr(t,c)}}function jx(t){var i=t.alternate;i!==null&&(t.alternate=null,jx(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Es(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _n=null,Ts=!1;function br(t,i,c){for(c=c.child;c!==null;)Lx(t,i,c),c=c.sibling}function Lx(t,i,c){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(Gt,c)}catch{}switch(c.tag){case 26:Wn||Gi(c,i),br(t,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Wn||Gi(c,i);var m=_n,b=Ts;ha(c.type)&&(_n=c.stateNode,Ts=!1),br(t,i,c),Ac(c.stateNode),_n=m,Ts=b;break;case 5:Wn||Gi(c,i);case 6:if(m=_n,b=Ts,_n=null,br(t,i,c),_n=m,Ts=b,_n!==null)if(Ts)try{(_n.nodeType===9?_n.body:_n.nodeName==="HTML"?_n.ownerDocument.body:_n).removeChild(c.stateNode)}catch(w){ln(c,i,w)}else try{_n.removeChild(c.stateNode)}catch(w){ln(c,i,w)}break;case 18:_n!==null&&(Ts?(t=_n,_p(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),lo(t)):_p(_n,c.stateNode));break;case 4:m=_n,b=Ts,_n=c.stateNode.containerInfo,Ts=!0,br(t,i,c),_n=m,Ts=b;break;case 0:case 11:case 14:case 15:ra(2,c,i),Wn||ra(4,c,i),br(t,i,c);break;case 1:Wn||(Gi(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"&&Tx(c,i,m)),br(t,i,c);break;case 21:br(t,i,c);break;case 22:Wn=(m=Wn)||c.memoizedState!==null,br(t,i,c),Wn=m;break;default:br(t,i,c)}}function kx(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{lo(t)}catch(c){ln(i,i.return,c)}}}function Bx(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lo(t)}catch(c){ln(i,i.return,c)}}function iC(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Dx),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Dx),i;default:throw Error(l(435,t.tag))}}function id(t,i){var c=iC(t);i.forEach(function(m){if(!c.has(m)){c.add(m);var b=fC.bind(null,t,m);m.then(b,b)}})}function Is(t,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var b=c[m],w=t,_=i,O=_;e:for(;O!==null;){switch(O.tag){case 27:if(ha(O.type)){_n=O.stateNode,Ts=!1;break e}break;case 5:_n=O.stateNode,Ts=!1;break e;case 3:case 4:_n=O.stateNode.containerInfo,Ts=!0;break e}O=O.return}if(_n===null)throw Error(l(160));Lx(w,_,b),_n=null,Ts=!1,w=b.alternate,w!==null&&(w.return=null),b.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Px(i,t),i=i.sibling}var Ai=null;function Px(t,i){var c=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Is(i,t),Rs(t),m&4&&(ra(3,t,t.return),gc(3,t),ra(5,t,t.return));break;case 1:Is(i,t),Rs(t),m&512&&(Wn||c===null||Gi(c,c.return)),m&64&&pr&&(t=t.updateQueue,t!==null&&(m=t.callbacks,m!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var b=Ai;if(Is(i,t),Rs(t),m&512&&(Wn||c===null||Gi(c,c.return)),m&4){var w=c!==null?c.memoizedState:null;if(m=t.memoizedState,c===null)if(m===null)if(t.stateNode===null){e:{m=t.type,c=t.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":w=b.getElementsByTagName("title")[0],(!w||w[Pa]||w[kn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=b.createElement(m),b.head.insertBefore(w,b.querySelector("head > title"))),us(w,m,c),w[kn]=t,Mn(w),m=w;break e;case"link":var _=Pp("link","href",b).get(m+(c.href||""));if(_){for(var O=0;O<_.length;O++)if(w=_[O],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(O,1);break t}}w=b.createElement(m),us(w,m,c),b.head.appendChild(w);break;case"meta":if(_=Pp("meta","content",b).get(m+(c.content||""))){for(O=0;O<_.length;O++)if(w=_[O],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(O,1);break t}}w=b.createElement(m),us(w,m,c),b.head.appendChild(w);break;default:throw Error(l(468,m))}w[kn]=t,Mn(w),m=w}t.stateNode=m}else Up(b,t.type,t.stateNode);else t.stateNode=Bp(b,m,t.memoizedProps);else w!==m?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,m===null?Up(b,t.type,t.stateNode):Bp(b,m,t.memoizedProps)):m===null&&t.stateNode!==null&&Jf(t,t.memoizedProps,c.memoizedProps)}break;case 27:Is(i,t),Rs(t),m&512&&(Wn||c===null||Gi(c,c.return)),c!==null&&m&4&&Jf(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Is(i,t),Rs(t),m&512&&(Wn||c===null||Gi(c,c.return)),t.flags&32){b=t.stateNode;try{Fr(b,"")}catch(qe){ln(t,t.return,qe)}}m&4&&t.stateNode!=null&&(b=t.memoizedProps,Jf(t,b,c!==null?c.memoizedProps:b)),m&1024&&(t0=!0);break;case 6:if(Is(i,t),Rs(t),m&4){if(t.stateNode===null)throw Error(l(162));m=t.memoizedProps,c=t.stateNode;try{c.nodeValue=m}catch(qe){ln(t,t.return,qe)}}break;case 3:if(vd=null,b=Ai,Ai=bd(i.containerInfo),Is(i,t),Ai=b,Rs(t),m&4&&c!==null&&c.memoizedState.isDehydrated)try{lo(i.containerInfo)}catch(qe){ln(t,t.return,qe)}t0&&(t0=!1,Ux(t));break;case 4:m=Ai,Ai=bd(t.stateNode.containerInfo),Is(i,t),Rs(t),Ai=m;break;case 12:Is(i,t),Rs(t);break;case 31:Is(i,t),Rs(t),m&4&&(m=t.updateQueue,m!==null&&(t.updateQueue=null,id(t,m)));break;case 13:Is(i,t),Rs(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ad=ft()),m&4&&(m=t.updateQueue,m!==null&&(t.updateQueue=null,id(t,m)));break;case 22:b=t.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,oe=pr,ve=Wn;if(pr=oe||b,Wn=ve||F,Is(i,t),Wn=ve,pr=oe,Rs(t),m&8192)e:for(i=t.stateNode,i._visibility=b?i._visibility&-2:i._visibility|1,b&&(c===null||F||pr||Wn||il(t)),c=null,i=t;;){if(i.tag===5||i.tag===26){if(c===null){F=c=i;try{if(w=F.stateNode,b)_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{O=F.stateNode;var Ne=F.memoizedProps.style,he=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;O.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(qe){ln(F,F.return,qe)}}}else if(i.tag===6){if(c===null){F=i;try{F.stateNode.nodeValue=b?"":F.memoizedProps}catch(qe){ln(F,F.return,qe)}}}else if(i.tag===18){if(c===null){F=i;try{var pe=F.stateNode;b?Tp(pe,!0):Tp(F.stateNode,!1)}catch(qe){ln(F,F.return,qe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}m&4&&(m=t.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,id(t,c))));break;case 19:Is(i,t),Rs(t),m&4&&(m=t.updateQueue,m!==null&&(t.updateQueue=null,id(t,m)));break;case 30:break;case 21:break;default:Is(i,t),Rs(t)}}function Rs(t){var i=t.flags;if(i&2){try{for(var c,m=t.return;m!==null;){if(Rx(m)){c=m;break}m=m.return}if(c==null)throw Error(l(160));switch(c.tag){case 27:var b=c.stateNode,w=$f(t);sd(t,w,b);break;case 5:var _=c.stateNode;c.flags&32&&(Fr(_,""),c.flags&=-33);var O=$f(t);sd(t,O,_);break;case 3:case 4:var F=c.stateNode.containerInfo,oe=$f(t);e0(t,oe,F);break;default:throw Error(l(161))}}catch(ve){ln(t,t.return,ve)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ux(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ux(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function yr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ox(t,i.alternate,i),i=i.sibling}function il(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ra(4,i,i.return),il(i);break;case 1:Gi(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Tx(i,i.return,c),il(i);break;case 27:Ac(i.stateNode);case 26:case 5:Gi(i,i.return),il(i);break;case 22:i.memoizedState===null&&il(i);break;case 30:il(i);break;default:il(i)}t=t.sibling}}function vr(t,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,b=t,w=i,_=w.flags;switch(w.tag){case 0:case 11:case 15:vr(b,w,c),gc(4,w);break;case 1:if(vr(b,w,c),m=w,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(oe){ln(m,m.return,oe)}if(m=w,b=m.updateQueue,b!==null){var O=m.stateNode;try{var F=b.shared.hiddenCallbacks;if(F!==null)for(b.shared.hiddenCallbacks=null,b=0;b<F.length;b++)xg(F[b],O)}catch(oe){ln(m,m.return,oe)}}c&&_&64&&_x(w),xc(w,w.return);break;case 27:Mx(w);case 26:case 5:vr(b,w,c),c&&m===null&&_&4&&Ix(w),xc(w,w.return);break;case 12:vr(b,w,c);break;case 31:vr(b,w,c),c&&_&4&&kx(b,w);break;case 13:vr(b,w,c),c&&_&4&&Bx(b,w);break;case 22:w.memoizedState===null&&vr(b,w,c),xc(w,w.return);break;case 30:break;default:vr(b,w,c)}i=i.sibling}}function n0(t,i){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&nc(c))}function s0(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nc(t))}function Si(t,i,c,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zx(t,i,c,m),i=i.sibling}function zx(t,i,c,m){var b=i.flags;switch(i.tag){case 0:case 11:case 15:Si(t,i,c,m),b&2048&&gc(9,i);break;case 1:Si(t,i,c,m);break;case 3:Si(t,i,c,m),b&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nc(t)));break;case 12:if(b&2048){Si(t,i,c,m),t=i.stateNode;try{var w=i.memoizedProps,_=w.id,O=w.onPostCommit;typeof O=="function"&&O(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(F){ln(i,i.return,F)}}else Si(t,i,c,m);break;case 31:Si(t,i,c,m);break;case 13:Si(t,i,c,m);break;case 23:break;case 22:w=i.stateNode,_=i.alternate,i.memoizedState!==null?w._visibility&2?Si(t,i,c,m):pc(t,i):w._visibility&2?Si(t,i,c,m):(w._visibility|=2,Zl(t,i,c,m,(i.subtreeFlags&10256)!==0||!1)),b&2048&&n0(_,i);break;case 24:Si(t,i,c,m),b&2048&&s0(i.alternate,i);break;default:Si(t,i,c,m)}}function Zl(t,i,c,m,b){for(b=b&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=t,_=i,O=c,F=m,oe=_.flags;switch(_.tag){case 0:case 11:case 15:Zl(w,_,O,F,b),gc(8,_);break;case 23:break;case 22:var ve=_.stateNode;_.memoizedState!==null?ve._visibility&2?Zl(w,_,O,F,b):pc(w,_):(ve._visibility|=2,Zl(w,_,O,F,b)),b&&oe&2048&&n0(_.alternate,_);break;case 24:Zl(w,_,O,F,b),b&&oe&2048&&s0(_.alternate,_);break;default:Zl(w,_,O,F,b)}i=i.sibling}}function pc(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=t,m=i,b=m.flags;switch(m.tag){case 22:pc(c,m),b&2048&&n0(m.alternate,m);break;case 24:pc(c,m),b&2048&&s0(m.alternate,m);break;default:pc(c,m)}i=i.sibling}}var bc=8192;function Kl(t,i,c){if(t.subtreeFlags&bc)for(t=t.child;t!==null;)Fx(t,i,c),t=t.sibling}function Fx(t,i,c){switch(t.tag){case 26:Kl(t,i,c),t.flags&bc&&t.memoizedState!==null&&GC(c,Ai,t.memoizedState,t.memoizedProps);break;case 5:Kl(t,i,c);break;case 3:case 4:var m=Ai;Ai=bd(t.stateNode.containerInfo),Kl(t,i,c),Ai=m;break;case 22:t.memoizedState===null&&(m=t.alternate,m!==null&&m.memoizedState!==null?(m=bc,bc=16777216,Kl(t,i,c),bc=m):Kl(t,i,c));break;default:Kl(t,i,c)}}function Hx(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function yc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var m=i[c];ts=m,Gx(m,t)}Hx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vx(t),t=t.sibling}function Vx(t){switch(t.tag){case 0:case 11:case 15:yc(t),t.flags&2048&&ra(9,t,t.return);break;case 3:yc(t);break;case 12:yc(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,rd(t)):yc(t);break;default:yc(t)}}function rd(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var m=i[c];ts=m,Gx(m,t)}Hx(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ra(8,i,i.return),rd(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,rd(i));break;default:rd(i)}t=t.sibling}}function Gx(t,i){for(;ts!==null;){var c=ts;switch(c.tag){case 0:case 11:case 15:ra(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:nc(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,ts=m;else e:for(c=t;ts!==null;){m=ts;var b=m.sibling,w=m.return;if(jx(m),m===c){ts=null;break e}if(b!==null){b.return=w,ts=b;break e}ts=w}}}var rC={getCacheForType:function(t){var i=os(Gn),c=i.data.get(t);return c===void 0&&(c=t(),i.data.set(t,c)),c},cacheSignal:function(){return os(Gn).controller.signal}},aC=typeof WeakMap=="function"?WeakMap:Map,Kt=0,xn=null,Ot=null,Bt=0,an=0,Ys=null,aa=!1,Jl=!1,i0=!1,wr=0,jn=0,la=0,rl=0,r0=0,qs=0,$l=0,vc=null,Ms=null,a0=!1,ad=0,Yx=0,ld=1/0,od=null,oa=null,Jn=0,ca=null,eo=null,Nr=0,l0=0,o0=null,qx=null,wc=0,c0=null;function Ws(){return(Kt&2)!==0&&Bt!==0?Bt&-Bt:V.T!==null?g0():xs()}function Wx(){if(qs===0)if((Bt&536870912)===0||Ut){var t=Lt;Lt<<=1,(Lt&3932160)===0&&(Lt=262144),qs=t}else qs=536870912;return t=Vs.current,t!==null&&(t.flags|=32),qs}function Ds(t,i,c){(t===xn&&(an===2||an===9)||t.cancelPendingCommit!==null)&&(to(t,0),ua(t,Bt,qs,!1)),ki(t,c),((Kt&2)===0||t!==xn)&&(t===xn&&((Kt&2)===0&&(rl|=c),jn===4&&ua(t,Bt,qs,!1)),Yi(t))}function Xx(t,i,c){if((Kt&6)!==0)throw Error(l(327));var m=!c&&(i&127)===0&&(i&t.expiredLanes)===0||rs(t,i),b=m?cC(t,i):d0(t,i,!0),w=m;do{if(b===0){Jl&&!m&&ua(t,i,0,!1);break}else{if(c=t.current.alternate,w&&!lC(c)){b=d0(t,i,!1),w=!1;continue}if(b===2){if(w=i,t.errorRecoveryDisabledLanes&w)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var O=t;b=vc;var F=O.current.memoizedState.isDehydrated;if(F&&(to(O,_).flags|=256),_=d0(O,_,!1),_!==2){if(i0&&!F){O.errorRecoveryDisabledLanes|=w,rl|=w,b=4;break e}w=Ms,Ms=b,w!==null&&(Ms===null?Ms=w:Ms.push.apply(Ms,w))}b=_}if(w=!1,b!==2)continue}}if(b===1){to(t,0),ua(t,i,0,!0);break}e:{switch(m=t,w=b,w){case 0:case 1:throw Error(l(345));case 4:if((i&4194048)!==i)break;case 6:ua(m,i,qs,!aa);break e;case 2:Ms=null;break;case 3:case 5:break;default:throw Error(l(329))}if((i&62914560)===i&&(b=ad+300-ft(),10<b)){if(ua(m,i,qs,!aa),Ba(m,0,!0)!==0)break e;Nr=i,m.timeoutHandle=Ap(Qx.bind(null,m,c,Ms,od,a0,i,qs,rl,$l,aa,w,"Throttled",-0,0),b);break e}Qx(m,c,Ms,od,a0,i,qs,rl,$l,aa,w,null,-0,0)}}break}while(!0);Yi(t)}function Qx(t,i,c,m,b,w,_,O,F,oe,ve,Ne,he,pe){if(t.timeoutHandle=-1,Ne=i.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:As},Fx(i,w,Ne);var qe=(w&62914560)===w?ad-ft():(w&4194048)===w?Yx-ft():0;if(qe=YC(Ne,qe),qe!==null){Nr=w,t.cancelPendingCommit=qe(sp.bind(null,t,i,w,c,m,b,_,O,F,ve,Ne,null,he,pe)),ua(t,w,_,!oe);return}}sp(t,i,w,c,m,b,_,O,F)}function lC(t){for(var i=t;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var b=c[m],w=b.getSnapshot;b=b.value;try{if(!x(w(),b))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ua(t,i,c,m){i&=~r0,i&=~rl,t.suspendedLanes|=i,t.pingedLanes&=~i,m&&(t.warmLanes|=i),m=t.expirationTimes;for(var b=i;0<b;){var w=31-yt(b),_=1<<w;m[w]=-1,b&=~_}c!==0&&mu(t,c,i)}function cd(){return(Kt&6)===0?(Nc(0),!1):!0}function u0(){if(Ot!==null){if(an===0)var t=Ot.return;else t=Ot,dr=Za=null,Sf(t),Yl=null,ic=0,t=Ot;for(;t!==null;)Sx(t.alternate,t),t=t.return;Ot=null}}function to(t,i){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,_C(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),Nr=0,u0(),xn=t,Ot=c=cr(t.current,null),Bt=i,an=0,Ys=null,aa=!1,Jl=rs(t,i),i0=!1,$l=qs=r0=rl=la=jn=0,Ms=vc=null,a0=!1,(i&8)!==0&&(i|=i&32);var m=t.entangledLanes;if(m!==0)for(t=t.entanglements,m&=i;0<m;){var b=31-yt(m),w=1<<b;i|=t[b],m&=~w}return wr=i,Ru(),c}function Zx(t,i){Ct=null,V.H=hc,i===Gl||i===Pu?(i=hg(),an=3):i===mf?(i=hg(),an=4):an=i===Hf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ys=i,Ot===null&&(jn=1,Ju(t,ri(i,t.current)))}function Kx(){var t=Vs.current;return t===null?!0:(Bt&4194048)===Bt?ci===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?t===ci:!1}function Jx(){var t=V.H;return V.H=hc,t===null?hc:t}function $x(){var t=V.A;return V.A=rC,t}function ud(){jn=4,aa||(Bt&4194048)!==Bt&&Vs.current!==null||(Jl=!0),(la&134217727)===0&&(rl&134217727)===0||xn===null||ua(xn,Bt,qs,!1)}function d0(t,i,c){var m=Kt;Kt|=2;var b=Jx(),w=$x();(xn!==t||Bt!==i)&&(od=null,to(t,i)),i=!1;var _=jn;e:do try{if(an!==0&&Ot!==null){var O=Ot,F=Ys;switch(an){case 8:u0(),_=6;break e;case 3:case 2:case 9:case 6:Vs.current===null&&(i=!0);var oe=an;if(an=0,Ys=null,no(t,O,F,oe),c&&Jl){_=0;break e}break;default:oe=an,an=0,Ys=null,no(t,O,F,oe)}}oC(),_=jn;break}catch(ve){Zx(t,ve)}while(!0);return i&&t.shellSuspendCounter++,dr=Za=null,Kt=m,V.H=b,V.A=w,Ot===null&&(xn=null,Bt=0,Ru()),_}function oC(){for(;Ot!==null;)ep(Ot)}function cC(t,i){var c=Kt;Kt|=2;var m=Jx(),b=$x();xn!==t||Bt!==i?(od=null,ld=ft()+500,to(t,i)):Jl=rs(t,i);e:do try{if(an!==0&&Ot!==null){i=Ot;var w=Ys;t:switch(an){case 1:an=0,Ys=null,no(t,i,w,1);break;case 2:case 9:if(ug(w)){an=0,Ys=null,tp(i);break}i=function(){an!==2&&an!==9||xn!==t||(an=7),Yi(t)},w.then(i,i);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:ug(w)?(an=0,Ys=null,tp(i)):(an=0,Ys=null,no(t,i,w,7));break;case 5:var _=null;switch(Ot.tag){case 26:_=Ot.memoizedState;case 5:case 27:var O=Ot;if(_?zp(_):O.stateNode.complete){an=0,Ys=null;var F=O.sibling;if(F!==null)Ot=F;else{var oe=O.return;oe!==null?(Ot=oe,dd(oe)):Ot=null}break t}}an=0,Ys=null,no(t,i,w,5);break;case 6:an=0,Ys=null,no(t,i,w,6);break;case 8:u0(),jn=6;break e;default:throw Error(l(462))}}uC();break}catch(ve){Zx(t,ve)}while(!0);return dr=Za=null,V.H=m,V.A=b,Kt=c,Ot!==null?0:(xn=null,Bt=0,Ru(),jn)}function uC(){for(;Ot!==null&&!Tn();)ep(Ot)}function ep(t){var i=Ex(t.alternate,t,wr);t.memoizedProps=t.pendingProps,i===null?dd(t):Ot=i}function tp(t){var i=t,c=i.alternate;switch(i.tag){case 15:case 0:i=bx(c,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=bx(c,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:Sf(i);default:Sx(c,i),i=Ot=$1(i,wr),i=Ex(c,i,wr)}t.memoizedProps=t.pendingProps,i===null?dd(t):Ot=i}function no(t,i,c,m){dr=Za=null,Sf(i),Yl=null,ic=0;var b=i.return;try{if(JN(t,b,i,c,Bt)){jn=1,Ju(t,ri(c,t.current)),Ot=null;return}}catch(w){if(b!==null)throw Ot=b,w;jn=1,Ju(t,ri(c,t.current)),Ot=null;return}i.flags&32768?(Ut||m===1?t=!0:Jl||(Bt&536870912)!==0?t=!1:(aa=t=!0,(m===2||m===9||m===3||m===6)&&(m=Vs.current,m!==null&&m.tag===13&&(m.flags|=16384))),np(i,t)):dd(i)}function dd(t){var i=t;do{if((i.flags&32768)!==0){np(i,aa);return}t=i.return;var c=tC(i.alternate,i,wr);if(c!==null){Ot=c;return}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=t}while(i!==null);jn===0&&(jn=5)}function np(t,i){do{var c=nC(t.alternate,t);if(c!==null){c.flags&=32767,Ot=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(t=t.sibling,t!==null)){Ot=t;return}Ot=t=c}while(t!==null);jn=6,Ot=null}function sp(t,i,c,m,b,w,_,O,F){t.cancelPendingCommit=null;do hd();while(Jn!==0);if((Kt&6)!==0)throw Error(l(327));if(i!==null){if(i===t.current)throw Error(l(177));if(w=i.lanes|i.childLanes,w|=Jh,ei(t,c,w,_,O,F),t===xn&&(Ot=xn=null,Bt=0),eo=i,ca=t,Nr=c,l0=w,o0=b,qx=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,mC(nt,function(){return op(),null})):(t.callbackNode=null,t.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=V.T,V.T=null,b=ue.p,ue.p=2,_=Kt,Kt|=4;try{sC(t,i,c)}finally{Kt=_,ue.p=b,V.T=m}}Jn=1,ip(),rp(),ap()}}function ip(){if(Jn===1){Jn=0;var t=ca,i=eo,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=V.T,V.T=null;var m=ue.p;ue.p=2;var b=Kt;Kt|=4;try{Px(i,t);var w=C0,_=M(t.containerInfo),O=w.focusedElem,F=w.selectionRange;if(_!==O&&O&&O.ownerDocument&&S(O.ownerDocument.documentElement,O)){if(F!==null&&D(O)){var oe=F.start,ve=F.end;if(ve===void 0&&(ve=oe),"selectionStart"in O)O.selectionStart=oe,O.selectionEnd=Math.min(ve,O.value.length);else{var Ne=O.ownerDocument||document,he=Ne&&Ne.defaultView||window;if(he.getSelection){var pe=he.getSelection(),qe=O.textContent.length,dt=Math.min(F.start,qe),dn=F.end===void 0?dt:Math.min(F.end,qe);!pe.extend&&dt>dn&&(_=dn,dn=dt,dt=_);var $=E(O,dt),K=E(O,dn);if($&&K&&(pe.rangeCount!==1||pe.anchorNode!==$.node||pe.anchorOffset!==$.offset||pe.focusNode!==K.node||pe.focusOffset!==K.offset)){var le=Ne.createRange();le.setStart($.node,$.offset),pe.removeAllRanges(),dt>dn?(pe.addRange(le),pe.extend(K.node,K.offset)):(le.setEnd(K.node,K.offset),pe.addRange(le))}}}}for(Ne=[],pe=O;pe=pe.parentNode;)pe.nodeType===1&&Ne.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<Ne.length;O++){var we=Ne[O];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Ed=!!N0,C0=N0=null}finally{Kt=b,ue.p=m,V.T=c}}t.current=i,Jn=2}}function rp(){if(Jn===2){Jn=0;var t=ca,i=eo,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=V.T,V.T=null;var m=ue.p;ue.p=2;var b=Kt;Kt|=4;try{Ox(t,i.alternate,i)}finally{Kt=b,ue.p=m,V.T=c}}Jn=3}}function ap(){if(Jn===4||Jn===3){Jn=0,De();var t=ca,i=eo,c=Nr,m=qx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Jn=5:(Jn=0,eo=ca=null,lp(t,t.pendingLanes));var b=t.pendingLanes;if(b===0&&(oa=null),bi(c),i=i.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(Gt,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=V.T,b=ue.p,ue.p=2,V.T=null;try{for(var w=t.onRecoverableError,_=0;_<m.length;_++){var O=m[_];w(O.value,{componentStack:O.stack})}}finally{V.T=i,ue.p=b}}(Nr&3)!==0&&hd(),Yi(t),b=t.pendingLanes,(c&261930)!==0&&(b&42)!==0?t===c0?wc++:(wc=0,c0=t):wc=0,Nc(0)}}function lp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,nc(i)))}function hd(){return ip(),rp(),ap(),op()}function op(){if(Jn!==5)return!1;var t=ca,i=l0;l0=0;var c=bi(Nr),m=V.T,b=ue.p;try{ue.p=32>c?32:c,V.T=null,c=o0,o0=null;var w=ca,_=Nr;if(Jn=0,eo=ca=null,Nr=0,(Kt&6)!==0)throw Error(l(331));var O=Kt;if(Kt|=4,Vx(w.current),zx(w,w.current,_,c),Kt=O,Nc(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(Gt,w)}catch{}return!0}finally{ue.p=b,V.T=m,lp(t,i)}}function cp(t,i,c){i=ri(c,i),i=Ff(t.stateNode,i,2),t=na(t,i,2),t!==null&&(ki(t,2),Yi(t))}function ln(t,i,c){if(t.tag===3)cp(t,t,c);else for(;i!==null;){if(i.tag===3){cp(i,t,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(oa===null||!oa.has(m))){t=ri(c,t),c=ux(2),m=na(i,c,2),m!==null&&(dx(c,m,i,t),ki(m,2),Yi(m));break}}i=i.return}}function h0(t,i,c){var m=t.pingCache;if(m===null){m=t.pingCache=new aC;var b=new Set;m.set(i,b)}else b=m.get(i),b===void 0&&(b=new Set,m.set(i,b));b.has(c)||(i0=!0,b.add(c),t=dC.bind(null,t,i,c),i.then(t,t))}function dC(t,i,c){var m=t.pingCache;m!==null&&m.delete(i),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,xn===t&&(Bt&c)===c&&(jn===4||jn===3&&(Bt&62914560)===Bt&&300>ft()-ad?(Kt&2)===0&&to(t,0):r0|=c,$l===Bt&&($l=0)),Yi(t)}function up(t,i){i===0&&(i=Xn()),t=Wa(t,i),t!==null&&(ki(t,i),Yi(t))}function hC(t){var i=t.memoizedState,c=0;i!==null&&(c=i.retryLane),up(t,c)}function fC(t,i){var c=0;switch(t.tag){case 31:case 13:var m=t.stateNode,b=t.memoizedState;b!==null&&(c=b.retryLane);break;case 19:m=t.stateNode;break;case 22:m=t.stateNode._retryCache;break;default:throw Error(l(314))}m!==null&&m.delete(i),up(t,c)}function mC(t,i){return Nt(t,i)}var fd=null,so=null,f0=!1,md=!1,m0=!1,da=0;function Yi(t){t!==so&&t.next===null&&(so===null?fd=so=t:so=so.next=t),md=!0,f0||(f0=!0,xC())}function Nc(t,i){if(!m0&&md){m0=!0;do for(var c=!1,m=fd;m!==null;){if(t!==0){var b=m.pendingLanes;if(b===0)var w=0;else{var _=m.suspendedLanes,O=m.pingedLanes;w=(1<<31-yt(42|t)+1)-1,w&=b&~(_&~O),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,mp(m,w))}else w=Bt,w=Ba(m,m===xn?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||rs(m,w)||(c=!0,mp(m,w));m=m.next}while(c);m0=!1}}function gC(){dp()}function dp(){md=f0=!1;var t=0;da!==0&&SC()&&(t=da);for(var i=ft(),c=null,m=fd;m!==null;){var b=m.next,w=hp(m,i);w===0?(m.next=null,c===null?fd=b:c.next=b,b===null&&(so=c)):(c=m,(t!==0||(w&3)!==0)&&(md=!0)),m=b}Jn!==0&&Jn!==5||Nc(t),da!==0&&(da=0)}function hp(t,i){for(var c=t.suspendedLanes,m=t.pingedLanes,b=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var _=31-yt(w),O=1<<_,F=b[_];F===-1?((O&c)===0||(O&m)!==0)&&(b[_]=Vo(O,i)):F<=i&&(t.expiredLanes|=O),w&=~O}if(i=xn,c=Bt,c=Ba(t,t===i?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),m=t.callbackNode,c===0||t===i&&(an===2||an===9)||t.cancelPendingCommit!==null)return m!==null&&m!==null&&je(m),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||rs(t,c)){if(i=c&-c,i===t.callbackPriority)return i;switch(m!==null&&je(m),bi(c)){case 2:case 8:c=Pe;break;case 32:c=nt;break;case 268435456:c=In;break;default:c=nt}return m=fp.bind(null,t),c=Nt(c,m),t.callbackPriority=i,t.callbackNode=c,i}return m!==null&&m!==null&&je(m),t.callbackPriority=2,t.callbackNode=null,2}function fp(t,i){if(Jn!==0&&Jn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(hd()&&t.callbackNode!==c)return null;var m=Bt;return m=Ba(t,t===xn?m:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),m===0?null:(Xx(t,m,i),hp(t,ft()),t.callbackNode!=null&&t.callbackNode===c?fp.bind(null,t):null)}function mp(t,i){if(hd())return null;Xx(t,i,!0)}function xC(){TC(function(){(Kt&6)!==0?Nt(ke,gC):dp()})}function g0(){if(da===0){var t=Hl;t===0&&(t=ka,ka<<=1,(ka&261888)===0&&(ka=256)),da=t}return da}function gp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Hr(""+t)}function xp(t,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,t.id&&c.setAttribute("form",t.id),i.parentNode.insertBefore(c,i),t=new FormData(t),c.parentNode.removeChild(c),t}function pC(t,i,c,m,b){if(i==="submit"&&c&&c.stateNode===b){var w=gp((b[rn]||null).action),_=m.submitter;_&&(i=(i=_[rn]||null)?gp(i.formAction):_.getAttribute("formAction"),i!==null&&(w=i,_=null));var O=new Qn("action","action",null,m,b);t.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(da!==0){var F=_?xp(b,_):new FormData(b);Lf(c,{pending:!0,data:F,method:b.method,action:w},null,F)}}else typeof w=="function"&&(O.preventDefault(),F=_?xp(b,_):new FormData(b),Lf(c,{pending:!0,data:F,method:b.method,action:w},w,F))},currentTarget:b}]})}}for(var x0=0;x0<$o.length;x0++){var p0=$o[x0],bC=p0.toLowerCase(),yC=p0[0].toUpperCase()+p0.slice(1);Ei(bC,"on"+yC)}Ei(_s,"onAnimationEnd"),Ei(as,"onAnimationIteration"),Ei(tn,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Kn,"onTransitionRun"),Ei(ws,"onTransitionStart"),Ei(Qr,"onTransitionCancel"),Ei(or,"onTransitionEnd"),Bs("onMouseEnter",["mouseout","mouseover"]),Bs("onMouseLeave",["mouseout","mouseover"]),Bs("onPointerEnter",["pointerout","pointerover"]),Bs("onPointerLeave",["pointerout","pointerover"]),$t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$t("onBeforeInput",["compositionend","keypress","textInput","paste"]),$t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function pp(t,i){i=(i&4)!==0;for(var c=0;c<t.length;c++){var m=t[c],b=m.event;m=m.listeners;e:{var w=void 0;if(i)for(var _=m.length-1;0<=_;_--){var O=m[_],F=O.instance,oe=O.currentTarget;if(O=O.listener,F!==w&&b.isPropagationStopped())break e;w=O,b.currentTarget=oe;try{w(b)}catch(ve){Iu(ve)}b.currentTarget=null,w=F}else for(_=0;_<m.length;_++){if(O=m[_],F=O.instance,oe=O.currentTarget,O=O.listener,F!==w&&b.isPropagationStopped())break e;w=O,b.currentTarget=oe;try{w(b)}catch(ve){Iu(ve)}b.currentTarget=null,w=F}}}}function jt(t,i){var c=i[kr];c===void 0&&(c=i[kr]=new Set);var m=t+"__bubble";c.has(m)||(bp(i,t,2,!1),c.add(m))}function b0(t,i,c){var m=0;i&&(m|=4),bp(c,t,m,i)}var gd="_reactListening"+Math.random().toString(36).slice(2);function y0(t){if(!t[gd]){t[gd]=!0,Ee.forEach(function(c){c!=="selectionchange"&&(vC.has(c)||b0(c,!1,t),b0(c,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[gd]||(i[gd]=!0,b0("selectionchange",!1,i))}}function bp(t,i,c,m){switch(Wp(i)){case 2:var b=XC;break;case 8:b=QC;break;default:b=j0}c=b.bind(null,i,c,t),b=void 0,!qo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(b=!0),m?b!==void 0?t.addEventListener(i,c,{capture:!0,passive:b}):t.addEventListener(i,c,!0):b!==void 0?t.addEventListener(i,c,{passive:b}):t.addEventListener(i,c,!1)}function v0(t,i,c,m,b){var w=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var _=m.tag;if(_===3||_===4){var O=m.stateNode.containerInfo;if(O===b)break;if(_===4)for(_=m.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===b)return;_=_.return}for(;O!==null;){if(_=Rn(O),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){m=w=_;continue e}O=O.parentNode}}m=m.return}bu(function(){var oe=w,ve=Yo(c),Ne=[];e:{var he=Tu.get(t);if(he!==void 0){var pe=Qn,qe=t;switch(t){case"keypress":if(Pi(c)===0)break e;case"keydown":case"keyup":pe=Ol;break;case"focusin":qe="focus",pe=Qo;break;case"focusout":qe="blur",pe=Qo;break;case"beforeblur":case"afterblur":pe=Qo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Zt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Qh;break;case _s:case as:case tn:pe=At;break;case or:pe=ir;break;case"scroll":case"scrollend":pe=yu;break;case"wheel":pe=Zh;break;case"copy":case"cut":case"paste":pe=Dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=en;break;case"toggle":case"beforetoggle":pe=Ko}var dt=(i&4)!==0,dn=!dt&&(t==="scroll"||t==="scrollend"),$=dt?he!==null?he+"Capture":null:he;dt=[];for(var K=oe,le;K!==null;){var we=K;if(le=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||le===null||$===null||(we=xt(K,$),we!=null&&dt.push(Ec(K,we,le))),dn)break;K=K.return}0<dt.length&&(he=new pe(he,qe,null,c,ve),Ne.push({event:he,listeners:dt}))}}if((i&7)===0){e:{if(he=t==="mouseover"||t==="pointerover",pe=t==="mouseout"||t==="pointerout",he&&c!==Ua&&(qe=c.relatedTarget||c.fromElement)&&(Rn(qe)||qe[ks]))break e;if((pe||he)&&(he=ve.window===ve?ve:(he=ve.ownerDocument)?he.defaultView||he.parentWindow:window,pe?(qe=c.relatedTarget||c.toElement,pe=oe,qe=qe?Rn(qe):null,qe!==null&&(dn=g(qe),dt=qe.tag,qe!==dn||dt!==5&&dt!==27&&dt!==6)&&(qe=null)):(pe=null,qe=oe),pe!==qe)){if(dt=Zt,we="onMouseLeave",$="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(dt=en,we="onPointerLeave",$="onPointerEnter",K="pointer"),dn=pe==null?he:Br(pe),le=qe==null?he:Br(qe),he=new dt(we,K+"leave",pe,c,ve),he.target=dn,he.relatedTarget=le,we=null,Rn(ve)===oe&&(dt=new dt($,K+"enter",qe,c,ve),dt.target=le,dt.relatedTarget=dn,we=dt),dn=we,pe&&qe)t:{for(dt=wC,$=pe,K=qe,le=0,we=$;we;we=dt(we))le++;we=0;for(var ot=K;ot;ot=dt(ot))we++;for(;0<le-we;)$=dt($),le--;for(;0<we-le;)K=dt(K),we--;for(;le--;){if($===K||K!==null&&$===K.alternate){dt=$;break t}$=dt($),K=dt(K)}dt=null}else dt=null;pe!==null&&yp(Ne,he,pe,dt,!1),qe!==null&&dn!==null&&yp(Ne,dn,qe,dt,!0)}}e:{if(he=oe?Br(oe):window,pe=he.nodeName&&he.nodeName.toLowerCase(),pe==="select"||pe==="input"&&he.type==="file")var Wt=Fs;else if(Jo(he))if(_u)Wt=d;else{Wt=a;var $e=n}else pe=he.nodeName,!pe||pe.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?oe&&fn(oe.elementType)&&(Wt=Fs):Wt=o;if(Wt&&(Wt=Wt(t,oe))){zs(Ne,Wt,c,ve);break e}$e&&$e(t,he,oe),t==="focusout"&&oe&&he.type==="number"&&oe.memoizedProps.value!=null&&L(he,"number",he.value)}switch($e=oe?Br(oe):window,t){case"focusin":(Jo($e)||$e.contentEditable==="true")&&(H=$e,q=oe,ie=null);break;case"focusout":ie=q=H=null;break;case"mousedown":me=!0;break;case"contextmenu":case"mouseup":case"dragend":me=!1,Me(Ne,c,ve);break;case"selectionchange":if(P)break;case"keydown":case"keyup":Me(Ne,c,ve)}var St;if(Ha)e:{switch(t){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Xr?Su(t,c)&&(Pt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Pt="onCompositionStart");Pt&&(Au&&c.locale!=="ko"&&(Xr||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Xr&&(St=Vr()):(Ni=ve,Ci="value"in Ni?Ni.value:Ni.textContent,Xr=!0)),$e=xd(oe,Pt),0<$e.length&&(Pt=new Nu(Pt,t,null,c,ve),Ne.push({event:Pt,listeners:$e}),St?Pt.data=St:(St=Wr(c),St!==null&&(Pt.data=St)))),(St=Eu?Fi(t,c):Ll(t,c))&&(Pt=xd(oe,"onBeforeInput"),0<Pt.length&&($e=new Nu("onBeforeInput","beforeinput",null,c,ve),Ne.push({event:$e,listeners:Pt}),$e.data=St)),pC(Ne,t,oe,c,ve)}pp(Ne,i)})}function Ec(t,i,c){return{instance:t,listener:i,currentTarget:c}}function xd(t,i){for(var c=i+"Capture",m=[];t!==null;){var b=t,w=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||w===null||(b=xt(t,c),b!=null&&m.unshift(Ec(t,b,w)),b=xt(t,i),b!=null&&m.push(Ec(t,b,w))),t.tag===3)return m;t=t.return}return[]}function wC(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function yp(t,i,c,m,b){for(var w=i._reactName,_=[];c!==null&&c!==m;){var O=c,F=O.alternate,oe=O.stateNode;if(O=O.tag,F!==null&&F===m)break;O!==5&&O!==26&&O!==27||oe===null||(F=oe,b?(oe=xt(c,w),oe!=null&&_.unshift(Ec(c,oe,F))):b||(oe=xt(c,w),oe!=null&&_.push(Ec(c,oe,F)))),c=c.return}_.length!==0&&t.push({event:i,listeners:_})}var NC=/\r\n?/g,CC=/\u0000|\uFFFD/g;function vp(t){return(typeof t=="string"?t:""+t).replace(NC,`
`).replace(CC,"")}function wp(t,i){return i=vp(i),vp(t)===i}function un(t,i,c,m,b,w){switch(c){case"children":typeof m=="string"?i==="body"||i==="textarea"&&m===""||Fr(t,m):(typeof m=="number"||typeof m=="bigint")&&i!=="body"&&Fr(t,""+m);break;case"className":Ur(t,"class",m);break;case"tabIndex":Ur(t,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ur(t,c,m);break;case"style":at(t,m,w);break;case"data":if(i!=="object"){Ur(t,"data",m);break}case"src":case"href":if(m===""&&(i!=="a"||c!=="href")){t.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){t.removeAttribute(c);break}m=Hr(""+m),t.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&un(t,i,"name",b.name,b,null),un(t,i,"formEncType",b.formEncType,b,null),un(t,i,"formMethod",b.formMethod,b,null),un(t,i,"formTarget",b.formTarget,b,null)):(un(t,i,"encType",b.encType,b,null),un(t,i,"method",b.method,b,null),un(t,i,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){t.removeAttribute(c);break}m=Hr(""+m),t.setAttribute(c,m);break;case"onClick":m!=null&&(t.onclick=As);break;case"onScroll":m!=null&&jt("scroll",t);break;case"onScrollEnd":m!=null&&jt("scrollend",t);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(l(61));if(c=m.__html,c!=null){if(b.children!=null)throw Error(l(60));t.innerHTML=c}}break;case"multiple":t.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":t.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){t.removeAttribute("xlink:href");break}c=Hr(""+m),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?t.setAttribute(c,""+m):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":m===!0?t.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?t.setAttribute(c,m):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?t.setAttribute(c,m):t.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?t.removeAttribute(c):t.setAttribute(c,m);break;case"popover":jt("beforetoggle",t),jt("toggle",t),Pr(t,"popover",m);break;case"xlinkActuate":Ps(t,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ps(t,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ps(t,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ps(t,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ps(t,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ps(t,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ps(t,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ps(t,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ps(t,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Pr(t,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=pu.get(c)||c,Pr(t,c,m))}}function w0(t,i,c,m,b,w){switch(c){case"style":at(t,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(l(61));if(c=m.__html,c!=null){if(b.children!=null)throw Error(l(60));t.innerHTML=c}}break;case"children":typeof m=="string"?Fr(t,m):(typeof m=="number"||typeof m=="bigint")&&Fr(t,""+m);break;case"onScroll":m!=null&&jt("scroll",t);break;case"onScrollEnd":m!=null&&jt("scrollend",t);break;case"onClick":m!=null&&(t.onclick=As);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xu.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(b=c.endsWith("Capture"),i=c.slice(2,b?c.length-7:void 0),w=t[rn]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(i,w,b),typeof m=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(i,m,b);break e}c in t?t[c]=m:m===!0?t.setAttribute(c,""):Pr(t,c,m)}}}function us(t,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",t),jt("load",t);var m=!1,b=!1,w;for(w in c)if(c.hasOwnProperty(w)){var _=c[w];if(_!=null)switch(w){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:un(t,i,w,_,c,null)}}b&&un(t,i,"srcSet",c.srcSet,c,null),m&&un(t,i,"src",c.src,c,null);return;case"input":jt("invalid",t);var O=w=_=b=null,F=null,oe=null;for(m in c)if(c.hasOwnProperty(m)){var ve=c[m];if(ve!=null)switch(m){case"name":b=ve;break;case"type":_=ve;break;case"checked":F=ve;break;case"defaultChecked":oe=ve;break;case"value":w=ve;break;case"defaultValue":O=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(l(137,i));break;default:un(t,i,m,ve,c,null)}}re(t,w,O,F,oe,_,b,!1);return;case"select":jt("invalid",t),m=_=w=null;for(b in c)if(c.hasOwnProperty(b)&&(O=c[b],O!=null))switch(b){case"value":w=O;break;case"defaultValue":_=O;break;case"multiple":m=O;default:un(t,i,b,O,c,null)}i=w,c=_,t.multiple=!!m,i!=null?Qe(t,!!m,i,!1):c!=null&&Qe(t,!!m,c,!0);return;case"textarea":jt("invalid",t),w=b=m=null;for(_ in c)if(c.hasOwnProperty(_)&&(O=c[_],O!=null))switch(_){case"value":m=O;break;case"defaultValue":b=O;break;case"children":w=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(l(91));break;default:un(t,i,_,O,c,null)}ys(t,m,b,w);return;case"option":for(F in c)c.hasOwnProperty(F)&&(m=c[F],m!=null)&&(F==="selected"?t.selected=m&&typeof m!="function"&&typeof m!="symbol":un(t,i,F,m,c,null));return;case"dialog":jt("beforetoggle",t),jt("toggle",t),jt("cancel",t),jt("close",t);break;case"iframe":case"object":jt("load",t);break;case"video":case"audio":for(m=0;m<Cc.length;m++)jt(Cc[m],t);break;case"image":jt("error",t),jt("load",t);break;case"details":jt("toggle",t);break;case"embed":case"source":case"link":jt("error",t),jt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in c)if(c.hasOwnProperty(oe)&&(m=c[oe],m!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,i));default:un(t,i,oe,m,c,null)}return;default:if(fn(i)){for(ve in c)c.hasOwnProperty(ve)&&(m=c[ve],m!==void 0&&w0(t,i,ve,m,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(m=c[O],m!=null&&un(t,i,O,m,c,null))}function EC(t,i,c,m){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,w=null,_=null,O=null,F=null,oe=null,ve=null;for(pe in c){var Ne=c[pe];if(c.hasOwnProperty(pe)&&Ne!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":F=Ne;default:m.hasOwnProperty(pe)||un(t,i,pe,null,m,Ne)}}for(var he in m){var pe=m[he];if(Ne=c[he],m.hasOwnProperty(he)&&(pe!=null||Ne!=null))switch(he){case"type":w=pe;break;case"name":b=pe;break;case"checked":oe=pe;break;case"defaultChecked":ve=pe;break;case"value":_=pe;break;case"defaultValue":O=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(l(137,i));break;default:pe!==Ne&&un(t,i,he,pe,m,Ne)}}Hn(t,_,O,F,oe,ve,w,b);return;case"select":pe=_=O=he=null;for(w in c)if(F=c[w],c.hasOwnProperty(w)&&F!=null)switch(w){case"value":break;case"multiple":pe=F;default:m.hasOwnProperty(w)||un(t,i,w,null,m,F)}for(b in m)if(w=m[b],F=c[b],m.hasOwnProperty(b)&&(w!=null||F!=null))switch(b){case"value":he=w;break;case"defaultValue":O=w;break;case"multiple":_=w;default:w!==F&&un(t,i,b,w,m,F)}i=O,c=_,m=pe,he!=null?Qe(t,!!c,he,!1):!!m!=!!c&&(i!=null?Qe(t,!!c,i,!0):Qe(t,!!c,c?[]:"",!1));return;case"textarea":pe=he=null;for(O in c)if(b=c[O],c.hasOwnProperty(O)&&b!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:un(t,i,O,null,m,b)}for(_ in m)if(b=m[_],w=c[_],m.hasOwnProperty(_)&&(b!=null||w!=null))switch(_){case"value":he=b;break;case"defaultValue":pe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(l(91));break;default:b!==w&&un(t,i,_,b,m,w)}Bn(t,he,pe);return;case"option":for(var qe in c)he=c[qe],c.hasOwnProperty(qe)&&he!=null&&!m.hasOwnProperty(qe)&&(qe==="selected"?t.selected=!1:un(t,i,qe,null,m,he));for(F in m)he=m[F],pe=c[F],m.hasOwnProperty(F)&&he!==pe&&(he!=null||pe!=null)&&(F==="selected"?t.selected=he&&typeof he!="function"&&typeof he!="symbol":un(t,i,F,he,m,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in c)he=c[dt],c.hasOwnProperty(dt)&&he!=null&&!m.hasOwnProperty(dt)&&un(t,i,dt,null,m,he);for(oe in m)if(he=m[oe],pe=c[oe],m.hasOwnProperty(oe)&&he!==pe&&(he!=null||pe!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(l(137,i));break;default:un(t,i,oe,he,m,pe)}return;default:if(fn(i)){for(var dn in c)he=c[dn],c.hasOwnProperty(dn)&&he!==void 0&&!m.hasOwnProperty(dn)&&w0(t,i,dn,void 0,m,he);for(ve in m)he=m[ve],pe=c[ve],!m.hasOwnProperty(ve)||he===pe||he===void 0&&pe===void 0||w0(t,i,ve,he,m,pe);return}}for(var $ in c)he=c[$],c.hasOwnProperty($)&&he!=null&&!m.hasOwnProperty($)&&un(t,i,$,null,m,he);for(Ne in m)he=m[Ne],pe=c[Ne],!m.hasOwnProperty(Ne)||he===pe||he==null&&pe==null||un(t,i,Ne,he,m,pe)}function Np(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AC(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,c=performance.getEntriesByType("resource"),m=0;m<c.length;m++){var b=c[m],w=b.transferSize,_=b.initiatorType,O=b.duration;if(w&&O&&Np(_)){for(_=0,O=b.responseEnd,m+=1;m<c.length;m++){var F=c[m],oe=F.startTime;if(oe>O)break;var ve=F.transferSize,Ne=F.initiatorType;ve&&Np(Ne)&&(F=F.responseEnd,_+=ve*(F<O?1:(O-oe)/(F-oe)))}if(--m,i+=8*(w+_)/(b.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var N0=null,C0=null;function pd(t){return t.nodeType===9?t:t.ownerDocument}function Cp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ep(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function E0(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var A0=null;function SC(){var t=window.event;return t&&t.type==="popstate"?t===A0?!1:(A0=t,!0):(A0=null,!1)}var Ap=typeof setTimeout=="function"?setTimeout:void 0,_C=typeof clearTimeout=="function"?clearTimeout:void 0,Sp=typeof Promise=="function"?Promise:void 0,TC=typeof queueMicrotask=="function"?queueMicrotask:typeof Sp<"u"?function(t){return Sp.resolve(null).then(t).catch(IC)}:Ap;function IC(t){setTimeout(function(){throw t})}function ha(t){return t==="head"}function _p(t,i){var c=i,m=0;do{var b=c.nextSibling;if(t.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"||c==="/&"){if(m===0){t.removeChild(b),lo(i);return}m--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")m++;else if(c==="html")Ac(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Ac(c);for(var w=c.firstChild;w;){var _=w.nextSibling,O=w.nodeName;w[Pa]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=_}}else c==="body"&&Ac(t.ownerDocument.body);c=b}while(c);lo(i)}function Tp(t,i){var c=t;t=0;do{var m=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=m}while(c)}function S0(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":S0(c),Es(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function RC(t,i,c,m){for(;t.nodeType===1;){var b=c;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!m&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(m){if(!t[Pa])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==b.rel||t.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||t.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||t.getAttribute("title")!==(b.title==null?null:b.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(b.src==null?null:b.src)||t.getAttribute("type")!==(b.type==null?null:b.type)||t.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var w=b.name==null?null:""+b.name;if(b.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=ui(t.nextSibling),t===null)break}return null}function MC(t,i,c){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ui(t.nextSibling),t===null))return null;return t}function Ip(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ui(t.nextSibling),t===null))return null;return t}function _0(t){return t.data==="$?"||t.data==="$~"}function T0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function DC(t,i){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||c.readyState!=="loading")i();else{var m=function(){i(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),t._reactRetry=m}}function ui(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var I0=null;function Rp(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(i===0)return ui(t.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}t=t.nextSibling}return null}function Mp(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return t;i--}else c!=="/$"&&c!=="/&"||i++}t=t.previousSibling}return null}function Dp(t,i,c){switch(i=pd(c),t){case"html":if(t=i.documentElement,!t)throw Error(l(452));return t;case"head":if(t=i.head,!t)throw Error(l(453));return t;case"body":if(t=i.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Ac(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Es(t)}var di=new Map,Op=new Set;function bd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Cr=ue.d;ue.d={f:OC,r:jC,D:LC,C:kC,L:BC,m:PC,X:zC,S:UC,M:FC};function OC(){var t=Cr.f(),i=cd();return t||i}function jC(t){var i=Qt(t);i!==null&&i.tag===5&&i.type==="form"?Zg(i):Cr.r(t)}var io=typeof document>"u"?null:document;function jp(t,i,c){var m=io;if(m&&typeof i=="string"&&i){var b=It(i);b='link[rel="'+t+'"][href="'+b+'"]',typeof c=="string"&&(b+='[crossorigin="'+c+'"]'),Op.has(b)||(Op.add(b),t={rel:t,crossOrigin:c,href:i},m.querySelector(b)===null&&(i=m.createElement("link"),us(i,"link",t),Mn(i),m.head.appendChild(i)))}}function LC(t){Cr.D(t),jp("dns-prefetch",t,null)}function kC(t,i){Cr.C(t,i),jp("preconnect",t,i)}function BC(t,i,c){Cr.L(t,i,c);var m=io;if(m&&t&&i){var b='link[rel="preload"][as="'+It(i)+'"]';i==="image"&&c&&c.imageSrcSet?(b+='[imagesrcset="'+It(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(b+='[imagesizes="'+It(c.imageSizes)+'"]')):b+='[href="'+It(t)+'"]';var w=b;switch(i){case"style":w=ro(t);break;case"script":w=ao(t)}di.has(w)||(t=T({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:t,as:i},c),di.set(w,t),m.querySelector(b)!==null||i==="style"&&m.querySelector(Sc(w))||i==="script"&&m.querySelector(_c(w))||(i=m.createElement("link"),us(i,"link",t),Mn(i),m.head.appendChild(i)))}}function PC(t,i){Cr.m(t,i);var c=io;if(c&&t){var m=i&&typeof i.as=="string"?i.as:"script",b='link[rel="modulepreload"][as="'+It(m)+'"][href="'+It(t)+'"]',w=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=ao(t)}if(!di.has(w)&&(t=T({rel:"modulepreload",href:t},i),di.set(w,t),c.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(_c(w)))return}m=c.createElement("link"),us(m,"link",t),Mn(m),c.head.appendChild(m)}}}function UC(t,i,c){Cr.S(t,i,c);var m=io;if(m&&t){var b=bs(m).hoistableStyles,w=ro(t);i=i||"default";var _=b.get(w);if(!_){var O={loading:0,preload:null};if(_=m.querySelector(Sc(w)))O.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},c),(c=di.get(w))&&R0(t,c);var F=_=m.createElement("link");Mn(F),us(F,"link",t),F._p=new Promise(function(oe,ve){F.onload=oe,F.onerror=ve}),F.addEventListener("load",function(){O.loading|=1}),F.addEventListener("error",function(){O.loading|=2}),O.loading|=4,yd(_,i,m)}_={type:"stylesheet",instance:_,count:1,state:O},b.set(w,_)}}}function zC(t,i){Cr.X(t,i);var c=io;if(c&&t){var m=bs(c).hoistableScripts,b=ao(t),w=m.get(b);w||(w=c.querySelector(_c(b)),w||(t=T({src:t,async:!0},i),(i=di.get(b))&&M0(t,i),w=c.createElement("script"),Mn(w),us(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function FC(t,i){Cr.M(t,i);var c=io;if(c&&t){var m=bs(c).hoistableScripts,b=ao(t),w=m.get(b);w||(w=c.querySelector(_c(b)),w||(t=T({src:t,async:!0,type:"module"},i),(i=di.get(b))&&M0(t,i),w=c.createElement("script"),Mn(w),us(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(b,w))}}function Lp(t,i,c,m){var b=(b=Le.current)?bd(b):null;if(!b)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=ro(c.href),c=bs(b).hoistableStyles,m=c.get(i),m||(m={type:"style",instance:null,count:0,state:null},c.set(i,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=ro(c.href);var w=bs(b).hoistableStyles,_=w.get(t);if(_||(b=b.ownerDocument||b,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,_),(w=b.querySelector(Sc(t)))&&!w._p&&(_.instance=w,_.state.loading=5),di.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},di.set(t,c),w||HC(b,t,c,_.state))),i&&m===null)throw Error(l(528,""));return _}if(i&&m!==null)throw Error(l(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ao(c),c=bs(b).hoistableScripts,m=c.get(i),m||(m={type:"script",instance:null,count:0,state:null},c.set(i,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function ro(t){return'href="'+It(t)+'"'}function Sc(t){return'link[rel="stylesheet"]['+t+"]"}function kp(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function HC(t,i,c,m){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?m.loading=1:(i=t.createElement("link"),m.preload=i,i.addEventListener("load",function(){return m.loading|=1}),i.addEventListener("error",function(){return m.loading|=2}),us(i,"link",c),Mn(i),t.head.appendChild(i))}function ao(t){return'[src="'+It(t)+'"]'}function _c(t){return"script[async]"+t}function Bp(t,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var m=t.querySelector('style[data-href~="'+It(c.href)+'"]');if(m)return i.instance=m,Mn(m),m;var b=T({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(t.ownerDocument||t).createElement("style"),Mn(m),us(m,"style",b),yd(m,c.precedence,t),i.instance=m;case"stylesheet":b=ro(c.href);var w=t.querySelector(Sc(b));if(w)return i.state.loading|=4,i.instance=w,Mn(w),w;m=kp(c),(b=di.get(b))&&R0(m,b),w=(t.ownerDocument||t).createElement("link"),Mn(w);var _=w;return _._p=new Promise(function(O,F){_.onload=O,_.onerror=F}),us(w,"link",m),i.state.loading|=4,yd(w,c.precedence,t),i.instance=w;case"script":return w=ao(c.src),(b=t.querySelector(_c(w)))?(i.instance=b,Mn(b),b):(m=c,(b=di.get(w))&&(m=T({},c),M0(m,b)),t=t.ownerDocument||t,b=t.createElement("script"),Mn(b),us(b,"link",m),t.head.appendChild(b),i.instance=b);case"void":return null;default:throw Error(l(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(m=i.instance,i.state.loading|=4,yd(m,c.precedence,t));return i.instance}function yd(t,i,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,w=b,_=0;_<m.length;_++){var O=m[_];if(O.dataset.precedence===i)w=O;else if(w!==b)break}w?w.parentNode.insertBefore(t,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(t,i.firstChild))}function R0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function M0(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var vd=null;function Pp(t,i,c){if(vd===null){var m=new Map,b=vd=new Map;b.set(c,m)}else b=vd,m=b.get(c),m||(m=new Map,b.set(c,m));if(m.has(t))return m;for(m.set(t,null),c=c.getElementsByTagName(t),b=0;b<c.length;b++){var w=c[b];if(!(w[Pa]||w[kn]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var _=w.getAttribute(i)||"";_=t+_;var O=m.get(_);O?O.push(w):m.set(_,[w])}}return m}function Up(t,i,c){t=t.ownerDocument||t,t.head.insertBefore(c,i==="title"?t.querySelector("head > title"):null)}function VC(t,i,c){if(c===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function zp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function GC(t,i,c,m){if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=ro(m.href),w=i.querySelector(Sc(b));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=wd.bind(t),i.then(t,t)),c.state.loading|=4,c.instance=w,Mn(w);return}w=i.ownerDocument||i,m=kp(m),(b=di.get(b))&&R0(m,b),w=w.createElement("link"),Mn(w);var _=w;_._p=new Promise(function(O,F){_.onload=O,_.onerror=F}),us(w,"link",m),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=wd.bind(t),i.addEventListener("load",c),i.addEventListener("error",c))}}var D0=0;function YC(t,i){return t.stylesheets&&t.count===0&&Cd(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var m=setTimeout(function(){if(t.stylesheets&&Cd(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+i);0<t.imgBytes&&D0===0&&(D0=62500*AC());var b=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cd(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>D0?50:800)+i);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function wd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nd=null;function Cd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nd=new Map,i.forEach(qC,t),Nd=null,wd.call(t))}function qC(t,i){if(!(i.state.loading&4)){var c=Nd.get(t);if(c)var m=c.get(null);else{c=new Map,Nd.set(t,c);for(var b=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<b.length;w++){var _=b[w];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),m=_)}m&&c.set(null,m)}b=i.instance,_=b.getAttribute("data-precedence"),w=c.get(_)||m,w===m&&c.set(null,b),c.set(_,b),this.count++,m=wd.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),w?w.parentNode.insertBefore(b,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(b,t.firstChild)),i.state.loading|=4}}var Tc={$$typeof:W,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function WC(t,i,c,m,b,w,_,O,F){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Li(0),this.hiddenUpdates=Li(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=w,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Fp(t,i,c,m,b,w,_,O,F,oe,ve,Ne){return t=new WC(t,i,c,_,F,oe,ve,Ne,O),i=1,w===!0&&(i|=24),w=Hs(3,null,null,i),t.current=w,w.stateNode=t,i=df(),i.refCount++,t.pooledCache=i,i.refCount++,w.memoizedState={element:m,isDehydrated:c,cache:i},gf(w),t}function Hp(t){return t?(t=Bl,t):Bl}function Vp(t,i,c,m,b,w){b=Hp(b),m.context===null?m.context=b:m.pendingContext=b,m=ta(i),m.payload={element:c},w=w===void 0?null:w,w!==null&&(m.callback=w),c=na(t,m,i),c!==null&&(Ds(c,t,i),ac(c,t,i))}function Gp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<i?c:i}}function O0(t,i){Gp(t,i),(t=t.alternate)&&Gp(t,i)}function Yp(t){if(t.tag===13||t.tag===31){var i=Wa(t,67108864);i!==null&&Ds(i,t,67108864),O0(t,67108864)}}function qp(t){if(t.tag===13||t.tag===31){var i=Ws();i=es(i);var c=Wa(t,i);c!==null&&Ds(c,t,i),O0(t,i)}}var Ed=!0;function XC(t,i,c,m){var b=V.T;V.T=null;var w=ue.p;try{ue.p=2,j0(t,i,c,m)}finally{ue.p=w,V.T=b}}function QC(t,i,c,m){var b=V.T;V.T=null;var w=ue.p;try{ue.p=8,j0(t,i,c,m)}finally{ue.p=w,V.T=b}}function j0(t,i,c,m){if(Ed){var b=L0(m);if(b===null)v0(t,i,m,Ad,c),Xp(t,m);else if(KC(b,t,i,c,m))m.stopPropagation();else if(Xp(t,m),i&4&&-1<ZC.indexOf(t)){for(;b!==null;){var w=Qt(b);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var _=ji(w.pendingLanes);if(_!==0){var O=w;for(O.pendingLanes|=2,O.entangledLanes|=2;_;){var F=1<<31-yt(_);O.entanglements[1]|=F,_&=~F}Yi(w),(Kt&6)===0&&(ld=ft()+500,Nc(0))}}break;case 31:case 13:O=Wa(w,2),O!==null&&Ds(O,w,2),cd(),O0(w,2)}if(w=L0(m),w===null&&v0(t,i,m,Ad,c),w===b)break;b=w}b!==null&&m.stopPropagation()}else v0(t,i,m,null,c)}}function L0(t){return t=Yo(t),k0(t)}var Ad=null;function k0(t){if(Ad=null,t=Rn(t),t!==null){var i=g(t);if(i===null)t=null;else{var c=i.tag;if(c===13){if(t=y(i),t!==null)return t;t=null}else if(c===31){if(t=C(i),t!==null)return t;t=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ad=t,null}function Wp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ee()){case ke:return 2;case Pe:return 8;case nt:case lt:return 32;case In:return 268435456;default:return 32}default:return 32}}var B0=!1,fa=null,ma=null,ga=null,Ic=new Map,Rc=new Map,xa=[],ZC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xp(t,i){switch(t){case"focusin":case"focusout":fa=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":Ic.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(i.pointerId)}}function Mc(t,i,c,m,b,w){return t===null||t.nativeEvent!==w?(t={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[b]},i!==null&&(i=Qt(i),i!==null&&Yp(i)),t):(t.eventSystemFlags|=m,i=t.targetContainers,b!==null&&i.indexOf(b)===-1&&i.push(b),t)}function KC(t,i,c,m,b){switch(i){case"focusin":return fa=Mc(fa,t,i,c,m,b),!0;case"dragenter":return ma=Mc(ma,t,i,c,m,b),!0;case"mouseover":return ga=Mc(ga,t,i,c,m,b),!0;case"pointerover":var w=b.pointerId;return Ic.set(w,Mc(Ic.get(w)||null,t,i,c,m,b)),!0;case"gotpointercapture":return w=b.pointerId,Rc.set(w,Mc(Rc.get(w)||null,t,i,c,m,b)),!0}return!1}function Qp(t){var i=Rn(t.target);if(i!==null){var c=g(i);if(c!==null){if(i=c.tag,i===13){if(i=y(c),i!==null){t.blockedOn=i,Fe(t.priority,function(){qp(c)});return}}else if(i===31){if(i=C(c),i!==null){t.blockedOn=i,Fe(t.priority,function(){qp(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sd(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var c=L0(t.nativeEvent);if(c===null){c=t.nativeEvent;var m=new c.constructor(c.type,c);Ua=m,c.target.dispatchEvent(m),Ua=null}else return i=Qt(c),i!==null&&Yp(i),t.blockedOn=c,!1;i.shift()}return!0}function Zp(t,i,c){Sd(t)&&c.delete(i)}function JC(){B0=!1,fa!==null&&Sd(fa)&&(fa=null),ma!==null&&Sd(ma)&&(ma=null),ga!==null&&Sd(ga)&&(ga=null),Ic.forEach(Zp),Rc.forEach(Zp)}function _d(t,i){t.blockedOn===i&&(t.blockedOn=null,B0||(B0=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,JC)))}var Td=null;function Kp(t){Td!==t&&(Td=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Td===t&&(Td=null);for(var i=0;i<t.length;i+=3){var c=t[i],m=t[i+1],b=t[i+2];if(typeof m!="function"){if(k0(m||c)===null)continue;break}var w=Qt(c);w!==null&&(t.splice(i,3),i-=3,Lf(w,{pending:!0,data:b,method:c.method,action:m},m,b))}}))}function lo(t){function i(F){return _d(F,t)}fa!==null&&_d(fa,t),ma!==null&&_d(ma,t),ga!==null&&_d(ga,t),Ic.forEach(i),Rc.forEach(i);for(var c=0;c<xa.length;c++){var m=xa[c];m.blockedOn===t&&(m.blockedOn=null)}for(;0<xa.length&&(c=xa[0],c.blockedOn===null);)Qp(c),c.blockedOn===null&&xa.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var b=c[m],w=c[m+1],_=b[rn]||null;if(typeof w=="function")_||Kp(c);else if(_){var O=null;if(w&&w.hasAttribute("formAction")){if(b=w,_=w[rn]||null)O=_.formAction;else if(k0(b)!==null)continue}else O=_.action;typeof O=="function"?c[m+1]=O:(c.splice(m,3),m-=3),Kp(c)}}}function Jp(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(_){return b=_})},focusReset:"manual",scroll:"manual"})}function i(){b!==null&&(b(),b=null),m||setTimeout(c,20)}function c(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){m=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),b!==null&&(b(),b=null)}}}function P0(t){this._internalRoot=t}Id.prototype.render=P0.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(l(409));var c=i.current,m=Ws();Vp(c,m,t,i,null,null)},Id.prototype.unmount=P0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Vp(t.current,2,null,t,null,null),cd(),i[ks]=null}};function Id(t){this._internalRoot=t}Id.prototype.unstable_scheduleHydration=function(t){if(t){var i=xs();t={blockedOn:null,target:t,priority:i};for(var c=0;c<xa.length&&i!==0&&i<xa[c].priority;c++);xa.splice(c,0,t),c===0&&Qp(t)}};var $p=e.version;if($p!=="19.2.3")throw Error(l(527,$p,"19.2.3"));ue.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=N(i),t=t!==null?I(t):null,t=t===null?null:t.stateNode,t};var $C={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Gt=Rd.inject($C),Re=Rd}catch{}}return Dc.createRoot=function(t,i){if(!h(t))throw Error(l(299));var c=!1,m="",b=ax,w=lx,_=ox;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onUncaughtError!==void 0&&(b=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Fp(t,1,!1,null,null,c,m,null,b,w,_,Jp),t[ks]=i.current,y0(t),new P0(i)},Dc.hydrateRoot=function(t,i,c){if(!h(t))throw Error(l(299));var m=!1,b="",w=ax,_=lx,O=ox,F=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(b=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),i=Fp(t,1,!0,i,c??null,m,b,F,w,_,O,Jp),i.context=Hp(null),c=i.current,m=Ws(),m=es(m),b=ta(m),b.callback=null,na(c,b,m),c=m,i.current.lanes=c,ki(i,c),Yi(i),t[ks]=i.current,y0(t),new Id(i)},Dc.version="19.2.3",Dc}var a2;function n3(){if(a2)return F0.exports;a2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),F0.exports=t3(),F0.exports}var s3=n3();function l2(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function ko(...r){return e=>{let s=!1;const l=r.map(h=>{const g=l2(h,e);return!s&&typeof g=="function"&&(s=!0),g});if(s)return()=>{for(let h=0;h<l.length;h++){const g=l[h];typeof g=="function"?g():l2(r[h],null)}}}}function vl(...r){return j.useCallback(ko(...r),r)}var i3=Symbol.for("react.lazy"),oh=l1[" use ".trim().toString()];function r3(r){return typeof r=="object"&&r!==null&&"then"in r}function Py(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===i3&&"_payload"in r&&r3(r._payload)}function a3(r){const e=o3(r),s=j.forwardRef((l,h)=>{let{children:g,...y}=l;Py(g)&&typeof oh=="function"&&(g=oh(g._payload));const C=j.Children.toArray(g),A=C.find(u3);if(A){const N=A.props.children,I=C.map(T=>T===A?j.Children.count(N)>1?j.Children.only(null):j.isValidElement(N)?N.props.children:null:T);return u.jsx(e,{...y,ref:h,children:j.isValidElement(N)?j.cloneElement(N,void 0,I):null})}return u.jsx(e,{...y,ref:h,children:g})});return s.displayName=`${r}.Slot`,s}var l3=a3("Slot");function o3(r){const e=j.forwardRef((s,l)=>{let{children:h,...g}=s;if(Py(h)&&typeof oh=="function"&&(h=oh(h._payload)),j.isValidElement(h)){const y=h3(h),C=d3(g,h.props);return h.type!==j.Fragment&&(C.ref=l?ko(l,y):y),j.cloneElement(h,C)}return j.Children.count(h)>1?j.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var c3=Symbol("radix.slottable");function u3(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===c3}function d3(r,e){const s={...e};for(const l in e){const h=r[l],g=e[l];/^on[A-Z]/.test(l)?h&&g?s[l]=(...C)=>{const A=g(...C);return h(...C),A}:h&&(s[l]=h):l==="style"?s[l]={...h,...g}:l==="className"&&(s[l]=[h,g].filter(Boolean).join(" "))}return{...r,...s}}function h3(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}function Uy(r){var e,s,l="";if(typeof r=="string"||typeof r=="number")l+=r;else if(typeof r=="object")if(Array.isArray(r)){var h=r.length;for(e=0;e<h;e++)r[e]&&(s=Uy(r[e]))&&(l&&(l+=" "),l+=s)}else for(s in r)r[s]&&(l&&(l+=" "),l+=s);return l}function zy(){for(var r,e,s=0,l="",h=arguments.length;s<h;s++)(r=arguments[s])&&(e=Uy(r))&&(l&&(l+=" "),l+=e);return l}const o2=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,c2=zy,Fy=(r,e)=>s=>{var l;if(e?.variants==null)return c2(r,s?.class,s?.className);const{variants:h,defaultVariants:g}=e,y=Object.keys(h).map(N=>{const I=s?.[N],T=g?.[N];if(I===null)return null;const k=o2(I)||o2(T);return h[N][k]}),C=s&&Object.entries(s).reduce((N,I)=>{let[T,k]=I;return k===void 0||(N[T]=k),N},{}),A=e==null||(l=e.compoundVariants)===null||l===void 0?void 0:l.reduce((N,I)=>{let{class:T,className:k,...U}=I;return Object.entries(U).every(X=>{let[z,ae]=X;return Array.isArray(ae)?ae.includes({...g,...C}[z]):{...g,...C}[z]===ae})?[...N,T,k]:N},[]);return c2(r,y,A,s?.class,s?.className)},f3=(r,e)=>{const s=new Array(r.length+e.length);for(let l=0;l<r.length;l++)s[l]=r[l];for(let l=0;l<e.length;l++)s[r.length+l]=e[l];return s},m3=(r,e)=>({classGroupId:r,validator:e}),Hy=(r=new Map,e=null,s)=>({nextPart:r,validators:e,classGroupId:s}),ch="-",u2=[],g3="arbitrary..",x3=r=>{const e=b3(r),{conflictingClassGroups:s,conflictingClassGroupModifiers:l}=r;return{getClassGroupId:y=>{if(y.startsWith("[")&&y.endsWith("]"))return p3(y);const C=y.split(ch),A=C[0]===""&&C.length>1?1:0;return Vy(C,A,e)},getConflictingClassGroupIds:(y,C)=>{if(C){const A=l[y],N=s[y];return A?N?f3(N,A):A:N||u2}return s[y]||u2}}},Vy=(r,e,s)=>{if(r.length-e===0)return s.classGroupId;const h=r[e],g=s.nextPart.get(h);if(g){const N=Vy(r,e+1,g);if(N)return N}const y=s.validators;if(y===null)return;const C=e===0?r.join(ch):r.slice(e).join(ch),A=y.length;for(let N=0;N<A;N++){const I=y[N];if(I.validator(C))return I.classGroupId}},p3=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=r.slice(1,-1),s=e.indexOf(":"),l=e.slice(0,s);return l?g3+l:void 0})(),b3=r=>{const{theme:e,classGroups:s}=r;return y3(s,e)},y3=(r,e)=>{const s=Hy();for(const l in r){const h=r[l];m1(h,s,l,e)}return s},m1=(r,e,s,l)=>{const h=r.length;for(let g=0;g<h;g++){const y=r[g];v3(y,e,s,l)}},v3=(r,e,s,l)=>{if(typeof r=="string"){w3(r,e,s);return}if(typeof r=="function"){N3(r,e,s,l);return}C3(r,e,s,l)},w3=(r,e,s)=>{const l=r===""?e:Gy(e,r);l.classGroupId=s},N3=(r,e,s,l)=>{if(E3(r)){m1(r(l),e,s,l);return}e.validators===null&&(e.validators=[]),e.validators.push(m3(s,r))},C3=(r,e,s,l)=>{const h=Object.entries(r),g=h.length;for(let y=0;y<g;y++){const[C,A]=h[y];m1(A,Gy(e,C),s,l)}},Gy=(r,e)=>{let s=r;const l=e.split(ch),h=l.length;for(let g=0;g<h;g++){const y=l[g];let C=s.nextPart.get(y);C||(C=Hy(),s.nextPart.set(y,C)),s=C}return s},E3=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,A3=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,s=Object.create(null),l=Object.create(null);const h=(g,y)=>{s[g]=y,e++,e>r&&(e=0,l=s,s=Object.create(null))};return{get(g){let y=s[g];if(y!==void 0)return y;if((y=l[g])!==void 0)return h(g,y),y},set(g,y){g in s?s[g]=y:h(g,y)}}},Bm="!",d2=":",S3=[],h2=(r,e,s,l,h)=>({modifiers:r,hasImportantModifier:e,baseClassName:s,maybePostfixModifierPosition:l,isExternal:h}),_3=r=>{const{prefix:e,experimentalParseClassName:s}=r;let l=h=>{const g=[];let y=0,C=0,A=0,N;const I=h.length;for(let z=0;z<I;z++){const ae=h[z];if(y===0&&C===0){if(ae===d2){g.push(h.slice(A,z)),A=z+1;continue}if(ae==="/"){N=z;continue}}ae==="["?y++:ae==="]"?y--:ae==="("?C++:ae===")"&&C--}const T=g.length===0?h:h.slice(A);let k=T,U=!1;T.endsWith(Bm)?(k=T.slice(0,-1),U=!0):T.startsWith(Bm)&&(k=T.slice(1),U=!0);const X=N&&N>A?N-A:void 0;return h2(g,U,k,X)};if(e){const h=e+d2,g=l;l=y=>y.startsWith(h)?g(y.slice(h.length)):h2(S3,!1,y,void 0,!0)}if(s){const h=l;l=g=>s({className:g,parseClassName:h})}return l},T3=r=>{const e=new Map;return r.orderSensitiveModifiers.forEach((s,l)=>{e.set(s,1e6+l)}),s=>{const l=[];let h=[];for(let g=0;g<s.length;g++){const y=s[g],C=y[0]==="[",A=e.has(y);C||A?(h.length>0&&(h.sort(),l.push(...h),h=[]),l.push(y)):h.push(y)}return h.length>0&&(h.sort(),l.push(...h)),l}},I3=r=>({cache:A3(r.cacheSize),parseClassName:_3(r),sortModifiers:T3(r),...x3(r)}),R3=/\s+/,M3=(r,e)=>{const{parseClassName:s,getClassGroupId:l,getConflictingClassGroupIds:h,sortModifiers:g}=e,y=[],C=r.trim().split(R3);let A="";for(let N=C.length-1;N>=0;N-=1){const I=C[N],{isExternal:T,modifiers:k,hasImportantModifier:U,baseClassName:X,maybePostfixModifierPosition:z}=s(I);if(T){A=I+(A.length>0?" "+A:A);continue}let ae=!!z,fe=l(ae?X.substring(0,z):X);if(!fe){if(!ae){A=I+(A.length>0?" "+A:A);continue}if(fe=l(X),!fe){A=I+(A.length>0?" "+A:A);continue}ae=!1}const B=k.length===0?"":k.length===1?k[0]:g(k).join(":"),W=U?B+Bm:B,te=W+fe;if(y.indexOf(te)>-1)continue;y.push(te);const ne=h(fe,ae);for(let ce=0;ce<ne.length;++ce){const G=ne[ce];y.push(W+G)}A=I+(A.length>0?" "+A:A)}return A},D3=(...r)=>{let e=0,s,l,h="";for(;e<r.length;)(s=r[e++])&&(l=Yy(s))&&(h&&(h+=" "),h+=l);return h},Yy=r=>{if(typeof r=="string")return r;let e,s="";for(let l=0;l<r.length;l++)r[l]&&(e=Yy(r[l]))&&(s&&(s+=" "),s+=e);return s},O3=(r,...e)=>{let s,l,h,g;const y=A=>{const N=e.reduce((I,T)=>T(I),r());return s=I3(N),l=s.cache.get,h=s.cache.set,g=C,C(A)},C=A=>{const N=l(A);if(N)return N;const I=M3(A,s);return h(A,I),I};return g=y,(...A)=>g(D3(...A))},j3=[],$n=r=>{const e=s=>s[r]||j3;return e.isThemeGetter=!0,e},qy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Wy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,L3=/^\d+\/\d+$/,k3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,B3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,U3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,z3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oo=r=>L3.test(r),Rt=r=>!!r&&!Number.isNaN(Number(r)),ba=r=>!!r&&Number.isInteger(Number(r)),G0=r=>r.endsWith("%")&&Rt(r.slice(0,-1)),Ar=r=>k3.test(r),F3=()=>!0,H3=r=>B3.test(r)&&!P3.test(r),Xy=()=>!1,V3=r=>U3.test(r),G3=r=>z3.test(r),Y3=r=>!We(r)&&!Xe(r),q3=r=>Bo(r,Ky,Xy),We=r=>qy.test(r),al=r=>Bo(r,Jy,H3),Y0=r=>Bo(r,K3,Rt),f2=r=>Bo(r,Qy,Xy),W3=r=>Bo(r,Zy,G3),Dd=r=>Bo(r,$y,V3),Xe=r=>Wy.test(r),Oc=r=>Po(r,Jy),X3=r=>Po(r,J3),m2=r=>Po(r,Qy),Q3=r=>Po(r,Ky),Z3=r=>Po(r,Zy),Od=r=>Po(r,$y,!0),Bo=(r,e,s)=>{const l=qy.exec(r);return l?l[1]?e(l[1]):s(l[2]):!1},Po=(r,e,s=!1)=>{const l=Wy.exec(r);return l?l[1]?e(l[1]):s:!1},Qy=r=>r==="position"||r==="percentage",Zy=r=>r==="image"||r==="url",Ky=r=>r==="length"||r==="size"||r==="bg-size",Jy=r=>r==="length",K3=r=>r==="number",J3=r=>r==="family-name",$y=r=>r==="shadow",$3=()=>{const r=$n("color"),e=$n("font"),s=$n("text"),l=$n("font-weight"),h=$n("tracking"),g=$n("leading"),y=$n("breakpoint"),C=$n("container"),A=$n("spacing"),N=$n("radius"),I=$n("shadow"),T=$n("inset-shadow"),k=$n("text-shadow"),U=$n("drop-shadow"),X=$n("blur"),z=$n("perspective"),ae=$n("aspect"),fe=$n("ease"),B=$n("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ne=()=>[...te(),Xe,We],ce=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],J=()=>[Xe,We,A],Q=()=>[oo,"full","auto",...J()],Ce=()=>[ba,"none","subgrid",Xe,We],Z=()=>["auto",{span:["full",ba,Xe,We]},ba,Xe,We],se=()=>[ba,"auto",Xe,We],ge=()=>["auto","min","max","fr",Xe,We],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Y=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...J()],ue=()=>[oo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...J()],ye=()=>[r,Xe,We],tt=()=>[...te(),m2,f2,{position:[Xe,We]}],Ke=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ht=()=>["auto","cover","contain",Q3,q3,{size:[Xe,We]}],ze=()=>[G0,Oc,al],Be=()=>["","none","full",N,Xe,We],_e=()=>["",Rt,Oc,al],st=()=>["solid","dashed","dotted","double"],Le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ye=()=>[Rt,G0,m2,f2],rt=()=>["","none",X,Xe,We],wt=()=>["none",Rt,Xe,We],Et=()=>["none",Rt,Xe,We],pt=()=>[Rt,Xe,We],it=()=>[oo,"full",...J()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ar],breakpoint:[Ar],color:[F3],container:[Ar],"drop-shadow":[Ar],ease:["in","out","in-out"],font:[Y3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ar],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ar],shadow:[Ar],spacing:["px",Rt],text:[Ar],"text-shadow":[Ar],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oo,We,Xe,ae]}],container:["container"],columns:[{columns:[Rt,We,Xe,C]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ne()}],overflow:[{overflow:ce()}],"overflow-x":[{"overflow-x":ce()}],"overflow-y":[{"overflow-y":ce()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Q()}],"inset-x":[{"inset-x":Q()}],"inset-y":[{"inset-y":Q()}],start:[{start:Q()}],end:[{end:Q()}],top:[{top:Q()}],right:[{right:Q()}],bottom:[{bottom:Q()}],left:[{left:Q()}],visibility:["visible","invisible","collapse"],z:[{z:[ba,"auto",Xe,We]}],basis:[{basis:[oo,"full","auto",C,...J()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Rt,oo,"auto","initial","none",We]}],grow:[{grow:["",Rt,Xe,We]}],shrink:[{shrink:["",Rt,Xe,We]}],order:[{order:[ba,"first","last","none",Xe,We]}],"grid-cols":[{"grid-cols":Ce()}],"col-start-end":[{col:Z()}],"col-start":[{"col-start":se()}],"col-end":[{"col-end":se()}],"grid-rows":[{"grid-rows":Ce()}],"row-start-end":[{row:Z()}],"row-start":[{"row-start":se()}],"row-end":[{"row-end":se()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ge()}],"auto-rows":[{"auto-rows":ge()}],gap:[{gap:J()}],"gap-x":[{"gap-x":J()}],"gap-y":[{"gap-y":J()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...Y(),"normal"]}],"justify-self":[{"justify-self":["auto",...Y()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...Y(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Y(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...Y(),"baseline"]}],"place-self":[{"place-self":["auto",...Y()]}],p:[{p:J()}],px:[{px:J()}],py:[{py:J()}],ps:[{ps:J()}],pe:[{pe:J()}],pt:[{pt:J()}],pr:[{pr:J()}],pb:[{pb:J()}],pl:[{pl:J()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":J()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":J()}],"space-y-reverse":["space-y-reverse"],size:[{size:ue()}],w:[{w:[C,"screen",...ue()]}],"min-w":[{"min-w":[C,"screen","none",...ue()]}],"max-w":[{"max-w":[C,"screen","none","prose",{screen:[y]},...ue()]}],h:[{h:["screen","lh",...ue()]}],"min-h":[{"min-h":["screen","lh","none",...ue()]}],"max-h":[{"max-h":["screen","lh",...ue()]}],"font-size":[{text:["base",s,Oc,al]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[l,Xe,Y0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",G0,We]}],"font-family":[{font:[X3,We,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[h,Xe,We]}],"line-clamp":[{"line-clamp":[Rt,"none",Xe,Y0]}],leading:[{leading:[g,...J()]}],"list-image":[{"list-image":["none",Xe,We]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Xe,We]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ye()}],"text-color":[{text:ye()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...st(),"wavy"]}],"text-decoration-thickness":[{decoration:[Rt,"from-font","auto",Xe,al]}],"text-decoration-color":[{decoration:ye()}],"underline-offset":[{"underline-offset":[Rt,"auto",Xe,We]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:J()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe,We]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe,We]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:tt()}],"bg-repeat":[{bg:Ke()}],"bg-size":[{bg:ht()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ba,Xe,We],radial:["",Xe,We],conic:[ba,Xe,We]},Z3,W3]}],"bg-color":[{bg:ye()}],"gradient-from-pos":[{from:ze()}],"gradient-via-pos":[{via:ze()}],"gradient-to-pos":[{to:ze()}],"gradient-from":[{from:ye()}],"gradient-via":[{via:ye()}],"gradient-to":[{to:ye()}],rounded:[{rounded:Be()}],"rounded-s":[{"rounded-s":Be()}],"rounded-e":[{"rounded-e":Be()}],"rounded-t":[{"rounded-t":Be()}],"rounded-r":[{"rounded-r":Be()}],"rounded-b":[{"rounded-b":Be()}],"rounded-l":[{"rounded-l":Be()}],"rounded-ss":[{"rounded-ss":Be()}],"rounded-se":[{"rounded-se":Be()}],"rounded-ee":[{"rounded-ee":Be()}],"rounded-es":[{"rounded-es":Be()}],"rounded-tl":[{"rounded-tl":Be()}],"rounded-tr":[{"rounded-tr":Be()}],"rounded-br":[{"rounded-br":Be()}],"rounded-bl":[{"rounded-bl":Be()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...st(),"hidden","none"]}],"divide-style":[{divide:[...st(),"hidden","none"]}],"border-color":[{border:ye()}],"border-color-x":[{"border-x":ye()}],"border-color-y":[{"border-y":ye()}],"border-color-s":[{"border-s":ye()}],"border-color-e":[{"border-e":ye()}],"border-color-t":[{"border-t":ye()}],"border-color-r":[{"border-r":ye()}],"border-color-b":[{"border-b":ye()}],"border-color-l":[{"border-l":ye()}],"divide-color":[{divide:ye()}],"outline-style":[{outline:[...st(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Rt,Xe,We]}],"outline-w":[{outline:["",Rt,Oc,al]}],"outline-color":[{outline:ye()}],shadow:[{shadow:["","none",I,Od,Dd]}],"shadow-color":[{shadow:ye()}],"inset-shadow":[{"inset-shadow":["none",T,Od,Dd]}],"inset-shadow-color":[{"inset-shadow":ye()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ye()}],"ring-offset-w":[{"ring-offset":[Rt,al]}],"ring-offset-color":[{"ring-offset":ye()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":ye()}],"text-shadow":[{"text-shadow":["none",k,Od,Dd]}],"text-shadow-color":[{"text-shadow":ye()}],opacity:[{opacity:[Rt,Xe,We]}],"mix-blend":[{"mix-blend":[...Le(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Le()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Rt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ye()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ye()}],"mask-image-linear-from-color":[{"mask-linear-from":ye()}],"mask-image-linear-to-color":[{"mask-linear-to":ye()}],"mask-image-t-from-pos":[{"mask-t-from":Ye()}],"mask-image-t-to-pos":[{"mask-t-to":Ye()}],"mask-image-t-from-color":[{"mask-t-from":ye()}],"mask-image-t-to-color":[{"mask-t-to":ye()}],"mask-image-r-from-pos":[{"mask-r-from":Ye()}],"mask-image-r-to-pos":[{"mask-r-to":Ye()}],"mask-image-r-from-color":[{"mask-r-from":ye()}],"mask-image-r-to-color":[{"mask-r-to":ye()}],"mask-image-b-from-pos":[{"mask-b-from":Ye()}],"mask-image-b-to-pos":[{"mask-b-to":Ye()}],"mask-image-b-from-color":[{"mask-b-from":ye()}],"mask-image-b-to-color":[{"mask-b-to":ye()}],"mask-image-l-from-pos":[{"mask-l-from":Ye()}],"mask-image-l-to-pos":[{"mask-l-to":Ye()}],"mask-image-l-from-color":[{"mask-l-from":ye()}],"mask-image-l-to-color":[{"mask-l-to":ye()}],"mask-image-x-from-pos":[{"mask-x-from":Ye()}],"mask-image-x-to-pos":[{"mask-x-to":Ye()}],"mask-image-x-from-color":[{"mask-x-from":ye()}],"mask-image-x-to-color":[{"mask-x-to":ye()}],"mask-image-y-from-pos":[{"mask-y-from":Ye()}],"mask-image-y-to-pos":[{"mask-y-to":Ye()}],"mask-image-y-from-color":[{"mask-y-from":ye()}],"mask-image-y-to-color":[{"mask-y-to":ye()}],"mask-image-radial":[{"mask-radial":[Xe,We]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ye()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ye()}],"mask-image-radial-from-color":[{"mask-radial-from":ye()}],"mask-image-radial-to-color":[{"mask-radial-to":ye()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":te()}],"mask-image-conic-pos":[{"mask-conic":[Rt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ye()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ye()}],"mask-image-conic-from-color":[{"mask-conic-from":ye()}],"mask-image-conic-to-color":[{"mask-conic-to":ye()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:tt()}],"mask-repeat":[{mask:Ke()}],"mask-size":[{mask:ht()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Xe,We]}],filter:[{filter:["","none",Xe,We]}],blur:[{blur:rt()}],brightness:[{brightness:[Rt,Xe,We]}],contrast:[{contrast:[Rt,Xe,We]}],"drop-shadow":[{"drop-shadow":["","none",U,Od,Dd]}],"drop-shadow-color":[{"drop-shadow":ye()}],grayscale:[{grayscale:["",Rt,Xe,We]}],"hue-rotate":[{"hue-rotate":[Rt,Xe,We]}],invert:[{invert:["",Rt,Xe,We]}],saturate:[{saturate:[Rt,Xe,We]}],sepia:[{sepia:["",Rt,Xe,We]}],"backdrop-filter":[{"backdrop-filter":["","none",Xe,We]}],"backdrop-blur":[{"backdrop-blur":rt()}],"backdrop-brightness":[{"backdrop-brightness":[Rt,Xe,We]}],"backdrop-contrast":[{"backdrop-contrast":[Rt,Xe,We]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Rt,Xe,We]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Rt,Xe,We]}],"backdrop-invert":[{"backdrop-invert":["",Rt,Xe,We]}],"backdrop-opacity":[{"backdrop-opacity":[Rt,Xe,We]}],"backdrop-saturate":[{"backdrop-saturate":[Rt,Xe,We]}],"backdrop-sepia":[{"backdrop-sepia":["",Rt,Xe,We]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":J()}],"border-spacing-x":[{"border-spacing-x":J()}],"border-spacing-y":[{"border-spacing-y":J()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Xe,We]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Rt,"initial",Xe,We]}],ease:[{ease:["linear","initial",fe,Xe,We]}],delay:[{delay:[Rt,Xe,We]}],animate:[{animate:["none",B,Xe,We]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[z,Xe,We]}],"perspective-origin":[{"perspective-origin":ne()}],rotate:[{rotate:wt()}],"rotate-x":[{"rotate-x":wt()}],"rotate-y":[{"rotate-y":wt()}],"rotate-z":[{"rotate-z":wt()}],scale:[{scale:Et()}],"scale-x":[{"scale-x":Et()}],"scale-y":[{"scale-y":Et()}],"scale-z":[{"scale-z":Et()}],"scale-3d":["scale-3d"],skew:[{skew:pt()}],"skew-x":[{"skew-x":pt()}],"skew-y":[{"skew-y":pt()}],transform:[{transform:[Xe,We,"","none","gpu","cpu"]}],"transform-origin":[{origin:ne()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:ye()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ye()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe,We]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":J()}],"scroll-mx":[{"scroll-mx":J()}],"scroll-my":[{"scroll-my":J()}],"scroll-ms":[{"scroll-ms":J()}],"scroll-me":[{"scroll-me":J()}],"scroll-mt":[{"scroll-mt":J()}],"scroll-mr":[{"scroll-mr":J()}],"scroll-mb":[{"scroll-mb":J()}],"scroll-ml":[{"scroll-ml":J()}],"scroll-p":[{"scroll-p":J()}],"scroll-px":[{"scroll-px":J()}],"scroll-py":[{"scroll-py":J()}],"scroll-ps":[{"scroll-ps":J()}],"scroll-pe":[{"scroll-pe":J()}],"scroll-pt":[{"scroll-pt":J()}],"scroll-pr":[{"scroll-pr":J()}],"scroll-pb":[{"scroll-pb":J()}],"scroll-pl":[{"scroll-pl":J()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe,We]}],fill:[{fill:["none",...ye()]}],"stroke-w":[{stroke:[Rt,Oc,al,Y0]}],stroke:[{stroke:["none",...ye()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eA=O3($3);function Ls(...r){return eA(zy(r))}const tA=Fy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),et=j.forwardRef(({className:r,variant:e,size:s,asChild:l=!1,...h},g)=>{const y=l?l3:"button";return u.jsx(y,{className:Ls(tA({variant:e,size:s,className:r})),ref:g,...h})});et.displayName="Button";const nA=Fy("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ze({className:r,variant:e,...s}){return u.jsx("div",{className:Ls(nA({variant:e}),r),...s})}function sA(){const r=Da(),[e,s]=j.useState(""),[l,h]=j.useState(0),[g,y]=j.useState(!1),[C,A]=j.useState(0),N=[{text:"Welcome to",lang:"en"},{text:"",lang:"hi"}],I=[{text:"AI-Powered Clinical Insights",icon:vo},{text:"Real-time Patient Monitoring",icon:Fn},{text:"Smart Medication Management",icon:wy},{text:"Automated Drug Interaction Detection Possible",icon:gi},{text:"Advanced Lab Analysis",icon:e2},{text:"Predictive Risk Assessment",icon:r1},{text:"Pending Compliant",icon:To},{text:"IoT-Enabled Bedside Guardian",icon:_h},{text:"Clinical Decision Support",icon:nn},{text:"Multi-lingual Support",icon:tE}];return j.useEffect(()=>{const T=N[l].text,k=g?50:150,U=g?500:2e3;if(!g&&e===T){const z=setTimeout(()=>y(!0),U);return()=>clearTimeout(z)}if(g&&e===""){y(!1),h(z=>(z+1)%N.length);return}const X=setTimeout(()=>{s(z=>g?T.substring(0,z.length-1):T.substring(0,z.length+1))},k);return()=>clearTimeout(X)},[e,l,g]),j.useEffect(()=>{const T=setInterval(()=>{A(k=>(k+1)%I.length)},2e3);return()=>clearInterval(T)},[]),u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 overflow-hidden relative",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[u.jsx(Oe.div,{className:"absolute w-96 h-96 bg-gradient-to-r from-blue-400/30 to-cyan-400/30 rounded-full blur-3xl",animate:{x:[0,100,0,-100,0],y:[0,-100,-200,-100,0],scale:[1,1.2,1,.8,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},style:{top:"10%",left:"70%"}}),u.jsx(Oe.div,{className:"absolute w-[500px] h-[500px] bg-gradient-to-r from-purple-400/25 to-pink-400/25 rounded-full blur-3xl",animate:{x:[0,-150,0,150,0],y:[0,100,0,-50,0],scale:[1,.8,1.2,1,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut",delay:2},style:{bottom:"10%",left:"5%"}}),u.jsx(Oe.div,{className:"absolute w-[450px] h-[450px] bg-gradient-to-r from-indigo-400/30 to-blue-400/30 rounded-full blur-3xl",animate:{x:[0,-80,0,80,0],y:[0,150,0,-150,0],scale:[1,1.3,1,1.1,1]},transition:{duration:22,repeat:1/0,ease:"easeInOut",delay:5},style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),u.jsx(Oe.div,{className:"absolute w-[380px] h-[380px] bg-gradient-to-r from-cyan-400/20 to-teal-400/20 rounded-full blur-3xl",animate:{x:[0,120,0,-120,0],y:[0,-80,0,80,0],scale:[1,1.1,1,.9,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut",delay:3},style:{top:"20%",left:"10%"}}),u.jsx(Oe.div,{className:"absolute w-[420px] h-[420px] bg-gradient-to-r from-rose-400/25 to-orange-400/25 rounded-full blur-3xl",animate:{x:[0,-100,0,100,0],y:[0,120,0,-120,0],scale:[1,.9,1.2,1,1]},transition:{duration:23,repeat:1/0,ease:"easeInOut",delay:7},style:{bottom:"20%",right:"10%"}})]}),u.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[u.jsx(Oe.header,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"p-4 sm:p-6",children:u.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Oe.div,{className:"bg-gradient-to-br from-blue-600 to-indigo-700 p-2 sm:p-3 rounded-xl shadow-lg",animate:{boxShadow:["0 10px 30px rgba(59, 130, 246, 0.3)","0 10px 40px rgba(99, 102, 241, 0.5)","0 10px 30px rgba(59, 130, 246, 0.3)"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:u.jsx(Fn,{className:"text-white",size:28})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900",children:"OmniGate"}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600",children:"IoT Hospital Management"})]})]}),u.jsx(et,{variant:"outline",size:"sm",className:"border-2 hover:bg-white/80 backdrop-blur-sm transition-all",children:"About"})]})}),u.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:px-6 py-8",children:u.jsx("div",{className:"max-w-5xl w-full",children:u.jsxs(Oe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"text-center",children:[u.jsxs(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"flex items-center justify-center gap-3 mb-8",children:[u.jsxs(Ze,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 text-xs flex items-center gap-2 shadow-lg",children:[u.jsx(gi,{size:14}),"Self Compliant"]}),u.jsxs(Ze,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 text-xs flex items-center gap-2 shadow-lg",children:[u.jsx(Ny,{size:14}),"Self Accredited"]}),u.jsxs(Ze,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 text-xs flex items-center gap-2 shadow-lg",children:[u.jsx(vo,{size:14}),"AI-Powered"]})]}),u.jsxs(Oe.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-bold mb-6",children:[u.jsxs(Oe.span,{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent inline-block",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:5,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"},children:[e,u.jsx(Oe.span,{className:"inline-block w-1 h-14 sm:h-20 md:h-24 bg-gradient-to-r from-blue-600 to-indigo-600 ml-2",animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0,ease:"easeInOut"}})]}),u.jsx("br",{}),u.jsx("span",{className:"text-slate-900",children:"OmniGate Hospital"})]}),u.jsxs(Oe.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-lg sm:text-xl md:text-2xl text-slate-600 max-w-3xl mx-auto px-4 mb-8",children:["Next-Generation Hospital Management System",u.jsx("br",{className:"hidden sm:block"}),u.jsx("span",{className:"text-slate-500 text-base",children:"Powered by IoT, AI & Cloud Technology"})]}),u.jsx(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"mb-12",children:u.jsx("div",{className:"inline-flex items-center gap-3 bg-white/90 backdrop-blur-md px-6 py-4 rounded-2xl shadow-2xl border-2 border-white/50 min-h-[80px]",children:u.jsx(hl,{mode:"wait",children:u.jsxs(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:.5},className:"flex items-center gap-3",children:[u.jsx(Oe.div,{className:"bg-gradient-to-br from-blue-100 to-indigo-100 p-3 rounded-xl",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:(()=>{const T=I[C].icon;return u.jsx(T,{className:"text-blue-600",size:24})})()}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:"text-xs text-slate-500 font-semibold mb-1",children:"Featured Capability"}),u.jsx("p",{className:"text-lg font-bold text-slate-900",children:I[C].text})]}),u.jsx(Oe.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:u.jsx(fl,{className:"text-yellow-500",size:20})})]},C)})})}),u.jsxs(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},children:[u.jsxs(et,{onClick:()=>r("/dashboard"),className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-700 text-white px-12 py-8 text-xl font-bold rounded-2xl shadow-2xl hover:shadow-3xl transition-all duration-300 hover:scale-105 group",children:[u.jsx(nE,{size:28,className:"mr-3 group-hover:animate-bounce"}),"Get Started",u.jsx(qd,{size:28,className:"ml-3 group-hover:translate-x-2 transition-transform"})]}),u.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"No registration required  Instant access"})]}),u.jsxs(Oe.div,{initial:{y:40,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},className:"mt-16 grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto",children:[u.jsx(jd,{icon:Fn,text:"Real-time Monitoring",color:"from-blue-500 to-cyan-500"}),u.jsx(jd,{icon:vo,text:"AI Clinical Insights",color:"from-purple-500 to-pink-500"}),u.jsx(jd,{icon:gi,text:"Drug Safety",color:"from-green-500 to-emerald-500"}),u.jsx(jd,{icon:e2,text:"Lab Analysis",color:"from-orange-500 to-red-500"})]}),u.jsxs(Oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.1},className:"mt-12 flex items-center justify-center gap-8 text-slate-600",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(nn,{className:"text-green-600",size:20}),u.jsx("span",{className:"text-sm font-semibold",children:"Secure & Encrypted"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(nn,{className:"text-green-600",size:20}),u.jsx("span",{className:"text-sm font-semibold",children:"24/7 Available"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(nn,{className:"text-green-600",size:20}),u.jsx("span",{className:"text-sm font-semibold",children:"Cloud-Based"})]})]})]})})}),u.jsx(Oe.footer,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.2},className:"p-6 text-center text-slate-500 text-sm",children:u.jsx("p",{children:" 2026 OmniGate Hospital Management System  Made in India "})})]})]})}function jd({icon:r,text:e,color:s}){return u.jsxs(Oe.div,{whileHover:{scale:1.05,y:-5},className:"bg-white/90 backdrop-blur-md rounded-xl p-4 shadow-lg hover:shadow-2xl transition-all border border-white/50",children:[u.jsx("div",{className:`bg-gradient-to-br ${s} w-12 h-12 rounded-lg flex items-center justify-center mb-3 mx-auto`,children:u.jsx(r,{className:"text-white",size:24})}),u.jsx("p",{className:"text-xs font-semibold text-slate-700",children:e})]})}const Tt=j.forwardRef(({className:r,...e},s)=>u.jsx("div",{ref:s,className:Ls("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));Tt.displayName="Card";const iA=j.forwardRef(({className:r,...e},s)=>u.jsx("div",{ref:s,className:Ls("flex flex-col space-y-1.5 p-6",r),...e}));iA.displayName="CardHeader";const rA=j.forwardRef(({className:r,...e},s)=>u.jsx("h3",{ref:s,className:Ls("text-2xl font-semibold leading-none tracking-tight",r),...e}));rA.displayName="CardTitle";const aA=j.forwardRef(({className:r,...e},s)=>u.jsx("p",{ref:s,className:Ls("text-sm text-muted-foreground",r),...e}));aA.displayName="CardDescription";const Mt=j.forwardRef(({className:r,...e},s)=>u.jsx("div",{ref:s,className:Ls("p-6 pt-0",r),...e}));Mt.displayName="CardContent";const lA=j.forwardRef(({className:r,...e},s)=>u.jsx("div",{ref:s,className:Ls("flex items-center p-6 pt-0",r),...e}));lA.displayName="CardFooter";const Je=j.forwardRef(({className:r,type:e,...s},l)=>u.jsx("input",{type:e,className:Ls("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:l,...s}));Je.displayName="Input";const hi=j.forwardRef(({className:r,...e},s)=>u.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${r||""}`,ref:s,...e}));hi.displayName="Textarea";function ev(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oA=ev,tv=new c1("auth","Firebase",ev());const uh=new Iy("@firebase/auth");function cA(r,...e){uh.logLevel<=u1.WARN&&uh.warn(`Auth (${jo}): ${r}`,...e)}function Qd(r,...e){uh.logLevel<=u1.ERROR&&uh.error(`Auth (${jo}): ${r}`,...e)}function Dr(r,...e){throw g1(r,...e)}function Ji(r,...e){return g1(r,...e)}function nv(r,e,s){const l={...oA(),[e]:s};return new c1("auth","Firebase",l).create(e,{appName:r.name})}function dl(r){return nv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g1(r,...e){if(typeof r!="string"){const s=e[0],l=[...e.slice(1)];return l[0]&&(l[0].appName=r.name),r._errorFactory.create(s,...l)}return tv.create(r,...e)}function gt(r,e,...s){if(!r)throw g1(e,...s)}function Sr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Qd(e),new Error(e)}function Or(r,e){r||Sr(e)}function Pm(){return typeof self<"u"&&self.location?.href||""}function uA(){return g2()==="http:"||g2()==="https:"}function g2(){return typeof self<"u"&&self.location?.protocol||null}function dA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uA()||ME()||"connection"in navigator)?navigator.onLine:!0}function hA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class iu{constructor(e,s){this.shortDelay=e,this.longDelay=s,Or(s>e,"Short delay should be less than long delay!"),this.isMobile=o1()||My()}get(){return dA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function x1(r,e){Or(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}class sv{static initialize(e,s,l){this.fetchImpl=e,s&&(this.headersImpl=s),l&&(this.responseImpl=l)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gA=new iu(3e4,6e4);function p1(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Uo(r,e,s,l,h={}){return iv(r,h,async()=>{let g={},y={};l&&(e==="GET"?y=l:g={body:JSON.stringify(l)});const C=Lo({key:r.config.apiKey,...y}).slice(1),A=await r._getAdditionalHeaders();A["Content-Type"]="application/json",r.languageCode&&(A["X-Firebase-Locale"]=r.languageCode);const N={method:e,headers:A,...g};return kE()||(N.referrerPolicy="no-referrer"),r.emulatorConfig&&nu(r.emulatorConfig.host)&&(N.credentials="include"),sv.fetch()(await rv(r,r.config.apiHost,s,C),N)})}async function iv(r,e,s){r._canInitEmulator=!1;const l={...fA,...e};try{const h=new pA(r),g=await Promise.race([s(),h.promise]);h.clearNetworkTimeout();const y=await g.json();if("needConfirmation"in y)throw Ld(r,"account-exists-with-different-credential",y);if(g.ok&&!("errorMessage"in y))return y;{const C=g.ok?y.errorMessage:y.error.message,[A,N]=C.split(" : ");if(A==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(r,"credential-already-in-use",y);if(A==="EMAIL_EXISTS")throw Ld(r,"email-already-in-use",y);if(A==="USER_DISABLED")throw Ld(r,"user-disabled",y);const I=l[A]||A.toLowerCase().replace(/[_\s]+/g,"-");if(N)throw nv(r,I,N);Dr(r,I)}}catch(h){if(h instanceof d1)throw h;Dr(r,"network-request-failed",{message:String(h)})}}async function xA(r,e,s,l,h={}){const g=await Uo(r,e,s,l,h);return"mfaPendingCredential"in g&&Dr(r,"multi-factor-auth-required",{_serverResponse:g}),g}async function rv(r,e,s,l){const h=`${e}${s}?${l}`,g=r,y=g.config.emulator?x1(r.config,h):`${r.config.apiScheme}://${h}`;return mA.includes(s)&&(await g._persistenceManagerAvailable,g._getPersistenceType()==="COOKIE")?g._getPersistence()._getFinalTarget(y).toString():y}class pA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,l)=>{this.timer=setTimeout(()=>l(Ji(this.auth,"network-request-failed")),gA.get())})}}function Ld(r,e,s){const l={appName:r.name};s.email&&(l.email=s.email),s.phoneNumber&&(l.phoneNumber=s.phoneNumber);const h=Ji(r,e,l);return h.customData._tokenResponse=s,h}async function bA(r,e){return Uo(r,"POST","/v1/accounts:delete",e)}async function dh(r,e){return Uo(r,"POST","/v1/accounts:lookup",e)}function Gc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yA(r,e=!1){const s=Oa(r),l=await s.getIdToken(e),h=b1(l);gt(h&&h.exp&&h.auth_time&&h.iat,s.auth,"internal-error");const g=typeof h.firebase=="object"?h.firebase:void 0,y=g?.sign_in_provider;return{claims:h,token:l,authTime:Gc(q0(h.auth_time)),issuedAtTime:Gc(q0(h.iat)),expirationTime:Gc(q0(h.exp)),signInProvider:y||null,signInSecondFactor:g?.sign_in_second_factor||null}}function q0(r){return Number(r)*1e3}function b1(r){const[e,s,l]=r.split(".");if(e===void 0||s===void 0||l===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const h=OE(s);return h?JSON.parse(h):(Qd("Failed to decode base64 JWT payload"),null)}catch(h){return Qd("Caught error parsing JWT payload as JSON",h?.toString()),null}}function x2(r){const e=b1(r);return gt(e,"internal-error"),gt(typeof e.exp<"u","internal-error"),gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Kc(r,e,s=!1){if(s)return e;try{return await e}catch(l){throw l instanceof d1&&vA(l)&&r.auth.currentUser===r&&await r.auth.signOut(),l}}function vA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class wA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Um{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hh(r){const e=r.auth,s=await r.getIdToken(),l=await Kc(r,dh(e,{idToken:s}));gt(l?.users.length,e,"internal-error");const h=l.users[0];r._notifyReloadListener(h);const g=h.providerUserInfo?.length?av(h.providerUserInfo):[],y=CA(r.providerData,g),C=r.isAnonymous,A=!(r.email&&h.passwordHash)&&!y?.length,N=C?A:!1,I={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:y,metadata:new Um(h.createdAt,h.lastLoginAt),isAnonymous:N};Object.assign(r,I)}async function NA(r){const e=Oa(r);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CA(r,e){return[...r.filter(l=>!e.some(h=>h.providerId===l.providerId)),...e]}function av(r){return r.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}async function EA(r,e){const s=await iv(r,{},async()=>{const l=Lo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:g}=r.config,y=await rv(r,h,"/v1/token",`key=${g}`),C=await r._getAdditionalHeaders();C["Content-Type"]="application/x-www-form-urlencoded";const A={method:"POST",headers:C,body:l};return r.emulatorConfig&&nu(r.emulatorConfig.host)&&(A.credentials="include"),sv.fetch()(y,A)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function AA(r,e){return Uo(r,"POST","/v2/accounts:revokeToken",p1(r,e))}class No{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken<"u","internal-error"),gt(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):x2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const s=x2(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:l,refreshToken:h,expiresIn:g}=await EA(e,s);this.updateTokensAndExpiration(l,h,Number(g))}updateTokensAndExpiration(e,s,l){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+l*1e3}static fromJSON(e,s){const{refreshToken:l,accessToken:h,expirationTime:g}=s,y=new No;return l&&(gt(typeof l=="string","internal-error",{appName:e}),y.refreshToken=l),h&&(gt(typeof h=="string","internal-error",{appName:e}),y.accessToken=h),g&&(gt(typeof g=="number","internal-error",{appName:e}),y.expirationTime=g),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new No,this.toJSON())}_performRefresh(){return Sr("not implemented")}}function ya(r,e){gt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ri{constructor({uid:e,auth:s,stsTokenManager:l,...h}){this.providerId="firebase",this.proactiveRefresh=new wA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new Um(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const s=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return gt(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return yA(this,e)}reload(){return NA(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let l=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),l=!0),s&&await hh(this),await this.auth._persistUserIfCurrent(this),l&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xi(this.auth.app))return Promise.reject(dl(this.auth));const e=await this.getIdToken();return await Kc(this,bA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const l=s.displayName??void 0,h=s.email??void 0,g=s.phoneNumber??void 0,y=s.photoURL??void 0,C=s.tenantId??void 0,A=s._redirectEventId??void 0,N=s.createdAt??void 0,I=s.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:U,providerData:X,stsTokenManager:z}=s;gt(T&&z,e,"internal-error");const ae=No.fromJSON(this.name,z);gt(typeof T=="string",e,"internal-error"),ya(l,e.name),ya(h,e.name),gt(typeof k=="boolean",e,"internal-error"),gt(typeof U=="boolean",e,"internal-error"),ya(g,e.name),ya(y,e.name),ya(C,e.name),ya(A,e.name),ya(N,e.name),ya(I,e.name);const fe=new Ri({uid:T,auth:e,email:h,emailVerified:k,displayName:l,isAnonymous:U,photoURL:y,phoneNumber:g,tenantId:C,stsTokenManager:ae,createdAt:N,lastLoginAt:I});return X&&Array.isArray(X)&&(fe.providerData=X.map(B=>({...B}))),A&&(fe._redirectEventId=A),fe}static async _fromIdTokenResponse(e,s,l=!1){const h=new No;h.updateFromServerResponse(s);const g=new Ri({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l});return await hh(g),g}static async _fromGetAccountInfoResponse(e,s,l){const h=s.users[0];gt(h.localId!==void 0,"internal-error");const g=h.providerUserInfo!==void 0?av(h.providerUserInfo):[],y=!(h.email&&h.passwordHash)&&!g?.length,C=new No;C.updateFromIdToken(l);const A=new Ri({uid:h.localId,auth:e,stsTokenManager:C,isAnonymous:y}),N={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:g,metadata:new Um(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!g?.length};return Object.assign(A,N),A}}const p2=new Map;function _r(r){Or(r instanceof Function,"Expected a class definition");let e=p2.get(r);return e?(Or(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,p2.set(r,e),e)}class lv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}lv.type="NONE";const b2=lv;function Zd(r,e,s){return`firebase:${r}:${e}:${s}`}class Co{constructor(e,s,l){this.persistence=e,this.auth=s,this.userKey=l;const{config:h,name:g}=this.auth;this.fullUserKey=Zd(this.userKey,h.apiKey,g),this.fullPersistenceKey=Zd("persistence",h.apiKey,g),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await dh(this.auth,{idToken:e}).catch(()=>{});return s?Ri._fromGetAccountInfoResponse(this.auth,s,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,l="authUser"){if(!s.length)return new Co(_r(b2),e,l);const h=(await Promise.all(s.map(async N=>{if(await N._isAvailable())return N}))).filter(N=>N);let g=h[0]||_r(b2);const y=Zd(l,e.config.apiKey,e.name);let C=null;for(const N of s)try{const I=await N._get(y);if(I){let T;if(typeof I=="string"){const k=await dh(e,{idToken:I}).catch(()=>{});if(!k)break;T=await Ri._fromGetAccountInfoResponse(e,k,I)}else T=Ri._fromJSON(e,I);N!==g&&(C=T),g=N;break}}catch{}const A=h.filter(N=>N._shouldAllowMigration);return!g._shouldAllowMigration||!A.length?new Co(g,e,l):(g=A[0],C&&await g._set(y,C.toJSON()),await Promise.all(s.map(async N=>{if(N!==g)try{await N._remove(y)}catch{}})),new Co(g,e,l))}}function y2(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ov(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fv(e))return"Blackberry";if(mv(e))return"Webos";if(cv(e))return"Safari";if((e.includes("chrome/")||uv(e))&&!e.includes("edge/"))return"Chrome";if(hv(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,l=r.match(s);if(l?.length===2)return l[1]}return"Other"}function ov(r=Js()){return/firefox\//i.test(r)}function cv(r=Js()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uv(r=Js()){return/crios\//i.test(r)}function dv(r=Js()){return/iemobile/i.test(r)}function hv(r=Js()){return/android/i.test(r)}function fv(r=Js()){return/blackberry/i.test(r)}function mv(r=Js()){return/webos/i.test(r)}function y1(r=Js()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function SA(r=Js()){return y1(r)&&!!window.navigator?.standalone}function _A(){return LE()&&document.documentMode===10}function gv(r=Js()){return y1(r)||hv(r)||mv(r)||fv(r)||/windows phone/i.test(r)||dv(r)}function xv(r,e=[]){let s;switch(r){case"Browser":s=y2(Js());break;case"Worker":s=`${y2(Js())}-${r}`;break;default:s=r}const l=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${jo}/${l}`}class TA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const l=g=>new Promise((y,C)=>{try{const A=e(g);y(A)}catch(A){C(A)}});l.onAbort=s,this.queue.push(l);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const l of this.queue)await l(e),l.onAbort&&s.push(l.onAbort)}catch(l){s.reverse();for(const h of s)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:l?.message})}}}async function IA(r,e={}){return Uo(r,"GET","/v2/passwordPolicy",p1(r,e))}const RA=6;class MA{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??RA,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const l=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;l&&(s.meetsMinPasswordLength=e.length>=l),h&&(s.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let l;for(let h=0;h<e.length;h++)l=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(s,l>="a"&&l<="z",l>="A"&&l<="Z",l>="0"&&l<="9",this.allowedNonAlphanumericCharacters.includes(l))}updatePasswordCharacterOptionsStatuses(e,s,l,h,g){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=l)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=g))}}class DA{constructor(e,s,l,h){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=l,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v2(this),this.idTokenSubscription=new v2(this),this.beforeStateQueue=new TA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(g=>this._resolvePersistenceManagerAvailable=g)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=_r(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await dh(this,{idToken:e}),l=await Ri._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(l)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xi(this.app)){const g=this.app.settings.authIdToken;return g?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(g).then(y,y))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const g=this.redirectUser?._redirectEventId,y=l?._redirectEventId,C=await this.tryRedirectSignIn(e);(!g||g===y)&&C?.user&&(l=C.user,h=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(l)}catch(g){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(g))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xi(this.app))return Promise.reject(dl(this));const s=e?Oa(e):null;return s&&gt(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xi(this.app)?Promise.reject(dl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xi(this.app)?Promise.reject(dl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IA(this),s=new MA(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new c1("auth","Firebase",e())}onAuthStateChanged(e,s,l){return this.registerStateListener(this.authStateSubscription,e,s,l)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,l){return this.registerStateListener(this.idTokenSubscription,e,s,l)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const l=this.onAuthStateChanged(()=>{l(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),l={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(l.tenantId=this.tenantId),await AA(this,l)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const l=await this.getOrInitRedirectPersistenceManager(s);return e===null?l.removeCurrentUser():l.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&_r(e)||this._popupRedirectResolver;gt(s,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[_r(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,l,h){if(this._deleted)return()=>{};const g=typeof s=="function"?s:s.next.bind(s);let y=!1;const C=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(C,this,"internal-error"),C.then(()=>{y||g(this.currentUser)}),typeof s=="function"){const A=e.addObserver(s,l,h);return()=>{y=!0,A()}}else{const A=e.addObserver(s);return()=>{y=!0,A()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(e["X-Firebase-AppCheck"]=l),e}async _getAppCheckToken(){if(Xi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function v1(r){return Oa(r)}class v2{constructor(e){this.auth=e,this.observer=null,this.addObserver=DE(s=>this.observer=s)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let w1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OA(r){w1=r}function jA(r){return w1.loadJS(r)}function LA(){return w1.gapiScript}function kA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function BA(r,e){const s=h1(r,"auth");if(s.isInitialized()){const h=s.getImmediate(),g=s.getOptions();if(ah(g,e??{}))return h;Dr(h,"already-initialized")}return s.initialize({options:e})}function PA(r,e){const s=e?.persistence||[],l=(Array.isArray(s)?s:[s]).map(_r);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(l,e?.popupRedirectResolver)}function UA(r,e,s){const l=v1(r);gt(/^https?:\/\//.test(e),l,"invalid-emulator-scheme");const h=!1,g=pv(e),{host:y,port:C}=zA(e),A=C===null?"":`:${C}`,N={url:`${g}//${y}${A}/`},I=Object.freeze({host:y,port:C,protocol:g.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!l._canInitEmulator){gt(l.config.emulator&&l.emulatorConfig,l,"emulator-config-failed"),gt(ah(N,l.config.emulator)&&ah(I,l.emulatorConfig),l,"emulator-config-failed");return}l.config.emulator=N,l.emulatorConfig=I,l.settings.appVerificationDisabledForTesting=!0,nu(y)?(Oy(`${g}//${y}${A}`),jy("Auth",!0)):FA()}function pv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zA(r){const e=pv(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!s)return{host:"",port:null};const l=s[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(l);if(h){const g=h[1];return{host:g,port:w2(l.substr(g.length+1))}}else{const[g,y]=l.split(":");return{host:g,port:w2(y)}}}function w2(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function FA(){function r(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class bv{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,s){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}async function Eo(r,e){return xA(r,"POST","/v1/accounts:signInWithIdp",p1(r,e))}const HA="http://localhost";class ml extends bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new ml(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Dr("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:l,signInMethod:h,...g}=s;if(!l||!h)return null;const y=new ml(l,h);return y.idToken=g.idToken||void 0,y.accessToken=g.accessToken||void 0,y.secret=g.secret,y.nonce=g.nonce,y.pendingToken=g.pendingToken||null,y}_getIdTokenResponse(e){const s=this.buildRequest();return Eo(e,s)}_linkToIdToken(e,s){const l=this.buildRequest();return l.idToken=s,Eo(e,l)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Eo(e,s)}buildRequest(){const e={requestUri:HA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Lo(s)}return e}}class yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ru extends yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ca extends ru{constructor(){super("facebook.com")}static credential(e){return ml._fromParams({providerId:Ca.PROVIDER_ID,signInMethod:Ca.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ca.credentialFromTaggedObject(e)}static credentialFromError(e){return Ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ca.credential(e.oauthAccessToken)}catch{return null}}}Ca.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ca.PROVIDER_ID="facebook.com";class Ea extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return ml._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:l}=e;if(!s&&!l)return null;try{return Ea.credential(s,l)}catch{return null}}}Ea.GOOGLE_SIGN_IN_METHOD="google.com";Ea.PROVIDER_ID="google.com";class Aa extends ru{constructor(){super("github.com")}static credential(e){return ml._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.GITHUB_SIGN_IN_METHOD="github.com";Aa.PROVIDER_ID="github.com";class Sa extends ru{constructor(){super("twitter.com")}static credential(e,s){return ml._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Sa.credentialFromTaggedObject(e)}static credentialFromError(e){return Sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:l}=e;if(!s||!l)return null;try{return Sa.credential(s,l)}catch{return null}}}Sa.TWITTER_SIGN_IN_METHOD="twitter.com";Sa.PROVIDER_ID="twitter.com";class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,l,h=!1){const g=await Ri._fromIdTokenResponse(e,l,h),y=N2(l);return new Mo({user:g,providerId:y,_tokenResponse:l,operationType:s})}static async _forOperation(e,s,l){await e._updateTokensIfNecessary(l,!0);const h=N2(l);return new Mo({user:e,providerId:h,_tokenResponse:l,operationType:s})}}function N2(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class fh extends d1{constructor(e,s,l,h){super(s.code,s.message),this.operationType=l,this.user=h,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:l}}static _fromErrorAndOperation(e,s,l,h){return new fh(e,s,l,h)}}function vv(r,e,s,l){return(e==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(g=>{throw g.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(r,g,e,l):g})}async function VA(r,e,s=!1){const l=await Kc(r,e._linkToIdToken(r.auth,await r.getIdToken()),s);return Mo._forOperation(r,"link",l)}async function GA(r,e,s=!1){const{auth:l}=r;if(Xi(l.app))return Promise.reject(dl(l));const h="reauthenticate";try{const g=await Kc(r,vv(l,h,e,r),s);gt(g.idToken,l,"internal-error");const y=b1(g.idToken);gt(y,l,"internal-error");const{sub:C}=y;return gt(r.uid===C,l,"user-mismatch"),Mo._forOperation(r,h,g)}catch(g){throw g?.code==="auth/user-not-found"&&Dr(l,"user-mismatch"),g}}async function YA(r,e,s=!1){if(Xi(r.app))return Promise.reject(dl(r));const l="signIn",h=await vv(r,l,e),g=await Mo._fromIdTokenResponse(r,l,h);return s||await r._updateCurrentUser(g.user),g}function qA(r,e,s,l){return Oa(r).onIdTokenChanged(e,s,l)}function WA(r,e,s){return Oa(r).beforeAuthStateChanged(e,s)}const mh="__sak";class wv{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const XA=1e3,QA=10;class Nv extends wv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const l=this.storage.getItem(s),h=this.localCache[s];l!==h&&e(s,h,l)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((y,C,A)=>{this.notifyListeners(y,A)});return}const l=e.key;s?this.detachListener():this.stopPolling();const h=()=>{const y=this.storage.getItem(l);!s&&this.localCache[l]===y||this.notifyListeners(l,y)},g=this.storage.getItem(l);_A()&&g!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,QA):h()}notifyListeners(e,s){this.localCache[e]=s;const l=this.listeners[e];if(l)for(const h of Array.from(l))h(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,l)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:l}),!0)})},XA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nv.type="LOCAL";const ZA=Nv;class Cv extends wv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Cv.type="SESSION";const Ev=Cv;function KA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(h=>h.isListeningto(e));if(s)return s;const l=new Oh(e);return this.receivers.push(l),l}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:l,eventType:h,data:g}=s.data,y=this.handlersMap[h];if(!y?.size)return;s.ports[0].postMessage({status:"ack",eventId:l,eventType:h});const C=Array.from(y).map(async N=>N(s.origin,g)),A=await KA(C);s.ports[0].postMessage({status:"done",eventId:l,eventType:h,response:A})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];function N1(r="",e=10){let s="";for(let l=0;l<e;l++)s+=Math.floor(Math.random()*10);return r+s}class JA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,l=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let g,y;return new Promise((C,A)=>{const N=N1("",20);h.port1.start();const I=setTimeout(()=>{A(new Error("unsupported_event"))},l);y={messageChannel:h,onMessage(T){const k=T;if(k.data.eventId===N)switch(k.data.status){case"ack":clearTimeout(I),g=setTimeout(()=>{A(new Error("timeout"))},3e3);break;case"done":clearTimeout(g),C(k.data.response);break;default:clearTimeout(I),clearTimeout(g),A(new Error("invalid_response"));break}}},this.handlers.add(y),h.port1.addEventListener("message",y.onMessage),this.target.postMessage({eventType:e,eventId:N,data:s},[h.port2])}).finally(()=>{y&&this.removeMessageHandler(y)})}}function $i(){return window}function $A(r){$i().location.href=r}function Av(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function eS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tS(){return navigator?.serviceWorker?.controller||null}function nS(){return Av()?self:null}const Sv="firebaseLocalStorageDb",sS=1,gh="firebaseLocalStorage",_v="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function jh(r,e){return r.transaction([gh],e?"readwrite":"readonly").objectStore(gh)}function iS(){const r=indexedDB.deleteDatabase(Sv);return new au(r).toPromise()}function zm(){const r=indexedDB.open(Sv,sS);return new Promise((e,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const l=r.result;try{l.createObjectStore(gh,{keyPath:_v})}catch(h){s(h)}}),r.addEventListener("success",async()=>{const l=r.result;l.objectStoreNames.contains(gh)?e(l):(l.close(),await iS(),e(await zm()))})})}async function C2(r,e,s){const l=jh(r,!0).put({[_v]:e,value:s});return new au(l).toPromise()}async function rS(r,e){const s=jh(r,!1).get(e),l=await new au(s).toPromise();return l===void 0?null:l.value}function E2(r,e){const s=jh(r,!0).delete(e);return new au(s).toPromise()}const aS=800,lS=3;class Tv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const l=await this._openDb();return await e(l)}catch(l){if(s++>lS)throw l;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Av()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(nS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await eS(),!this.activeServiceWorker)return;this.sender=new JA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await C2(e,mh,"1"),await E2(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(l=>C2(l,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(l=>rS(l,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>E2(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const g=jh(h,!1).getAll();return new au(g).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],l=new Set;if(e.length!==0)for(const{fbase_key:h,value:g}of e)l.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(g)&&(this.notifyListeners(h,g),s.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!l.has(h)&&(this.notifyListeners(h,null),s.push(h));return s}notifyListeners(e,s){this.localCache[e]=s;const l=this.listeners[e];if(l)for(const h of Array.from(l))h(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tv.type="LOCAL";const oS=Tv;new iu(3e4,6e4);function cS(r,e){return e?_r(e):(gt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class C1 extends bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Eo(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function uS(r){return YA(r.auth,new C1(r),r.bypassAuthState)}function dS(r){const{auth:e,user:s}=r;return gt(s,e,"internal-error"),GA(s,new C1(r),r.bypassAuthState)}async function hS(r){const{auth:e,user:s}=r;return gt(s,e,"internal-error"),VA(s,new C1(r),r.bypassAuthState)}class Iv{constructor(e,s,l,h,g=!1){this.auth=e,this.resolver=l,this.user=h,this.bypassAuthState=g,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(l){this.reject(l)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:l,postBody:h,tenantId:g,error:y,type:C}=e;if(y){this.reject(y);return}const A={auth:this.auth,requestUri:s,sessionId:l,tenantId:g||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(C)(A))}catch(N){this.reject(N)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uS;case"linkViaPopup":case"linkViaRedirect":return hS;case"reauthViaPopup":case"reauthViaRedirect":return dS;default:Dr(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fS=new iu(2e3,1e4);class xo extends Iv{constructor(e,s,l,h,g){super(e,s,h,g),this.provider=l,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=N1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fS.get())};e()}}xo.currentPopupAction=null;const mS="pendingRedirect",Kd=new Map;class gS extends Iv{constructor(e,s,l=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,l),this.eventId=null}async execute(){let e=Kd.get(this.auth._key());if(!e){try{const l=await xS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(l)}catch(s){e=()=>Promise.reject(s)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xS(r,e){const s=yS(e),l=bS(r);if(!await l._isAvailable())return!1;const h=await l._get(s)==="true";return await l._remove(s),h}function pS(r,e){Kd.set(r._key(),e)}function bS(r){return _r(r._redirectPersistence)}function yS(r){return Zd(mS,r.config.apiKey,r.name)}async function vS(r,e,s=!1){if(Xi(r.app))return Promise.reject(dl(r));const l=v1(r),h=cS(l,e),y=await new gS(l,h,s).execute();return y&&!s&&(delete y.user._redirectEventId,await l._persistUserIfCurrent(y.user),await l._setRedirectUser(null,e)),y}const wS=600*1e3;class NS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(l=>{this.isEventForConsumer(e,l)&&(s=!0,this.sendToConsumer(e,l),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Rv(e)){const l=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Ji(this.auth,l))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const l=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&l}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wS&&this.cachedEventUids.clear(),this.cachedEventUids.has(A2(e))}saveEventToCache(e){this.cachedEventUids.add(A2(e)),this.lastProcessedEventTime=Date.now()}}function A2(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Rv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function CS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rv(r);default:return!1}}async function ES(r,e={}){return Uo(r,"GET","/v1/projects",e)}const AS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SS=/^https?/;async function _S(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ES(r);for(const s of e)try{if(TS(s))return}catch{}Dr(r,"unauthorized-domain")}function TS(r){const e=Pm(),{protocol:s,hostname:l}=new URL(e);if(r.startsWith("chrome-extension://")){const y=new URL(r);return y.hostname===""&&l===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&y.hostname===l}if(!SS.test(s))return!1;if(AS.test(r))return l===r;const h=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(l)}const IS=new iu(3e4,6e4);function S2(){const r=$i().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function RS(r){return new Promise((e,s)=>{function l(){S2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{S2(),s(Ji(r,"network-request-failed"))},timeout:IS.get()})}if($i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($i().gapi?.load)l();else{const h=kA("iframefcb");return $i()[h]=()=>{gapi.load?l():s(Ji(r,"network-request-failed"))},jA(`${LA()}?onload=${h}`).catch(g=>s(g))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function MS(r){return Jd=Jd||RS(r),Jd}const DS=new iu(5e3,15e3),OS="__/auth/iframe",jS="emulator/auth/iframe",LS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BS(r){const e=r.config;gt(e.authDomain,r,"auth-domain-config-required");const s=e.emulator?x1(e,jS):`https://${r.config.authDomain}/${OS}`,l={apiKey:e.apiKey,appName:r.name,v:jo},h=kS.get(r.config.apiHost);h&&(l.eid=h);const g=r._getFrameworks();return g.length&&(l.fw=g.join(",")),`${s}?${Lo(l).slice(1)}`}async function PS(r){const e=await MS(r),s=$i().gapi;return gt(s,r,"internal-error"),e.open({where:document.body,url:BS(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LS,dontclear:!0},l=>new Promise(async(h,g)=>{await l.restyle({setHideOnLeave:!1});const y=Ji(r,"network-request-failed"),C=$i().setTimeout(()=>{g(y)},DS.get());function A(){$i().clearTimeout(C),h(l)}l.ping(A).then(A,()=>{g(y)})}))}const US={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zS=500,FS=600,HS="_blank",VS="http://localhost";class _2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GS(r,e,s,l=zS,h=FS){const g=Math.max((window.screen.availHeight-h)/2,0).toString(),y=Math.max((window.screen.availWidth-l)/2,0).toString();let C="";const A={...US,width:l.toString(),height:h.toString(),top:g,left:y},N=Js().toLowerCase();s&&(C=uv(N)?HS:s),ov(N)&&(e=e||VS,A.scrollbars="yes");const I=Object.entries(A).reduce((k,[U,X])=>`${k}${U}=${X},`,"");if(SA(N)&&C!=="_self")return YS(e||"",C),new _2(null);const T=window.open(e||"",C,I);gt(T,r,"popup-blocked");try{T.focus()}catch{}return new _2(T)}function YS(r,e){const s=document.createElement("a");s.href=r,s.target=e;const l=document.createEvent("MouseEvent");l.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(l)}const qS="__/auth/handler",WS="emulator/auth/handler",XS=encodeURIComponent("fac");async function T2(r,e,s,l,h,g){gt(r.config.authDomain,r,"auth-domain-config-required"),gt(r.config.apiKey,r,"invalid-api-key");const y={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:l,v:jo,eventId:h};if(e instanceof yv){e.setDefaultLanguage(r.languageCode),y.providerId=e.providerId||"",km(e.getCustomParameters())||(y.customParameters=JSON.stringify(e.getCustomParameters()));for(const[I,T]of Object.entries({}))y[I]=T}if(e instanceof ru){const I=e.getScopes().filter(T=>T!=="");I.length>0&&(y.scopes=I.join(","))}r.tenantId&&(y.tid=r.tenantId);const C=y;for(const I of Object.keys(C))C[I]===void 0&&delete C[I];const A=await r._getAppCheckToken(),N=A?`#${XS}=${encodeURIComponent(A)}`:"";return`${QS(r)}?${Lo(C).slice(1)}${N}`}function QS({config:r}){return r.emulator?x1(r,WS):`https://${r.authDomain}/${qS}`}const W0="webStorageSupport";class ZS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ev,this._completeRedirectFn=vS,this._overrideRedirectResult=pS}async _openPopup(e,s,l,h){Or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const g=await T2(e,s,l,Pm(),h);return GS(e,g,N1())}async _openRedirect(e,s,l,h){await this._originValidation(e);const g=await T2(e,s,l,Pm(),h);return $A(g),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:h,promise:g}=this.eventManagers[s];return h?Promise.resolve(h):(Or(g,"If manager is not set, promise should be"),g)}const l=this.initAndGetManager(e);return this.eventManagers[s]={promise:l},l.catch(()=>{delete this.eventManagers[s]}),l}async initAndGetManager(e){const s=await PS(e),l=new NS(e);return s.register("authEvent",h=>(gt(h?.authEvent,e,"invalid-auth-event"),{status:l.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:l},this.iframes[e._key()]=s,l}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(W0,{type:W0},h=>{const g=h?.[0]?.[W0];g!==void 0&&s(!!g),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=_S(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return gv()||cv()||y1()}}const KS=ZS;var I2="@firebase/auth",R2="1.12.0";class JS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(l=>{e(l?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $S(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e_(r){jm(new Lm("auth",(e,{options:s})=>{const l=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),g=e.getProvider("app-check-internal"),{apiKey:y,authDomain:C}=l.options;gt(y&&!y.includes(":"),"invalid-api-key",{appName:l.name});const A={apiKey:y,authDomain:C,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xv(r)},N=new DA(l,h,g,A);return PA(N,s),N},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,l)=>{e.getProvider("auth-internal").initialize()})),jm(new Lm("auth-internal",e=>{const s=v1(e.getProvider("auth").getImmediate());return(l=>new JS(l))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),rh(I2,R2,$S(r)),rh(I2,R2,"esm2020")}const t_=300,n_=Ry("authIdTokenMaxAge")||t_;let M2=null;const s_=r=>async e=>{const s=e&&await e.getIdTokenResult(),l=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(l&&l>n_)return;const h=s?.token;M2!==h&&(M2=h,await fetch(r,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function i_(r=Dy()){const e=h1(r,"auth");if(e.isInitialized())return e.getImmediate();const s=BA(r,{popupRedirectResolver:KS,persistence:[oS,ZA,Ev]}),l=Ry("authTokenSyncURL");if(l&&typeof isSecureContext=="boolean"&&isSecureContext){const g=new URL(l,location.origin);if(location.origin===g.origin){const y=s_(g.toString());WA(s,y,()=>y(s.currentUser)),qA(s,C=>y(C))}}const h=jE("auth");return h&&UA(s,`http://${h}`),s}function r_(){return document.getElementsByTagName("head")?.[0]??document}OA({loadJS(r){return new Promise((e,s)=>{const l=document.createElement("script");l.setAttribute("src",r),l.onload=e,l.onerror=h=>{const g=Ji("internal-error");g.customData=h,s(g)},l.type="text/javascript",l.charset="UTF-8",r_().appendChild(l)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e_("Browser");var D2={};const O2="@firebase/database",j2="1.1.0";let Mv="";function a_(r){Mv=r}class l_{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,s){s==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ds(s))}get(e){const s=this.domStorage_.getItem(this.prefixedName_(e));return s==null?null:f1(s)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class o_{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,s){s==null?delete this.cache_[e]:this.cache_[e]=s}get(e){return Lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Dv=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l_(e)}}catch{}return new o_},ol=Dv("localStorage"),c_=Dv("sessionStorage");const Ao=new Iy("@firebase/database"),u_=(function(){let r=1;return function(){return r++}})(),Ov=function(r){const e=BE(r),s=new PE;s.update(e);const l=s.digest();return UE.encodeByteArray(l)},lu=function(...r){let e="";for(let s=0;s<r.length;s++){const l=r[s];Array.isArray(l)||l&&typeof l=="object"&&typeof l.length=="number"?e+=lu.apply(null,l):typeof l=="object"?e+=ds(l):e+=l,e+=" "}return e};let Yc=null,L2=!0;const d_=function(r,e){Ue(!0,"Can't turn on custom loggers persistently."),Ao.logLevel=u1.VERBOSE,Yc=Ao.log.bind(Ao)},hs=function(...r){if(L2===!0&&(L2=!1,Yc===null&&c_.get("logging_enabled")===!0&&d_()),Yc){const e=lu.apply(null,r);Yc(e)}},ou=function(r){return function(...e){hs(r,...e)}},Fm=function(...r){const e="FIREBASE INTERNAL ERROR: "+lu(...r);Ao.error(e)},jr=function(...r){const e=`FIREBASE FATAL ERROR: ${lu(...r)}`;throw Ao.error(e),new Error(e)},Ks=function(...r){const e="FIREBASE WARNING: "+lu(...r);Ao.warn(e)},h_=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jv=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},f_=function(r){if(document.readyState==="complete")r();else{let e=!1;const s=function(){if(!document.body){setTimeout(s,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&s()}),window.attachEvent("onload",s))}},Do="[MIN_NAME]",gl="[MAX_NAME]",zo=function(r,e){if(r===e)return 0;if(r===Do||e===gl)return-1;if(e===Do||r===gl)return 1;{const s=k2(r),l=k2(e);return s!==null?l!==null?s-l===0?r.length-e.length:s-l:-1:l!==null?1:r<e?-1:1}},m_=function(r,e){return r===e?0:r<e?-1:1},jc=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+ds(e))},E1=function(r){if(typeof r!="object"||r===null)return ds(r);const e=[];for(const l in r)e.push(l);e.sort();let s="{";for(let l=0;l<e.length;l++)l!==0&&(s+=","),s+=ds(e[l]),s+=":",s+=E1(r[e[l]]);return s+="}",s},Lv=function(r,e){const s=r.length;if(s<=e)return[r];const l=[];for(let h=0;h<s;h+=e)h+e>s?l.push(r.substring(h,s)):l.push(r.substring(h,h+e));return l};function xi(r,e){for(const s in r)r.hasOwnProperty(s)&&e(s,r[s])}const kv=function(r){Ue(!jv(r),"Invalid JSON number");const e=11,s=52,l=(1<<e-1)-1;let h,g,y,C,A;r===0?(g=0,y=0,h=1/r===-1/0?1:0):(h=r<0,r=Math.abs(r),r>=Math.pow(2,1-l)?(C=Math.min(Math.floor(Math.log(r)/Math.LN2),l),g=C+l,y=Math.round(r*Math.pow(2,s-C)-Math.pow(2,s))):(g=0,y=Math.round(r/Math.pow(2,1-l-s))));const N=[];for(A=s;A;A-=1)N.push(y%2?1:0),y=Math.floor(y/2);for(A=e;A;A-=1)N.push(g%2?1:0),g=Math.floor(g/2);N.push(h?1:0),N.reverse();const I=N.join("");let T="";for(A=0;A<64;A+=8){let k=parseInt(I.substr(A,8),2).toString(16);k.length===1&&(k="0"+k),T=T+k}return T.toLowerCase()},g_=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},x_=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},p_=new RegExp("^-?(0*)\\d{1,10}$"),b_=-2147483648,y_=2147483647,k2=function(r){if(p_.test(r)){const e=Number(r);if(e>=b_&&e<=y_)return e}return null},cu=function(r){try{r()}catch(e){setTimeout(()=>{const s=e.stack||"";throw Ks("Exception was thrown by user callback.",s),e},Math.floor(0))}},v_=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qc=function(r,e){const s=setTimeout(r,e);return typeof s=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):typeof s=="object"&&s.unref&&s.unref(),s};class w_{constructor(e,s){this.appCheckProvider=s,this.appName=e.name,Xi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=s?.getImmediate({optional:!0}),this.appCheck||s?.get().then(l=>this.appCheck=l)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((s,l)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(s,l):s(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Ks(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class N_{constructor(e,s,l){this.appName_=e,this.firebaseOptions_=s,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(h=>this.auth_=h)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(s=>s&&s.code==="auth/token-not-initialized"?(hs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,l)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(s,l):s(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(s=>s.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(s=>s.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ks(e)}}class $d{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}$d.OWNER="owner";const A1="5",Bv="v",Pv="s",Uv="r",zv="f",Fv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hv="ls",Vv="p",Hm="ac",Gv="websocket",Yv="long_polling";class qv{constructor(e,s,l,h,g=!1,y="",C=!1,A=!1,N=null){this.secure=s,this.namespace=l,this.webSocketOnly=h,this.nodeAdmin=g,this.persistenceKey=y,this.includeNamespaceInQueryParams=C,this.isUsingEmulator=A,this.emulatorOptions=N,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ol.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ol.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",s=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${s}`}}function C_(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function Wv(r,e,s){Ue(typeof e=="string","typeof type must == string"),Ue(typeof s=="object","typeof params must == object");let l;if(e===Gv)l=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===Yv)l=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);C_(r)&&(s.ns=r.namespace);const h=[];return xi(s,(g,y)=>{h.push(g+"="+y)}),l+h.join("&")}class E_{constructor(){this.counters_={}}incrementCounter(e,s=1){Lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=s}get(){return VE(this.counters_)}}const X0={},Q0={};function S1(r){const e=r.toString();return X0[e]||(X0[e]=new E_),X0[e]}function A_(r,e){const s=r.toString();return Q0[s]||(Q0[s]=e()),Q0[s]}class S_{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,s){this.closeAfterResponse=e,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,s){for(this.pendingResponses[e]=s;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let h=0;h<l.length;++h)l[h]&&cu(()=>{this.onMessage_(l[h])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const B2="start",__="close",T_="pLPCommand",I_="pRTLPCB",Xv="id",Qv="pw",Zv="ser",R_="cb",M_="seg",D_="ts",O_="d",j_="dframe",Kv=1870,Jv=30,L_=Kv-Jv,k_=25e3,B_=3e4;class po{constructor(e,s,l,h,g,y,C){this.connId=e,this.repoInfo=s,this.applicationId=l,this.appCheckToken=h,this.authToken=g,this.transportSessionId=y,this.lastSessionId=C,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ou(e),this.stats_=S1(s),this.urlFn=A=>(this.appCheckToken&&(A[Hm]=this.appCheckToken),Wv(s,Yv,A))}open(e,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new S_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(B_)),f_(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _1((...g)=>{const[y,C,A,N,I]=g;if(this.incrementIncomingBytes_(g),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,y===B2)this.id=C,this.password=A;else if(y===__)C?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(C,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+y)},(...g)=>{const[y,C]=g;this.incrementIncomingBytes_(g),this.myPacketOrderer.handleResponse(y,C)},()=>{this.onClosed_()},this.urlFn);const l={};l[B2]="t",l[Zv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(l[R_]=this.scriptTagHolder.uniqueCallbackIdentifier),l[Bv]=A1,this.transportSessionId&&(l[Pv]=this.transportSessionId),this.lastSessionId&&(l[Hv]=this.lastSessionId),this.applicationId&&(l[Vv]=this.applicationId),this.appCheckToken&&(l[Hm]=this.appCheckToken),typeof location<"u"&&location.hostname&&Fv.test(location.hostname)&&(l[Uv]=zv);const h=this.urlFn(l);this.log_("Connecting via long-poll to "+h),this.scriptTagHolder.addTag(h,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){po.forceAllow_=!0}static forceDisallow(){po.forceDisallow_=!0}static isAvailable(){return po.forceAllow_?!0:!po.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g_()&&!x_()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const s=ds(e);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const l=GE(s),h=Lv(l,L_);for(let g=0;g<h.length;g++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,h.length,h[g]),this.curSegmentNum++}addDisconnectPingFrame(e,s){this.myDisconnFrame=document.createElement("iframe");const l={};l[j_]="t",l[Xv]=e,l[Qv]=s,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const s=ds(e).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class _1{constructor(e,s,l,h){this.onDisconnect=l,this.urlFn=h,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=u_(),window[T_+this.uniqueCallbackIdentifier]=e,window[I_+this.uniqueCallbackIdentifier]=s,this.myIFrame=_1.createIFrame_();let g="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(g='<script>document.domain="'+document.domain+'";<\/script>');const y="<html><body>"+g+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(y),this.myIFrame.doc.close()}catch(C){hs("frame writing exception"),C.stack&&hs(C.stack),hs(C)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||hs("No IE domain setting required")}catch{const l=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,s){for(this.myID=e,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Xv]=this.myID,e[Qv]=this.myPW,e[Zv]=this.currentSerial;let s=this.urlFn(e),l="",h=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Jv+l.length<=Kv;){const y=this.pendingSegs.shift();l=l+"&"+M_+h+"="+y.seg+"&"+D_+h+"="+y.ts+"&"+O_+h+"="+y.d,h++}return s=s+l,this.addLongPollTag_(s,this.currentSerial),!0}else return!1}enqueueSegment(e,s,l){this.pendingSegs.push({seg:e,ts:s,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(e,s){this.outstandingRequests.add(s);const l=()=>{this.outstandingRequests.delete(s),this.newRequest_()},h=setTimeout(l,Math.floor(k_)),g=()=>{clearTimeout(h),l()};this.addTag(e,g)}addTag(e,s){setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=e,l.onload=l.onreadystatechange=function(){const h=l.readyState;(!h||h==="loaded"||h==="complete")&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),s())},l.onerror=()=>{hs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}const P_=16384,U_=45e3;let xh=null;typeof MozWebSocket<"u"?xh=MozWebSocket:typeof WebSocket<"u"&&(xh=WebSocket);class Ii{constructor(e,s,l,h,g,y,C){this.connId=e,this.applicationId=l,this.appCheckToken=h,this.authToken=g,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ou(this.connId),this.stats_=S1(s),this.connURL=Ii.connectionURL_(s,y,C,h,l),this.nodeAdmin=s.nodeAdmin}static connectionURL_(e,s,l,h,g){const y={};return y[Bv]=A1,typeof location<"u"&&location.hostname&&Fv.test(location.hostname)&&(y[Uv]=zv),s&&(y[Pv]=s),l&&(y[Hv]=l),h&&(y[Hm]=h),g&&(y[Vv]=g),Wv(e,Gv,y)}open(e,s){this.onDisconnect=s,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ol.set("previous_websocket_failure",!0);try{let l;YE(),this.mySock=new xh(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const h=l.message||l.data;h&&this.log_(h),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const h=l.message||l.data;h&&this.log_(h),this.onClosed_()}}start(){}static forceDisallow(){Ii.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=/Android ([0-9]{0,}\.[0-9]{0,})/,l=navigator.userAgent.match(s);l&&l.length>1&&parseFloat(l[1])<4.4&&(e=!0)}return!e&&xh!==null&&!Ii.forceDisallow_}static previouslyFailed(){return ol.isInMemoryStorage||ol.get("previous_websocket_failure")===!0}markConnectionHealthy(){ol.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const l=f1(s);this.onMessage(l)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const s=Number(e);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const s=e.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(s);else{const l=this.extractFrameCount_(s);l!==null&&this.appendFrame_(l)}}send(e){this.resetKeepAlive();const s=ds(e);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const l=Lv(s,P_);l.length>1&&this.sendString_(String(l.length));for(let h=0;h<l.length;h++)this.sendString_(l[h])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(U_))}sendString_(e){try{this.mySock.send(e)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ii.responsesRequiredToBeHealthy=2;Ii.healthyTimeout=3e4;class Jc{static get ALL_TRANSPORTS(){return[po,Ii]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const s=Ii&&Ii.isAvailable();let l=s&&!Ii.previouslyFailed();if(e.webSocketOnly&&(s||Ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[Ii];else{const h=this.transports_=[];for(const g of Jc.ALL_TRANSPORTS)g&&g.isAvailable()&&h.push(g);Jc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Jc.globalTransportInitialized_=!1;const z_=6e4,F_=5e3,H_=10*1024,V_=100*1024,Z0="t",P2="d",G_="s",U2="r",Y_="e",z2="o",F2="a",H2="n",V2="p",q_="h";class W_{constructor(e,s,l,h,g,y,C,A,N,I){this.id=e,this.repoInfo_=s,this.applicationId_=l,this.appCheckToken_=h,this.authToken_=g,this.onMessage_=y,this.onReady_=C,this.onDisconnect_=A,this.onKill_=N,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ou("c:"+this.id+":"),this.transportManager_=new Jc(s),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,l)},Math.floor(0));const h=e.healthyTimeout||0;h>0&&(this.healthyTimeout_=qc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>V_?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>H_?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(h)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return s=>{e===this.conn_?this.onConnectionLost_(s):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return s=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(s):e===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(e){const s={t:"d",d:e};this.sendData_(s)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Z0 in e){const s=e[Z0];s===F2?this.upgradeIfSecondaryHealthy_():s===U2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):s===z2&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const s=jc("t",e),l=jc("d",e);if(s==="c")this.onSecondaryControl_(l);else if(s==="d")this.pendingDataMessages.push(l);else throw new Error("Unknown protocol layer: "+s)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:V2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:F2,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:H2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const s=jc("t",e),l=jc("d",e);s==="c"?this.onControl_(l):s==="d"&&this.onDataMessage_(l)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const s=jc(Z0,e);if(P2 in e){const l=e[P2];if(s===q_){const h={...l};this.repoInfo_.isUsingEmulator&&(h.h=this.repoInfo_.host),this.onHandshake_(h)}else if(s===H2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let h=0;h<this.pendingDataMessages.length;++h)this.onDataMessage_(this.pendingDataMessages[h]);this.pendingDataMessages=[],this.tryCleanupConnection()}else s===G_?this.onConnectionShutdown_(l):s===U2?this.onReset_(l):s===Y_?Fm("Server Error: "+l):s===z2?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fm("Unknown control packet command: "+s)}}onHandshake_(e){const s=e.ts,l=e.v,h=e.h;this.sessionId=e.s,this.repoInfo_.host=h,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),A1!==l&&Ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,l),qc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(z_))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,s){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(F_))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:V2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ol.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $v{put(e,s,l,h){}merge(e,s,l,h){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,s,l){}onDisconnectMerge(e,s,l){}onDisconnectCancel(e,s){}reportStats(e){}}class ew{constructor(e){this.allowedEvents_=e,this.listeners_={},Ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...s){if(Array.isArray(this.listeners_[e])){const l=[...this.listeners_[e]];for(let h=0;h<l.length;h++)l[h].callback.apply(l[h].context,s)}}on(e,s,l){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:s,context:l});const h=this.getInitialEvent(e);h&&s.apply(l,h)}off(e,s,l){this.validateEventType_(e);const h=this.listeners_[e]||[];for(let g=0;g<h.length;g++)if(h[g].callback===s&&(!l||l===h[g].context)){h.splice(g,1);return}}validateEventType_(e){Ue(this.allowedEvents_.find(s=>s===e),"Unknown event: "+e)}}class ph extends ew{static getInstance(){return new ph}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!o1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const G2=32,Y2=768;class An{constructor(e,s){if(s===void 0){this.pieces_=e.split("/");let l=0;for(let h=0;h<this.pieces_.length;h++)this.pieces_[h].length>0&&(this.pieces_[l]=this.pieces_[h],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=s}toString(){let e="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)this.pieces_[s]!==""&&(e+="/"+this.pieces_[s]);return e||"/"}}function hn(){return new An("")}function Ht(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Ra(r){return r.pieces_.length-r.pieceNum_}function En(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new An(r.pieces_,e)}function tw(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function X_(r){let e="";for(let s=r.pieceNum_;s<r.pieces_.length;s++)r.pieces_[s]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[s])));return e||"/"}function nw(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function sw(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let s=r.pieceNum_;s<r.pieces_.length-1;s++)e.push(r.pieces_[s]);return new An(e,0)}function is(r,e){const s=[];for(let l=r.pieceNum_;l<r.pieces_.length;l++)s.push(r.pieces_[l]);if(e instanceof An)for(let l=e.pieceNum_;l<e.pieces_.length;l++)s.push(e.pieces_[l]);else{const l=e.split("/");for(let h=0;h<l.length;h++)l[h].length>0&&s.push(l[h])}return new An(s,0)}function zt(r){return r.pieceNum_>=r.pieces_.length}function mi(r,e){const s=Ht(r),l=Ht(e);if(s===null)return e;if(s===l)return mi(En(r),En(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function iw(r,e){if(Ra(r)!==Ra(e))return!1;for(let s=r.pieceNum_,l=e.pieceNum_;s<=r.pieces_.length;s++,l++)if(r.pieces_[s]!==e.pieces_[l])return!1;return!0}function Mi(r,e){let s=r.pieceNum_,l=e.pieceNum_;if(Ra(r)>Ra(e))return!1;for(;s<r.pieces_.length;){if(r.pieces_[s]!==e.pieces_[l])return!1;++s,++l}return!0}class Q_{constructor(e,s){this.errorPrefix_=s,this.parts_=nw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=Th(this.parts_[l]);rw(this)}}function Z_(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=Th(e),rw(r)}function K_(r){const e=r.parts_.pop();r.byteLength_-=Th(e),r.parts_.length>0&&(r.byteLength_-=1)}function rw(r){if(r.byteLength_>Y2)throw new Error(r.errorPrefix_+"has a key path longer than "+Y2+" bytes ("+r.byteLength_+").");if(r.parts_.length>G2)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+G2+") or object contains a cycle "+ll(r))}function ll(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}class T1 extends ew{static getInstance(){return new T1}constructor(){super(["visible"]);let e,s;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const l=!document[e];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}getInitialEvent(e){return Ue(e==="visible","Unknown event type: "+e),[this.visible_]}}const Lc=1e3,J_=300*1e3,q2=30*1e3,$_=1.3,eT=3e4,tT="server_kill",W2=3;class Mr extends $v{constructor(e,s,l,h,g,y,C,A){if(super(),this.repoInfo_=e,this.applicationId_=s,this.onDataUpdate_=l,this.onConnectStatus_=h,this.onServerInfoUpdate_=g,this.authTokenProvider_=y,this.appCheckTokenProvider_=C,this.authOverride_=A,this.id=Mr.nextPersistentConnectionId_++,this.log_=ou("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Lc,this.maxReconnectDelay_=J_,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,A)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");T1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ph.getInstance().on("online",this.onOnline_,this)}sendRequest(e,s,l){const h=++this.requestNumber_,g={r:h,a:e,b:s};this.log_(ds(g)),Ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(g),l&&(this.requestCBHash_[h]=l)}get(e){this.initConnection_();const s=new Ly,h={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:y=>{const C=y.d;y.s==="ok"?s.resolve(C):s.reject(C)}};this.outstandingGets_.push(h),this.outstandingGetCount_++;const g=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(g),s.promise}listen(e,s,l,h){this.initConnection_();const g=e._queryIdentifier,y=e._path.toString();this.log_("Listen called for "+y+" "+g),this.listens.has(y)||this.listens.set(y,new Map),Ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ue(!this.listens.get(y).has(g),"listen() called twice for same path/queryId.");const C={onComplete:h,hashFn:s,query:e,tag:l};this.listens.get(y).set(g,C),this.connected_&&this.sendListen_(C)}sendGet_(e){const s=this.outstandingGets_[e];this.sendRequest("g",s.request,l=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(l)})}sendListen_(e){const s=e.query,l=s._path.toString(),h=s._queryIdentifier;this.log_("Listen on "+l+" for "+h);const g={p:l},y="q";e.tag&&(g.q=s._queryObject,g.t=e.tag),g.h=e.hashFn(),this.sendRequest(y,g,C=>{const A=C.d,N=C.s;Mr.warnOnListenWarnings_(A,s),(this.listens.get(l)&&this.listens.get(l).get(h))===e&&(this.log_("listen response",C),N!=="ok"&&this.removeListen_(l,h),e.onComplete&&e.onComplete(N,A))})}static warnOnListenWarnings_(e,s){if(e&&typeof e=="object"&&Lr(e,"w")){const l=Ro(e,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const h='".indexOn": "'+s._queryParams.getIndex().toString()+'"',g=s._path.toString();Ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${h} at ${g} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||FE(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=q2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,s=HE(e)?"auth":"gauth",l={cred:e};this.authOverride_===null?l.noauth=!0:typeof this.authOverride_=="object"&&(l.authvar=this.authOverride_),this.sendRequest(s,l,h=>{const g=h.s,y=h.d||"error";this.authToken_===e&&(g==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(g,y))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const s=e.s,l=e.d||"error";s==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,l)})}unlisten(e,s){const l=e._path.toString(),h=e._queryIdentifier;this.log_("Unlisten called for "+l+" "+h),Ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,h)&&this.connected_&&this.sendUnlisten_(l,h,e._queryObject,s)}sendUnlisten_(e,s,l,h){this.log_("Unlisten on "+e+" for "+s);const g={p:e},y="n";h&&(g.q=l,g.t=h),this.sendRequest(y,g)}onDisconnectPut(e,s,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,s,l):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:s,onComplete:l})}onDisconnectMerge(e,s,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,s,l):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:s,onComplete:l})}onDisconnectCancel(e,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(e,s,l,h){const g={p:s,d:l};this.log_("onDisconnect "+e,g),this.sendRequest(e,g,y=>{h&&setTimeout(()=>{h(y.s,y.d)},Math.floor(0))})}put(e,s,l,h){this.putInternal("p",e,s,l,h)}merge(e,s,l,h){this.putInternal("m",e,s,l,h)}putInternal(e,s,l,h,g){this.initConnection_();const y={p:s,d:l};g!==void 0&&(y.h=g),this.outstandingPuts_.push({action:e,request:y,onComplete:h}),this.outstandingPutCount_++;const C=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(C):this.log_("Buffering put: "+s)}sendPut_(e){const s=this.outstandingPuts_[e].action,l=this.outstandingPuts_[e].request,h=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(s,l,g=>{this.log_(s+" response",g),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),h&&h(g.s,g.d)})}reportStats(e){if(this.connected_){const s={c:e};this.log_("reportStats",s),this.sendRequest("s",s,l=>{if(l.s!=="ok"){const g=l.d;this.log_("reportStats","Error sending stats: "+g)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ds(e));const s=e.r,l=this.requestCBHash_[s];l&&(delete this.requestCBHash_[s],l(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,s){this.log_("handleServerMessage",e,s),e==="d"?this.onDataUpdate_(s.p,s.d,!1,s.t):e==="m"?this.onDataUpdate_(s.p,s.d,!0,s.t):e==="c"?this.onListenRevoked_(s.p,s.q):e==="ac"?this.onAuthRevoked_(s.s,s.d):e==="apc"?this.onAppCheckRevoked_(s.s,s.d):e==="sd"?this.onSecurityDebugPacket_(s):Fm("Unrecognized action received from server: "+ds(e)+`
Are you using the latest client?`)}onReady_(e,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>eT&&(this.reconnectDelay_=Lc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let s=Math.max(0,this.reconnectDelay_-e);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),s=this.onReady_.bind(this),l=this.onRealtimeDisconnect_.bind(this),h=this.id+":"+Mr.nextConnectionId_++,g=this.lastSessionId;let y=!1,C=null;const A=function(){C?C.close():(y=!0,l())},N=function(T){Ue(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(T)};this.realtime_={close:A,sendRequest:N};const I=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,k]=await Promise.all([this.authTokenProvider_.getToken(I),this.appCheckTokenProvider_.getToken(I)]);y?hs("getToken() completed but was canceled"):(hs("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=k&&k.token,C=new W_(h,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,s,l,U=>{Ks(U+" ("+this.repoInfo_.toString()+")"),this.interrupt(tT)},g))}catch(T){this.log_("Failed to get token: "+T),y||(this.repoInfo_.nodeAdmin&&Ks(T),A())}}}interrupt(e){hs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],km(this.interruptReasons_)&&(this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const s=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const s=this.outstandingPuts_[e];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,s){let l;s?l=s.map(g=>E1(g)).join("$"):l="default";const h=this.removeListen_(e,l);h&&h.onComplete&&h.onComplete("permission_denied")}removeListen_(e,s){const l=new An(e).toString();let h;if(this.listens.has(l)){const g=this.listens.get(l);h=g.get(s),g.delete(s),g.size===0&&this.listens.delete(l)}else h=void 0;return h}onAuthRevoked_(e,s){hs("Auth token revoked: "+e+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=W2&&(this.reconnectDelay_=q2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,s){hs("App check token revoked: "+e+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=W2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const s of e.values())this.sendListen_(s);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let s="js";e["sdk."+s+"."+Mv.replace(/\./g,"-")]=1,o1()?e["framework.cordova"]=1:My()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ph.getInstance().currentlyOnline();return km(this.interruptReasons_)&&e}}Mr.nextPersistentConnectionId_=0;Mr.nextConnectionId_=0;class Vt{constructor(e,s){this.name=e,this.node=s}static Wrap(e,s){return new Vt(e,s)}}class Lh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,s){const l=new Vt(Do,e),h=new Vt(Do,s);return this.compare(l,h)!==0}minPost(){return Vt.MIN}}let kd;class aw extends Lh{static get __EMPTY_NODE(){return kd}static set __EMPTY_NODE(e){kd=e}compare(e,s){return zo(e.name,s.name)}isDefinedOn(e){throw su("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,s){return!1}minPost(){return Vt.MIN}maxPost(){return new Vt(gl,kd)}makePost(e,s){return Ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Vt(e,kd)}toString(){return".key"}}const So=new aw;class Bd{constructor(e,s,l,h,g=null){this.isReverse_=h,this.resultGenerator_=g,this.nodeStack_=[];let y=1;for(;!e.isEmpty();)if(e=e,y=s?l(e.key,s):1,h&&(y*=-1),y<0)this.isReverse_?e=e.left:e=e.right;else if(y===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),s;if(this.resultGenerator_?s=this.resultGenerator_(e.key,e.value):s={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ss{constructor(e,s,l,h,g){this.key=e,this.value=s,this.color=l??ss.RED,this.left=h??js.EMPTY_NODE,this.right=g??js.EMPTY_NODE}copy(e,s,l,h,g){return new ss(e??this.key,s??this.value,l??this.color,h??this.left,g??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,l){let h=this;const g=l(e,h.key);return g<0?h=h.copy(null,null,null,h.left.insert(e,s,l),null):g===0?h=h.copy(null,s,null,null,null):h=h.copy(null,null,null,null,h.right.insert(e,s,l)),h.fixUp_()}removeMin_(){if(this.left.isEmpty())return js.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,s){let l,h;if(l=this,s(e,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(e,s),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),s(e,l.key)===0){if(l.right.isEmpty())return js.EMPTY_NODE;h=l.right.min_(),l=l.copy(h.key,h.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(e,s))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ss.RED=!0;ss.BLACK=!1;class nT{copy(e,s,l,h,g){return this}insert(e,s,l){return new ss(e,s,null)}remove(e,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class js{constructor(e,s=js.EMPTY_NODE){this.comparator_=e,this.root_=s}insert(e,s){return new js(this.comparator_,this.root_.insert(e,s,this.comparator_).copy(null,null,ss.BLACK,null,null))}remove(e){return new js(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ss.BLACK,null,null))}get(e){let s,l=this.root_;for(;!l.isEmpty();){if(s=this.comparator_(e,l.key),s===0)return l.value;s<0?l=l.left:s>0&&(l=l.right)}return null}getPredecessorKey(e){let s,l=this.root_,h=null;for(;!l.isEmpty();)if(s=this.comparator_(e,l.key),s===0){if(l.left.isEmpty())return h?h.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}else s<0?l=l.left:s>0&&(h=l,l=l.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,s){return new Bd(this.root_,e,this.comparator_,!1,s)}getReverseIteratorFrom(e,s){return new Bd(this.root_,e,this.comparator_,!0,s)}getReverseIterator(e){return new Bd(this.root_,null,this.comparator_,!0,e)}}js.EMPTY_NODE=new nT;function sT(r,e){return zo(r.name,e.name)}function I1(r,e){return zo(r,e)}let Vm;function iT(r){Vm=r}const lw=function(r){return typeof r=="number"?"number:"+kv(r):"string:"+r},ow=function(r){if(r.isLeafNode()){const e=r.val();Ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Lr(e,".sv"),"Priority must be a string or number.")}else Ue(r===Vm||r.isEmpty(),"priority of unexpected type.");Ue(r===Vm||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let X2;class ns{static set __childrenNodeConstructor(e){X2=e}static get __childrenNodeConstructor(){return X2}constructor(e,s=ns.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=s,this.lazyHash_=null,Ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ow(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ns(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ns.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return zt(e)?this:Ht(e)===".priority"?this.priorityNode_:ns.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,s){return null}updateImmediateChild(e,s){return e===".priority"?this.updatePriority(s):s.isEmpty()&&e!==".priority"?this:ns.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,s).updatePriority(this.priorityNode_)}updateChild(e,s){const l=Ht(e);return l===null?s:s.isEmpty()&&l!==".priority"?this:(Ue(l!==".priority"||Ra(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(l,ns.__childrenNodeConstructor.EMPTY_NODE.updateChild(En(e),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,s){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lw(this.priorityNode_.val())+":");const s=typeof this.value_;e+=s+":",s==="number"?e+=kv(this.value_):e+=this.value_,this.lazyHash_=Ov(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ns.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ns.__childrenNodeConstructor?-1:(Ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const s=typeof e.value_,l=typeof this.value_,h=ns.VALUE_TYPE_ORDER.indexOf(s),g=ns.VALUE_TYPE_ORDER.indexOf(l);return Ue(h>=0,"Unknown leaf type: "+s),Ue(g>=0,"Unknown leaf type: "+l),h===g?l==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:g-h}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const s=e;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}else return!1}}ns.VALUE_TYPE_ORDER=["object","boolean","number","string"];let cw,uw;function rT(r){cw=r}function aT(r){uw=r}class lT extends Lh{compare(e,s){const l=e.node.getPriority(),h=s.node.getPriority(),g=l.compareTo(h);return g===0?zo(e.name,s.name):g}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,s){return!e.getPriority().equals(s.getPriority())}minPost(){return Vt.MIN}maxPost(){return new Vt(gl,new ns("[PRIORITY-POST]",uw))}makePost(e,s){const l=cw(e);return new Vt(s,new ns("[PRIORITY-POST]",l))}toString(){return".priority"}}const ms=new lT;const oT=Math.log(2);class cT{constructor(e){const s=g=>parseInt(Math.log(g)/oT,10),l=g=>parseInt(Array(g+1).join("1"),2);this.count=s(e+1),this.current_=this.count-1;const h=l(this.count);this.bits_=e+1&h}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bh=function(r,e,s,l){r.sort(e);const h=function(A,N){const I=N-A;let T,k;if(I===0)return null;if(I===1)return T=r[A],k=s?s(T):T,new ss(k,T.node,ss.BLACK,null,null);{const U=parseInt(I/2,10)+A,X=h(A,U),z=h(U+1,N);return T=r[U],k=s?s(T):T,new ss(k,T.node,ss.BLACK,X,z)}},g=function(A){let N=null,I=null,T=r.length;const k=function(X,z){const ae=T-X,fe=T;T-=X;const B=h(ae+1,fe),W=r[ae],te=s?s(W):W;U(new ss(te,W.node,z,null,B))},U=function(X){N?(N.left=X,N=X):(I=X,N=X)};for(let X=0;X<A.count;++X){const z=A.nextBitIsOne(),ae=Math.pow(2,A.count-(X+1));z?k(ae,ss.BLACK):(k(ae,ss.BLACK),k(ae,ss.RED))}return I},y=new cT(r.length),C=g(y);return new js(l||e,C)};let K0;const co={};class Tr{static get Default(){return Ue(co&&ms,"ChildrenNode.ts has not been loaded"),K0=K0||new Tr({".priority":co},{".priority":ms}),K0}constructor(e,s){this.indexes_=e,this.indexSet_=s}get(e){const s=Ro(this.indexes_,e);if(!s)throw new Error("No index defined for "+e);return s instanceof js?s:null}hasIndex(e){return Lr(this.indexSet_,e.toString())}addIndex(e,s){Ue(e!==So,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let h=!1;const g=s.getIterator(Vt.Wrap);let y=g.getNext();for(;y;)h=h||e.isDefinedOn(y.node),l.push(y),y=g.getNext();let C;h?C=bh(l,e.getCompare()):C=co;const A=e.toString(),N={...this.indexSet_};N[A]=e;const I={...this.indexes_};return I[A]=C,new Tr(I,N)}addToIndexes(e,s){const l=lh(this.indexes_,(h,g)=>{const y=Ro(this.indexSet_,g);if(Ue(y,"Missing index implementation for "+g),h===co)if(y.isDefinedOn(e.node)){const C=[],A=s.getIterator(Vt.Wrap);let N=A.getNext();for(;N;)N.name!==e.name&&C.push(N),N=A.getNext();return C.push(e),bh(C,y.getCompare())}else return co;else{const C=s.get(e.name);let A=h;return C&&(A=A.remove(new Vt(e.name,C))),A.insert(e,e.node)}});return new Tr(l,this.indexSet_)}removeFromIndexes(e,s){const l=lh(this.indexes_,h=>{if(h===co)return h;{const g=s.get(e.name);return g?h.remove(new Vt(e.name,g)):h}});return new Tr(l,this.indexSet_)}}let kc;class sn{static get EMPTY_NODE(){return kc||(kc=new sn(new js(I1),null,Tr.Default))}constructor(e,s,l){this.children_=e,this.priorityNode_=s,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&ow(this.priorityNode_),this.children_.isEmpty()&&Ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kc}updatePriority(e){return this.children_.isEmpty()?this:new sn(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const s=this.children_.get(e);return s===null?kc:s}}getChild(e){const s=Ht(e);return s===null?this:this.getImmediateChild(s).getChild(En(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,s){if(Ue(s,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(s);{const l=new Vt(e,s);let h,g;s.isEmpty()?(h=this.children_.remove(e),g=this.indexMap_.removeFromIndexes(l,this.children_)):(h=this.children_.insert(e,s),g=this.indexMap_.addToIndexes(l,this.children_));const y=h.isEmpty()?kc:this.priorityNode_;return new sn(h,y,g)}}updateChild(e,s){const l=Ht(e);if(l===null)return s;{Ue(Ht(e)!==".priority"||Ra(e)===1,".priority must be the last token in a path");const h=this.getImmediateChild(l).updateChild(En(e),s);return this.updateImmediateChild(l,h)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const s={};let l=0,h=0,g=!0;if(this.forEachChild(ms,(y,C)=>{s[y]=C.val(e),l++,g&&sn.INTEGER_REGEXP_.test(y)?h=Math.max(h,Number(y)):g=!1}),!e&&g&&h<2*l){const y=[];for(const C in s)y[C]=s[C];return y}else return e&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+lw(this.getPriority().val())+":"),this.forEachChild(ms,(s,l)=>{const h=l.hash();h!==""&&(e+=":"+s+":"+h)}),this.lazyHash_=e===""?"":Ov(e)}return this.lazyHash_}getPredecessorChildName(e,s,l){const h=this.resolveIndex_(l);if(h){const g=h.getPredecessorKey(new Vt(e,s));return g?g.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const s=this.resolveIndex_(e);if(s){const l=s.minKey();return l&&l.name}else return this.children_.minKey()}getFirstChild(e){const s=this.getFirstChildName(e);return s?new Vt(s,this.children_.get(s)):null}getLastChildName(e){const s=this.resolveIndex_(e);if(s){const l=s.maxKey();return l&&l.name}else return this.children_.maxKey()}getLastChild(e){const s=this.getLastChildName(e);return s?new Vt(s,this.children_.get(s)):null}forEachChild(e,s){const l=this.resolveIndex_(e);return l?l.inorderTraversal(h=>s(h.name,h.node)):this.children_.inorderTraversal(s)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,s){const l=this.resolveIndex_(s);if(l)return l.getIteratorFrom(e,h=>h);{const h=this.children_.getIteratorFrom(e.name,Vt.Wrap);let g=h.peek();for(;g!=null&&s.compare(g,e)<0;)h.getNext(),g=h.peek();return h}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,s){const l=this.resolveIndex_(s);if(l)return l.getReverseIteratorFrom(e,h=>h);{const h=this.children_.getReverseIteratorFrom(e.name,Vt.Wrap);let g=h.peek();for(;g!=null&&s.compare(g,e)>0;)h.getNext(),g=h.peek();return h}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uu?-1:0}withIndex(e){if(e===So||this.indexMap_.hasIndex(e))return this;{const s=this.indexMap_.addIndex(e,this.children_);return new sn(this.children_,this.priorityNode_,s)}}isIndexed(e){return e===So||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const s=e;if(this.getPriority().equals(s.getPriority()))if(this.children_.count()===s.children_.count()){const l=this.getIterator(ms),h=s.getIterator(ms);let g=l.getNext(),y=h.getNext();for(;g&&y;){if(g.name!==y.name||!g.node.equals(y.node))return!1;g=l.getNext(),y=h.getNext()}return g===null&&y===null}else return!1;else return!1}}resolveIndex_(e){return e===So?null:this.indexMap_.get(e.toString())}}sn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class uT extends sn{constructor(){super(new js(I1),sn.EMPTY_NODE,Tr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return sn.EMPTY_NODE}isEmpty(){return!1}}const uu=new uT;Object.defineProperties(Vt,{MIN:{value:new Vt(Do,sn.EMPTY_NODE)},MAX:{value:new Vt(gl,uu)}});aw.__EMPTY_NODE=sn.EMPTY_NODE;ns.__childrenNodeConstructor=sn;iT(uu);aT(uu);const dT=!0;function fs(r,e=null){if(r===null)return sn.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),Ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const s=r;return new ns(s,fs(e))}if(!(r instanceof Array)&&dT){const s=[];let l=!1;if(xi(r,(y,C)=>{if(y.substring(0,1)!=="."){const A=fs(C);A.isEmpty()||(l=l||!A.getPriority().isEmpty(),s.push(new Vt(y,A)))}}),s.length===0)return sn.EMPTY_NODE;const g=bh(s,sT,y=>y.name,I1);if(l){const y=bh(s,ms.getCompare());return new sn(g,fs(e),new Tr({".priority":y},{".priority":ms}))}else return new sn(g,fs(e),Tr.Default)}else{let s=sn.EMPTY_NODE;return xi(r,(l,h)=>{if(Lr(r,l)&&l.substring(0,1)!=="."){const g=fs(h);(g.isLeafNode()||!g.isEmpty())&&(s=s.updateImmediateChild(l,g))}}),s.updatePriority(fs(e))}}rT(fs);class hT extends Lh{constructor(e){super(),this.indexPath_=e,Ue(!zt(e)&&Ht(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,s){const l=this.extractChild(e.node),h=this.extractChild(s.node),g=l.compareTo(h);return g===0?zo(e.name,s.name):g}makePost(e,s){const l=fs(e),h=sn.EMPTY_NODE.updateChild(this.indexPath_,l);return new Vt(s,h)}maxPost(){const e=sn.EMPTY_NODE.updateChild(this.indexPath_,uu);return new Vt(gl,e)}toString(){return nw(this.indexPath_,0).join("/")}}class fT extends Lh{compare(e,s){const l=e.node.compareTo(s.node);return l===0?zo(e.name,s.name):l}isDefinedOn(e){return!0}indexedValueChanged(e,s){return!e.equals(s)}minPost(){return Vt.MIN}maxPost(){return Vt.MAX}makePost(e,s){const l=fs(e);return new Vt(s,l)}toString(){return".value"}}const mT=new fT;function gT(r){return{type:"value",snapshotNode:r}}function xT(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function pT(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Q2(r,e,s){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:s}}function bT(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}class R1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ms}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Do}hasEnd(){return this.endSet_}getIndexEndValue(){return Ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ms}copy(){const e=new R1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Z2(r){const e={};if(r.isDefault())return e;let s;if(r.index_===ms?s="$priority":r.index_===mT?s="$value":r.index_===So?s="$key":(Ue(r.index_ instanceof hT,"Unrecognized index type!"),s=r.index_.toString()),e.orderBy=ds(s),r.startSet_){const l=r.startAfterSet_?"startAfter":"startAt";e[l]=ds(r.indexStartValue_),r.startNameSet_&&(e[l]+=","+ds(r.indexStartName_))}if(r.endSet_){const l=r.endBeforeSet_?"endBefore":"endAt";e[l]=ds(r.indexEndValue_),r.endNameSet_&&(e[l]+=","+ds(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function K2(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let s=r.viewFrom_;s===""&&(r.isViewFromLeft()?s="l":s="r"),e.vf=s}return r.index_!==ms&&(e.i=r.index_.toString()),e}class yh extends $v{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,s){return s!==void 0?"tag$"+s:(Ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,s,l,h){super(),this.repoInfo_=e,this.onDataUpdate_=s,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.log_=ou("p:rest:"),this.listens_={}}listen(e,s,l,h){const g=e._path.toString();this.log_("Listen called for "+g+" "+e._queryIdentifier);const y=yh.getListenId_(e,l),C={};this.listens_[y]=C;const A=Z2(e._queryParams);this.restRequest_(g+".json",A,(N,I)=>{let T=I;if(N===404&&(T=null,N=null),N===null&&this.onDataUpdate_(g,T,!1,l),Ro(this.listens_,y)===C){let k;N?N===401?k="permission_denied":k="rest_error:"+N:k="ok",h(k,null)}})}unlisten(e,s){const l=yh.getListenId_(e,s);delete this.listens_[l]}get(e){const s=Z2(e._queryParams),l=e._path.toString(),h=new Ly;return this.restRequest_(l+".json",s,(g,y)=>{let C=y;g===404&&(C=null,g=null),g===null?(this.onDataUpdate_(l,C,!1,null),h.resolve(C)):h.reject(new Error(C))}),h.promise}refreshAuthToken(e){}restRequest_(e,s={},l){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([h,g])=>{h&&h.accessToken&&(s.auth=h.accessToken),g&&g.token&&(s.ac=g.token);const y=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Lo(s);this.log_("Sending REST request for "+y);const C=new XMLHttpRequest;C.onreadystatechange=()=>{if(l&&C.readyState===4){this.log_("REST Response for "+y+" received. status:",C.status,"response:",C.responseText);let A=null;if(C.status>=200&&C.status<300){try{A=f1(C.responseText)}catch{Ks("Failed to parse JSON response for "+y+": "+C.responseText)}l(null,A)}else C.status!==401&&C.status!==404&&Ks("Got unsuccessful REST response for "+y+" Status: "+C.status),l(C.status);l=null}},C.open("GET",y,!0),C.send()})}}class yT{constructor(){this.rootNode_=sn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,s){this.rootNode_=this.rootNode_.updateChild(e,s)}}function vh(){return{value:null,children:new Map}}function dw(r,e,s){if(zt(e))r.value=s,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,s);else{const l=Ht(e);r.children.has(l)||r.children.set(l,vh());const h=r.children.get(l);e=En(e),dw(h,e,s)}}function Gm(r,e,s){r.value!==null?s(e,r.value):vT(r,(l,h)=>{const g=new An(e.toString()+"/"+l);Gm(h,g,s)})}function vT(r,e){r.children.forEach((s,l)=>{e(l,s)})}class wT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),s={...e};return this.last_&&xi(this.last_,(l,h)=>{s[l]=s[l]-h}),this.last_=e,s}}const J2=10*1e3,NT=30*1e3,CT=300*1e3;class ET{constructor(e,s){this.server_=s,this.statsToReport_={},this.statsListener_=new wT(e);const l=J2+(NT-J2)*Math.random();qc(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const e=this.statsListener_.get(),s={};let l=!1;xi(e,(h,g)=>{g>0&&Lr(this.statsToReport_,h)&&(s[h]=g,l=!0)}),l&&this.server_.reportStats(s),qc(this.reportStats_.bind(this),Math.floor(Math.random()*2*CT))}}var Ki;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ki||(Ki={}));function hw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mw(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class wh{constructor(e,s,l){this.path=e,this.affectedTree=s,this.revert=l,this.type=Ki.ACK_USER_WRITE,this.source=hw()}operationForChild(e){if(zt(this.path)){if(this.affectedTree.value!=null)return Ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new An(e));return new wh(hn(),s,this.revert)}}else return Ue(Ht(this.path)===e,"operationForChild called for unrelated child."),new wh(En(this.path),this.affectedTree,this.revert)}}class xl{constructor(e,s,l){this.source=e,this.path=s,this.snap=l,this.type=Ki.OVERWRITE}operationForChild(e){return zt(this.path)?new xl(this.source,hn(),this.snap.getImmediateChild(e)):new xl(this.source,En(this.path),this.snap)}}class $c{constructor(e,s,l){this.source=e,this.path=s,this.children=l,this.type=Ki.MERGE}operationForChild(e){if(zt(this.path)){const s=this.children.subtree(new An(e));return s.isEmpty()?null:s.value?new xl(this.source,hn(),s.value):new $c(this.source,hn(),s)}else return Ue(Ht(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $c(this.source,En(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class M1{constructor(e,s,l){this.node_=e,this.fullyInitialized_=s,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const s=Ht(e);return this.isCompleteForChild(s)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function AT(r,e,s,l){const h=[],g=[];return e.forEach(y=>{y.type==="child_changed"&&r.index_.indexedValueChanged(y.oldSnap,y.snapshotNode)&&g.push(bT(y.childName,y.snapshotNode))}),Bc(r,h,"child_removed",e,l,s),Bc(r,h,"child_added",e,l,s),Bc(r,h,"child_moved",g,l,s),Bc(r,h,"child_changed",e,l,s),Bc(r,h,"value",e,l,s),h}function Bc(r,e,s,l,h,g){const y=l.filter(C=>C.type===s);y.sort((C,A)=>_T(r,C,A)),y.forEach(C=>{const A=ST(r,C,g);h.forEach(N=>{N.respondsTo(C.type)&&e.push(N.createEvent(A,r.query_))})})}function ST(r,e,s){return e.type==="value"||e.type==="child_removed"||(e.prevName=s.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function _T(r,e,s){if(e.childName==null||s.childName==null)throw su("Should only compare child_ events.");const l=new Vt(e.childName,e.snapshotNode),h=new Vt(s.childName,s.snapshotNode);return r.index_.compare(l,h)}function gw(r,e){return{eventCache:r,serverCache:e}}function Wc(r,e,s,l){return gw(new M1(e,s,l),r.serverCache)}function xw(r,e,s,l){return gw(r.eventCache,new M1(e,s,l))}function Ym(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function pl(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let J0;const TT=()=>(J0||(J0=new js(m_)),J0);class Cn{static fromObject(e){let s=new Cn(null);return xi(e,(l,h)=>{s=s.set(new An(l),h)}),s}constructor(e,s=TT()){this.value=e,this.children=s}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,s){if(this.value!=null&&s(this.value))return{path:hn(),value:this.value};if(zt(e))return null;{const l=Ht(e),h=this.children.get(l);if(h!==null){const g=h.findRootMostMatchingPathAndValue(En(e),s);return g!=null?{path:is(new An(l),g.path),value:g.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const s=Ht(e),l=this.children.get(s);return l!==null?l.subtree(En(e)):new Cn(null)}}set(e,s){if(zt(e))return new Cn(s,this.children);{const l=Ht(e),g=(this.children.get(l)||new Cn(null)).set(En(e),s),y=this.children.insert(l,g);return new Cn(this.value,y)}}remove(e){if(zt(e))return this.children.isEmpty()?new Cn(null):new Cn(null,this.children);{const s=Ht(e),l=this.children.get(s);if(l){const h=l.remove(En(e));let g;return h.isEmpty()?g=this.children.remove(s):g=this.children.insert(s,h),this.value===null&&g.isEmpty()?new Cn(null):new Cn(this.value,g)}else return this}}get(e){if(zt(e))return this.value;{const s=Ht(e),l=this.children.get(s);return l?l.get(En(e)):null}}setTree(e,s){if(zt(e))return s;{const l=Ht(e),g=(this.children.get(l)||new Cn(null)).setTree(En(e),s);let y;return g.isEmpty()?y=this.children.remove(l):y=this.children.insert(l,g),new Cn(this.value,y)}}fold(e){return this.fold_(hn(),e)}fold_(e,s){const l={};return this.children.inorderTraversal((h,g)=>{l[h]=g.fold_(is(e,h),s)}),s(e,this.value,l)}findOnPath(e,s){return this.findOnPath_(e,hn(),s)}findOnPath_(e,s,l){const h=this.value?l(s,this.value):!1;if(h)return h;if(zt(e))return null;{const g=Ht(e),y=this.children.get(g);return y?y.findOnPath_(En(e),is(s,g),l):null}}foreachOnPath(e,s){return this.foreachOnPath_(e,hn(),s)}foreachOnPath_(e,s,l){if(zt(e))return this;{this.value&&l(s,this.value);const h=Ht(e),g=this.children.get(h);return g?g.foreachOnPath_(En(e),is(s,h),l):new Cn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,s){this.children.inorderTraversal((l,h)=>{h.foreach_(is(e,l),s)}),this.value&&s(e,this.value)}foreachChild(e){this.children.inorderTraversal((s,l)=>{l.value&&e(s,l.value)})}}class Di{constructor(e){this.writeTree_=e}static empty(){return new Di(new Cn(null))}}function Xc(r,e,s){if(zt(e))return new Di(new Cn(s));{const l=r.writeTree_.findRootMostValueAndPath(e);if(l!=null){const h=l.path;let g=l.value;const y=mi(h,e);return g=g.updateChild(y,s),new Di(r.writeTree_.set(h,g))}else{const h=new Cn(s),g=r.writeTree_.setTree(e,h);return new Di(g)}}}function $2(r,e,s){let l=r;return xi(s,(h,g)=>{l=Xc(l,is(e,h),g)}),l}function eb(r,e){if(zt(e))return Di.empty();{const s=r.writeTree_.setTree(e,new Cn(null));return new Di(s)}}function qm(r,e){return wl(r,e)!=null}function wl(r,e){const s=r.writeTree_.findRootMostValueAndPath(e);return s!=null?r.writeTree_.get(s.path).getChild(mi(s.path,e)):null}function tb(r){const e=[],s=r.writeTree_.value;return s!=null?s.isLeafNode()||s.forEachChild(ms,(l,h)=>{e.push(new Vt(l,h))}):r.writeTree_.children.inorderTraversal((l,h)=>{h.value!=null&&e.push(new Vt(l,h.value))}),e}function Ta(r,e){if(zt(e))return r;{const s=wl(r,e);return s!=null?new Di(new Cn(s)):new Di(r.writeTree_.subtree(e))}}function Wm(r){return r.writeTree_.isEmpty()}function Oo(r,e){return pw(hn(),r.writeTree_,e)}function pw(r,e,s){if(e.value!=null)return s.updateChild(r,e.value);{let l=null;return e.children.inorderTraversal((h,g)=>{h===".priority"?(Ue(g.value!==null,"Priority writes must always be leaf nodes"),l=g.value):s=pw(is(r,h),g,s)}),!s.getChild(r).isEmpty()&&l!==null&&(s=s.updateChild(is(r,".priority"),l)),s}}function bw(r,e){return Cw(e,r)}function IT(r,e,s,l,h){Ue(l>r.lastWriteId,"Stacking an older write on top of newer ones"),h===void 0&&(h=!0),r.allWrites.push({path:e,snap:s,writeId:l,visible:h}),h&&(r.visibleWrites=Xc(r.visibleWrites,e,s)),r.lastWriteId=l}function RT(r,e){for(let s=0;s<r.allWrites.length;s++){const l=r.allWrites[s];if(l.writeId===e)return l}return null}function MT(r,e){const s=r.allWrites.findIndex(C=>C.writeId===e);Ue(s>=0,"removeWrite called with nonexistent writeId.");const l=r.allWrites[s];r.allWrites.splice(s,1);let h=l.visible,g=!1,y=r.allWrites.length-1;for(;h&&y>=0;){const C=r.allWrites[y];C.visible&&(y>=s&&DT(C,l.path)?h=!1:Mi(l.path,C.path)&&(g=!0)),y--}if(h){if(g)return OT(r),!0;if(l.snap)r.visibleWrites=eb(r.visibleWrites,l.path);else{const C=l.children;xi(C,A=>{r.visibleWrites=eb(r.visibleWrites,is(l.path,A))})}return!0}else return!1}function DT(r,e){if(r.snap)return Mi(r.path,e);for(const s in r.children)if(r.children.hasOwnProperty(s)&&Mi(is(r.path,s),e))return!0;return!1}function OT(r){r.visibleWrites=yw(r.allWrites,jT,hn()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function jT(r){return r.visible}function yw(r,e,s){let l=Di.empty();for(let h=0;h<r.length;++h){const g=r[h];if(e(g)){const y=g.path;let C;if(g.snap)Mi(s,y)?(C=mi(s,y),l=Xc(l,C,g.snap)):Mi(y,s)&&(C=mi(y,s),l=Xc(l,hn(),g.snap.getChild(C)));else if(g.children){if(Mi(s,y))C=mi(s,y),l=$2(l,C,g.children);else if(Mi(y,s))if(C=mi(y,s),zt(C))l=$2(l,hn(),g.children);else{const A=Ro(g.children,Ht(C));if(A){const N=A.getChild(En(C));l=Xc(l,hn(),N)}}}else throw su("WriteRecord should have .snap or .children")}}return l}function vw(r,e,s,l,h){if(!l&&!h){const g=wl(r.visibleWrites,e);if(g!=null)return g;{const y=Ta(r.visibleWrites,e);if(Wm(y))return s;if(s==null&&!qm(y,hn()))return null;{const C=s||sn.EMPTY_NODE;return Oo(y,C)}}}else{const g=Ta(r.visibleWrites,e);if(!h&&Wm(g))return s;if(!h&&s==null&&!qm(g,hn()))return null;{const y=function(N){return(N.visible||h)&&(!l||!~l.indexOf(N.writeId))&&(Mi(N.path,e)||Mi(e,N.path))},C=yw(r.allWrites,y,e),A=s||sn.EMPTY_NODE;return Oo(C,A)}}}function LT(r,e,s){let l=sn.EMPTY_NODE;const h=wl(r.visibleWrites,e);if(h)return h.isLeafNode()||h.forEachChild(ms,(g,y)=>{l=l.updateImmediateChild(g,y)}),l;if(s){const g=Ta(r.visibleWrites,e);return s.forEachChild(ms,(y,C)=>{const A=Oo(Ta(g,new An(y)),C);l=l.updateImmediateChild(y,A)}),tb(g).forEach(y=>{l=l.updateImmediateChild(y.name,y.node)}),l}else{const g=Ta(r.visibleWrites,e);return tb(g).forEach(y=>{l=l.updateImmediateChild(y.name,y.node)}),l}}function kT(r,e,s,l,h){Ue(l||h,"Either existingEventSnap or existingServerSnap must exist");const g=is(e,s);if(qm(r.visibleWrites,g))return null;{const y=Ta(r.visibleWrites,g);return Wm(y)?h.getChild(s):Oo(y,h.getChild(s))}}function BT(r,e,s,l){const h=is(e,s),g=wl(r.visibleWrites,h);if(g!=null)return g;if(l.isCompleteForChild(s)){const y=Ta(r.visibleWrites,h);return Oo(y,l.getNode().getImmediateChild(s))}else return null}function PT(r,e){return wl(r.visibleWrites,e)}function UT(r,e,s,l,h,g,y){let C;const A=Ta(r.visibleWrites,e),N=wl(A,hn());if(N!=null)C=N;else if(s!=null)C=Oo(A,s);else return[];if(C=C.withIndex(y),!C.isEmpty()&&!C.isLeafNode()){const I=[],T=y.getCompare(),k=g?C.getReverseIteratorFrom(l,y):C.getIteratorFrom(l,y);let U=k.getNext();for(;U&&I.length<h;)T(U,l)!==0&&I.push(U),U=k.getNext();return I}else return[]}function zT(){return{visibleWrites:Di.empty(),allWrites:[],lastWriteId:-1}}function Xm(r,e,s,l){return vw(r.writeTree,r.treePath,e,s,l)}function ww(r,e){return LT(r.writeTree,r.treePath,e)}function nb(r,e,s,l){return kT(r.writeTree,r.treePath,e,s,l)}function Nh(r,e){return PT(r.writeTree,is(r.treePath,e))}function FT(r,e,s,l,h,g){return UT(r.writeTree,r.treePath,e,s,l,h,g)}function D1(r,e,s){return BT(r.writeTree,r.treePath,e,s)}function Nw(r,e){return Cw(is(r.treePath,e),r.writeTree)}function Cw(r,e){return{treePath:r,writeTree:e}}class HT{constructor(){this.changeMap=new Map}trackChildChange(e){const s=e.type,l=e.childName;Ue(s==="child_added"||s==="child_changed"||s==="child_removed","Only child changes supported for tracking"),Ue(l!==".priority","Only non-priority child changes can be tracked.");const h=this.changeMap.get(l);if(h){const g=h.type;if(s==="child_added"&&g==="child_removed")this.changeMap.set(l,Q2(l,e.snapshotNode,h.snapshotNode));else if(s==="child_removed"&&g==="child_added")this.changeMap.delete(l);else if(s==="child_removed"&&g==="child_changed")this.changeMap.set(l,pT(l,h.oldSnap));else if(s==="child_changed"&&g==="child_added")this.changeMap.set(l,xT(l,e.snapshotNode));else if(s==="child_changed"&&g==="child_changed")this.changeMap.set(l,Q2(l,e.snapshotNode,h.oldSnap));else throw su("Illegal combination of changes: "+e+" occurred after "+h)}else this.changeMap.set(l,e)}getChanges(){return Array.from(this.changeMap.values())}}class VT{getCompleteChild(e){return null}getChildAfterChild(e,s,l){return null}}const Ew=new VT;class O1{constructor(e,s,l=null){this.writes_=e,this.viewCache_=s,this.optCompleteServerCache_=l}getCompleteChild(e){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(e))return s.getNode().getImmediateChild(e);{const l=this.optCompleteServerCache_!=null?new M1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return D1(this.writes_,e,l)}}getChildAfterChild(e,s,l){const h=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:pl(this.viewCache_),g=FT(this.writes_,h,s,1,l,e);return g.length===0?null:g[0]}}function GT(r,e){Ue(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),Ue(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function YT(r,e,s,l,h){const g=new HT;let y,C;if(s.type===Ki.OVERWRITE){const N=s;N.source.fromUser?y=Qm(r,e,N.path,N.snap,l,h,g):(Ue(N.source.fromServer,"Unknown source."),C=N.source.tagged||e.serverCache.isFiltered()&&!zt(N.path),y=Ch(r,e,N.path,N.snap,l,h,C,g))}else if(s.type===Ki.MERGE){const N=s;N.source.fromUser?y=WT(r,e,N.path,N.children,l,h,g):(Ue(N.source.fromServer,"Unknown source."),C=N.source.tagged||e.serverCache.isFiltered(),y=Zm(r,e,N.path,N.children,l,h,C,g))}else if(s.type===Ki.ACK_USER_WRITE){const N=s;N.revert?y=ZT(r,e,N.path,l,h,g):y=XT(r,e,N.path,N.affectedTree,l,h,g)}else if(s.type===Ki.LISTEN_COMPLETE)y=QT(r,e,s.path,l,g);else throw su("Unknown operation type: "+s.type);const A=g.getChanges();return qT(e,y,A),{viewCache:y,changes:A}}function qT(r,e,s){const l=e.eventCache;if(l.isFullyInitialized()){const h=l.getNode().isLeafNode()||l.getNode().isEmpty(),g=Ym(r);(s.length>0||!r.eventCache.isFullyInitialized()||h&&!l.getNode().equals(g)||!l.getNode().getPriority().equals(g.getPriority()))&&s.push(gT(Ym(e)))}}function Aw(r,e,s,l,h,g){const y=e.eventCache;if(Nh(l,s)!=null)return e;{let C,A;if(zt(s))if(Ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const N=pl(e),I=N instanceof sn?N:sn.EMPTY_NODE,T=ww(l,I);C=r.filter.updateFullNode(e.eventCache.getNode(),T,g)}else{const N=Xm(l,pl(e));C=r.filter.updateFullNode(e.eventCache.getNode(),N,g)}else{const N=Ht(s);if(N===".priority"){Ue(Ra(s)===1,"Can't have a priority with additional path components");const I=y.getNode();A=e.serverCache.getNode();const T=nb(l,s,I,A);T!=null?C=r.filter.updatePriority(I,T):C=y.getNode()}else{const I=En(s);let T;if(y.isCompleteForChild(N)){A=e.serverCache.getNode();const k=nb(l,s,y.getNode(),A);k!=null?T=y.getNode().getImmediateChild(N).updateChild(I,k):T=y.getNode().getImmediateChild(N)}else T=D1(l,N,e.serverCache);T!=null?C=r.filter.updateChild(y.getNode(),N,T,I,h,g):C=y.getNode()}}return Wc(e,C,y.isFullyInitialized()||zt(s),r.filter.filtersNodes())}}function Ch(r,e,s,l,h,g,y,C){const A=e.serverCache;let N;const I=y?r.filter:r.filter.getIndexedFilter();if(zt(s))N=I.updateFullNode(A.getNode(),l,null);else if(I.filtersNodes()&&!A.isFiltered()){const U=A.getNode().updateChild(s,l);N=I.updateFullNode(A.getNode(),U,null)}else{const U=Ht(s);if(!A.isCompleteForPath(s)&&Ra(s)>1)return e;const X=En(s),ae=A.getNode().getImmediateChild(U).updateChild(X,l);U===".priority"?N=I.updatePriority(A.getNode(),ae):N=I.updateChild(A.getNode(),U,ae,X,Ew,null)}const T=xw(e,N,A.isFullyInitialized()||zt(s),I.filtersNodes()),k=new O1(h,T,g);return Aw(r,T,s,h,k,C)}function Qm(r,e,s,l,h,g,y){const C=e.eventCache;let A,N;const I=new O1(h,e,g);if(zt(s))N=r.filter.updateFullNode(e.eventCache.getNode(),l,y),A=Wc(e,N,!0,r.filter.filtersNodes());else{const T=Ht(s);if(T===".priority")N=r.filter.updatePriority(e.eventCache.getNode(),l),A=Wc(e,N,C.isFullyInitialized(),C.isFiltered());else{const k=En(s),U=C.getNode().getImmediateChild(T);let X;if(zt(k))X=l;else{const z=I.getCompleteChild(T);z!=null?tw(k)===".priority"&&z.getChild(sw(k)).isEmpty()?X=z:X=z.updateChild(k,l):X=sn.EMPTY_NODE}if(U.equals(X))A=e;else{const z=r.filter.updateChild(C.getNode(),T,X,k,I,y);A=Wc(e,z,C.isFullyInitialized(),r.filter.filtersNodes())}}}return A}function sb(r,e){return r.eventCache.isCompleteForChild(e)}function WT(r,e,s,l,h,g,y){let C=e;return l.foreach((A,N)=>{const I=is(s,A);sb(e,Ht(I))&&(C=Qm(r,C,I,N,h,g,y))}),l.foreach((A,N)=>{const I=is(s,A);sb(e,Ht(I))||(C=Qm(r,C,I,N,h,g,y))}),C}function ib(r,e,s){return s.foreach((l,h)=>{e=e.updateChild(l,h)}),e}function Zm(r,e,s,l,h,g,y,C){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let A=e,N;zt(s)?N=l:N=new Cn(null).setTree(s,l);const I=e.serverCache.getNode();return N.children.inorderTraversal((T,k)=>{if(I.hasChild(T)){const U=e.serverCache.getNode().getImmediateChild(T),X=ib(r,U,k);A=Ch(r,A,new An(T),X,h,g,y,C)}}),N.children.inorderTraversal((T,k)=>{const U=!e.serverCache.isCompleteForChild(T)&&k.value===null;if(!I.hasChild(T)&&!U){const X=e.serverCache.getNode().getImmediateChild(T),z=ib(r,X,k);A=Ch(r,A,new An(T),z,h,g,y,C)}}),A}function XT(r,e,s,l,h,g,y){if(Nh(h,s)!=null)return e;const C=e.serverCache.isFiltered(),A=e.serverCache;if(l.value!=null){if(zt(s)&&A.isFullyInitialized()||A.isCompleteForPath(s))return Ch(r,e,s,A.getNode().getChild(s),h,g,C,y);if(zt(s)){let N=new Cn(null);return A.getNode().forEachChild(So,(I,T)=>{N=N.set(new An(I),T)}),Zm(r,e,s,N,h,g,C,y)}else return e}else{let N=new Cn(null);return l.foreach((I,T)=>{const k=is(s,I);A.isCompleteForPath(k)&&(N=N.set(I,A.getNode().getChild(k)))}),Zm(r,e,s,N,h,g,C,y)}}function QT(r,e,s,l,h){const g=e.serverCache,y=xw(e,g.getNode(),g.isFullyInitialized()||zt(s),g.isFiltered());return Aw(r,y,s,l,Ew,h)}function ZT(r,e,s,l,h,g){let y;if(Nh(l,s)!=null)return e;{const C=new O1(l,e,h),A=e.eventCache.getNode();let N;if(zt(s)||Ht(s)===".priority"){let I;if(e.serverCache.isFullyInitialized())I=Xm(l,pl(e));else{const T=e.serverCache.getNode();Ue(T instanceof sn,"serverChildren would be complete if leaf node"),I=ww(l,T)}I=I,N=r.filter.updateFullNode(A,I,g)}else{const I=Ht(s);let T=D1(l,I,e.serverCache);T==null&&e.serverCache.isCompleteForChild(I)&&(T=A.getImmediateChild(I)),T!=null?N=r.filter.updateChild(A,I,T,En(s),C,g):e.eventCache.getNode().hasChild(I)?N=r.filter.updateChild(A,I,sn.EMPTY_NODE,En(s),C,g):N=A,N.isEmpty()&&e.serverCache.isFullyInitialized()&&(y=Xm(l,pl(e)),y.isLeafNode()&&(N=r.filter.updateFullNode(N,y,g)))}return y=e.serverCache.isFullyInitialized()||Nh(l,hn())!=null,Wc(e,N,y,r.filter.filtersNodes())}}function KT(r,e){const s=pl(r.viewCache_);return s&&(r.query._queryParams.loadsAllData()||!zt(e)&&!s.getImmediateChild(Ht(e)).isEmpty())?s.getChild(e):null}function rb(r,e,s,l){e.type===Ki.MERGE&&e.source.queryId!==null&&(Ue(pl(r.viewCache_),"We should always have a full cache before handling merges"),Ue(Ym(r.viewCache_),"Missing event cache, even though we have a server cache"));const h=r.viewCache_,g=YT(r.processor_,h,e,s,l);return GT(r.processor_,g.viewCache),Ue(g.viewCache.serverCache.isFullyInitialized()||!h.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=g.viewCache,JT(r,g.changes,g.viewCache.eventCache.getNode())}function JT(r,e,s,l){const h=r.eventRegistrations_;return AT(r.eventGenerator_,e,s,h)}let ab;function $T(r){Ue(!ab,"__referenceConstructor has already been defined"),ab=r}function j1(r,e,s,l){const h=e.source.queryId;if(h!==null){const g=r.views.get(h);return Ue(g!=null,"SyncTree gave us an op for an invalid query."),rb(g,e,s,l)}else{let g=[];for(const y of r.views.values())g=g.concat(rb(y,e,s,l));return g}}function L1(r,e){let s=null;for(const l of r.views.values())s=s||KT(l,e);return s}let lb;function e4(r){Ue(!lb,"__referenceConstructor has already been defined"),lb=r}class ob{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cn(null),this.pendingWriteTree_=zT(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function t4(r,e,s,l,h){return IT(r.pendingWriteTree_,e,s,l,h),h?Bh(r,new xl(hw(),e,s)):[]}function bo(r,e,s=!1){const l=RT(r.pendingWriteTree_,e);if(MT(r.pendingWriteTree_,e)){let g=new Cn(null);return l.snap!=null?g=g.set(hn(),!0):xi(l.children,y=>{g=g.set(new An(y),!0)}),Bh(r,new wh(l.path,g,s))}else return[]}function kh(r,e,s){return Bh(r,new xl(fw(),e,s))}function n4(r,e,s){const l=Cn.fromObject(s);return Bh(r,new $c(fw(),e,l))}function s4(r,e,s,l){const h=Iw(r,l);if(h!=null){const g=Rw(h),y=g.path,C=g.queryId,A=mi(y,e),N=new xl(mw(C),A,s);return Mw(r,y,N)}else return[]}function i4(r,e,s,l){const h=Iw(r,l);if(h){const g=Rw(h),y=g.path,C=g.queryId,A=mi(y,e),N=Cn.fromObject(s),I=new $c(mw(C),A,N);return Mw(r,y,I)}else return[]}function Sw(r,e,s){const h=r.pendingWriteTree_,g=r.syncPointTree_.findOnPath(e,(y,C)=>{const A=mi(y,e),N=L1(C,A);if(N)return N});return vw(h,e,g,s,!0)}function Bh(r,e){return _w(e,r.syncPointTree_,null,bw(r.pendingWriteTree_,hn()))}function _w(r,e,s,l){if(zt(r.path))return Tw(r,e,s,l);{const h=e.get(hn());s==null&&h!=null&&(s=L1(h,hn()));let g=[];const y=Ht(r.path),C=r.operationForChild(y),A=e.children.get(y);if(A&&C){const N=s?s.getImmediateChild(y):null,I=Nw(l,y);g=g.concat(_w(C,A,N,I))}return h&&(g=g.concat(j1(h,r,l,s))),g}}function Tw(r,e,s,l){const h=e.get(hn());s==null&&h!=null&&(s=L1(h,hn()));let g=[];return e.children.inorderTraversal((y,C)=>{const A=s?s.getImmediateChild(y):null,N=Nw(l,y),I=r.operationForChild(y);I&&(g=g.concat(Tw(I,C,A,N)))}),h&&(g=g.concat(j1(h,r,l,s))),g}function Iw(r,e){return r.tagToQueryMap.get(e)}function Rw(r){const e=r.indexOf("$");return Ue(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new An(r.substr(0,e))}}function Mw(r,e,s){const l=r.syncPointTree_.get(e);Ue(l,"Missing sync point for query tag that we're tracking");const h=bw(r.pendingWriteTree_,e);return j1(l,s,h,null)}class k1{constructor(e){this.node_=e}getImmediateChild(e){const s=this.node_.getImmediateChild(e);return new k1(s)}node(){return this.node_}}class B1{constructor(e,s){this.syncTree_=e,this.path_=s}getImmediateChild(e){const s=is(this.path_,e);return new B1(this.syncTree_,s)}node(){return Sw(this.syncTree_,this.path_)}}const r4=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},cb=function(r,e,s){if(!r||typeof r!="object")return r;if(Ue(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return a4(r[".sv"],e,s);if(typeof r[".sv"]=="object")return l4(r[".sv"],e);Ue(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},a4=function(r,e,s){if(r==="timestamp")return s.timestamp;Ue(!1,"Unexpected server value: "+r)},l4=function(r,e,s){r.hasOwnProperty("increment")||Ue(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const l=r.increment;typeof l!="number"&&Ue(!1,"Unexpected increment value: "+l);const h=e.node();if(Ue(h!==null&&typeof h<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!h.isLeafNode())return l;const y=h.getValue();return typeof y!="number"?l:y+l},o4=function(r,e,s,l){return P1(e,new B1(s,r),l)},c4=function(r,e,s){return P1(r,new k1(e),s)};function P1(r,e,s){const l=r.getPriority().val(),h=cb(l,e.getImmediateChild(".priority"),s);let g;if(r.isLeafNode()){const y=r,C=cb(y.getValue(),e,s);return C!==y.getValue()||h!==y.getPriority().val()?new ns(C,fs(h)):r}else{const y=r;return g=y,h!==y.getPriority().val()&&(g=g.updatePriority(new ns(h))),y.forEachChild(ms,(C,A)=>{const N=P1(A,e.getImmediateChild(C),s);N!==A&&(g=g.updateImmediateChild(C,N))}),g}}class U1{constructor(e="",s=null,l={children:{},childCount:0}){this.name=e,this.parent=s,this.node=l}}function z1(r,e){let s=e instanceof An?e:new An(e),l=r,h=Ht(s);for(;h!==null;){const g=Ro(l.node.children,h)||{children:{},childCount:0};l=new U1(h,l,g),s=En(s),h=Ht(s)}return l}function Fo(r){return r.node.value}function Dw(r,e){r.node.value=e,Km(r)}function Ow(r){return r.node.childCount>0}function u4(r){return Fo(r)===void 0&&!Ow(r)}function Ph(r,e){xi(r.node.children,(s,l)=>{e(new U1(s,r,l))})}function jw(r,e,s,l){s&&e(r),Ph(r,h=>{jw(h,e,!0)})}function d4(r,e,s){let l=r.parent;for(;l!==null;){if(e(l))return!0;l=l.parent}return!1}function du(r){return new An(r.parent===null?r.name:du(r.parent)+"/"+r.name)}function Km(r){r.parent!==null&&h4(r.parent,r.name,r)}function h4(r,e,s){const l=u4(s),h=Lr(r.node.children,e);l&&h?(delete r.node.children[e],r.node.childCount--,Km(r)):!l&&!h&&(r.node.children[e]=s.node,r.node.childCount++,Km(r))}const f4=/[\[\].#$\/\u0000-\u001F\u007F]/,m4=/[\[\].#$\u0000-\u001F\u007F]/,$0=10*1024*1024,Lw=function(r){return typeof r=="string"&&r.length!==0&&!f4.test(r)},g4=function(r){return typeof r=="string"&&r.length!==0&&!m4.test(r)},x4=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),g4(r)},kw=function(r,e,s){const l=s instanceof An?new Q_(s,r):s;if(e===void 0)throw new Error(r+"contains undefined "+ll(l));if(typeof e=="function")throw new Error(r+"contains a function "+ll(l)+" with contents = "+e.toString());if(jv(e))throw new Error(r+"contains "+e.toString()+" "+ll(l));if(typeof e=="string"&&e.length>$0/3&&Th(e)>$0)throw new Error(r+"contains a string greater than "+$0+" utf8 bytes "+ll(l)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let h=!1,g=!1;if(xi(e,(y,C)=>{if(y===".value")h=!0;else if(y!==".priority"&&y!==".sv"&&(g=!0,!Lw(y)))throw new Error(r+" contains an invalid key ("+y+") "+ll(l)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Z_(l,y),kw(r,C,l),K_(l)}),h&&g)throw new Error(r+' contains ".value" child '+ll(l)+" in addition to actual children.")}},p4=function(r,e){const s=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Lw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||s.length!==0&&!x4(s))throw new Error(zE(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class b4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function y4(r,e){let s=null;for(let l=0;l<e.length;l++){const h=e[l],g=h.getPath();s!==null&&!iw(g,s.path)&&(r.eventLists_.push(s),s=null),s===null&&(s={events:[],path:g}),s.events.push(h)}s&&r.eventLists_.push(s)}function Nl(r,e,s){y4(r,s),v4(r,l=>Mi(l,e)||Mi(e,l))}function v4(r,e){r.recursionDepth_++;let s=!0;for(let l=0;l<r.eventLists_.length;l++){const h=r.eventLists_[l];if(h){const g=h.path;e(g)?(w4(r.eventLists_[l]),r.eventLists_[l]=null):s=!1}}s&&(r.eventLists_=[]),r.recursionDepth_--}function w4(r){for(let e=0;e<r.events.length;e++){const s=r.events[e];if(s!==null){r.events[e]=null;const l=s.getEventRunner();Yc&&hs("event: "+s.toString()),cu(l)}}}const N4="repo_interrupt",C4=25;class E4{constructor(e,s,l,h){this.repoInfo_=e,this.forceRestClient_=s,this.authTokenProvider_=l,this.appCheckProvider_=h,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vh(),this.transactionQueueTree_=new U1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A4(r,e,s){if(r.stats_=S1(r.repoInfo_),r.forceRestClient_||v_())r.server_=new yh(r.repoInfo_,(l,h,g,y)=>{ub(r,l,h,g,y)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>db(r,!0),0);else{if(typeof s<"u"&&s!==null){if(typeof s!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ds(s)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}r.persistentConnection_=new Mr(r.repoInfo_,e,(l,h,g,y)=>{ub(r,l,h,g,y)},l=>{db(r,l)},l=>{_4(r,l)},r.authTokenProvider_,r.appCheckProvider_,s),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(l=>{r.server_.refreshAuthToken(l)}),r.appCheckProvider_.addTokenChangeListener(l=>{r.server_.refreshAppCheckToken(l.token)}),r.statsReporter_=A_(r.repoInfo_,()=>new ET(r.stats_,r.server_)),r.infoData_=new yT,r.infoSyncTree_=new ob({startListening:(l,h,g,y)=>{let C=[];const A=r.infoData_.getNode(l._path);return A.isEmpty()||(C=kh(r.infoSyncTree_,l._path,A),setTimeout(()=>{y("ok")},0)),C},stopListening:()=>{}}),F1(r,"connected",!1),r.serverSyncTree_=new ob({startListening:(l,h,g,y)=>(r.server_.listen(l,g,h,(C,A)=>{const N=y(C,A);Nl(r.eventQueue_,l._path,N)}),[]),stopListening:(l,h)=>{r.server_.unlisten(l,h)}})}function S4(r){const s=r.infoData_.getNode(new An(".info/serverTimeOffset")).val()||0;return new Date().getTime()+s}function Bw(r){return r4({timestamp:S4(r)})}function ub(r,e,s,l,h){r.dataUpdateCount++;const g=new An(e);s=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,s):s;let y=[];if(h)if(l){const A=lh(s,N=>fs(N));y=i4(r.serverSyncTree_,g,A,h)}else{const A=fs(s);y=s4(r.serverSyncTree_,g,A,h)}else if(l){const A=lh(s,N=>fs(N));y=n4(r.serverSyncTree_,g,A)}else{const A=fs(s);y=kh(r.serverSyncTree_,g,A)}let C=g;y.length>0&&(C=V1(r,g)),Nl(r.eventQueue_,C,y)}function db(r,e){F1(r,"connected",e),e===!1&&I4(r)}function _4(r,e){xi(e,(s,l)=>{F1(r,s,l)})}function F1(r,e,s){const l=new An("/.info/"+e),h=fs(s);r.infoData_.updateSnapshot(l,h);const g=kh(r.infoSyncTree_,l,h);Nl(r.eventQueue_,l,g)}function T4(r){return r.nextWriteId_++}function I4(r){Pw(r,"onDisconnectEvents");const e=Bw(r),s=vh();Gm(r.onDisconnect_,hn(),(h,g)=>{const y=o4(h,g,r.serverSyncTree_,e);dw(s,h,y)});let l=[];Gm(s,hn(),(h,g)=>{l=l.concat(kh(r.serverSyncTree_,h,g));const y=O4(r,h);V1(r,y)}),r.onDisconnect_=vh(),Nl(r.eventQueue_,hn(),l)}function R4(r){r.persistentConnection_&&r.persistentConnection_.interrupt(N4)}function Pw(r,...e){let s="";r.persistentConnection_&&(s=r.persistentConnection_.id+":"),hs(s,...e)}function Uw(r,e,s){return Sw(r.serverSyncTree_,e,s)||sn.EMPTY_NODE}function H1(r,e=r.transactionQueueTree_){if(e||Uh(r,e),Fo(e)){const s=Fw(r,e);Ue(s.length>0,"Sending zero length transaction queue"),s.every(h=>h.status===0)&&M4(r,du(e),s)}else Ow(e)&&Ph(e,s=>{H1(r,s)})}function M4(r,e,s){const l=s.map(N=>N.currentWriteId),h=Uw(r,e,l);let g=h;const y=h.hash();for(let N=0;N<s.length;N++){const I=s[N];Ue(I.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const T=mi(e,I.path);g=g.updateChild(T,I.currentOutputSnapshotRaw)}const C=g.val(!0),A=e;r.server_.put(A.toString(),C,N=>{Pw(r,"transaction put response",{path:A.toString(),status:N});let I=[];if(N==="ok"){const T=[];for(let k=0;k<s.length;k++)s[k].status=2,I=I.concat(bo(r.serverSyncTree_,s[k].currentWriteId)),s[k].onComplete&&T.push(()=>s[k].onComplete(null,!0,s[k].currentOutputSnapshotResolved)),s[k].unwatcher();Uh(r,z1(r.transactionQueueTree_,e)),H1(r,r.transactionQueueTree_),Nl(r.eventQueue_,e,I);for(let k=0;k<T.length;k++)cu(T[k])}else{if(N==="datastale")for(let T=0;T<s.length;T++)s[T].status===3?s[T].status=4:s[T].status=0;else{Ks("transaction at "+A.toString()+" failed: "+N);for(let T=0;T<s.length;T++)s[T].status=4,s[T].abortReason=N}V1(r,e)}},y)}function V1(r,e){const s=zw(r,e),l=du(s),h=Fw(r,s);return D4(r,h,l),l}function D4(r,e,s){if(e.length===0)return;const l=[];let h=[];const y=e.filter(C=>C.status===0).map(C=>C.currentWriteId);for(let C=0;C<e.length;C++){const A=e[C],N=mi(s,A.path);let I=!1,T;if(Ue(N!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),A.status===4)I=!0,T=A.abortReason,h=h.concat(bo(r.serverSyncTree_,A.currentWriteId,!0));else if(A.status===0)if(A.retryCount>=C4)I=!0,T="maxretry",h=h.concat(bo(r.serverSyncTree_,A.currentWriteId,!0));else{const k=Uw(r,A.path,y);A.currentInputSnapshot=k;const U=e[C].update(k.val());if(U!==void 0){kw("transaction failed: Data returned ",U,A.path);let X=fs(U);typeof U=="object"&&U!=null&&Lr(U,".priority")||(X=X.updatePriority(k.getPriority()));const ae=A.currentWriteId,fe=Bw(r),B=c4(X,k,fe);A.currentOutputSnapshotRaw=X,A.currentOutputSnapshotResolved=B,A.currentWriteId=T4(r),y.splice(y.indexOf(ae),1),h=h.concat(t4(r.serverSyncTree_,A.path,B,A.currentWriteId,A.applyLocally)),h=h.concat(bo(r.serverSyncTree_,ae,!0))}else I=!0,T="nodata",h=h.concat(bo(r.serverSyncTree_,A.currentWriteId,!0))}Nl(r.eventQueue_,s,h),h=[],I&&(e[C].status=2,(function(k){setTimeout(k,Math.floor(0))})(e[C].unwatcher),e[C].onComplete&&(T==="nodata"?l.push(()=>e[C].onComplete(null,!1,e[C].currentInputSnapshot)):l.push(()=>e[C].onComplete(new Error(T),!1,null))))}Uh(r,r.transactionQueueTree_);for(let C=0;C<l.length;C++)cu(l[C]);H1(r,r.transactionQueueTree_)}function zw(r,e){let s,l=r.transactionQueueTree_;for(s=Ht(e);s!==null&&Fo(l)===void 0;)l=z1(l,s),e=En(e),s=Ht(e);return l}function Fw(r,e){const s=[];return Hw(r,e,s),s.sort((l,h)=>l.order-h.order),s}function Hw(r,e,s){const l=Fo(e);if(l)for(let h=0;h<l.length;h++)s.push(l[h]);Ph(e,h=>{Hw(r,h,s)})}function Uh(r,e){const s=Fo(e);if(s){let l=0;for(let h=0;h<s.length;h++)s[h].status!==2&&(s[l]=s[h],l++);s.length=l,Dw(e,s.length>0?s:void 0)}Ph(e,l=>{Uh(r,l)})}function O4(r,e){const s=du(zw(r,e)),l=z1(r.transactionQueueTree_,e);return d4(l,h=>{em(r,h)}),em(r,l),jw(l,h=>{em(r,h)}),s}function em(r,e){const s=Fo(e);if(s){const l=[];let h=[],g=-1;for(let y=0;y<s.length;y++)s[y].status===3||(s[y].status===1?(Ue(g===y-1,"All SENT items should be at beginning of queue."),g=y,s[y].status=3,s[y].abortReason="set"):(Ue(s[y].status===0,"Unexpected transaction status in abort"),s[y].unwatcher(),h=h.concat(bo(r.serverSyncTree_,s[y].currentWriteId,!0)),s[y].onComplete&&l.push(s[y].onComplete.bind(null,new Error("set"),!1,null))));g===-1?Dw(e,void 0):s.length=g+1,Nl(r.eventQueue_,du(e),h);for(let y=0;y<l.length;y++)cu(l[y])}}function j4(r){let e="";const s=r.split("/");for(let l=0;l<s.length;l++)if(s[l].length>0){let h=s[l];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch{}e+="/"+h}return e}function L4(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const s of r.split("&")){if(s.length===0)continue;const l=s.split("=");l.length===2?e[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):Ks(`Invalid query segment '${s}' in query '${r}'`)}return e}const hb=function(r,e){const s=k4(r),l=s.namespace;s.domain==="firebase.com"&&jr(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||l==="undefined")&&s.domain!=="localhost"&&jr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||h_();const h=s.scheme==="ws"||s.scheme==="wss";return{repoInfo:new qv(s.host,s.secure,l,h,e,"",l!==s.subdomain),path:new An(s.pathString)}},k4=function(r){let e="",s="",l="",h="",g="",y=!0,C="https",A=443;if(typeof r=="string"){let N=r.indexOf("//");N>=0&&(C=r.substring(0,N-1),r=r.substring(N+2));let I=r.indexOf("/");I===-1&&(I=r.length);let T=r.indexOf("?");T===-1&&(T=r.length),e=r.substring(0,Math.min(I,T)),I<T&&(h=j4(r.substring(I,T)));const k=L4(r.substring(Math.min(r.length,T)));N=e.indexOf(":"),N>=0?(y=C==="https"||C==="wss",A=parseInt(e.substring(N+1),10)):N=e.length;const U=e.slice(0,N);if(U.toLowerCase()==="localhost")s="localhost";else if(U.split(".").length<=2)s=U;else{const X=e.indexOf(".");l=e.substring(0,X).toLowerCase(),s=e.substring(X+1),g=l}"ns"in k&&(g=k.ns)}return{host:e,port:A,domain:s,subdomain:l,secure:y,scheme:C,pathString:h,namespace:g}};class G1{constructor(e,s,l,h){this._repo=e,this._path=s,this._queryParams=l,this._orderByCalled=h}get key(){return zt(this._path)?null:tw(this._path)}get ref(){return new Ho(this._repo,this._path)}get _queryIdentifier(){const e=K2(this._queryParams),s=E1(e);return s==="{}"?"default":s}get _queryObject(){return K2(this._queryParams)}isEqual(e){if(e=Oa(e),!(e instanceof G1))return!1;const s=this._repo===e._repo,l=iw(this._path,e._path),h=this._queryIdentifier===e._queryIdentifier;return s&&l&&h}toJSON(){return this.toString()}toString(){return this._repo.toString()+X_(this._path)}}class Ho extends G1{constructor(e,s){super(e,s,new R1,!1)}get parent(){const e=sw(this._path);return e===null?null:new Ho(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}$T(Ho);e4(Ho);const B4="FIREBASE_DATABASE_EMULATOR_HOST",Jm={};let P4=!1;function U4(r,e,s,l){const h=e.lastIndexOf(":"),g=e.substring(0,h),y=nu(g);r.repoInfo_=new qv(e,y,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,s),l&&(r.authTokenProvider_=l)}function z4(r,e,s,l,h){let g=l||r.options.databaseURL;g===void 0&&(r.options.projectId||jr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hs("Using default host for project ",r.options.projectId),g=`${r.options.projectId}-default-rtdb.firebaseio.com`);let y=hb(g,h),C=y.repoInfo,A;typeof process<"u"&&D2&&(A=D2[B4]),A?(g=`http://${A}?ns=${C.namespace}`,y=hb(g,h),C=y.repoInfo):y.repoInfo.secure;const N=new N_(r.name,r.options,e);p4("Invalid Firebase Database URL",y),zt(y.path)||jr("Database URL must point to the root of a Firebase Database (not including a child path).");const I=H4(C,r,N,new w_(r,s));return new V4(I,r)}function F4(r,e){const s=Jm[e];(!s||s[r.key]!==r)&&jr(`Database ${e}(${r.repoInfo_}) has already been deleted.`),R4(r),delete s[r.key]}function H4(r,e,s,l){let h=Jm[e.name];h||(h={},Jm[e.name]=h);let g=h[r.toURLString()];return g&&jr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),g=new E4(r,P4,s,l),h[r.toURLString()]=g,g}class V4{constructor(e,s){this._repoInternal=e,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(A4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ho(this._repo,hn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(F4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&jr("Cannot call "+e+" on a deleted database.")}}function G4(r=Dy(),e){const s=h1(r,"database").getImmediate({identifier:e});if(!s._instanceStarted){const l=qE("database");l&&Y4(s,...l)}return s}function Y4(r,e,s,l={}){r=Oa(r),r._checkNotDeleted("useEmulator");const h=`${e}:${s}`,g=r._repoInternal;if(r._instanceStarted){if(h===r._repoInternal.repoInfo_.host&&ah(l,g.repoInfo_.emulatorOptions))return;jr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let y;if(g.repoInfo_.nodeAdmin)l.mockUserToken&&jr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),y=new $d($d.OWNER);else if(l.mockUserToken){const C=typeof l.mockUserToken=="string"?l.mockUserToken:WE(l.mockUserToken,r.app.options.projectId);y=new $d(C)}nu(e)&&(Oy(e),jy("Database",!0)),U4(g,h,l,y)}function q4(r){a_(jo),jm(new Lm("database",(e,{instanceIdentifier:s})=>{const l=e.getProvider("app").getImmediate(),h=e.getProvider("auth-internal"),g=e.getProvider("app-check-internal");return z4(l,h,g,s)},"PUBLIC").setMultipleInstances(!0)),rh(O2,j2,r),rh(O2,j2,"esm2020")}Mr.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Mr.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};q4();const W4={apiKey:"AIzaSyAyU-5DyyqFcJ0Xxrx260MctrH92xXpAxU",authDomain:"omnigate-hospital-a823d.firebaseapp.com",databaseURL:"https://omnigate-hospital-default-rtdb.firebaseio.com",projectId:"omnigate-hospital-a823d",storageBucket:"omnigate-hospital-a823d.firebasestorage.app",messagingSenderId:"383027994808",appId:"1:383027994808:web:2f2b809911099dfd8a944d"},Y1=XE(W4);i_(Y1);const er=QE(Y1);G4(Y1);const bl=async r=>{try{const e=ja(er,"auditLogs"),s={eventType:r.eventType,performedBy:r.performedBy,performedByRole:r.performedByRole,targetType:r.targetType,targetId:r.targetId,targetName:r.targetName,action:r.action,details:r.details||{},ipAddress:r.ipAddress||"N/A",timestamp:Zi(),status:r.status||"success"},l=await Ih(e,s);return console.log(" Audit log created:",l.id),{success:!0,id:l.id}}catch(e){return console.error(" Error creating audit log:",e),{success:!1,error:e.message}}},X4=async(r,e=[])=>{try{const s=ja(er,"patients"),l={hhid:r.hhid||`HH${Date.now().toString().slice(-6)}`,name:r.name,age:parseInt(r.age),gender:r.gender||"Not specified",sex:r.gender?.[0]?.toUpperCase()||"U",weight:parseFloat(r.weight),height:parseFloat(r.height)||0,chiefComplaints:r.chiefComplaints,historyOfIllness:r.historyOfIllness||"",pastMedicalHistory:r.pastMedicalHistory||"",allergies:r.allergies||"",familyHistory:r.familyHistory,provisionalDiagnosis:r.provisionalDiagnosis||"",diagnosis:r.provisionalDiagnosis||"Pending",labTests:e,ward:r.ward||"General Ward",bed:r.bed||"Pending",status:r.status||"stable",admissionDate:r.admissionDate||new Date().toISOString().split("T")[0],dischargeDate:r.dischargeDate||null,isActive:!r.dischargeDate,createdAt:Zi(),updatedAt:Zi()},h=await Ih(s,l);return await bl({eventType:"patient_created",performedBy:"Registration Desk",performedByRole:"admin",targetType:"patient",targetId:l.hhid,targetName:l.name,action:`New patient registered: ${l.name} (${l.hhid})`,details:{age:l.age,gender:l.gender,ward:l.ward,admissionDate:l.admissionDate,status:l.status},status:"success"}),console.log(" Patient added:",h.id),{success:!0,id:h.id,hhid:l.hhid}}catch(s){return console.error(" Error adding patient:",s),{success:!1,error:s.message}}},Q4=async(r,e,s=[],l="System")=>{try{const h=ky(er,"patients",r),g={name:e.name,age:parseInt(e.age),gender:e.gender,sex:e.gender?.[0]?.toUpperCase()||"U",weight:parseFloat(e.weight),height:parseFloat(e.height)||0,ward:e.ward,bed:e.bed,status:e.status,diagnosis:e.diagnosis,provisionalDiagnosis:e.provisionalDiagnosis||"",allergies:e.allergies||"",chiefComplaints:e.chiefComplaints||"",historyOfIllness:e.historyOfIllness||"",pastMedicalHistory:e.pastMedicalHistory||"",familyHistory:e.familyHistory||"",labTests:s,dischargeDate:e.dischargeDate||null,isActive:!e.dischargeDate,updatedAt:Zi()};return await By(h,g),await bl({eventType:"patient_updated",performedBy:l,performedByRole:"admin",targetType:"patient",targetId:e.hhid||"Unknown",targetName:e.name,action:`Patient record updated: ${e.name}`,details:{updatedFields:Object.keys(g),newStatus:e.status,dischargeDate:e.dischargeDate},status:"success"}),console.log(" Patient updated successfully"),{success:!0}}catch(h){return console.error(" Error updating patient:",h),await bl({eventType:"patient_update_failed",performedBy:l,performedByRole:"admin",targetType:"patient",targetId:e.hhid||"Unknown",targetName:e.name,action:`Failed to update patient: ${e.name}`,details:{error:h.message},status:"failed"}),{success:!1,error:h.message}}};var eh={exports:{}},Z4=eh.exports,fb;function K4(){return fb||(fb=1,(function(r,e){(function(s,l){r.exports=l(_y())})(typeof self<"u"?self:Z4,function(s){return(function(){var l={155:function(B){B.exports=s}},h={};function g(B){var W=h[B];if(W!==void 0)return W.exports;var te=h[B]={exports:{}};return l[B](te,te.exports,g),te.exports}g.d=function(B,W){for(var te in W)g.o(W,te)&&!g.o(B,te)&&Object.defineProperty(B,te,{enumerable:!0,get:W[te]})},g.o=function(B,W){return Object.prototype.hasOwnProperty.call(B,W)},g.r=function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})};var y={};g.r(y),g.d(y,{useReactToPrint:function(){return fe}});var C=g(155);const A="printWindow";function N({level:B="error",messages:W,suppressErrors:te=!1}){te||(B==="error"?console.error(W):B==="warning"?console.warn(W):console.debug(W))}function I(B,W){if(W||!B){const te=document.getElementById(A);te&&document.body.removeChild(te)}}function T(B){return B instanceof Error?B:new Error("Unknown Error")}function k(B,W){const{documentTitle:te,onAfterPrint:ne,onPrintError:ce,preserveAfterPrint:G,print:J,suppressErrors:Q}=W;setTimeout(()=>{var Ce,Z;if(B.contentWindow){let se=function(){ne?.(),I(G)};if(B.contentWindow.focus(),J)J(B).then(se).catch(ge=>{ce?ce("print",T(ge)):N({messages:["An error was thrown by the specified `print` function"],suppressErrors:Q})});else{if(B.contentWindow.print){const ge=(Z=(Ce=B.contentDocument)===null||Ce===void 0?void 0:Ce.title)!==null&&Z!==void 0?Z:"",Ae=B.ownerDocument.title;te&&(B.ownerDocument.title=te,B.contentDocument&&(B.contentDocument.title=te)),B.contentWindow.print(),te&&(B.ownerDocument.title=Ae,B.contentDocument&&(B.contentDocument.title=ge))}else N({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:Q});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(ge=>{var Ae,Y;return((Y=(Ae=navigator.userAgent)!==null&&Ae!==void 0?Ae:navigator.vendor)!==null&&Y!==void 0?Y:"opera"in window&&window.opera).match(ge)})?setTimeout(se,500):se()}}else N({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:Q})},500)}function U(B){const W=[],te=document.createTreeWalker(B,NodeFilter.SHOW_ELEMENT,null);let ne=te.nextNode();for(;ne;)W.push(ne),ne=te.nextNode();return W}function X(B,W,te){const ne=U(B),ce=U(W);if(ne.length===ce.length)for(let G=0;G<ne.length;G++){const J=ne[G],Q=ce[G],Ce=J.shadowRoot;if(Ce!==null){const Z=Q.attachShadow({mode:Ce.mode});Z.innerHTML=Ce.innerHTML,X(Ce,Z,te)}}else N({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",B,W],suppressErrors:te})}const z=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function ae(B,W,te,ne){var ce,G,J,Q,Ce;const{contentNode:Z,clonedContentNode:se,clonedImgNodes:ge,clonedVideoNodes:Ae,numResourcesToLoad:Y,originalCanvasNodes:V}=te,{bodyClass:ue,fonts:ye,ignoreGlobalStyles:tt,pageStyle:Ke,nonce:ht,suppressErrors:ze,copyShadowRoots:Be}=ne;B.onload=null;const _e=(ce=B.contentDocument)!==null&&ce!==void 0?ce:(G=B.contentWindow)===null||G===void 0?void 0:G.document;if(_e){const st=_e.body.appendChild(se);Be&&X(Z,st,!!ze),ye&&(!((J=B.contentDocument)===null||J===void 0)&&J.fonts&&(!((Q=B.contentWindow)===null||Q===void 0)&&Q.FontFace)?ye.forEach(it=>{const de=new FontFace(it.family,it.source,{weight:it.weight,style:it.style});B.contentDocument.fonts.add(de),de.loaded.then(()=>{W(de)}).catch(Ge=>{W(de,["Failed loading the font:",de,"Load error:",T(Ge)])})}):(ye.forEach(it=>{W(it)}),N({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:ze})));const Le=Ke??z,Ye=_e.createElement("style");ht&&(Ye.setAttribute("nonce",ht),_e.head.setAttribute("nonce",ht)),Ye.appendChild(_e.createTextNode(Le)),_e.head.appendChild(Ye),ue&&_e.body.classList.add(...ue.split(" "));const rt=_e.querySelectorAll("canvas");for(let it=0;it<V.length;++it){const de=V[it],Ge=rt[it];if(Ge===void 0){N({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",de],suppressErrors:ze});continue}const He=Ge.getContext("2d");He&&He.drawImage(de,0,0)}for(let it=0;it<ge.length;it++){const de=ge[it],Ge=de.getAttribute("src");if(Ge){const He=new Image;He.onload=()=>{W(de)},He.onerror=(mt,vt,be,Ie,Nt)=>{W(de,["Error loading <img>",de,"Error",Nt])},He.src=Ge}else W(de,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',de])}for(let it=0;it<Ae.length;it++){const de=Ae[it];de.preload="auto";const Ge=de.getAttribute("poster");if(Ge){const He=new Image;He.onload=()=>{W(de)},He.onerror=(mt,vt,be,Ie,Nt)=>{W(de,["Error loading video poster",Ge,"for video",de,"Error:",Nt])},He.src=Ge}else de.readyState>=2?W(de):de.src?(de.onloadeddata=()=>{W(de)},de.onerror=(He,mt,vt,be,Ie)=>{W(de,["Error loading video",de,"Error",Ie])},de.onstalled=()=>{W(de,["Loading video stalled, skipping",de])}):W(de,["Error loading video, `src` is empty",de])}const wt="select",Et=Z.querySelectorAll(wt),pt=_e.querySelectorAll(wt);for(let it=0;it<Et.length;it++)pt[it].value=Et[it].value;if(!tt){const it=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let de=0,Ge=it.length;de<Ge;++de){const He=it[de];if(He.tagName.toLowerCase()==="style"){const mt=_e.createElement(He.tagName),vt=He.sheet;if(vt){let be="";try{const Ie=vt.cssRules.length;for(let Nt=0;Nt<Ie;++Nt)typeof vt.cssRules[Nt].cssText=="string"&&(be+=`${vt.cssRules[Nt].cssText}\r
`)}catch(Ie){N({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",He,`Original error: ${T(Ie).message}`],level:"warning"})}mt.setAttribute("id",`react-to-print-${de}`),ht&&mt.setAttribute("nonce",ht),mt.appendChild(_e.createTextNode(be)),_e.head.appendChild(mt)}}else if(He.getAttribute("href"))if(He.hasAttribute("disabled"))N({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",He],level:"warning"}),W(He);else{const mt=_e.createElement(He.tagName);for(let vt=0,be=He.attributes.length;vt<be;++vt){const Ie=He.attributes[vt];Ie&&mt.setAttribute(Ie.nodeName,(Ce=Ie.nodeValue)!==null&&Ce!==void 0?Ce:"")}mt.onload=()=>{W(mt)},mt.onerror=(vt,be,Ie,Nt,je)=>{W(mt,["Failed to load",mt,"Error:",je])},ht&&mt.setAttribute("nonce",ht),_e.head.appendChild(mt)}else N({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",He],level:"warning"}),W(He)}}}Y===0&&k(B,ne)}function fe({bodyClass:B,contentRef:W,copyShadowRoots:te,documentTitle:ne,fonts:ce,ignoreGlobalStyles:G,nonce:J,onAfterPrint:Q,onBeforePrint:Ce,onPrintError:Z,pageStyle:se,preserveAfterPrint:ge,print:Ae,printIframeProps:Y,suppressErrors:V}){return(0,C.useCallback)(ye=>{function tt(){const Ke={bodyClass:B,contentRef:W,copyShadowRoots:te,documentTitle:ne,fonts:ce,ignoreGlobalStyles:G,nonce:J,onAfterPrint:Q,onPrintError:Z,pageStyle:se,preserveAfterPrint:ge,print:Ae,suppressErrors:V},ht=(function(_e){const st=document.createElement("iframe");return st.width=`${document.documentElement.clientWidth}px`,st.height=`${document.documentElement.clientHeight}px`,st.style.position="absolute",st.style.top=`-${document.documentElement.clientHeight+100}px`,st.style.left=`-${document.documentElement.clientWidth+100}px`,st.id=A,st.srcdoc="<!DOCTYPE html>",_e&&(_e.allow&&(st.allow=_e.allow),_e.referrerPolicy!==void 0&&(st.referrerPolicy=_e.referrerPolicy),_e.sandbox!==void 0&&(st.sandbox=_e.sandbox)),st})(Y),ze=(function(_e,st){const{contentRef:Le,fonts:Ye,ignoreGlobalStyles:rt,suppressErrors:wt}=st,Et=(function({contentRef:mt,optionalContent:vt,suppressErrors:be}){return vt&&typeof vt=="function"?(mt&&N({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),vt()):mt?mt.current:void N({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:be})})({contentRef:Le,optionalContent:_e,suppressErrors:wt});if(!Et)return;const pt=Et.cloneNode(!0),it=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),de=pt.querySelectorAll("img"),Ge=pt.querySelectorAll("video"),He=Ye?Ye.length:0;return{contentNode:Et,clonedContentNode:pt,clonedImgNodes:de,clonedVideoNodes:Ge,numResourcesToLoad:(rt?0:it.length)+de.length+Ge.length+He,originalCanvasNodes:Et.querySelectorAll("canvas")}})(ye,Ke);if(!ze)return void N({messages:["There is nothing to print"],suppressErrors:V});const Be=(function(_e,st,Le){const{suppressErrors:Ye}=_e,rt=[],wt=[];return function(Et,pt){rt.includes(Et)?N({level:"debug",messages:["Tried to mark a resource that has already been handled",Et],suppressErrors:Ye}):(pt?(N({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...pt],suppressErrors:Ye}),wt.push(Et)):rt.push(Et),rt.length+wt.length===st&&k(Le,_e))}})(Ke,ze.numResourcesToLoad,ht);(function(_e,st,Le,Ye){_e.onload=()=>{ae(_e,st,Le,Ye)},document.body.appendChild(_e)})(ht,Be,ze,Ke)}I(ge,!0),Ce?Ce().then(()=>{tt()}).catch(Ke=>{Z?.("onBeforePrint",T(Ke))}):tt()},[B,W,te,ne,ce,G,J,Q,Ce,Z,se,ge,Ae,V])}return y})()})})(eh)),eh.exports}var J4=K4(),uo={},tm,mb;function $4(){return mb||(mb=1,tm=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),tm}var nm={},va={},gb;function Cl(){if(gb)return va;gb=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return va.getSymbolSize=function(l){if(!l)throw new Error('"version" cannot be null or undefined');if(l<1||l>40)throw new Error('"version" should be in range from 1 to 40');return l*4+17},va.getSymbolTotalCodewords=function(l){return e[l]},va.getBCHDigit=function(s){let l=0;for(;s!==0;)l++,s>>>=1;return l},va.setToSJISFunction=function(l){if(typeof l!="function")throw new Error('"toSJISFunc" is not a valid function.');r=l},va.isKanjiModeEnabled=function(){return typeof r<"u"},va.toSJIS=function(l){return r(l)},va}var sm={},xb;function q1(){return xb||(xb=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+s)}}r.isValid=function(l){return l&&typeof l.bit<"u"&&l.bit>=0&&l.bit<4},r.from=function(l,h){if(r.isValid(l))return l;try{return e(l)}catch{return h}}})(sm)),sm}var im,pb;function eI(){if(pb)return im;pb=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const s=Math.floor(e/8);return(this.buffer[s]>>>7-e%8&1)===1},put:function(e,s){for(let l=0;l<s;l++)this.putBit((e>>>s-l-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),e&&(this.buffer[s]|=128>>>this.length%8),this.length++}},im=r,im}var rm,bb;function tI(){if(bb)return rm;bb=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,s,l,h){const g=e*this.size+s;this.data[g]=l,h&&(this.reservedBit[g]=!0)},r.prototype.get=function(e,s){return this.data[e*this.size+s]},r.prototype.xor=function(e,s,l){this.data[e*this.size+s]^=l},r.prototype.isReserved=function(e,s){return this.reservedBit[e*this.size+s]},rm=r,rm}var am={},yb;function nI(){return yb||(yb=1,(function(r){const e=Cl().getSymbolSize;r.getRowColCoords=function(l){if(l===1)return[];const h=Math.floor(l/7)+2,g=e(l),y=g===145?26:Math.ceil((g-13)/(2*h-2))*2,C=[g-7];for(let A=1;A<h-1;A++)C[A]=C[A-1]-y;return C.push(6),C.reverse()},r.getPositions=function(l){const h=[],g=r.getRowColCoords(l),y=g.length;for(let C=0;C<y;C++)for(let A=0;A<y;A++)C===0&&A===0||C===0&&A===y-1||C===y-1&&A===0||h.push([g[C],g[A]]);return h}})(am)),am}var lm={},vb;function sI(){if(vb)return lm;vb=1;const r=Cl().getSymbolSize,e=7;return lm.getPositions=function(l){const h=r(l);return[[0,0],[h-e,0],[0,h-e]]},lm}var om={},wb;function iI(){return wb||(wb=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(h){return h!=null&&h!==""&&!isNaN(h)&&h>=0&&h<=7},r.from=function(h){return r.isValid(h)?parseInt(h,10):void 0},r.getPenaltyN1=function(h){const g=h.size;let y=0,C=0,A=0,N=null,I=null;for(let T=0;T<g;T++){C=A=0,N=I=null;for(let k=0;k<g;k++){let U=h.get(T,k);U===N?C++:(C>=5&&(y+=e.N1+(C-5)),N=U,C=1),U=h.get(k,T),U===I?A++:(A>=5&&(y+=e.N1+(A-5)),I=U,A=1)}C>=5&&(y+=e.N1+(C-5)),A>=5&&(y+=e.N1+(A-5))}return y},r.getPenaltyN2=function(h){const g=h.size;let y=0;for(let C=0;C<g-1;C++)for(let A=0;A<g-1;A++){const N=h.get(C,A)+h.get(C,A+1)+h.get(C+1,A)+h.get(C+1,A+1);(N===4||N===0)&&y++}return y*e.N2},r.getPenaltyN3=function(h){const g=h.size;let y=0,C=0,A=0;for(let N=0;N<g;N++){C=A=0;for(let I=0;I<g;I++)C=C<<1&2047|h.get(N,I),I>=10&&(C===1488||C===93)&&y++,A=A<<1&2047|h.get(I,N),I>=10&&(A===1488||A===93)&&y++}return y*e.N3},r.getPenaltyN4=function(h){let g=0;const y=h.data.length;for(let A=0;A<y;A++)g+=h.data[A];return Math.abs(Math.ceil(g*100/y/5)-10)*e.N4};function s(l,h,g){switch(l){case r.Patterns.PATTERN000:return(h+g)%2===0;case r.Patterns.PATTERN001:return h%2===0;case r.Patterns.PATTERN010:return g%3===0;case r.Patterns.PATTERN011:return(h+g)%3===0;case r.Patterns.PATTERN100:return(Math.floor(h/2)+Math.floor(g/3))%2===0;case r.Patterns.PATTERN101:return h*g%2+h*g%3===0;case r.Patterns.PATTERN110:return(h*g%2+h*g%3)%2===0;case r.Patterns.PATTERN111:return(h*g%3+(h+g)%2)%2===0;default:throw new Error("bad maskPattern:"+l)}}r.applyMask=function(h,g){const y=g.size;for(let C=0;C<y;C++)for(let A=0;A<y;A++)g.isReserved(A,C)||g.xor(A,C,s(h,A,C))},r.getBestMask=function(h,g){const y=Object.keys(r.Patterns).length;let C=0,A=1/0;for(let N=0;N<y;N++){g(N),r.applyMask(N,h);const I=r.getPenaltyN1(h)+r.getPenaltyN2(h)+r.getPenaltyN3(h)+r.getPenaltyN4(h);r.applyMask(N,h),I<A&&(A=I,C=N)}return C}})(om)),om}var Pd={},Nb;function Vw(){if(Nb)return Pd;Nb=1;const r=q1(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Pd.getBlocksCount=function(h,g){switch(g){case r.L:return e[(h-1)*4+0];case r.M:return e[(h-1)*4+1];case r.Q:return e[(h-1)*4+2];case r.H:return e[(h-1)*4+3];default:return}},Pd.getTotalCodewordsCount=function(h,g){switch(g){case r.L:return s[(h-1)*4+0];case r.M:return s[(h-1)*4+1];case r.Q:return s[(h-1)*4+2];case r.H:return s[(h-1)*4+3];default:return}},Pd}var cm={},Pc={},Cb;function rI(){if(Cb)return Pc;Cb=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let l=1;for(let h=0;h<255;h++)r[h]=l,e[l]=h,l<<=1,l&256&&(l^=285);for(let h=255;h<512;h++)r[h]=r[h-255]})(),Pc.log=function(l){if(l<1)throw new Error("log("+l+")");return e[l]},Pc.exp=function(l){return r[l]},Pc.mul=function(l,h){return l===0||h===0?0:r[e[l]+e[h]]},Pc}var Eb;function aI(){return Eb||(Eb=1,(function(r){const e=rI();r.mul=function(l,h){const g=new Uint8Array(l.length+h.length-1);for(let y=0;y<l.length;y++)for(let C=0;C<h.length;C++)g[y+C]^=e.mul(l[y],h[C]);return g},r.mod=function(l,h){let g=new Uint8Array(l);for(;g.length-h.length>=0;){const y=g[0];for(let A=0;A<h.length;A++)g[A]^=e.mul(h[A],y);let C=0;for(;C<g.length&&g[C]===0;)C++;g=g.slice(C)}return g},r.generateECPolynomial=function(l){let h=new Uint8Array([1]);for(let g=0;g<l;g++)h=r.mul(h,new Uint8Array([1,e.exp(g)]));return h}})(cm)),cm}var um,Ab;function lI(){if(Ab)return um;Ab=1;const r=aI();function e(s){this.genPoly=void 0,this.degree=s,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(l){this.degree=l,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(l){if(!this.genPoly)throw new Error("Encoder not initialized");const h=new Uint8Array(l.length+this.degree);h.set(l);const g=r.mod(h,this.genPoly),y=this.degree-g.length;if(y>0){const C=new Uint8Array(this.degree);return C.set(g,y),C}return g},um=e,um}var dm={},hm={},fm={},Sb;function Gw(){return Sb||(Sb=1,fm.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),fm}var qi={},_b;function Yw(){if(_b)return qi;_b=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let s="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";s=s.replace(/u/g,"\\u");const l="(?:(?![A-Z0-9 $%*+\\-./:]|"+s+`)(?:.|[\r
]))+`;qi.KANJI=new RegExp(s,"g"),qi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),qi.BYTE=new RegExp(l,"g"),qi.NUMERIC=new RegExp(r,"g"),qi.ALPHANUMERIC=new RegExp(e,"g");const h=new RegExp("^"+s+"$"),g=new RegExp("^"+r+"$"),y=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return qi.testKanji=function(A){return h.test(A)},qi.testNumeric=function(A){return g.test(A)},qi.testAlphanumeric=function(A){return y.test(A)},qi}var Tb;function El(){return Tb||(Tb=1,(function(r){const e=Gw(),s=Yw();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(g,y){if(!g.ccBits)throw new Error("Invalid mode: "+g);if(!e.isValid(y))throw new Error("Invalid version: "+y);return y>=1&&y<10?g.ccBits[0]:y<27?g.ccBits[1]:g.ccBits[2]},r.getBestModeForData=function(g){return s.testNumeric(g)?r.NUMERIC:s.testAlphanumeric(g)?r.ALPHANUMERIC:s.testKanji(g)?r.KANJI:r.BYTE},r.toString=function(g){if(g&&g.id)return g.id;throw new Error("Invalid mode")},r.isValid=function(g){return g&&g.bit&&g.ccBits};function l(h){if(typeof h!="string")throw new Error("Param is not a string");switch(h.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+h)}}r.from=function(g,y){if(r.isValid(g))return g;try{return l(g)}catch{return y}}})(hm)),hm}var Ib;function oI(){return Ib||(Ib=1,(function(r){const e=Cl(),s=Vw(),l=q1(),h=El(),g=Gw(),y=7973,C=e.getBCHDigit(y);function A(k,U,X){for(let z=1;z<=40;z++)if(U<=r.getCapacity(z,X,k))return z}function N(k,U){return h.getCharCountIndicator(k,U)+4}function I(k,U){let X=0;return k.forEach(function(z){const ae=N(z.mode,U);X+=ae+z.getBitsLength()}),X}function T(k,U){for(let X=1;X<=40;X++)if(I(k,X)<=r.getCapacity(X,U,h.MIXED))return X}r.from=function(U,X){return g.isValid(U)?parseInt(U,10):X},r.getCapacity=function(U,X,z){if(!g.isValid(U))throw new Error("Invalid QR Code version");typeof z>"u"&&(z=h.BYTE);const ae=e.getSymbolTotalCodewords(U),fe=s.getTotalCodewordsCount(U,X),B=(ae-fe)*8;if(z===h.MIXED)return B;const W=B-N(z,U);switch(z){case h.NUMERIC:return Math.floor(W/10*3);case h.ALPHANUMERIC:return Math.floor(W/11*2);case h.KANJI:return Math.floor(W/13);case h.BYTE:default:return Math.floor(W/8)}},r.getBestVersionForData=function(U,X){let z;const ae=l.from(X,l.M);if(Array.isArray(U)){if(U.length>1)return T(U,ae);if(U.length===0)return 1;z=U[0]}else z=U;return A(z.mode,z.getLength(),ae)},r.getEncodedBits=function(U){if(!g.isValid(U)||U<7)throw new Error("Invalid QR Code version");let X=U<<12;for(;e.getBCHDigit(X)-C>=0;)X^=y<<e.getBCHDigit(X)-C;return U<<12|X}})(dm)),dm}var mm={},Rb;function cI(){if(Rb)return mm;Rb=1;const r=Cl(),e=1335,s=21522,l=r.getBCHDigit(e);return mm.getEncodedBits=function(g,y){const C=g.bit<<3|y;let A=C<<10;for(;r.getBCHDigit(A)-l>=0;)A^=e<<r.getBCHDigit(A)-l;return(C<<10|A)^s},mm}var gm={},xm,Mb;function uI(){if(Mb)return xm;Mb=1;const r=El();function e(s){this.mode=r.NUMERIC,this.data=s.toString()}return e.getBitsLength=function(l){return 10*Math.floor(l/3)+(l%3?l%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(l){let h,g,y;for(h=0;h+3<=this.data.length;h+=3)g=this.data.substr(h,3),y=parseInt(g,10),l.put(y,10);const C=this.data.length-h;C>0&&(g=this.data.substr(h),y=parseInt(g,10),l.put(y,C*3+1))},xm=e,xm}var pm,Db;function dI(){if(Db)return pm;Db=1;const r=El(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(l){this.mode=r.ALPHANUMERIC,this.data=l}return s.getBitsLength=function(h){return 11*Math.floor(h/2)+6*(h%2)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(h){let g;for(g=0;g+2<=this.data.length;g+=2){let y=e.indexOf(this.data[g])*45;y+=e.indexOf(this.data[g+1]),h.put(y,11)}this.data.length%2&&h.put(e.indexOf(this.data[g]),6)},pm=s,pm}var bm,Ob;function hI(){if(Ob)return bm;Ob=1;const r=El();function e(s){this.mode=r.BYTE,typeof s=="string"?this.data=new TextEncoder().encode(s):this.data=new Uint8Array(s)}return e.getBitsLength=function(l){return l*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(s){for(let l=0,h=this.data.length;l<h;l++)s.put(this.data[l],8)},bm=e,bm}var ym,jb;function fI(){if(jb)return ym;jb=1;const r=El(),e=Cl();function s(l){this.mode=r.KANJI,this.data=l}return s.getBitsLength=function(h){return h*13},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(l){let h;for(h=0;h<this.data.length;h++){let g=e.toSJIS(this.data[h]);if(g>=33088&&g<=40956)g-=33088;else if(g>=57408&&g<=60351)g-=49472;else throw new Error("Invalid SJIS character: "+this.data[h]+`
Make sure your charset is UTF-8`);g=(g>>>8&255)*192+(g&255),l.put(g,13)}},ym=s,ym}var vm={exports:{}},Lb;function mI(){return Lb||(Lb=1,(function(r){var e={single_source_shortest_paths:function(s,l,h){var g={},y={};y[l]=0;var C=e.PriorityQueue.make();C.push(l,0);for(var A,N,I,T,k,U,X,z,ae;!C.empty();){A=C.pop(),N=A.value,T=A.cost,k=s[N]||{};for(I in k)k.hasOwnProperty(I)&&(U=k[I],X=T+U,z=y[I],ae=typeof y[I]>"u",(ae||z>X)&&(y[I]=X,C.push(I,X),g[I]=N))}if(typeof h<"u"&&typeof y[h]>"u"){var fe=["Could not find a path from ",l," to ",h,"."].join("");throw new Error(fe)}return g},extract_shortest_path_from_predecessor_list:function(s,l){for(var h=[],g=l;g;)h.push(g),s[g],g=s[g];return h.reverse(),h},find_path:function(s,l,h){var g=e.single_source_shortest_paths(s,l,h);return e.extract_shortest_path_from_predecessor_list(g,h)},PriorityQueue:{make:function(s){var l=e.PriorityQueue,h={},g;s=s||{};for(g in l)l.hasOwnProperty(g)&&(h[g]=l[g]);return h.queue=[],h.sorter=s.sorter||l.default_sorter,h},default_sorter:function(s,l){return s.cost-l.cost},push:function(s,l){var h={value:s,cost:l};this.queue.push(h),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(vm)),vm.exports}var kb;function gI(){return kb||(kb=1,(function(r){const e=El(),s=uI(),l=dI(),h=hI(),g=fI(),y=Yw(),C=Cl(),A=mI();function N(fe){return unescape(encodeURIComponent(fe)).length}function I(fe,B,W){const te=[];let ne;for(;(ne=fe.exec(W))!==null;)te.push({data:ne[0],index:ne.index,mode:B,length:ne[0].length});return te}function T(fe){const B=I(y.NUMERIC,e.NUMERIC,fe),W=I(y.ALPHANUMERIC,e.ALPHANUMERIC,fe);let te,ne;return C.isKanjiModeEnabled()?(te=I(y.BYTE,e.BYTE,fe),ne=I(y.KANJI,e.KANJI,fe)):(te=I(y.BYTE_KANJI,e.BYTE,fe),ne=[]),B.concat(W,te,ne).sort(function(G,J){return G.index-J.index}).map(function(G){return{data:G.data,mode:G.mode,length:G.length}})}function k(fe,B){switch(B){case e.NUMERIC:return s.getBitsLength(fe);case e.ALPHANUMERIC:return l.getBitsLength(fe);case e.KANJI:return g.getBitsLength(fe);case e.BYTE:return h.getBitsLength(fe)}}function U(fe){return fe.reduce(function(B,W){const te=B.length-1>=0?B[B.length-1]:null;return te&&te.mode===W.mode?(B[B.length-1].data+=W.data,B):(B.push(W),B)},[])}function X(fe){const B=[];for(let W=0;W<fe.length;W++){const te=fe[W];switch(te.mode){case e.NUMERIC:B.push([te,{data:te.data,mode:e.ALPHANUMERIC,length:te.length},{data:te.data,mode:e.BYTE,length:te.length}]);break;case e.ALPHANUMERIC:B.push([te,{data:te.data,mode:e.BYTE,length:te.length}]);break;case e.KANJI:B.push([te,{data:te.data,mode:e.BYTE,length:N(te.data)}]);break;case e.BYTE:B.push([{data:te.data,mode:e.BYTE,length:N(te.data)}])}}return B}function z(fe,B){const W={},te={start:{}};let ne=["start"];for(let ce=0;ce<fe.length;ce++){const G=fe[ce],J=[];for(let Q=0;Q<G.length;Q++){const Ce=G[Q],Z=""+ce+Q;J.push(Z),W[Z]={node:Ce,lastCount:0},te[Z]={};for(let se=0;se<ne.length;se++){const ge=ne[se];W[ge]&&W[ge].node.mode===Ce.mode?(te[ge][Z]=k(W[ge].lastCount+Ce.length,Ce.mode)-k(W[ge].lastCount,Ce.mode),W[ge].lastCount+=Ce.length):(W[ge]&&(W[ge].lastCount=Ce.length),te[ge][Z]=k(Ce.length,Ce.mode)+4+e.getCharCountIndicator(Ce.mode,B))}}ne=J}for(let ce=0;ce<ne.length;ce++)te[ne[ce]].end=0;return{map:te,table:W}}function ae(fe,B){let W;const te=e.getBestModeForData(fe);if(W=e.from(B,te),W!==e.BYTE&&W.bit<te.bit)throw new Error('"'+fe+'" cannot be encoded with mode '+e.toString(W)+`.
 Suggested mode is: `+e.toString(te));switch(W===e.KANJI&&!C.isKanjiModeEnabled()&&(W=e.BYTE),W){case e.NUMERIC:return new s(fe);case e.ALPHANUMERIC:return new l(fe);case e.KANJI:return new g(fe);case e.BYTE:return new h(fe)}}r.fromArray=function(B){return B.reduce(function(W,te){return typeof te=="string"?W.push(ae(te,null)):te.data&&W.push(ae(te.data,te.mode)),W},[])},r.fromString=function(B,W){const te=T(B,C.isKanjiModeEnabled()),ne=X(te),ce=z(ne,W),G=A.find_path(ce.map,"start","end"),J=[];for(let Q=1;Q<G.length-1;Q++)J.push(ce.table[G[Q]].node);return r.fromArray(U(J))},r.rawSplit=function(B){return r.fromArray(T(B,C.isKanjiModeEnabled()))}})(gm)),gm}var Bb;function xI(){if(Bb)return nm;Bb=1;const r=Cl(),e=q1(),s=eI(),l=tI(),h=nI(),g=sI(),y=iI(),C=Vw(),A=lI(),N=oI(),I=cI(),T=El(),k=gI();function U(ce,G){const J=ce.size,Q=g.getPositions(G);for(let Ce=0;Ce<Q.length;Ce++){const Z=Q[Ce][0],se=Q[Ce][1];for(let ge=-1;ge<=7;ge++)if(!(Z+ge<=-1||J<=Z+ge))for(let Ae=-1;Ae<=7;Ae++)se+Ae<=-1||J<=se+Ae||(ge>=0&&ge<=6&&(Ae===0||Ae===6)||Ae>=0&&Ae<=6&&(ge===0||ge===6)||ge>=2&&ge<=4&&Ae>=2&&Ae<=4?ce.set(Z+ge,se+Ae,!0,!0):ce.set(Z+ge,se+Ae,!1,!0))}}function X(ce){const G=ce.size;for(let J=8;J<G-8;J++){const Q=J%2===0;ce.set(J,6,Q,!0),ce.set(6,J,Q,!0)}}function z(ce,G){const J=h.getPositions(G);for(let Q=0;Q<J.length;Q++){const Ce=J[Q][0],Z=J[Q][1];for(let se=-2;se<=2;se++)for(let ge=-2;ge<=2;ge++)se===-2||se===2||ge===-2||ge===2||se===0&&ge===0?ce.set(Ce+se,Z+ge,!0,!0):ce.set(Ce+se,Z+ge,!1,!0)}}function ae(ce,G){const J=ce.size,Q=N.getEncodedBits(G);let Ce,Z,se;for(let ge=0;ge<18;ge++)Ce=Math.floor(ge/3),Z=ge%3+J-8-3,se=(Q>>ge&1)===1,ce.set(Ce,Z,se,!0),ce.set(Z,Ce,se,!0)}function fe(ce,G,J){const Q=ce.size,Ce=I.getEncodedBits(G,J);let Z,se;for(Z=0;Z<15;Z++)se=(Ce>>Z&1)===1,Z<6?ce.set(Z,8,se,!0):Z<8?ce.set(Z+1,8,se,!0):ce.set(Q-15+Z,8,se,!0),Z<8?ce.set(8,Q-Z-1,se,!0):Z<9?ce.set(8,15-Z-1+1,se,!0):ce.set(8,15-Z-1,se,!0);ce.set(Q-8,8,1,!0)}function B(ce,G){const J=ce.size;let Q=-1,Ce=J-1,Z=7,se=0;for(let ge=J-1;ge>0;ge-=2)for(ge===6&&ge--;;){for(let Ae=0;Ae<2;Ae++)if(!ce.isReserved(Ce,ge-Ae)){let Y=!1;se<G.length&&(Y=(G[se]>>>Z&1)===1),ce.set(Ce,ge-Ae,Y),Z--,Z===-1&&(se++,Z=7)}if(Ce+=Q,Ce<0||J<=Ce){Ce-=Q,Q=-Q;break}}}function W(ce,G,J){const Q=new s;J.forEach(function(Ae){Q.put(Ae.mode.bit,4),Q.put(Ae.getLength(),T.getCharCountIndicator(Ae.mode,ce)),Ae.write(Q)});const Ce=r.getSymbolTotalCodewords(ce),Z=C.getTotalCodewordsCount(ce,G),se=(Ce-Z)*8;for(Q.getLengthInBits()+4<=se&&Q.put(0,4);Q.getLengthInBits()%8!==0;)Q.putBit(0);const ge=(se-Q.getLengthInBits())/8;for(let Ae=0;Ae<ge;Ae++)Q.put(Ae%2?17:236,8);return te(Q,ce,G)}function te(ce,G,J){const Q=r.getSymbolTotalCodewords(G),Ce=C.getTotalCodewordsCount(G,J),Z=Q-Ce,se=C.getBlocksCount(G,J),ge=Q%se,Ae=se-ge,Y=Math.floor(Q/se),V=Math.floor(Z/se),ue=V+1,ye=Y-V,tt=new A(ye);let Ke=0;const ht=new Array(se),ze=new Array(se);let Be=0;const _e=new Uint8Array(ce.buffer);for(let wt=0;wt<se;wt++){const Et=wt<Ae?V:ue;ht[wt]=_e.slice(Ke,Ke+Et),ze[wt]=tt.encode(ht[wt]),Ke+=Et,Be=Math.max(Be,Et)}const st=new Uint8Array(Q);let Le=0,Ye,rt;for(Ye=0;Ye<Be;Ye++)for(rt=0;rt<se;rt++)Ye<ht[rt].length&&(st[Le++]=ht[rt][Ye]);for(Ye=0;Ye<ye;Ye++)for(rt=0;rt<se;rt++)st[Le++]=ze[rt][Ye];return st}function ne(ce,G,J,Q){let Ce;if(Array.isArray(ce))Ce=k.fromArray(ce);else if(typeof ce=="string"){let Y=G;if(!Y){const V=k.rawSplit(ce);Y=N.getBestVersionForData(V,J)}Ce=k.fromString(ce,Y||40)}else throw new Error("Invalid data");const Z=N.getBestVersionForData(Ce,J);if(!Z)throw new Error("The amount of data is too big to be stored in a QR Code");if(!G)G=Z;else if(G<Z)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+Z+`.
`);const se=W(G,J,Ce),ge=r.getSymbolSize(G),Ae=new l(ge);return U(Ae,G),X(Ae),z(Ae,G),fe(Ae,J,0),G>=7&&ae(Ae,G),B(Ae,se),isNaN(Q)&&(Q=y.getBestMask(Ae,fe.bind(null,Ae,J))),y.applyMask(Q,Ae),fe(Ae,J,Q),{modules:Ae,version:G,errorCorrectionLevel:J,maskPattern:Q,segments:Ce}}return nm.create=function(G,J){if(typeof G>"u"||G==="")throw new Error("No input text");let Q=e.M,Ce,Z;return typeof J<"u"&&(Q=e.from(J.errorCorrectionLevel,e.M),Ce=N.from(J.version),Z=y.from(J.maskPattern),J.toSJISFunc&&r.setToSJISFunction(J.toSJISFunc)),ne(G,Ce,Q,Z)},nm}var wm={},Nm={},Pb;function qw(){return Pb||(Pb=1,(function(r){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let l=s.slice().replace("#","").split("");if(l.length<3||l.length===5||l.length>8)throw new Error("Invalid hex color: "+s);(l.length===3||l.length===4)&&(l=Array.prototype.concat.apply([],l.map(function(g){return[g,g]}))),l.length===6&&l.push("F","F");const h=parseInt(l.join(""),16);return{r:h>>24&255,g:h>>16&255,b:h>>8&255,a:h&255,hex:"#"+l.slice(0,6).join("")}}r.getOptions=function(l){l||(l={}),l.color||(l.color={});const h=typeof l.margin>"u"||l.margin===null||l.margin<0?4:l.margin,g=l.width&&l.width>=21?l.width:void 0,y=l.scale||4;return{width:g,scale:g?4:y,margin:h,color:{dark:e(l.color.dark||"#000000ff"),light:e(l.color.light||"#ffffffff")},type:l.type,rendererOpts:l.rendererOpts||{}}},r.getScale=function(l,h){return h.width&&h.width>=l+h.margin*2?h.width/(l+h.margin*2):h.scale},r.getImageWidth=function(l,h){const g=r.getScale(l,h);return Math.floor((l+h.margin*2)*g)},r.qrToImageData=function(l,h,g){const y=h.modules.size,C=h.modules.data,A=r.getScale(y,g),N=Math.floor((y+g.margin*2)*A),I=g.margin*A,T=[g.color.light,g.color.dark];for(let k=0;k<N;k++)for(let U=0;U<N;U++){let X=(k*N+U)*4,z=g.color.light;if(k>=I&&U>=I&&k<N-I&&U<N-I){const ae=Math.floor((k-I)/A),fe=Math.floor((U-I)/A);z=T[C[ae*y+fe]?1:0]}l[X++]=z.r,l[X++]=z.g,l[X++]=z.b,l[X]=z.a}}})(Nm)),Nm}var Ub;function pI(){return Ub||(Ub=1,(function(r){const e=qw();function s(h,g,y){h.clearRect(0,0,g.width,g.height),g.style||(g.style={}),g.height=y,g.width=y,g.style.height=y+"px",g.style.width=y+"px"}function l(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(g,y,C){let A=C,N=y;typeof A>"u"&&(!y||!y.getContext)&&(A=y,y=void 0),y||(N=l()),A=e.getOptions(A);const I=e.getImageWidth(g.modules.size,A),T=N.getContext("2d"),k=T.createImageData(I,I);return e.qrToImageData(k.data,g,A),s(T,N,I),T.putImageData(k,0,0),N},r.renderToDataURL=function(g,y,C){let A=C;typeof A>"u"&&(!y||!y.getContext)&&(A=y,y=void 0),A||(A={});const N=r.render(g,y,A),I=A.type||"image/png",T=A.rendererOpts||{};return N.toDataURL(I,T.quality)}})(wm)),wm}var Cm={},zb;function bI(){if(zb)return Cm;zb=1;const r=qw();function e(h,g){const y=h.a/255,C=g+'="'+h.hex+'"';return y<1?C+" "+g+'-opacity="'+y.toFixed(2).slice(1)+'"':C}function s(h,g,y){let C=h+g;return typeof y<"u"&&(C+=" "+y),C}function l(h,g,y){let C="",A=0,N=!1,I=0;for(let T=0;T<h.length;T++){const k=Math.floor(T%g),U=Math.floor(T/g);!k&&!N&&(N=!0),h[T]?(I++,T>0&&k>0&&h[T-1]||(C+=N?s("M",k+y,.5+U+y):s("m",A,0),A=0,N=!1),k+1<g&&h[T+1]||(C+=s("h",I),I=0)):A++}return C}return Cm.render=function(g,y,C){const A=r.getOptions(y),N=g.modules.size,I=g.modules.data,T=N+A.margin*2,k=A.color.light.a?"<path "+e(A.color.light,"fill")+' d="M0 0h'+T+"v"+T+'H0z"/>':"",U="<path "+e(A.color.dark,"stroke")+' d="'+l(I,N,A.margin)+'"/>',X='viewBox="0 0 '+T+" "+T+'"',ae='<svg xmlns="http://www.w3.org/2000/svg" '+(A.width?'width="'+A.width+'" height="'+A.width+'" ':"")+X+' shape-rendering="crispEdges">'+k+U+`</svg>
`;return typeof C=="function"&&C(null,ae),ae},Cm}var Fb;function yI(){if(Fb)return uo;Fb=1;const r=$4(),e=xI(),s=pI(),l=bI();function h(g,y,C,A,N){const I=[].slice.call(arguments,1),T=I.length,k=typeof I[T-1]=="function";if(!k&&!r())throw new Error("Callback required as last argument");if(k){if(T<2)throw new Error("Too few arguments provided");T===2?(N=C,C=y,y=A=void 0):T===3&&(y.getContext&&typeof N>"u"?(N=A,A=void 0):(N=A,A=C,C=y,y=void 0))}else{if(T<1)throw new Error("Too few arguments provided");return T===1?(C=y,y=A=void 0):T===2&&!y.getContext&&(A=C,C=y,y=void 0),new Promise(function(U,X){try{const z=e.create(C,A);U(g(z,y,A))}catch(z){X(z)}})}try{const U=e.create(C,A);N(null,g(U,y,A))}catch(U){N(U)}}return uo.create=e.create,uo.toCanvas=h.bind(null,s.render),uo.toDataURL=h.bind(null,s.renderToDataURL),uo.toString=h.bind(null,function(g,y,C){return l.render(g,C)}),uo}var vI=yI();const wI=Ty(vI);function NI(){const r=Da(),e=j.useRef(),[s,l]=j.useState(1),[h,g]=j.useState(!1),[y,C]=j.useState(!1),[A,N]=j.useState(null),[I,T]=j.useState(""),[k,U]=j.useState(null),[X,z]=j.useState({}),[ae,fe]=j.useState(""),[B,W]=j.useState({name:"",age:"",gender:"Male",dateOfBirth:"",bloodGroup:"",phone:"",email:"",emergencyContact:"",emergencyRelation:"",address:"",city:"",state:"",pincode:"",weight:"",height:"",bmi:"",bloodPressure:"",pulse:"",temperature:"",spo2:"",diagnosis:"",provisionalDiagnosis:"",chiefComplaints:"",allergies:"",currentMedications:"",pastMedicalHistory:"",surgicalHistory:"",familyHistory:"",ward:"",bed:"",status:"stable",admissionDate:new Date().toISOString().split("T")[0],referringDoctor:"",consultingDoctor:"",insuranceProvider:"",insuranceNumber:"",paymentMethod:"Cash",occupation:"",maritalStatus:"Single",nationality:"Indian",notes:""}),te=(Y,V)=>{if(Y&&V){const ue=V/100;return(Y/(ue*ue)).toFixed(1)}return""},ne=Y=>{const{name:V,value:ue}=Y.target;let ye={...B,[V]:ue};(V==="weight"||V==="height")&&(ye.bmi=te(V==="weight"?ue:B.weight,V==="height"?ue:B.height)),W(ye),X[V]&&z({...X,[V]:null})},ce=Y=>{const V={};return Y===1&&(B.name.trim()||(V.name="Name is required"),B.age||(V.age="Age is required"),B.phone||(V.phone="Phone number is required"),B.phone&&B.phone.length!==10&&(V.phone="Invalid phone number")),Y===3&&(B.ward||(V.ward="Ward is required"),B.bed||(V.bed="Bed number is required")),z(V),Object.keys(V).length===0},G=()=>{ce(s)&&(l(s+1),window.scrollTo(0,0))},J=()=>{l(s-1),window.scrollTo(0,0)},Q=Y=>{const V=Y.target.files[0];if(V){const ue=new FileReader;ue.onloadend=()=>U(ue.result),ue.readAsDataURL(V)}},Ce=()=>{const V=Date.now().toString().slice(-6),ue=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`HH${V}${ue}`},Z=async Y=>{try{const V=JSON.stringify({hhid:Y,name:B.name,age:B.age,bloodGroup:B.bloodGroup,allergies:B.allergies,ward:B.ward,bed:B.bed}),ue=await wI.toDataURL(V,{width:300,margin:2});return T(ue),ue}catch(V){return console.error("QR Code generation error:",V),""}},se=async Y=>{if(Y.preventDefault(),!!ce(s)){g(!0);try{const V=Ce();fe(V),await Z(V);const ue={hhid:V,...B,age:parseInt(B.age),weight:parseFloat(B.weight)||0,height:parseFloat(B.height)||0,bmi:parseFloat(B.bmi)||0,profilePhoto:k,registeredAt:new Date().toISOString(),isActive:!0},ye=await X4(ue);ye.success?(N({...ue,id:ye.patientId}),C(!0)):alert(` Registration Failed: ${ye.error}`)}catch(V){console.error("Registration error:",V),alert(" An error occurred during registration")}finally{g(!1)}}},ge=J4.useReactToPrint({content:()=>e.current,documentTitle:`Patient_Registration_${ae}`,pageStyle:`
      @page { size: A4; margin: 15mm; }
      @media print {
        body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      }
    `}),Ae=[{number:1,title:"Basic Info",icon:Rr},{number:2,title:"Medical",icon:wo},{number:3,title:"Hospital",icon:t2},{number:4,title:"Review",icon:nn}];return u.jsxs("div",{className:"min-h-screen bg-slate-50",children:[u.jsx("div",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-30",children:u.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs(et,{variant:"outline",onClick:()=>r("/dashboard"),size:"sm",children:[u.jsx(cl,{size:16,className:"mr-2"}),"Back"]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 p-2.5 rounded-lg",children:u.jsx(Hc,{size:24,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Patient Registration"}),u.jsx("p",{className:"text-sm text-slate-600",children:"New patient admission"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(Ze,{className:"bg-gradient-to-r from-green-600 to-emerald-600",children:[u.jsx(gi,{size:12,className:"mr-1"}),"Secure"]}),u.jsxs(Ze,{className:"bg-gradient-to-r from-purple-600 to-pink-600",children:[u.jsx(fl,{size:12,className:"mr-1"}),"Smart"]})]})]})})}),u.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-6",children:[u.jsx(Tt,{className:"border-2 border-blue-200 shadow-lg mb-6",children:u.jsx(Mt,{className:"p-6",children:u.jsxs("div",{className:"flex items-center justify-between relative",children:[u.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-slate-200 -translate-y-1/2 -z-10",children:u.jsx(Oe.div,{className:"h-full bg-blue-600",initial:{width:"0%"},animate:{width:`${(s-1)/(Ae.length-1)*100}%`},transition:{duration:.3}})}),Ae.map(Y=>u.jsxs("div",{className:"flex flex-col items-center flex-1",children:[u.jsx("div",{className:`w-14 h-14 rounded-full ${Y.number<s?"bg-green-500":Y.number===s?"bg-blue-600":"bg-slate-300"} flex items-center justify-center text-white font-bold shadow-lg transition-all relative z-10`,children:Y.number<s?u.jsx(nn,{size:24}):u.jsx(Y.icon,{size:24})}),u.jsx("p",{className:"text-xs font-semibold mt-2 text-slate-700",children:Y.title})]},Y.number))]})})}),u.jsx("form",{onSubmit:se,children:u.jsx(Tt,{className:"border border-slate-200 shadow-lg",children:u.jsxs(Mt,{className:"p-8",children:[u.jsx(hl,{mode:"wait",children:u.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[s===1&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:u.jsx(Rr,{size:28,className:"text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Basic Information"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Patient demographics and contact details"})]})]}),u.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-xl border-2 border-dashed border-slate-300",children:[u.jsxs("div",{className:"relative",children:[k?u.jsx("img",{src:k,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}):u.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 flex items-center justify-center border-4 border-white shadow-lg",children:u.jsx(Rr,{size:48,className:"text-blue-600"})}),u.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full cursor-pointer hover:bg-blue-700 shadow-lg",children:[u.jsx(Uc,{size:20}),u.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"hidden"})]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:"Upload Profile Photo"}),u.jsx("p",{className:"text-xs text-slate-600",children:"JPG, PNG or GIF (max 5MB)"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block",children:["Full Name ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(Je,{name:"name",value:B.name,onChange:ne,placeholder:"Enter full name",className:`h-11 ${X.name?"border-red-500":""}`}),X.name&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:X.name})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block",children:["Age ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(Je,{type:"number",name:"age",value:B.age,onChange:ne,placeholder:"Enter age",className:`h-11 ${X.age?"border-red-500":""}`}),X.age&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:X.age})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Gender"}),u.jsxs("select",{name:"gender",value:B.gender,onChange:ne,className:"w-full h-11 border border-slate-200 rounded-md px-3 outline-none focus:border-blue-500",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Date of Birth"}),u.jsx(Je,{type:"date",name:"dateOfBirth",value:B.dateOfBirth,onChange:ne,className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Blood Group"}),u.jsxs("select",{name:"bloodGroup",value:B.bloodGroup,onChange:ne,className:"w-full h-11 border border-slate-200 rounded-md px-3 outline-none focus:border-blue-500",children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"A+",children:"A+"}),u.jsx("option",{value:"A-",children:"A-"}),u.jsx("option",{value:"B+",children:"B+"}),u.jsx("option",{value:"B-",children:"B-"}),u.jsx("option",{value:"O+",children:"O+"}),u.jsx("option",{value:"O-",children:"O-"}),u.jsx("option",{value:"AB+",children:"AB+"}),u.jsx("option",{value:"AB-",children:"AB-"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Marital Status"}),u.jsxs("select",{name:"maritalStatus",value:B.maritalStatus,onChange:ne,className:"w-full h-11 border border-slate-200 rounded-md px-3 outline-none focus:border-blue-500",children:[u.jsx("option",{value:"Single",children:"Single"}),u.jsx("option",{value:"Married",children:"Married"}),u.jsx("option",{value:"Divorced",children:"Divorced"}),u.jsx("option",{value:"Widowed",children:"Widowed"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Occupation"}),u.jsx(Je,{name:"occupation",value:B.occupation,onChange:ne,placeholder:"Enter occupation",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Nationality"}),u.jsx(Je,{name:"nationality",value:B.nationality,onChange:ne,placeholder:"Enter nationality",className:"h-11"})]})]}),u.jsxs("div",{className:"pt-6 border-t border-slate-200",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[u.jsx(sE,{size:20,className:"text-blue-600"}),"Contact Information"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block",children:["Phone Number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(Je,{type:"tel",name:"phone",value:B.phone,onChange:ne,placeholder:"10-digit mobile number",maxLength:10,className:`h-11 ${X.phone?"border-red-500":""}`}),X.phone&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:X.phone})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Email Address"}),u.jsx(Je,{type:"email",name:"email",value:B.email,onChange:ne,placeholder:"email@example.com",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Emergency Contact"}),u.jsx(Je,{type:"tel",name:"emergencyContact",value:B.emergencyContact,onChange:ne,placeholder:"Emergency contact number",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Relation"}),u.jsx(Je,{name:"emergencyRelation",value:B.emergencyRelation,onChange:ne,placeholder:"e.g., Father, Mother",className:"h-11"})]}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Address"}),u.jsx(hi,{name:"address",value:B.address,onChange:ne,placeholder:"Complete residential address",rows:2})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"City"}),u.jsx(Je,{name:"city",value:B.city,onChange:ne,placeholder:"City",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"State"}),u.jsx(Je,{name:"state",value:B.state,onChange:ne,placeholder:"State",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"PIN Code"}),u.jsx(Je,{name:"pincode",value:B.pincode,onChange:ne,placeholder:"6-digit PIN",maxLength:6,className:"h-11"})]})]})]})]}),s===2&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:u.jsx(wo,{size:28,className:"text-green-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Medical Information"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Health metrics and medical history"})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[u.jsx(Fn,{size:20,className:"text-green-600"}),"Vital Signs"]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Weight (kg)"}),u.jsx(Je,{type:"number",name:"weight",value:B.weight,onChange:ne,placeholder:"kg",step:"0.1",className:"h-10"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Height (cm)"}),u.jsx(Je,{type:"number",name:"height",value:B.height,onChange:ne,placeholder:"cm",step:"0.1",className:"h-10"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"BMI"}),u.jsx(Je,{type:"text",name:"bmi",value:B.bmi,readOnly:!0,placeholder:"Auto",className:"h-10 bg-slate-100"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"BP (mmHg)"}),u.jsx(Je,{name:"bloodPressure",value:B.bloodPressure,onChange:ne,placeholder:"120/80",className:"h-10"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Pulse (bpm)"}),u.jsx(Je,{type:"number",name:"pulse",value:B.pulse,onChange:ne,placeholder:"72",className:"h-10"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Temp (F)"}),u.jsx(Je,{type:"number",name:"temperature",value:B.temperature,onChange:ne,placeholder:"98.6",step:"0.1",className:"h-10"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"SpO2 (%)"}),u.jsx(Je,{type:"number",name:"spo2",value:B.spo2,onChange:ne,placeholder:"98",className:"h-10"})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[u.jsx(ul,{size:16,className:"text-blue-600"}),"Chief Complaints"]}),u.jsx(hi,{name:"chiefComplaints",value:B.chiefComplaints,onChange:ne,placeholder:"Main symptoms",rows:3})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[u.jsx(wo,{size:16,className:"text-green-600"}),"Provisional Diagnosis"]}),u.jsx(Je,{name:"provisionalDiagnosis",value:B.provisionalDiagnosis,onChange:ne,placeholder:"Preliminary diagnosis",className:"h-11"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[u.jsx(_h,{size:16,className:"text-red-600"}),"Final Diagnosis"]}),u.jsx(Je,{name:"diagnosis",value:B.diagnosis,onChange:ne,placeholder:"Confirmed diagnosis",className:"h-11"})]}),u.jsxs("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl p-4",children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2 text-red-900",children:[u.jsx(sh,{size:16,className:"text-red-600"})," Allergies (Critical Information)"]}),u.jsx(Je,{name:"allergies",value:B.allergies,onChange:ne,placeholder:"List all known allergies",className:"h-11 border-red-300"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[u.jsx(fi,{size:16,className:"text-purple-600"}),"Current Medications"]}),u.jsx(hi,{name:"currentMedications",value:B.currentMedications,onChange:ne,placeholder:"List medications",rows:2})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[u.jsx(Qc,{size:16,className:"text-amber-600"}),"Past Medical History"]}),u.jsx(hi,{name:"pastMedicalHistory",value:B.pastMedicalHistory,onChange:ne,placeholder:"Previous illnesses",rows:2})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Surgical History"}),u.jsx(hi,{name:"surgicalHistory",value:B.surgicalHistory,onChange:ne,placeholder:"Previous surgeries",rows:2})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block flex items-center gap-2",children:[u.jsx(Wd,{size:16,className:"text-indigo-600"}),"Family History"]}),u.jsx(hi,{name:"familyHistory",value:B.familyHistory,onChange:ne,placeholder:"Family medical history",rows:2})]})]})]}),s===3&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:u.jsx(t2,{size:28,className:"text-purple-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Hospital & Admission"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Ward assignment and details"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block",children:["Ward ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsxs("select",{name:"ward",value:B.ward,onChange:ne,className:`w-full h-11 border rounded-md px-3 outline-none focus:border-blue-500 ${X.ward?"border-red-500":"border-slate-200"}`,children:[u.jsx("option",{value:"",children:"Select Ward"}),u.jsx("option",{value:"General Ward",children:"General Ward"}),u.jsx("option",{value:"ICU",children:"ICU"}),u.jsx("option",{value:"Emergency",children:"Emergency"}),u.jsx("option",{value:"Pediatrics",children:"Pediatrics"}),u.jsx("option",{value:"Maternity",children:"Maternity"}),u.jsx("option",{value:"Surgery",children:"Surgery"}),u.jsx("option",{value:"Cardiology",children:"Cardiology"}),u.jsx("option",{value:"Private Room",children:"Private Room"})]}),X.ward&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:X.ward})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold mb-2 block",children:["Bed Number ",u.jsx("span",{className:"text-red-500",children:"*"})]}),u.jsx(Je,{name:"bed",value:B.bed,onChange:ne,placeholder:"e.g., 101",className:`h-11 ${X.bed?"border-red-500":""}`}),X.bed&&u.jsx("p",{className:"text-xs text-red-500 mt-1",children:X.bed})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Patient Status"}),u.jsxs("select",{name:"status",value:B.status,onChange:ne,className:"w-full h-11 border border-slate-200 rounded-md px-3 outline-none focus:border-blue-500",children:[u.jsx("option",{value:"stable",children:"Stable"}),u.jsx("option",{value:"critical",children:"Critical"}),u.jsx("option",{value:"moderate",children:"Moderate"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Admission Date"}),u.jsx(Je,{type:"date",name:"admissionDate",value:B.admissionDate,onChange:ne,className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Referring Doctor"}),u.jsx(Je,{name:"referringDoctor",value:B.referringDoctor,onChange:ne,placeholder:"Doctor name",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Consulting Doctor"}),u.jsx(Je,{name:"consultingDoctor",value:B.consultingDoctor,onChange:ne,placeholder:"Assigned consultant",className:"h-11"})]})]}),u.jsxs("div",{className:"pt-6 border-t border-slate-200",children:[u.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[u.jsx(gi,{size:20,className:"text-blue-600"}),"Insurance & Payment"]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Insurance Provider"}),u.jsx(Je,{name:"insuranceProvider",value:B.insuranceProvider,onChange:ne,placeholder:"e.g., LIC, Star Health",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Insurance Number"}),u.jsx(Je,{name:"insuranceNumber",value:B.insuranceNumber,onChange:ne,placeholder:"Policy number",className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Payment Method"}),u.jsxs("select",{name:"paymentMethod",value:B.paymentMethod,onChange:ne,className:"w-full h-11 border border-slate-200 rounded-md px-3 outline-none focus:border-blue-500",children:[u.jsx("option",{value:"Cash",children:"Cash"}),u.jsx("option",{value:"Card",children:"Card"}),u.jsx("option",{value:"Insurance",children:"Insurance"}),u.jsx("option",{value:"UPI",children:"UPI"}),u.jsx("option",{value:"Cheque",children:"Cheque"})]})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Additional Notes"}),u.jsx(hi,{name:"notes",value:B.notes,onChange:ne,placeholder:"Any other information",rows:3})]})]}),s===4&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[u.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:u.jsx(nn,{size:28,className:"text-green-600"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Review & Confirm"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Verify all information"})]})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-6",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[k?u.jsx("img",{src:k,alt:"Profile",className:"w-20 h-20 rounded-full object-cover border-4 border-white shadow-lg"}):u.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center text-white font-bold text-2xl border-4 border-white shadow-lg",children:B.name[0]||"P"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:B.name||"Patient Name"}),u.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[u.jsxs(Ze,{className:"bg-blue-600",children:[B.age||"0","Y / ",B.gender]}),B.bloodGroup&&u.jsx(Ze,{className:"bg-red-600",children:B.bloodGroup}),u.jsx(Ze,{className:B.status==="critical"?"bg-red-600":B.status==="stable"?"bg-green-600":"bg-yellow-600",children:B.status.toUpperCase()})]})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsx(ho,{label:"Ward",value:B.ward||"Not set"}),u.jsx(ho,{label:"Bed",value:B.bed||"Not set"}),u.jsx(ho,{label:"Admission",value:B.admissionDate}),u.jsx(ho,{label:"Phone",value:B.phone}),u.jsx(ho,{label:"Email",value:B.email||"N/A"}),u.jsx(ho,{label:"BMI",value:B.bmi||"N/A"})]}),B.allergies&&u.jsxs("div",{className:"mt-4 bg-red-100 border-2 border-red-300 rounded-lg p-3",children:[u.jsx("p",{className:"text-sm font-semibold text-red-900 mb-1",children:" ALLERGIES"}),u.jsx("p",{className:"text-sm text-red-800",children:B.allergies})]})]}),u.jsxs("div",{className:"flex items-center gap-2 p-4 bg-amber-50 border-2 border-amber-300 rounded-lg",children:[u.jsx(sh,{className:"text-amber-600",size:20}),u.jsx("p",{className:"text-sm text-amber-900",children:"By submitting, you confirm all information is accurate."})]})]})]},s)}),u.jsxs("div",{className:"flex gap-3 mt-8 pt-6 border-t border-slate-200",children:[s>1&&u.jsxs(et,{type:"button",variant:"outline",onClick:J,className:"flex-1",disabled:h,children:[u.jsx(cl,{size:16,className:"mr-2"}),"Previous"]}),s<Ae.length&&u.jsxs(et,{type:"button",onClick:G,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:["Next",u.jsx(cl,{size:16,className:"ml-2 rotate-180"})]}),s===Ae.length&&u.jsx(et,{type:"submit",disabled:h,className:"flex-1 bg-green-600 hover:bg-green-700",children:h?u.jsxs(u.Fragment,{children:[u.jsx(Zc,{className:"mr-2 animate-spin",size:16}),"Registering..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Cy,{className:"mr-2",size:16}),"Complete Registration"]})})]})]})})})]}),y&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:u.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-6",children:u.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[u.jsx(nn,{size:28}),"Registration Successful!"]})}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-6 text-center",children:[I&&u.jsx("img",{src:I,alt:"QR Code",className:"w-32 h-32 mx-auto mb-4"}),u.jsx("h3",{className:"text-3xl font-bold text-slate-900 mb-2",children:A?.name}),u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[u.jsx(Ze,{className:"bg-blue-600 text-lg px-4 py-2 font-mono",children:ae}),u.jsx(et,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(ae),alert("HHID copied!")},children:u.jsx(iE,{size:16})})]}),u.jsxs("div",{className:"flex justify-center gap-2",children:[u.jsx(Ze,{className:"bg-green-600",children:B.ward}),u.jsxs(Ze,{className:"bg-purple-600",children:["Bed ",B.bed]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs(et,{onClick:()=>{setTimeout(ge,100)},className:"bg-blue-600",children:[u.jsx(Ey,{size:16,className:"mr-2"}),"Print Document"]}),u.jsxs(et,{variant:"outline",onClick:()=>r("/patient-records"),children:[u.jsx(ul,{size:16,className:"mr-2"}),"View Records"]}),u.jsxs(et,{variant:"outline",onClick:()=>{C(!1),window.location.reload()},children:[u.jsx(Hc,{size:16,className:"mr-2"}),"New Patient"]}),u.jsxs(et,{variant:"outline",onClick:()=>r("/dashboard"),children:[u.jsx(rE,{size:16,className:"mr-2"}),"Dashboard"]})]})]})]})}),u.jsx("div",{className:"hidden",children:u.jsxs("div",{ref:e,className:"p-8 bg-white",children:[u.jsx("div",{className:"border-b-4 border-blue-600 pb-4 mb-6",children:u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-blue-600",children:"OmniGate Hospital"}),u.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Advanced Healthcare System"})]}),I&&u.jsx("img",{src:I,alt:"QR",className:"w-24 h-24"})]})}),u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"PATIENT REGISTRATION DOCUMENT"}),u.jsxs("p",{className:"text-sm text-slate-600",children:["Date: ",new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"long",year:"numeric"})]})]}),u.jsx("div",{className:"bg-slate-100 border-2 border-slate-300 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"HHID"}),u.jsx("p",{className:"text-2xl font-bold font-mono text-blue-600",children:ae})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"ADMISSION DATE"}),u.jsx("p",{className:"text-xl font-bold",children:B.admissionDate})]})]})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3 border-b-2 border-slate-300 pb-2",children:"Personal Information"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[u.jsx(Os,{label:"Name",value:B.name}),u.jsx(Os,{label:"Age",value:`${B.age} Years`}),u.jsx(Os,{label:"Gender",value:B.gender}),u.jsx(Os,{label:"Blood Group",value:B.bloodGroup}),u.jsx(Os,{label:"Phone",value:B.phone}),u.jsx(Os,{label:"Email",value:B.email})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3 border-b-2 border-slate-300 pb-2",children:"Medical Information"}),u.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm mb-4",children:[u.jsx(Os,{label:"Weight",value:`${B.weight} kg`}),u.jsx(Os,{label:"Height",value:`${B.height} cm`}),u.jsx(Os,{label:"BMI",value:B.bmi}),u.jsx(Os,{label:"BP",value:B.bloodPressure})]}),B.allergies&&u.jsxs("div",{className:"bg-red-100 border-2 border-red-500 rounded p-3 mb-3",children:[u.jsx("p",{className:"text-xs font-bold text-red-900 mb-1",children:" ALLERGIES"}),u.jsx("p",{className:"text-sm text-red-800",children:B.allergies})]}),u.jsx(Os,{label:"Diagnosis",value:B.diagnosis})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-3 border-b-2 border-slate-300 pb-2",children:"Hospital Details"}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[u.jsx(Os,{label:"Ward",value:B.ward}),u.jsx(Os,{label:"Bed",value:B.bed}),u.jsx(Os,{label:"Status",value:B.status.toUpperCase()})]})]}),u.jsxs("div",{className:"mt-12 pt-6 border-t-2 border-slate-300",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold mb-1",children:"Patient Signature:"}),u.jsx("div",{className:"border-b-2 border-slate-400 mt-8"})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold mb-1",children:"Authorized Signature:"}),u.jsx("div",{className:"border-b-2 border-slate-400 mt-8"})]})]}),u.jsxs("p",{className:"text-xs text-center text-slate-500 mt-6",children:["Printed on ",new Date().toLocaleString("en-IN")]})]})]})})]})}function ho({label:r,value:e}){return u.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[u.jsx("p",{className:"text-xs text-slate-600 mb-1",children:r}),u.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:e})]})}function Os({label:r,value:e}){return e?u.jsxs("div",{className:"mb-2",children:[u.jsx("p",{className:"text-xs text-slate-600 font-semibold",children:r}),u.jsx("p",{className:"text-sm text-slate-900",children:e})]}):null}function Ia(r,e,{checkForDefaultPrevented:s=!0}={}){return function(h){if(r?.(h),s===!1||!h.defaultPrevented)return e?.(h)}}function CI(r,e){const s=j.createContext(e),l=g=>{const{children:y,...C}=g,A=j.useMemo(()=>C,Object.values(C));return u.jsx(s.Provider,{value:A,children:y})};l.displayName=r+"Provider";function h(g){const y=j.useContext(s);if(y)return y;if(e!==void 0)return e;throw new Error(`\`${g}\` must be used within \`${r}\``)}return[l,h]}function EI(r,e=[]){let s=[];function l(g,y){const C=j.createContext(y),A=s.length;s=[...s,y];const N=T=>{const{scope:k,children:U,...X}=T,z=k?.[r]?.[A]||C,ae=j.useMemo(()=>X,Object.values(X));return u.jsx(z.Provider,{value:ae,children:U})};N.displayName=g+"Provider";function I(T,k){const U=k?.[r]?.[A]||C,X=j.useContext(U);if(X)return X;if(y!==void 0)return y;throw new Error(`\`${T}\` must be used within \`${g}\``)}return[N,I]}const h=()=>{const g=s.map(y=>j.createContext(y));return function(C){const A=C?.[r]||g;return j.useMemo(()=>({[`__scope${r}`]:{...C,[r]:A}}),[C,A])}};return h.scopeName=r,[l,AI(h,...e)]}function AI(...r){const e=r[0];if(r.length===1)return e;const s=()=>{const l=r.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const y=l.reduce((C,{useScope:A,scopeName:N})=>{const T=A(g)[`__scope${N}`];return{...C,...T}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:y}),[y])}};return s.scopeName=e.scopeName,s}var eu=globalThis?.document?j.useLayoutEffect:()=>{},SI=l1[" useId ".trim().toString()]||(()=>{}),_I=0;function Em(r){const[e,s]=j.useState(SI());return eu(()=>{s(l=>l??String(_I++))},[r]),r||(e?`radix-${e}`:"")}var TI=l1[" useInsertionEffect ".trim().toString()]||eu;function II({prop:r,defaultProp:e,onChange:s=()=>{},caller:l}){const[h,g,y]=RI({defaultProp:e,onChange:s}),C=r!==void 0,A=C?r:h;{const I=j.useRef(r!==void 0);j.useEffect(()=>{const T=I.current;T!==C&&console.warn(`${l} is changing from ${T?"controlled":"uncontrolled"} to ${C?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),I.current=C},[C,l])}const N=j.useCallback(I=>{if(C){const T=MI(I)?I(r):I;T!==r&&y.current?.(T)}else g(I)},[C,r,g,y]);return[A,N]}function RI({defaultProp:r,onChange:e}){const[s,l]=j.useState(r),h=j.useRef(s),g=j.useRef(e);return TI(()=>{g.current=e},[e]),j.useEffect(()=>{h.current!==s&&(g.current?.(s),h.current=s)},[s,h]),[s,l,g]}function MI(r){return typeof r=="function"}function DI(r){const e=OI(r),s=j.forwardRef((l,h)=>{const{children:g,...y}=l,C=j.Children.toArray(g),A=C.find(LI);if(A){const N=A.props.children,I=C.map(T=>T===A?j.Children.count(N)>1?j.Children.only(null):j.isValidElement(N)?N.props.children:null:T);return u.jsx(e,{...y,ref:h,children:j.isValidElement(N)?j.cloneElement(N,void 0,I):null})}return u.jsx(e,{...y,ref:h,children:g})});return s.displayName=`${r}.Slot`,s}function OI(r){const e=j.forwardRef((s,l)=>{const{children:h,...g}=s;if(j.isValidElement(h)){const y=BI(h),C=kI(g,h.props);return h.type!==j.Fragment&&(C.ref=l?ko(l,y):y),j.cloneElement(h,C)}return j.Children.count(h)>1?j.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var jI=Symbol("radix.slottable");function LI(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===jI}function kI(r,e){const s={...e};for(const l in e){const h=r[l],g=e[l];/^on[A-Z]/.test(l)?h&&g?s[l]=(...C)=>{const A=g(...C);return h(...C),A}:h&&(s[l]=h):l==="style"?s[l]={...h,...g}:l==="className"&&(s[l]=[h,g].filter(Boolean).join(" "))}return{...r,...s}}function BI(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var PI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ww=PI.reduce((r,e)=>{const s=DI(`Primitive.${e}`),l=j.forwardRef((h,g)=>{const{asChild:y,...C}=h,A=y?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(A,{...C,ref:g})});return l.displayName=`Primitive.${e}`,{...r,[e]:l}},{});function UI(r,e){r&&AE.flushSync(()=>r.dispatchEvent(e))}function tu(r){const e=j.useRef(r);return j.useEffect(()=>{e.current=r}),j.useMemo(()=>(...s)=>e.current?.(...s),[])}function zI(r,e=globalThis?.document){const s=tu(r);j.useEffect(()=>{const l=h=>{h.key==="Escape"&&s(h)};return e.addEventListener("keydown",l,{capture:!0}),()=>e.removeEventListener("keydown",l,{capture:!0})},[s,e])}var FI="DismissableLayer",$m="dismissableLayer.update",HI="dismissableLayer.pointerDownOutside",VI="dismissableLayer.focusOutside",Hb,Xw=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qw=j.forwardRef((r,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:l,onPointerDownOutside:h,onFocusOutside:g,onInteractOutside:y,onDismiss:C,...A}=r,N=j.useContext(Xw),[I,T]=j.useState(null),k=I?.ownerDocument??globalThis?.document,[,U]=j.useState({}),X=vl(e,G=>T(G)),z=Array.from(N.layers),[ae]=[...N.layersWithOutsidePointerEventsDisabled].slice(-1),fe=z.indexOf(ae),B=I?z.indexOf(I):-1,W=N.layersWithOutsidePointerEventsDisabled.size>0,te=B>=fe,ne=qI(G=>{const J=G.target,Q=[...N.branches].some(Ce=>Ce.contains(J));!te||Q||(h?.(G),y?.(G),G.defaultPrevented||C?.())},k),ce=WI(G=>{const J=G.target;[...N.branches].some(Ce=>Ce.contains(J))||(g?.(G),y?.(G),G.defaultPrevented||C?.())},k);return zI(G=>{B===N.layers.size-1&&(l?.(G),!G.defaultPrevented&&C&&(G.preventDefault(),C()))},k),j.useEffect(()=>{if(I)return s&&(N.layersWithOutsidePointerEventsDisabled.size===0&&(Hb=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),N.layersWithOutsidePointerEventsDisabled.add(I)),N.layers.add(I),Vb(),()=>{s&&N.layersWithOutsidePointerEventsDisabled.size===1&&(k.body.style.pointerEvents=Hb)}},[I,k,s,N]),j.useEffect(()=>()=>{I&&(N.layers.delete(I),N.layersWithOutsidePointerEventsDisabled.delete(I),Vb())},[I,N]),j.useEffect(()=>{const G=()=>U({});return document.addEventListener($m,G),()=>document.removeEventListener($m,G)},[]),u.jsx(Ww.div,{...A,ref:X,style:{pointerEvents:W?te?"auto":"none":void 0,...r.style},onFocusCapture:Ia(r.onFocusCapture,ce.onFocusCapture),onBlurCapture:Ia(r.onBlurCapture,ce.onBlurCapture),onPointerDownCapture:Ia(r.onPointerDownCapture,ne.onPointerDownCapture)})});Qw.displayName=FI;var GI="DismissableLayerBranch",YI=j.forwardRef((r,e)=>{const s=j.useContext(Xw),l=j.useRef(null),h=vl(e,l);return j.useEffect(()=>{const g=l.current;if(g)return s.branches.add(g),()=>{s.branches.delete(g)}},[s.branches]),u.jsx(Ww.div,{...r,ref:h})});YI.displayName=GI;function qI(r,e=globalThis?.document){const s=tu(r),l=j.useRef(!1),h=j.useRef(()=>{});return j.useEffect(()=>{const g=C=>{if(C.target&&!l.current){let A=function(){Zw(HI,s,N,{discrete:!0})};const N={originalEvent:C};C.pointerType==="touch"?(e.removeEventListener("click",h.current),h.current=A,e.addEventListener("click",h.current,{once:!0})):A()}else e.removeEventListener("click",h.current);l.current=!1},y=window.setTimeout(()=>{e.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(y),e.removeEventListener("pointerdown",g),e.removeEventListener("click",h.current)}},[e,s]),{onPointerDownCapture:()=>l.current=!0}}function WI(r,e=globalThis?.document){const s=tu(r),l=j.useRef(!1);return j.useEffect(()=>{const h=g=>{g.target&&!l.current&&Zw(VI,s,{originalEvent:g},{discrete:!1})};return e.addEventListener("focusin",h),()=>e.removeEventListener("focusin",h)},[e,s]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Vb(){const r=new CustomEvent($m);document.dispatchEvent(r)}function Zw(r,e,s,{discrete:l}){const h=s.originalEvent.target,g=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:s});e&&h.addEventListener(r,e,{once:!0}),l?UI(h,g):h.dispatchEvent(g)}function XI(r){const e=QI(r),s=j.forwardRef((l,h)=>{const{children:g,...y}=l,C=j.Children.toArray(g),A=C.find(KI);if(A){const N=A.props.children,I=C.map(T=>T===A?j.Children.count(N)>1?j.Children.only(null):j.isValidElement(N)?N.props.children:null:T);return u.jsx(e,{...y,ref:h,children:j.isValidElement(N)?j.cloneElement(N,void 0,I):null})}return u.jsx(e,{...y,ref:h,children:g})});return s.displayName=`${r}.Slot`,s}function QI(r){const e=j.forwardRef((s,l)=>{const{children:h,...g}=s;if(j.isValidElement(h)){const y=$I(h),C=JI(g,h.props);return h.type!==j.Fragment&&(C.ref=l?ko(l,y):y),j.cloneElement(h,C)}return j.Children.count(h)>1?j.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var ZI=Symbol("radix.slottable");function KI(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===ZI}function JI(r,e){const s={...e};for(const l in e){const h=r[l],g=e[l];/^on[A-Z]/.test(l)?h&&g?s[l]=(...C)=>{const A=g(...C);return h(...C),A}:h&&(s[l]=h):l==="style"?s[l]={...h,...g}:l==="className"&&(s[l]=[h,g].filter(Boolean).join(" "))}return{...r,...s}}function $I(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var e6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],t6=e6.reduce((r,e)=>{const s=XI(`Primitive.${e}`),l=j.forwardRef((h,g)=>{const{asChild:y,...C}=h,A=y?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(A,{...C,ref:g})});return l.displayName=`Primitive.${e}`,{...r,[e]:l}},{}),Am="focusScope.autoFocusOnMount",Sm="focusScope.autoFocusOnUnmount",Gb={bubbles:!1,cancelable:!0},n6="FocusScope",Kw=j.forwardRef((r,e)=>{const{loop:s=!1,trapped:l=!1,onMountAutoFocus:h,onUnmountAutoFocus:g,...y}=r,[C,A]=j.useState(null),N=tu(h),I=tu(g),T=j.useRef(null),k=vl(e,z=>A(z)),U=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(l){let z=function(W){if(U.paused||!C)return;const te=W.target;C.contains(te)?T.current=te:Na(T.current,{select:!0})},ae=function(W){if(U.paused||!C)return;const te=W.relatedTarget;te!==null&&(C.contains(te)||Na(T.current,{select:!0}))},fe=function(W){if(document.activeElement===document.body)for(const ne of W)ne.removedNodes.length>0&&Na(C)};document.addEventListener("focusin",z),document.addEventListener("focusout",ae);const B=new MutationObserver(fe);return C&&B.observe(C,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",z),document.removeEventListener("focusout",ae),B.disconnect()}}},[l,C,U.paused]),j.useEffect(()=>{if(C){qb.add(U);const z=document.activeElement;if(!C.contains(z)){const fe=new CustomEvent(Am,Gb);C.addEventListener(Am,N),C.dispatchEvent(fe),fe.defaultPrevented||(s6(o6(Jw(C)),{select:!0}),document.activeElement===z&&Na(C))}return()=>{C.removeEventListener(Am,N),setTimeout(()=>{const fe=new CustomEvent(Sm,Gb);C.addEventListener(Sm,I),C.dispatchEvent(fe),fe.defaultPrevented||Na(z??document.body,{select:!0}),C.removeEventListener(Sm,I),qb.remove(U)},0)}}},[C,N,I,U]);const X=j.useCallback(z=>{if(!s&&!l||U.paused)return;const ae=z.key==="Tab"&&!z.altKey&&!z.ctrlKey&&!z.metaKey,fe=document.activeElement;if(ae&&fe){const B=z.currentTarget,[W,te]=i6(B);W&&te?!z.shiftKey&&fe===te?(z.preventDefault(),s&&Na(W,{select:!0})):z.shiftKey&&fe===W&&(z.preventDefault(),s&&Na(te,{select:!0})):fe===B&&z.preventDefault()}},[s,l,U.paused]);return u.jsx(t6.div,{tabIndex:-1,...y,ref:k,onKeyDown:X})});Kw.displayName=n6;function s6(r,{select:e=!1}={}){const s=document.activeElement;for(const l of r)if(Na(l,{select:e}),document.activeElement!==s)return}function i6(r){const e=Jw(r),s=Yb(e,r),l=Yb(e.reverse(),r);return[s,l]}function Jw(r){const e=[],s=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const h=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||h?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Yb(r,e){for(const s of r)if(!r6(s,{upTo:e}))return s}function r6(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function a6(r){return r instanceof HTMLInputElement&&"select"in r}function Na(r,{select:e=!1}={}){if(r&&r.focus){const s=document.activeElement;r.focus({preventScroll:!0}),r!==s&&a6(r)&&e&&r.select()}}var qb=l6();function l6(){let r=[];return{add(e){const s=r[0];e!==s&&s?.pause(),r=Wb(r,e),r.unshift(e)},remove(e){r=Wb(r,e),r[0]?.resume()}}}function Wb(r,e){const s=[...r],l=s.indexOf(e);return l!==-1&&s.splice(l,1),s}function o6(r){return r.filter(e=>e.tagName!=="A")}function c6(r){const e=u6(r),s=j.forwardRef((l,h)=>{const{children:g,...y}=l,C=j.Children.toArray(g),A=C.find(h6);if(A){const N=A.props.children,I=C.map(T=>T===A?j.Children.count(N)>1?j.Children.only(null):j.isValidElement(N)?N.props.children:null:T);return u.jsx(e,{...y,ref:h,children:j.isValidElement(N)?j.cloneElement(N,void 0,I):null})}return u.jsx(e,{...y,ref:h,children:g})});return s.displayName=`${r}.Slot`,s}function u6(r){const e=j.forwardRef((s,l)=>{const{children:h,...g}=s;if(j.isValidElement(h)){const y=m6(h),C=f6(g,h.props);return h.type!==j.Fragment&&(C.ref=l?ko(l,y):y),j.cloneElement(h,C)}return j.Children.count(h)>1?j.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var d6=Symbol("radix.slottable");function h6(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===d6}function f6(r,e){const s={...e};for(const l in e){const h=r[l],g=e[l];/^on[A-Z]/.test(l)?h&&g?s[l]=(...C)=>{const A=g(...C);return h(...C),A}:h&&(s[l]=h):l==="style"?s[l]={...h,...g}:l==="className"&&(s[l]=[h,g].filter(Boolean).join(" "))}return{...r,...s}}function m6(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var g6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],x6=g6.reduce((r,e)=>{const s=c6(`Primitive.${e}`),l=j.forwardRef((h,g)=>{const{asChild:y,...C}=h,A=y?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(A,{...C,ref:g})});return l.displayName=`Primitive.${e}`,{...r,[e]:l}},{}),p6="Portal",$w=j.forwardRef((r,e)=>{const{container:s,...l}=r,[h,g]=j.useState(!1);eu(()=>g(!0),[]);const y=s||h&&globalThis?.document?.body;return y?SE.createPortal(u.jsx(x6.div,{...l,ref:e}),y):null});$w.displayName=p6;function b6(r,e){return j.useReducer((s,l)=>e[s][l]??s,r)}var zh=r=>{const{present:e,children:s}=r,l=y6(e),h=typeof s=="function"?s({present:l.isPresent}):j.Children.only(s),g=vl(l.ref,v6(h));return typeof s=="function"||l.isPresent?j.cloneElement(h,{ref:g}):null};zh.displayName="Presence";function y6(r){const[e,s]=j.useState(),l=j.useRef(null),h=j.useRef(r),g=j.useRef("none"),y=r?"mounted":"unmounted",[C,A]=b6(y,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const N=Ud(l.current);g.current=C==="mounted"?N:"none"},[C]),eu(()=>{const N=l.current,I=h.current;if(I!==r){const k=g.current,U=Ud(N);r?A("MOUNT"):U==="none"||N?.display==="none"?A("UNMOUNT"):A(I&&k!==U?"ANIMATION_OUT":"UNMOUNT"),h.current=r}},[r,A]),eu(()=>{if(e){let N;const I=e.ownerDocument.defaultView??window,T=U=>{const z=Ud(l.current).includes(CSS.escape(U.animationName));if(U.target===e&&z&&(A("ANIMATION_END"),!h.current)){const ae=e.style.animationFillMode;e.style.animationFillMode="forwards",N=I.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=ae)})}},k=U=>{U.target===e&&(g.current=Ud(l.current))};return e.addEventListener("animationstart",k),e.addEventListener("animationcancel",T),e.addEventListener("animationend",T),()=>{I.clearTimeout(N),e.removeEventListener("animationstart",k),e.removeEventListener("animationcancel",T),e.removeEventListener("animationend",T)}}else A("ANIMATION_END")},[e,A]),{isPresent:["mounted","unmountSuspended"].includes(C),ref:j.useCallback(N=>{l.current=N?getComputedStyle(N):null,s(N)},[])}}function Ud(r){return r?.animationName||"none"}function v6(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}function eN(r){const e=w6(r),s=j.forwardRef((l,h)=>{const{children:g,...y}=l,C=j.Children.toArray(g),A=C.find(C6);if(A){const N=A.props.children,I=C.map(T=>T===A?j.Children.count(N)>1?j.Children.only(null):j.isValidElement(N)?N.props.children:null:T);return u.jsx(e,{...y,ref:h,children:j.isValidElement(N)?j.cloneElement(N,void 0,I):null})}return u.jsx(e,{...y,ref:h,children:g})});return s.displayName=`${r}.Slot`,s}function w6(r){const e=j.forwardRef((s,l)=>{const{children:h,...g}=s;if(j.isValidElement(h)){const y=A6(h),C=E6(g,h.props);return h.type!==j.Fragment&&(C.ref=l?ko(l,y):y),j.cloneElement(h,C)}return j.Children.count(h)>1?j.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var N6=Symbol("radix.slottable");function C6(r){return j.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===N6}function E6(r,e){const s={...e};for(const l in e){const h=r[l],g=e[l];/^on[A-Z]/.test(l)?h&&g?s[l]=(...C)=>{const A=g(...C);return h(...C),A}:h&&(s[l]=h):l==="style"?s[l]={...h,...g}:l==="className"&&(s[l]=[h,g].filter(Boolean).join(" "))}return{...r,...s}}function A6(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?r.props.ref:r.props.ref||r.ref)}var S6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],hu=S6.reduce((r,e)=>{const s=eN(`Primitive.${e}`),l=j.forwardRef((h,g)=>{const{asChild:y,...C}=h,A=y?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(A,{...C,ref:g})});return l.displayName=`Primitive.${e}`,{...r,[e]:l}},{}),_m=0;function _6(){j.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Xb()),document.body.insertAdjacentElement("beforeend",r[1]??Xb()),_m++,()=>{_m===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_m--}},[])}function Xb(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var Qi=function(){return Qi=Object.assign||function(e){for(var s,l=1,h=arguments.length;l<h;l++){s=arguments[l];for(var g in s)Object.prototype.hasOwnProperty.call(s,g)&&(e[g]=s[g])}return e},Qi.apply(this,arguments)};function tN(r,e){var s={};for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.indexOf(l)<0&&(s[l]=r[l]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(r);h<l.length;h++)e.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(r,l[h])&&(s[l[h]]=r[l[h]]);return s}function T6(r,e,s){if(s||arguments.length===2)for(var l=0,h=e.length,g;l<h;l++)(g||!(l in e))&&(g||(g=Array.prototype.slice.call(e,0,l)),g[l]=e[l]);return r.concat(g||Array.prototype.slice.call(e))}var th="right-scroll-bar-position",nh="width-before-scroll-bar",I6="with-scroll-bars-hidden",R6="--removed-body-scroll-bar-size";function Tm(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function M6(r,e){var s=j.useState(function(){return{value:r,callback:e,facade:{get current(){return s.value},set current(l){var h=s.value;h!==l&&(s.value=l,s.callback(l,h))}}}})[0];return s.callback=e,s.facade}var D6=typeof window<"u"?j.useLayoutEffect:j.useEffect,Qb=new WeakMap;function O6(r,e){var s=M6(null,function(l){return r.forEach(function(h){return Tm(h,l)})});return D6(function(){var l=Qb.get(s);if(l){var h=new Set(l),g=new Set(r),y=s.current;h.forEach(function(C){g.has(C)||Tm(C,null)}),g.forEach(function(C){h.has(C)||Tm(C,y)})}Qb.set(s,r)},[r]),s}function j6(r){return r}function L6(r,e){e===void 0&&(e=j6);var s=[],l=!1,h={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:r},useMedium:function(g){var y=e(g,l);return s.push(y),function(){s=s.filter(function(C){return C!==y})}},assignSyncMedium:function(g){for(l=!0;s.length;){var y=s;s=[],y.forEach(g)}s={push:function(C){return g(C)},filter:function(){return s}}},assignMedium:function(g){l=!0;var y=[];if(s.length){var C=s;s=[],C.forEach(g),y=s}var A=function(){var I=y;y=[],I.forEach(g)},N=function(){return Promise.resolve().then(A)};N(),s={push:function(I){y.push(I),N()},filter:function(I){return y=y.filter(I),s}}}};return h}function k6(r){r===void 0&&(r={});var e=L6(null);return e.options=Qi({async:!0,ssr:!1},r),e}var nN=function(r){var e=r.sideCar,s=tN(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=e.read();if(!l)throw new Error("Sidecar medium not found");return j.createElement(l,Qi({},s))};nN.isSideCarExport=!0;function B6(r,e){return r.useMedium(e),nN}var sN=k6(),Im=function(){},Fh=j.forwardRef(function(r,e){var s=j.useRef(null),l=j.useState({onScrollCapture:Im,onWheelCapture:Im,onTouchMoveCapture:Im}),h=l[0],g=l[1],y=r.forwardProps,C=r.children,A=r.className,N=r.removeScrollBar,I=r.enabled,T=r.shards,k=r.sideCar,U=r.noRelative,X=r.noIsolation,z=r.inert,ae=r.allowPinchZoom,fe=r.as,B=fe===void 0?"div":fe,W=r.gapMode,te=tN(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ne=k,ce=O6([s,e]),G=Qi(Qi({},te),h);return j.createElement(j.Fragment,null,I&&j.createElement(ne,{sideCar:sN,removeScrollBar:N,shards:T,noRelative:U,noIsolation:X,inert:z,setCallbacks:g,allowPinchZoom:!!ae,lockRef:s,gapMode:W}),y?j.cloneElement(j.Children.only(C),Qi(Qi({},G),{ref:ce})):j.createElement(B,Qi({},G,{className:A,ref:ce}),C))});Fh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fh.classNames={fullWidth:nh,zeroRight:th};var P6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function U6(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=P6();return e&&r.setAttribute("nonce",e),r}function z6(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function F6(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var H6=function(){var r=0,e=null;return{add:function(s){r==0&&(e=U6())&&(z6(e,s),F6(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},V6=function(){var r=H6();return function(e,s){j.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&s])}},iN=function(){var r=V6(),e=function(s){var l=s.styles,h=s.dynamic;return r(l,h),null};return e},G6={left:0,top:0,right:0,gap:0},Rm=function(r){return parseInt(r||"",10)||0},Y6=function(r){var e=window.getComputedStyle(document.body),s=e[r==="padding"?"paddingLeft":"marginLeft"],l=e[r==="padding"?"paddingTop":"marginTop"],h=e[r==="padding"?"paddingRight":"marginRight"];return[Rm(s),Rm(l),Rm(h)]},q6=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return G6;var e=Y6(r),s=document.documentElement.clientWidth,l=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,l-s+e[2]-e[0])}},W6=iN(),_o="data-scroll-locked",X6=function(r,e,s,l){var h=r.left,g=r.top,y=r.right,C=r.gap;return s===void 0&&(s="margin"),`
  .`.concat(I6,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(C,"px ").concat(l,`;
  }
  body[`).concat(_o,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(l,";"),s==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(g,`px;
    padding-right: `).concat(y,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(C,"px ").concat(l,`;
    `),s==="padding"&&"padding-right: ".concat(C,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(th,` {
    right: `).concat(C,"px ").concat(l,`;
  }
  
  .`).concat(nh,` {
    margin-right: `).concat(C,"px ").concat(l,`;
  }
  
  .`).concat(th," .").concat(th,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(nh," .").concat(nh,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(_o,`] {
    `).concat(R6,": ").concat(C,`px;
  }
`)},Zb=function(){var r=parseInt(document.body.getAttribute(_o)||"0",10);return isFinite(r)?r:0},Q6=function(){j.useEffect(function(){return document.body.setAttribute(_o,(Zb()+1).toString()),function(){var r=Zb()-1;r<=0?document.body.removeAttribute(_o):document.body.setAttribute(_o,r.toString())}},[])},Z6=function(r){var e=r.noRelative,s=r.noImportant,l=r.gapMode,h=l===void 0?"margin":l;Q6();var g=j.useMemo(function(){return q6(h)},[h]);return j.createElement(W6,{styles:X6(g,!e,h,s?"":"!important")})},e1=!1;if(typeof window<"u")try{var zd=Object.defineProperty({},"passive",{get:function(){return e1=!0,!0}});window.addEventListener("test",zd,zd),window.removeEventListener("test",zd,zd)}catch{e1=!1}var fo=e1?{passive:!1}:!1,K6=function(r){return r.tagName==="TEXTAREA"},rN=function(r,e){if(!(r instanceof Element))return!1;var s=window.getComputedStyle(r);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!K6(r)&&s[e]==="visible")},J6=function(r){return rN(r,"overflowY")},$6=function(r){return rN(r,"overflowX")},Kb=function(r,e){var s=e.ownerDocument,l=e;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var h=aN(r,l);if(h){var g=lN(r,l),y=g[1],C=g[2];if(y>C)return!0}l=l.parentNode}while(l&&l!==s.body);return!1},e8=function(r){var e=r.scrollTop,s=r.scrollHeight,l=r.clientHeight;return[e,s,l]},t8=function(r){var e=r.scrollLeft,s=r.scrollWidth,l=r.clientWidth;return[e,s,l]},aN=function(r,e){return r==="v"?J6(e):$6(e)},lN=function(r,e){return r==="v"?e8(e):t8(e)},n8=function(r,e){return r==="h"&&e==="rtl"?-1:1},s8=function(r,e,s,l,h){var g=n8(r,window.getComputedStyle(e).direction),y=g*l,C=s.target,A=e.contains(C),N=!1,I=y>0,T=0,k=0;do{if(!C)break;var U=lN(r,C),X=U[0],z=U[1],ae=U[2],fe=z-ae-g*X;(X||fe)&&aN(r,C)&&(T+=fe,k+=X);var B=C.parentNode;C=B&&B.nodeType===Node.DOCUMENT_FRAGMENT_NODE?B.host:B}while(!A&&C!==document.body||A&&(e.contains(C)||e===C));return(I&&Math.abs(T)<1||!I&&Math.abs(k)<1)&&(N=!0),N},Fd=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},Jb=function(r){return[r.deltaX,r.deltaY]},$b=function(r){return r&&"current"in r?r.current:r},i8=function(r,e){return r[0]===e[0]&&r[1]===e[1]},r8=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},a8=0,mo=[];function l8(r){var e=j.useRef([]),s=j.useRef([0,0]),l=j.useRef(),h=j.useState(a8++)[0],g=j.useState(iN)[0],y=j.useRef(r);j.useEffect(function(){y.current=r},[r]),j.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(h));var z=T6([r.lockRef.current],(r.shards||[]).map($b),!0).filter(Boolean);return z.forEach(function(ae){return ae.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),z.forEach(function(ae){return ae.classList.remove("allow-interactivity-".concat(h))})}}},[r.inert,r.lockRef.current,r.shards]);var C=j.useCallback(function(z,ae){if("touches"in z&&z.touches.length===2||z.type==="wheel"&&z.ctrlKey)return!y.current.allowPinchZoom;var fe=Fd(z),B=s.current,W="deltaX"in z?z.deltaX:B[0]-fe[0],te="deltaY"in z?z.deltaY:B[1]-fe[1],ne,ce=z.target,G=Math.abs(W)>Math.abs(te)?"h":"v";if("touches"in z&&G==="h"&&ce.type==="range")return!1;var J=window.getSelection(),Q=J&&J.anchorNode,Ce=Q?Q===ce||Q.contains(ce):!1;if(Ce)return!1;var Z=Kb(G,ce);if(!Z)return!0;if(Z?ne=G:(ne=G==="v"?"h":"v",Z=Kb(G,ce)),!Z)return!1;if(!l.current&&"changedTouches"in z&&(W||te)&&(l.current=ne),!ne)return!0;var se=l.current||ne;return s8(se,ae,z,se==="h"?W:te)},[]),A=j.useCallback(function(z){var ae=z;if(!(!mo.length||mo[mo.length-1]!==g)){var fe="deltaY"in ae?Jb(ae):Fd(ae),B=e.current.filter(function(ne){return ne.name===ae.type&&(ne.target===ae.target||ae.target===ne.shadowParent)&&i8(ne.delta,fe)})[0];if(B&&B.should){ae.cancelable&&ae.preventDefault();return}if(!B){var W=(y.current.shards||[]).map($b).filter(Boolean).filter(function(ne){return ne.contains(ae.target)}),te=W.length>0?C(ae,W[0]):!y.current.noIsolation;te&&ae.cancelable&&ae.preventDefault()}}},[]),N=j.useCallback(function(z,ae,fe,B){var W={name:z,delta:ae,target:fe,should:B,shadowParent:o8(fe)};e.current.push(W),setTimeout(function(){e.current=e.current.filter(function(te){return te!==W})},1)},[]),I=j.useCallback(function(z){s.current=Fd(z),l.current=void 0},[]),T=j.useCallback(function(z){N(z.type,Jb(z),z.target,C(z,r.lockRef.current))},[]),k=j.useCallback(function(z){N(z.type,Fd(z),z.target,C(z,r.lockRef.current))},[]);j.useEffect(function(){return mo.push(g),r.setCallbacks({onScrollCapture:T,onWheelCapture:T,onTouchMoveCapture:k}),document.addEventListener("wheel",A,fo),document.addEventListener("touchmove",A,fo),document.addEventListener("touchstart",I,fo),function(){mo=mo.filter(function(z){return z!==g}),document.removeEventListener("wheel",A,fo),document.removeEventListener("touchmove",A,fo),document.removeEventListener("touchstart",I,fo)}},[]);var U=r.removeScrollBar,X=r.inert;return j.createElement(j.Fragment,null,X?j.createElement(g,{styles:r8(h)}):null,U?j.createElement(Z6,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function o8(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const c8=B6(sN,l8);var oN=j.forwardRef(function(r,e){return j.createElement(Fh,Qi({},r,{ref:e,sideCar:c8}))});oN.classNames=Fh.classNames;var u8=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},go=new WeakMap,Hd=new WeakMap,Vd={},Mm=0,cN=function(r){return r&&(r.host||cN(r.parentNode))},d8=function(r,e){return e.map(function(s){if(r.contains(s))return s;var l=cN(s);return l&&r.contains(l)?l:(console.error("aria-hidden",s,"in not contained inside",r,". Doing nothing"),null)}).filter(function(s){return!!s})},h8=function(r,e,s,l){var h=d8(e,Array.isArray(r)?r:[r]);Vd[s]||(Vd[s]=new WeakMap);var g=Vd[s],y=[],C=new Set,A=new Set(h),N=function(T){!T||C.has(T)||(C.add(T),N(T.parentNode))};h.forEach(N);var I=function(T){!T||A.has(T)||Array.prototype.forEach.call(T.children,function(k){if(C.has(k))I(k);else try{var U=k.getAttribute(l),X=U!==null&&U!=="false",z=(go.get(k)||0)+1,ae=(g.get(k)||0)+1;go.set(k,z),g.set(k,ae),y.push(k),z===1&&X&&Hd.set(k,!0),ae===1&&k.setAttribute(s,"true"),X||k.setAttribute(l,"true")}catch(fe){console.error("aria-hidden: cannot operate on ",k,fe)}})};return I(e),C.clear(),Mm++,function(){y.forEach(function(T){var k=go.get(T)-1,U=g.get(T)-1;go.set(T,k),g.set(T,U),k||(Hd.has(T)||T.removeAttribute(l),Hd.delete(T)),U||T.removeAttribute(s)}),Mm--,Mm||(go=new WeakMap,go=new WeakMap,Hd=new WeakMap,Vd={})}},f8=function(r,e,s){s===void 0&&(s="data-aria-hidden");var l=Array.from(Array.isArray(r)?r:[r]),h=u8(r);return h?(l.push.apply(l,Array.from(h.querySelectorAll("[aria-live], script"))),h8(l,h,s,"aria-hidden")):function(){return null}},Hh="Dialog",[uN]=EI(Hh),[m8,Oi]=uN(Hh),dN=r=>{const{__scopeDialog:e,children:s,open:l,defaultOpen:h,onOpenChange:g,modal:y=!0}=r,C=j.useRef(null),A=j.useRef(null),[N,I]=II({prop:l,defaultProp:h??!1,onChange:g,caller:Hh});return u.jsx(m8,{scope:e,triggerRef:C,contentRef:A,contentId:Em(),titleId:Em(),descriptionId:Em(),open:N,onOpenChange:I,onOpenToggle:j.useCallback(()=>I(T=>!T),[I]),modal:y,children:s})};dN.displayName=Hh;var hN="DialogTrigger",g8=j.forwardRef((r,e)=>{const{__scopeDialog:s,...l}=r,h=Oi(hN,s),g=vl(e,h.triggerRef);return u.jsx(hu.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":Q1(h.open),...l,ref:g,onClick:Ia(r.onClick,h.onOpenToggle)})});g8.displayName=hN;var W1="DialogPortal",[x8,fN]=uN(W1,{forceMount:void 0}),mN=r=>{const{__scopeDialog:e,forceMount:s,children:l,container:h}=r,g=Oi(W1,e);return u.jsx(x8,{scope:e,forceMount:s,children:j.Children.map(l,y=>u.jsx(zh,{present:s||g.open,children:u.jsx($w,{asChild:!0,container:h,children:y})}))})};mN.displayName=W1;var Eh="DialogOverlay",gN=j.forwardRef((r,e)=>{const s=fN(Eh,r.__scopeDialog),{forceMount:l=s.forceMount,...h}=r,g=Oi(Eh,r.__scopeDialog);return g.modal?u.jsx(zh,{present:l||g.open,children:u.jsx(b8,{...h,ref:e})}):null});gN.displayName=Eh;var p8=eN("DialogOverlay.RemoveScroll"),b8=j.forwardRef((r,e)=>{const{__scopeDialog:s,...l}=r,h=Oi(Eh,s);return u.jsx(oN,{as:p8,allowPinchZoom:!0,shards:[h.contentRef],children:u.jsx(hu.div,{"data-state":Q1(h.open),...l,ref:e,style:{pointerEvents:"auto",...l.style}})})}),yl="DialogContent",xN=j.forwardRef((r,e)=>{const s=fN(yl,r.__scopeDialog),{forceMount:l=s.forceMount,...h}=r,g=Oi(yl,r.__scopeDialog);return u.jsx(zh,{present:l||g.open,children:g.modal?u.jsx(y8,{...h,ref:e}):u.jsx(v8,{...h,ref:e})})});xN.displayName=yl;var y8=j.forwardRef((r,e)=>{const s=Oi(yl,r.__scopeDialog),l=j.useRef(null),h=vl(e,s.contentRef,l);return j.useEffect(()=>{const g=l.current;if(g)return f8(g)},[]),u.jsx(pN,{...r,ref:h,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ia(r.onCloseAutoFocus,g=>{g.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Ia(r.onPointerDownOutside,g=>{const y=g.detail.originalEvent,C=y.button===0&&y.ctrlKey===!0;(y.button===2||C)&&g.preventDefault()}),onFocusOutside:Ia(r.onFocusOutside,g=>g.preventDefault())})}),v8=j.forwardRef((r,e)=>{const s=Oi(yl,r.__scopeDialog),l=j.useRef(!1),h=j.useRef(!1);return u.jsx(pN,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{r.onCloseAutoFocus?.(g),g.defaultPrevented||(l.current||s.triggerRef.current?.focus(),g.preventDefault()),l.current=!1,h.current=!1},onInteractOutside:g=>{r.onInteractOutside?.(g),g.defaultPrevented||(l.current=!0,g.detail.originalEvent.type==="pointerdown"&&(h.current=!0));const y=g.target;s.triggerRef.current?.contains(y)&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&h.current&&g.preventDefault()}})}),pN=j.forwardRef((r,e)=>{const{__scopeDialog:s,trapFocus:l,onOpenAutoFocus:h,onCloseAutoFocus:g,...y}=r,C=Oi(yl,s),A=j.useRef(null),N=vl(e,A);return _6(),u.jsxs(u.Fragment,{children:[u.jsx(Kw,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:h,onUnmountAutoFocus:g,children:u.jsx(Qw,{role:"dialog",id:C.contentId,"aria-describedby":C.descriptionId,"aria-labelledby":C.titleId,"data-state":Q1(C.open),...y,ref:N,onDismiss:()=>C.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(w8,{titleId:C.titleId}),u.jsx(C8,{contentRef:A,descriptionId:C.descriptionId})]})]})}),X1="DialogTitle",bN=j.forwardRef((r,e)=>{const{__scopeDialog:s,...l}=r,h=Oi(X1,s);return u.jsx(hu.h2,{id:h.titleId,...l,ref:e})});bN.displayName=X1;var yN="DialogDescription",vN=j.forwardRef((r,e)=>{const{__scopeDialog:s,...l}=r,h=Oi(yN,s);return u.jsx(hu.p,{id:h.descriptionId,...l,ref:e})});vN.displayName=yN;var wN="DialogClose",NN=j.forwardRef((r,e)=>{const{__scopeDialog:s,...l}=r,h=Oi(wN,s);return u.jsx(hu.button,{type:"button",...l,ref:e,onClick:Ia(r.onClick,()=>h.onOpenChange(!1))})});NN.displayName=wN;function Q1(r){return r?"open":"closed"}var CN="DialogTitleWarning",[D5,EN]=CI(CN,{contentName:yl,titleName:X1,docsSlug:"dialog"}),w8=({titleId:r})=>{const e=EN(CN),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{r&&(document.getElementById(r)||console.error(s))},[s,r]),null},N8="DialogDescriptionWarning",C8=({contentRef:r,descriptionId:e})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${EN(N8).contentName}}.`;return j.useEffect(()=>{const h=r.current?.getAttribute("aria-describedby");e&&h&&(document.getElementById(e)||console.warn(l))},[l,r,e]),null},E8=dN,A8=mN,AN=gN,SN=xN,_N=bN,TN=vN,S8=NN;const ey=E8,_8=A8,IN=j.forwardRef(({className:r,...e},s)=>u.jsx(AN,{ref:s,className:Ls("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));IN.displayName=AN.displayName;const t1=j.forwardRef(({className:r,children:e,...s},l)=>u.jsxs(_8,{children:[u.jsx(IN,{}),u.jsxs(SN,{ref:l,className:Ls("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s,children:[e,u.jsxs(S8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(_a,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));t1.displayName=SN.displayName;const n1=({className:r,...e})=>u.jsx("div",{className:Ls("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});n1.displayName="DialogHeader";const s1=j.forwardRef(({className:r,...e},s)=>u.jsx(_N,{ref:s,className:Ls("text-lg font-semibold leading-none tracking-tight",r),...e}));s1.displayName=_N.displayName;const T8=j.forwardRef(({className:r,...e},s)=>u.jsx(TN,{ref:s,className:Ls("text-sm text-muted-foreground",r),...e}));T8.displayName=TN.displayName;const fu=()=>{const[r,e]=j.useState([]),[s,l]=j.useState(!0);return j.useEffect(()=>{const h=ja(er,"patients"),g=Rh(h,Mh("createdAt","desc")),y=Dh(g,C=>{const A=C.docs.map(N=>({id:N.id,...N.data()}));e(A),l(!1)});return()=>y()},[]),{patients:r,loading:s}},Vh=()=>{const[r,e]=j.useState([]),[s,l]=j.useState(!0);return j.useEffect(()=>{const h=ja(er,"medications"),g=Rh(h,Mh("createdAt","desc")),y=Dh(g,C=>{const A=C.docs.map(N=>({id:N.id,...N.data()}));e(A),l(!1)});return()=>y()},[]),{medications:r,loading:s}},RN=()=>{const[r,e]=j.useState([]),[s,l]=j.useState(!0);return j.useEffect(()=>{const h=ja(er,"administrationLogs"),g=Rh(h,Mh("timestamp","desc")),y=Dh(g,C=>{const A=C.docs.map(N=>{const I=N.data();return{id:N.id,...I,timestamp:I.timestamp?.toDate?I.timestamp.toDate():I.timestamp?new Date(I.timestamp):new Date}});e(A),l(!1)});return()=>y()},[]),{logs:r,loading:s}},I8=async r=>{try{const e=ja(er,"medications"),s={patientHHID:r.patientHHID,patientName:r.patientName,drugName:r.drugName,dose:r.dose,route:r.route,frequency:r.frequency,timing:r.timing||[],instructions:r.instructions||"",duration:r.duration||"",status:r.status||"active",rackId:r.rackId||"Not assigned",prescribedBy:r.prescribedBy||"Doctor",administrationLogs:[],createdAt:Zi(),updatedAt:Zi()},l=await Ih(e,s);return await bl({eventType:"medication_prescribed",performedBy:r.prescribedBy||"Pharmacist",performedByRole:"pharmacist",targetType:"medication",targetId:r.patientHHID,targetName:`${r.drugName} for ${r.patientName}`,action:`Prescribed ${r.drugName} (${r.dose}) to ${r.patientName}`,details:{drugName:r.drugName,dose:r.dose,route:r.route,frequency:r.frequency,duration:r.duration},status:"success"}),console.log(" Medication prescribed successfully:",l.id),{success:!0,id:l.id}}catch(e){return console.error(" Error prescribing medication:",e),await bl({eventType:"medication_prescription_failed",performedBy:r.prescribedBy||"Pharmacist",performedByRole:"pharmacist",targetType:"medication",targetId:r.patientHHID||"Unknown",targetName:r.drugName||"Unknown Drug",action:"Failed to prescribe medication",details:{error:e.message},status:"failed"}),{success:!1,error:e.message}}},R8=async(r,e)=>{try{const s=ja(er,"administrationLogs"),l={patientHHID:r.patientHHID,medicationId:e,drugName:r.drugName,dose:r.dose,route:r.route,nurseName:r.nurseName,scheduledTime:r.scheduledTime||"Not specified",status:r.status||"administered",notes:r.notes||"",timestamp:Zi(),createdAt:Zi()},h=await Ih(s,l);if(e){const g=ky(er,"medications",e);await By(g,{administrationLogs:ZE({logId:h.id,patientHHID:r.patientHHID,drugName:r.drugName,dose:r.dose,route:r.route,nurseName:r.nurseName,scheduledTime:r.scheduledTime||"Not specified",status:r.status||"administered",notes:r.notes||"",timestamp:new Date().toISOString()}),lastAdministered:Zi(),lastAdministeredBy:r.nurseName,updatedAt:Zi()})}return await bl({eventType:"medication_administered",performedBy:r.nurseName,performedByRole:"nurse",targetType:"medication",targetId:r.patientHHID,targetName:`${r.drugName} - ${r.patientHHID}`,action:`Administered ${r.drugName} (${r.dose}) to patient ${r.patientHHID}`,details:{drugName:r.drugName,dose:r.dose,route:r.route,scheduledTime:r.scheduledTime,actualTime:new Date().toISOString(),notes:r.notes},status:"success"}),console.log(" Administration logged successfully:",h.id),{success:!0,logId:h.id}}catch(s){return console.error(" Error logging administration:",s),await bl({eventType:"medication_administration_failed",performedBy:r.nurseName||"Unknown Nurse",performedByRole:"nurse",targetType:"medication",targetId:r.patientHHID||"Unknown",targetName:r.drugName||"Unknown Drug",action:"Failed to log medication administration",details:{error:s.message},status:"failed"}),{success:!1,error:s.message}}};var Ve;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ve||(Ve={}));var ty=new Map([[Ve.QR_CODE,"QR_CODE"],[Ve.AZTEC,"AZTEC"],[Ve.CODABAR,"CODABAR"],[Ve.CODE_39,"CODE_39"],[Ve.CODE_93,"CODE_93"],[Ve.CODE_128,"CODE_128"],[Ve.DATA_MATRIX,"DATA_MATRIX"],[Ve.MAXICODE,"MAXICODE"],[Ve.ITF,"ITF"],[Ve.EAN_13,"EAN_13"],[Ve.EAN_8,"EAN_8"],[Ve.PDF_417,"PDF_417"],[Ve.RSS_14,"RSS_14"],[Ve.RSS_EXPANDED,"RSS_EXPANDED"],[Ve.UPC_A,"UPC_A"],[Ve.UPC_E,"UPC_E"],[Ve.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ny;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(ny||(ny={}));function M8(r){return Object.values(Ve).includes(r)}var Ma;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ma||(Ma={}));var _i=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Ma.SCAN_TYPE_CAMERA,Ma.SCAN_TYPE_FILE],r})(),MN=(function(){function r(e,s){this.format=e,this.formatName=s}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!ty.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,ty.get(e))},r})(),sy=(function(){function r(){}return r.createFromText=function(e){var s={text:e};return{decodedText:e,result:s}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),i1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(i1||(i1={}));var DN=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:i1.UNKWOWN_ERROR}},r})(),ON=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,s){(this.verbose||s===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function Wi(r){return typeof r>"u"||r===null}function D8(r,e,s){return r>s?s:r<e?e:r}var yo=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),on=(function(){function r(){}return r.scanningStatus=function(){return"Scanning"},r.idleStatus=function(){return"Idle"},r.errorStatus=function(){return"Error"},r.permissionStatus=function(){return"Permission"},r.noCameraFoundErrorStatus=function(){return"No Cameras"},r.lastMatch=function(e){return"Last Match: ".concat(e)},r.codeScannerTitle=function(){return"Code Scanner"},r.cameraPermissionTitle=function(){return"Request Camera Permissions"},r.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},r.noCameraFound=function(){return"No camera found"},r.scanButtonStopScanningText=function(){return"Stop Scanning"},r.scanButtonStartScanningText=function(){return"Start Scanning"},r.torchOnButton=function(){return"Switch On Torch"},r.torchOffButton=function(){return"Switch Off Torch"},r.torchOnFailedMessage=function(){return"Failed to turn on torch"},r.torchOffFailedMessage=function(){return"Failed to turn off torch"},r.scanButtonScanningStarting=function(){return"Launching Camera..."},r.textIfCameraScanSelected=function(){return"Scan an Image File"},r.textIfFileScanSelected=function(){return"Scan using camera directly"},r.selectCamera=function(){return"Select Camera"},r.fileSelectionChooseImage=function(){return"Choose Image"},r.fileSelectionChooseAnother=function(){return"Choose Another"},r.fileSelectionNoImageSelected=function(){return"No image choosen"},r.anonymousCameraPrefix=function(){return"Anonymous Camera"},r.dragAndDropMessage=function(){return"Or drop an image to scan"},r.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},r.zoom=function(){return"zoom"},r.loadingImage=function(){return"Loading image..."},r.cameraScanAltText=function(){return"Camera based scan"},r.fileScanAltText=function(){return"Fule based scan"},r})(),iy=(function(){function r(){}return r.poweredBy=function(){return"Powered by "},r.reportIssues=function(){return"Report issues"},r})(),jN=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,s){if(typeof e!="object"){var l=typeof e;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(l,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(h),y=Object.keys(e),C=0,A=y;C<A.length;C++){var N=A[C];if(g.has(N))return s.logError("".concat(N," is not supported videoConstaints."),!0),!1}return!0},r})(),Fc={exports:{}},O8=Fc.exports,ry;function j8(){return ry||(ry=1,(function(r,e){(function(s,l){l(e)})(O8,(function(s){function l(R){return R==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,n){R.__proto__=n}||function(R,n){for(var a in n)n.hasOwnProperty(a)&&(R[a]=n[a])};function g(R,n){h(R,n);function a(){this.constructor=R}R.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}function y(R,n){var a=Object.setPrototypeOf;a?a(R,n):R.__proto__=n}function C(R,n){n===void 0&&(n=R.constructor);var a=Error.captureStackTrace;a&&a(R,n)}var A=(function(R){g(n,R);function n(a){var o=this.constructor,d=R.call(this,a)||this;return Object.defineProperty(d,"name",{value:o.name,enumerable:!1}),y(d,o.prototype),C(d),d}return n})(Error);class N extends A{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}N.kind="Exception";class I extends N{}I.kind="ArgumentException";class T extends N{}T.kind="IllegalArgumentException";class k{constructor(n){if(this.binarizer=n,n===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,a){return this.binarizer.getBlackRow(n,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,a,o,d){const f=this.binarizer.getLuminanceSource().crop(n,a,o,d);return new k(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends N{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class X{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class z{static arraycopy(n,a,o,d,f){for(;f--;)o[d++]=n[a++]}static currentTimeMillis(){return Date.now()}}class ae extends N{}ae.kind="IndexOutOfBoundsException";class fe extends ae{constructor(n=void 0,a=void 0){super(a),this.index=n,this.message=a}}fe.kind="ArrayIndexOutOfBoundsException";class B{static fill(n,a){for(let o=0,d=n.length;o<d;o++)n[o]=a}static fillWithin(n,a,o,d){B.rangeCheck(n.length,a,o);for(let f=a;f<o;f++)n[f]=d}static rangeCheck(n,a,o){if(a>o)throw new T("fromIndex("+a+") > toIndex("+o+")");if(a<0)throw new fe(a);if(o>n)throw new fe(o)}static asList(...n){return n}static create(n,a,o){return Array.from({length:n}).map(f=>Array.from({length:a}).fill(o))}static createInt32Array(n,a,o){return Array.from({length:n}).map(f=>Int32Array.from({length:a}).fill(o))}static equals(n,a){if(!n||!a||!n.length||!a.length||n.length!==a.length)return!1;for(let o=0,d=n.length;o<d;o++)if(n[o]!==a[o])return!1;return!0}static hashCode(n){if(n===null)return 0;let a=1;for(const o of n)a=31*a+o;return a}static fillUint8Array(n,a){for(let o=0;o!==n.length;o++)n[o]=a}static copyOf(n,a){return n.slice(0,a)}static copyOfUint8Array(n,a){if(n.length<=a){const o=new Uint8Array(a);return o.set(n),o}return n.slice(0,a)}static copyOfRange(n,a,o){const d=o-a,f=new Int32Array(d);return z.arraycopy(n,a,f,0,d),f}static binarySearch(n,a,o){o===void 0&&(o=B.numberComparator);let d=0,f=n.length-1;for(;d<=f;){const x=f+d>>1,p=o(a,n[x]);if(p>0)d=x+1;else if(p<0)f=x-1;else return x}return-d-1}static numberComparator(n,a){return n-a}}class W{static numberOfTrailingZeros(n){let a;if(n===0)return 32;let o=31;return a=n<<16,a!==0&&(o-=16,n=a),a=n<<8,a!==0&&(o-=8,n=a),a=n<<4,a!==0&&(o-=4,n=a),a=n<<2,a!==0&&(o-=2,n=a),o-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let a=1;return n>>>16||(a+=16,n<<=16),n>>>24||(a+=8,n<<=8),n>>>28||(a+=4,n<<=4),n>>>30||(a+=2,n<<=2),a-=n>>>31,a}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,a){return Math.trunc(n/a)}static parseInt(n,a=void 0){return parseInt(n,a)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class te{constructor(n,a){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,a==null?this.bits=te.makeArray(n):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const a=te.makeArray(n);z.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const a=this.size;if(n>=a)return a;const o=this.bits;let d=Math.floor(n/32),f=o[d];f&=~((1<<(n&31))-1);const x=o.length;for(;f===0;){if(++d===x)return a;f=o[d]}const p=d*32+W.numberOfTrailingZeros(f);return p>a?a:p}getNextUnset(n){const a=this.size;if(n>=a)return a;const o=this.bits;let d=Math.floor(n/32),f=~o[d];f&=~((1<<(n&31))-1);const x=o.length;for(;f===0;){if(++d===x)return a;f=~o[d]}const p=d*32+W.numberOfTrailingZeros(f);return p>a?a:p}setBulk(n,a){this.bits[Math.floor(n/32)]=a}setRange(n,a){if(a<n||n<0||a>this.size)throw new T;if(a===n)return;a--;const o=Math.floor(n/32),d=Math.floor(a/32),f=this.bits;for(let x=o;x<=d;x++){const p=x>o?0:n&31,E=(2<<(x<d?31:a&31))-(1<<p);f[x]|=E}}clear(){const n=this.bits.length,a=this.bits;for(let o=0;o<n;o++)a[o]=0}isRange(n,a,o){if(a<n||n<0||a>this.size)throw new T;if(a===n)return!0;a--;const d=Math.floor(n/32),f=Math.floor(a/32),x=this.bits;for(let p=d;p<=f;p++){const v=p>d?0:n&31,S=(2<<(p<f?31:a&31))-(1<<v)&4294967295;if((x[p]&S)!==(o?S:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,a){if(a<0||a>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let o=a;o>0;o--)this.appendBit((n>>o-1&1)===1)}appendBitArray(n){const a=n.size;this.ensureCapacity(this.size+a);for(let o=0;o<a;o++)this.appendBit(n.get(o))}xor(n){if(this.size!==n.size)throw new T("Sizes don't match");const a=this.bits;for(let o=0,d=a.length;o<d;o++)a[o]^=n.bits[o]}toBytes(n,a,o,d){for(let f=0;f<d;f++){let x=0;for(let p=0;p<8;p++)this.get(n)&&(x|=1<<7-p),n++;a[o+f]=x}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),o=a+1,d=this.bits;for(let f=0;f<o;f++){let x=d[f];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,n[a-f]=x}if(this.size!==o*32){const f=o*32-this.size;let x=n[0]>>>f;for(let p=1;p<o;p++){const v=n[p];x|=v<<32-f,n[p-1]=x,x=v>>>f}n[o-1]=x}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof te))return!1;const a=n;return this.size===a.size&&B.equals(this.bits,a.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let n="";for(let a=0,o=this.size;a<o;a++)(a&7)===0&&(n+=" "),n+=this.get(a)?"X":".";return n}clone(){return new te(this.size,this.bits.slice())}}var ne;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ne||(ne={}));var ce=ne;class G extends N{static getFormatInstance(){return new G}}G.kind="FormatException";var J;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(J||(J={}));class Q{constructor(n,a,o,...d){this.valueIdentifier=n,this.name=o,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=d,Q.VALUE_IDENTIFIER_TO_ECI.set(n,this),Q.NAME_TO_ECI.set(o,this);const f=this.values;for(let x=0,p=f.length;x!==p;x++){const v=f[x];Q.VALUES_TO_ECI.set(v,this)}for(const x of d)Q.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new G("incorect value");const a=Q.VALUES_TO_ECI.get(n);if(a===void 0)throw new G("incorect value");return a}static getCharacterSetECIByName(n){const a=Q.NAME_TO_ECI.get(n);if(a===void 0)throw new G("incorect value");return a}equals(n){if(!(n instanceof Q))return!1;const a=n;return this.getName()===a.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(J.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(J.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(J.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(J.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(J.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(J.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(J.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(J.Big5,28,"Big5"),Q.GB18030=new Q(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(J.EUC_KR,30,"EUC_KR","EUC-KR");class Ce extends N{}Ce.kind="UnsupportedOperationException";class Z{static decode(n,a){const o=this.encodingName(a);return this.customDecoder?this.customDecoder(n,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(n,o):new TextDecoder(o).decode(n)}static shouldDecodeOnFallback(n){return!Z.isBrowser()&&n==="ISO-8859-1"}static encode(n,a){const o=this.encodingName(a);return this.customEncoder?this.customEncoder(n,o):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof Q?n:Q.getCharacterSetECIByName(n)}static decodeFallback(n,a){const o=this.encodingCharacterSet(a);if(Z.isDecodeFallbackSupported(o)){let d="";for(let f=0,x=n.length;f<x;f++){let p=n[f].toString(16);p.length<2&&(p="0"+p),d+="%"+p}return decodeURIComponent(d)}if(o.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new Ce(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(Q.UTF8)||n.equals(Q.ISO8859_1)||n.equals(Q.ASCII)}static encodeFallback(n){const o=btoa(unescape(encodeURIComponent(n))).split(""),d=[];for(let f=0;f<o.length;f++)d.push(o[f].charCodeAt(0));return new Uint8Array(d)}}class se{static castAsNonUtf8Char(n,a=null){const o=a?a.getName():this.ISO88591;return Z.decode(new Uint8Array([n]),o)}static guessEncoding(n,a){if(a!=null&&a.get(ce.CHARACTER_SET)!==void 0)return a.get(ce.CHARACTER_SET).toString();const o=n.length;let d=!0,f=!0,x=!0,p=0,v=0,E=0,S=0,M=0,D=0,P=0,H=0,q=0,ie=0,me=0;const Me=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Te=0;Te<o&&(d||f||x);Te++){const Se=n[Te]&255;x&&(p>0?(Se&128)===0?x=!1:p--:(Se&128)!==0&&((Se&64)===0?x=!1:(p++,(Se&32)===0?v++:(p++,(Se&16)===0?E++:(p++,(Se&8)===0?S++:x=!1))))),d&&(Se>127&&Se<160?d=!1:Se>159&&(Se<192||Se===215||Se===247)&&me++),f&&(M>0?Se<64||Se===127||Se>252?f=!1:M--:Se===128||Se===160||Se>239?f=!1:Se>160&&Se<224?(D++,H=0,P++,P>q&&(q=P)):Se>127?(M++,P=0,H++,H>ie&&(ie=H)):(P=0,H=0))}return x&&p>0&&(x=!1),f&&M>0&&(f=!1),x&&(Me||v+E+S>0)?se.UTF8:f&&(se.ASSUME_SHIFT_JIS||q>=3||ie>=3)?se.SHIFT_JIS:d&&f?q===2&&D===2||me*10>=o?se.SHIFT_JIS:se.ISO88591:d?se.ISO88591:f?se.SHIFT_JIS:x?se.UTF8:se.PLATFORM_DEFAULT_ENCODING}static format(n,...a){let o=-1;function d(x,p,v,E,S,M){if(x==="%%")return"%";if(a[++o]===void 0)return;x=E?parseInt(E.substr(1)):void 0;let D=S?parseInt(S.substr(1)):void 0,P;switch(M){case"s":P=a[o];break;case"c":P=a[o][0];break;case"f":P=parseFloat(a[o]).toFixed(x);break;case"p":P=parseFloat(a[o]).toPrecision(x);break;case"e":P=parseFloat(a[o]).toExponential(x);break;case"x":P=parseInt(a[o]).toString(D||16);break;case"d":P=parseFloat(parseInt(a[o],D||10).toPrecision(x)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(D);let H=parseInt(v),q=v&&v[0]+""=="0"?"0":" ";for(;P.length<H;)P=p!==void 0?P+q:q+P;return P}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(f,d)}static getBytes(n,a){return Z.encode(n,a)}static getCharCode(n,a=0){return n.charCodeAt(a)}static getCharAt(n){return String.fromCharCode(n)}}se.SHIFT_JIS=Q.SJIS.getName(),se.GB2312="GB2312",se.ISO88591=Q.ISO8859_1.getName(),se.EUC_JP="EUC_JP",se.UTF8=Q.UTF8.getName(),se.PLATFORM_DEFAULT_ENCODING=se.UTF8,se.ASSUME_SHIFT_JIS=!1;class ge{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=se.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,a,o){for(let d=a;a<a+o;d++)this.append(n[d]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,a){this.value=this.value.substr(0,n)+a+this.value.substr(n+1)}substring(n,a){return this.value.substring(n,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,a){this.value=this.value.substr(0,n)+a+this.value.substr(n+a.length)}}class Ae{constructor(n,a,o,d){if(this.width=n,this.height=a,this.rowSize=o,this.bits=d,a==null&&(a=n),this.height=a,n<1||a<1)throw new T("Both dimensions must be greater than 0");o==null&&(o=Math.floor((n+31)/32)),this.rowSize=o,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const a=n.length,o=n[0].length,d=new Ae(o,a);for(let f=0;f<a;f++){const x=n[f];for(let p=0;p<o;p++)x[p]&&d.set(p,f)}return d}static parseFromString(n,a,o){if(n===null)throw new T("stringRepresentation cannot be null");const d=new Array(n.length);let f=0,x=0,p=-1,v=0,E=0;for(;E<n.length;)if(n.charAt(E)===`
`||n.charAt(E)==="\r"){if(f>x){if(p===-1)p=f-x;else if(f-x!==p)throw new T("row lengths do not match");x=f,v++}E++}else if(n.substring(E,E+a.length)===a)E+=a.length,d[f]=!0,f++;else if(n.substring(E,E+o.length)===o)E+=o.length,d[f]=!1,f++;else throw new T("illegal character encountered: "+n.substring(E));if(f>x){if(p===-1)p=f-x;else if(f-x!==p)throw new T("row lengths do not match");v++}const S=new Ae(p,v);for(let M=0;M<f;M++)d[M]&&S.set(Math.floor(M%p),Math.floor(M/p));return S}get(n,a){const o=a*this.rowSize+Math.floor(n/32);return(this.bits[o]>>>(n&31)&1)!==0}set(n,a){const o=a*this.rowSize+Math.floor(n/32);this.bits[o]|=1<<(n&31)&4294967295}unset(n,a){const o=a*this.rowSize+Math.floor(n/32);this.bits[o]&=~(1<<(n&31)&4294967295)}flip(n,a){const o=a*this.rowSize+Math.floor(n/32);this.bits[o]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new T("input matrix dimensions do not match");const a=new te(Math.floor(this.width/32)+1),o=this.rowSize,d=this.bits;for(let f=0,x=this.height;f<x;f++){const p=f*o,v=n.getRow(f,a).getBitArray();for(let E=0;E<o;E++)d[p+E]^=v[E]}}clear(){const n=this.bits,a=n.length;for(let o=0;o<a;o++)n[o]=0}setRegion(n,a,o,d){if(a<0||n<0)throw new T("Left and top must be nonnegative");if(d<1||o<1)throw new T("Height and width must be at least 1");const f=n+o,x=a+d;if(x>this.height||f>this.width)throw new T("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let E=a;E<x;E++){const S=E*p;for(let M=n;M<f;M++)v[S+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(n,a){a==null||a.getSize()<this.width?a=new te(this.width):a.clear();const o=this.rowSize,d=this.bits,f=n*o;for(let x=0;x<o;x++)a.setBulk(x*32,d[f+x]);return a}setRow(n,a){z.arraycopy(a.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),a=this.getHeight();let o=new te(n),d=new te(n);for(let f=0,x=Math.floor((a+1)/2);f<x;f++)o=this.getRow(f,o),d=this.getRow(a-1-f,d),o.reverse(),d.reverse(),this.setRow(f,d),this.setRow(a-1-f,o)}getEnclosingRectangle(){const n=this.width,a=this.height,o=this.rowSize,d=this.bits;let f=n,x=a,p=-1,v=-1;for(let E=0;E<a;E++)for(let S=0;S<o;S++){const M=d[E*o+S];if(M!==0){if(E<x&&(x=E),E>v&&(v=E),S*32<f){let D=0;for(;(M<<31-D&4294967295)===0;)D++;S*32+D<f&&(f=S*32+D)}if(S*32+31>p){let D=31;for(;!(M>>>D);)D--;S*32+D>p&&(p=S*32+D)}}}return p<f||v<x?null:Int32Array.from([f,x,p-f+1,v-x+1])}getTopLeftOnBit(){const n=this.rowSize,a=this.bits;let o=0;for(;o<a.length&&a[o]===0;)o++;if(o===a.length)return null;const d=o/n;let f=o%n*32;const x=a[o];let p=0;for(;(x<<31-p&4294967295)===0;)p++;return f+=p,Int32Array.from([f,d])}getBottomRightOnBit(){const n=this.rowSize,a=this.bits;let o=a.length-1;for(;o>=0&&a[o]===0;)o--;if(o<0)return null;const d=Math.floor(o/n);let f=Math.floor(o%n)*32;const x=a[o];let p=31;for(;!(x>>>p);)p--;return f+=p,Int32Array.from([f,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Ae))return!1;const a=n;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&B.equals(this.bits,a.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+B.hashCode(this.bits),n}toString(n="X ",a="  ",o=`
`){return this.buildToString(n,a,o)}buildToString(n,a,o){let d=new ge;for(let f=0,x=this.height;f<x;f++){for(let p=0,v=this.width;p<v;p++)d.append(this.get(p,f)?n:a);d.append(o)}return d.toString()}clone(){return new Ae(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends N{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class V extends X{constructor(n){super(n),this.luminances=V.EMPTY,this.buckets=new Int32Array(V.LUMINANCE_BUCKETS)}getBlackRow(n,a){const o=this.getLuminanceSource(),d=o.getWidth();a==null||a.getSize()<d?a=new te(d):a.clear(),this.initArrays(d);const f=o.getRow(n,this.luminances),x=this.buckets;for(let v=0;v<d;v++)x[(f[v]&255)>>V.LUMINANCE_SHIFT]++;const p=V.estimateBlackPoint(x);if(d<3)for(let v=0;v<d;v++)(f[v]&255)<p&&a.set(v);else{let v=f[0]&255,E=f[1]&255;for(let S=1;S<d-1;S++){const M=f[S+1]&255;(E*4-v-M)/2<p&&a.set(S),v=E,E=M}}return a}getBlackMatrix(){const n=this.getLuminanceSource(),a=n.getWidth(),o=n.getHeight(),d=new Ae(a,o);this.initArrays(a);const f=this.buckets;for(let v=1;v<5;v++){const E=Math.floor(o*v/5),S=n.getRow(E,this.luminances),M=Math.floor(a*4/5);for(let D=Math.floor(a/5);D<M;D++){const P=S[D]&255;f[P>>V.LUMINANCE_SHIFT]++}}const x=V.estimateBlackPoint(f),p=n.getMatrix();for(let v=0;v<o;v++){const E=v*a;for(let S=0;S<a;S++)(p[E+S]&255)<x&&d.set(S,v)}return d}createBinarizer(n){return new V(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const a=this.buckets;for(let o=0;o<V.LUMINANCE_BUCKETS;o++)a[o]=0}static estimateBlackPoint(n){const a=n.length;let o=0,d=0,f=0;for(let S=0;S<a;S++)n[S]>f&&(d=S,f=n[S]),n[S]>o&&(o=n[S]);let x=0,p=0;for(let S=0;S<a;S++){const M=S-d,D=n[S]*M*M;D>p&&(x=S,p=D)}if(d>x){const S=d;d=x,x=S}if(x-d<=a/16)throw new Y;let v=x-1,E=-1;for(let S=x-1;S>d;S--){const M=S-d,D=M*M*(x-S)*(o-n[S]);D>E&&(v=S,E=D)}return v<<V.LUMINANCE_SHIFT}}V.LUMINANCE_BITS=5,V.LUMINANCE_SHIFT=8-V.LUMINANCE_BITS,V.LUMINANCE_BUCKETS=1<<V.LUMINANCE_BITS,V.EMPTY=Uint8ClampedArray.from([0]);class ue extends V{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),a=n.getWidth(),o=n.getHeight();if(a>=ue.MINIMUM_DIMENSION&&o>=ue.MINIMUM_DIMENSION){const d=n.getMatrix();let f=a>>ue.BLOCK_SIZE_POWER;(a&ue.BLOCK_SIZE_MASK)!==0&&f++;let x=o>>ue.BLOCK_SIZE_POWER;(o&ue.BLOCK_SIZE_MASK)!==0&&x++;const p=ue.calculateBlackPoints(d,f,x,a,o),v=new Ae(a,o);ue.calculateThresholdForBlock(d,f,x,a,o,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new ue(n)}static calculateThresholdForBlock(n,a,o,d,f,x,p){const v=f-ue.BLOCK_SIZE,E=d-ue.BLOCK_SIZE;for(let S=0;S<o;S++){let M=S<<ue.BLOCK_SIZE_POWER;M>v&&(M=v);const D=ue.cap(S,2,o-3);for(let P=0;P<a;P++){let H=P<<ue.BLOCK_SIZE_POWER;H>E&&(H=E);const q=ue.cap(P,2,a-3);let ie=0;for(let Me=-2;Me<=2;Me++){const Te=x[D+Me];ie+=Te[q-2]+Te[q-1]+Te[q]+Te[q+1]+Te[q+2]}const me=ie/25;ue.thresholdBlock(n,H,M,me,d,p)}}}static cap(n,a,o){return n<a?a:n>o?o:n}static thresholdBlock(n,a,o,d,f,x){for(let p=0,v=o*f+a;p<ue.BLOCK_SIZE;p++,v+=f)for(let E=0;E<ue.BLOCK_SIZE;E++)(n[v+E]&255)<=d&&x.set(a+E,o+p)}static calculateBlackPoints(n,a,o,d,f){const x=f-ue.BLOCK_SIZE,p=d-ue.BLOCK_SIZE,v=new Array(o);for(let E=0;E<o;E++){v[E]=new Int32Array(a);let S=E<<ue.BLOCK_SIZE_POWER;S>x&&(S=x);for(let M=0;M<a;M++){let D=M<<ue.BLOCK_SIZE_POWER;D>p&&(D=p);let P=0,H=255,q=0;for(let me=0,Me=S*d+D;me<ue.BLOCK_SIZE;me++,Me+=d){for(let Te=0;Te<ue.BLOCK_SIZE;Te++){const Se=n[Me+Te]&255;P+=Se,Se<H&&(H=Se),Se>q&&(q=Se)}if(q-H>ue.MIN_DYNAMIC_RANGE)for(me++,Me+=d;me<ue.BLOCK_SIZE;me++,Me+=d)for(let Te=0;Te<ue.BLOCK_SIZE;Te++)P+=n[Me+Te]&255}let ie=P>>ue.BLOCK_SIZE_POWER*2;if(q-H<=ue.MIN_DYNAMIC_RANGE&&(ie=H/2,E>0&&M>0)){const me=(v[E-1][M]+2*v[E][M-1]+v[E-1][M-1])/4;H<me&&(ie=me)}v[E][M]=ie}}return v}}ue.BLOCK_SIZE_POWER=3,ue.BLOCK_SIZE=1<<ue.BLOCK_SIZE_POWER,ue.BLOCK_SIZE_MASK=ue.BLOCK_SIZE-1,ue.MINIMUM_DIMENSION=ue.BLOCK_SIZE*5,ue.MIN_DYNAMIC_RANGE=24;class ye{constructor(n,a){this.width=n,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,a,o,d){throw new Ce("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ce("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ce("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let a=new ge;for(let o=0;o<this.height;o++){const d=this.getRow(o,n);for(let f=0;f<this.width;f++){const x=d[f]&255;let p;x<64?p="#":x<128?p="+":x<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class tt extends ye{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,a){const o=this.delegate.getRow(n,a),d=this.getWidth();for(let f=0;f<d;f++)o[f]=255-(o[f]&255);return o}getMatrix(){const n=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(a);for(let d=0;d<a;d++)o[d]=255-(n[d]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(n,a,o,d){return new tt(this.delegate.crop(n,a,o,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new tt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new tt(this.delegate.rotateCounterClockwise45())}}class Ke extends ye{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=Ke.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const a=n.getContext("2d").getImageData(0,0,n.width,n.height);return Ke.toGrayscaleBuffer(a.data,n.width,n.height)}static toGrayscaleBuffer(n,a,o){const d=new Uint8ClampedArray(a*o);for(let f=0,x=0,p=n.length;f<p;f+=4,x++){let v;if(n[f+3]===0)v=255;else{const S=n[f],M=n[f+1],D=n[f+2];v=306*S+601*M+117*D+512>>10}d[x]=v}return d}getRow(n,a){if(n<0||n>=this.getHeight())throw new T("Requested row is outside the image: "+n);const o=this.getWidth(),d=n*o;return a===null?a=this.buffer.slice(d,d+o):(a.length<o&&(a=new Uint8ClampedArray(o)),a.set(this.buffer.slice(d,d+o))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,a,o,d){return super.crop(n,a,o,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const a=this.getTempCanvasElement(),o=a.getContext("2d"),d=n*Ke.DEGREE_TO_RADIANS,f=this.canvas.width,x=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(d))*f+Math.abs(Math.sin(d))*x),v=Math.ceil(Math.abs(Math.sin(d))*f+Math.abs(Math.cos(d))*x);return a.width=p,a.height=v,o.translate(p/2,v/2),o.rotate(d),o.drawImage(this.canvas,f/-2,x/-2),this.buffer=Ke.makeBufferFromCanvasImageData(a),this}invert(){return new tt(this)}}Ke.DEGREE_TO_RADIANS=Math.PI/180;class ht{constructor(n,a,o){this.deviceId=n,this.label=a,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ze=(globalThis||Md||self||window||void 0)&&(globalThis||Md||self||window||void 0).__awaiter||function(R,n,a,o){function d(f){return f instanceof a?f:new a(function(x){x(f)})}return new(a||(a=Promise))(function(f,x){function p(S){try{E(o.next(S))}catch(M){x(M)}}function v(S){try{E(o.throw(S))}catch(M){x(M)}}function E(S){S.done?f(S.value):d(S.value).then(p,v)}E((o=o.apply(R,n||[])).next())})};class Be{constructor(n,a=500,o){this.reader=n,this.timeBetweenScansMillis=a,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ze(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const o of n){const d=o.kind==="video"?"videoinput":o.kind;if(d!=="videoinput")continue;const f=o.deviceId||o.id,x=o.label||`Video device ${a.length+1}`,p=o.groupId,v={deviceId:f,label:x,kind:d,groupId:p};a.push(v)}return a})}getVideoInputDevices(){return ze(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new ht(a.deviceId,a.label))})}findDeviceById(n){return ze(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(o=>o.deviceId===n):null})}decodeFromInputVideoDevice(n,a){return ze(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,a)})}decodeOnceFromVideoDevice(n,a){return ze(this,void 0,void 0,function*(){this.reset();let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const d={video:o};return yield this.decodeOnceFromConstraints(d,a)})}decodeOnceFromConstraints(n,a){return ze(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(o,a)})}decodeOnceFromStream(n,a){return ze(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,a);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(n,a,o){return ze(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,a,o)})}decodeFromVideoDevice(n,a,o){return ze(this,void 0,void 0,function*(){let d;n?d={deviceId:{exact:n}}:d={facingMode:"environment"};const f={video:d};return yield this.decodeFromConstraints(f,a,o)})}decodeFromConstraints(n,a,o){return ze(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(d,a,o)})}decodeFromStream(n,a,o){return ze(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(n,a);return yield this.decodeContinuously(d,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,a){return ze(this,void 0,void 0,function*(){const o=this.prepareVideoElement(a);return this.addVideoSource(o,n),this.videoElement=o,this.stream=n,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(n){return new Promise((a,o)=>this.playVideoOnLoad(n,()=>a()))}playVideoOnLoad(n,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",a),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ze(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,a){const o=document.getElementById(n);if(!o)throw new I(`element with id '${n}' not found`);if(o.nodeName.toLowerCase()!==a.toLowerCase())throw new I(`element with id '${n}' must be an ${a} element`);return o}decodeFromImage(n,a){if(!n&&!a)throw new I("either imageElement with a src set or an url must be provided");return a&&!n?this.decodeFromImageUrl(a):this.decodeFromImageElement(n)}decodeFromVideo(n,a){if(!n&&!a)throw new I("Either an element with a src set or an URL must be provided");return a&&!n?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,a,o){if(n===void 0&&a===void 0)throw new I("Either an element with a src set or an URL must be provided");return a&&!n?this.decodeFromVideoUrlContinuously(a,o):this.decodeFromVideoElementContinuously(n,o)}decodeFromImageElement(n){if(!n)throw new I("An image element must be provided.");this.reset();const a=this.prepareImageElement(n);this.imageElement=a;let o;return this.isImageLoaded(a)?o=this.decodeOnce(a,!1,!0):o=this._decodeOnLoadImage(a),o}decodeFromVideoElement(n){const a=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(n,a){const o=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(o,a)}_decodeFromVideoElementSetup(n){if(!n)throw new I("A video element must be provided.");this.reset();const a=this.prepareVideoElement(n);return this.videoElement=a,a}decodeFromImageUrl(n){if(!n)throw new I("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const o=this._decodeOnLoadImage(a);return a.src=n,o}decodeFromVideoUrl(n){if(!n)throw new I("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),o=this.decodeFromVideoElement(a);return a.src=n,o}decodeFromVideoUrlContinuously(n,a){if(!n)throw new I("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(o,a);return o.src=n,d}_decodeOnLoadImage(n){return new Promise((a,o)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(a,o),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ze(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,a){return ze(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,a)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let a;return typeof n>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof n=="string"&&(a=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(a=n),a}prepareVideoElement(n){let a;return!n&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof n=="string"&&(a=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(a=n),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(n,a=!0,o=!0){this._stopAsyncDecode=!1;const d=(f,x)=>{if(this._stopAsyncDecode){x(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(n);f(p)}catch(p){const v=a&&p instanceof Y,S=(p instanceof U||p instanceof G)&&o;if(v||S)return setTimeout(d,this._timeBetweenDecodingAttempts,f,x);x(p)}};return new Promise((f,x)=>d(f,x))}decodeContinuously(n,a){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(n);a(d,null),setTimeout(o,this.timeBetweenScansMillis)}catch(d){a(null,d);const f=d instanceof U||d instanceof G,x=d instanceof Y;(f||x)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(n){const a=this.createBinaryBitmap(n);return this.decodeBitmap(a)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,a,o){a||(a={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(n,a,o=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(n,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const a=this.getCaptureCanvas(n),o=new Ke(a),d=new ue(o);return new k(d)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const a=this.createCaptureCanvas(n);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let o,d;return typeof n<"u"&&(n instanceof HTMLVideoElement?(o=n.videoWidth,d=n.videoHeight):n instanceof HTMLImageElement&&(o=n.naturalWidth||n.width,d=n.naturalHeight||n.height)),a.style.width=o+"px",a.style.height=d+"px",a.width=o,a.height=d,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,a){try{n.srcObject=a}catch{n.src=URL.createObjectURL(a)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class _e{constructor(n,a,o=a==null?0:8*a.length,d,f,x=z.currentTimeMillis()){this.text=n,this.rawBytes=a,this.numBits=o,this.resultPoints=d,this.format=f,this.timestamp=x,this.text=n,this.rawBytes=a,o==null?this.numBits=a==null?0:8*a.length:this.numBits=o,this.resultPoints=d,this.format=f,this.resultMetadata=null,x==null?this.timestamp=z.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,a)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const a=this.resultPoints;if(a===null)this.resultPoints=n;else if(n!==null&&n.length>0){const o=new Array(a.length+n.length);z.arraycopy(a,0,o,0,a.length),z.arraycopy(n,0,o,a.length,n.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var st;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(st||(st={}));var Le=st,Ye;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ye||(Ye={}));var rt=Ye;class wt{constructor(n,a,o,d,f=-1,x=-1){this.rawBytes=n,this.text=a,this.byteSegments=o,this.ecLevel=d,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=x,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Et{exp(n){return this.expTable[n]}log(n){if(n===0)throw new T;return this.logTable[n]}static addOrSubtract(n,a){return n^a}}class pt{constructor(n,a){if(a.length===0)throw new T;this.field=n;const o=a.length;if(o>1&&a[0]===0){let d=1;for(;d<o&&a[d]===0;)d++;d===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-d),z.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const a=this.coefficients;let o;if(n===1){o=0;for(let x=0,p=a.length;x!==p;x++){const v=a[x];o=Et.addOrSubtract(o,v)}return o}o=a[0];const d=a.length,f=this.field;for(let x=1;x<d;x++)o=Et.addOrSubtract(f.multiply(n,o),a[x]);return o}addOrSubtract(n){if(!this.field.equals(n.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let a=this.coefficients,o=n.coefficients;if(a.length>o.length){const x=a;a=o,o=x}let d=new Int32Array(o.length);const f=o.length-a.length;z.arraycopy(o,0,d,0,f);for(let x=f;x<o.length;x++)d[x]=Et.addOrSubtract(a[x-f],o[x]);return new pt(this.field,d)}multiply(n){if(!this.field.equals(n.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const a=this.coefficients,o=a.length,d=n.coefficients,f=d.length,x=new Int32Array(o+f-1),p=this.field;for(let v=0;v<o;v++){const E=a[v];for(let S=0;S<f;S++)x[v+S]=Et.addOrSubtract(x[v+S],p.multiply(E,d[S]))}return new pt(p,x)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const a=this.coefficients.length,o=this.field,d=new Int32Array(a),f=this.coefficients;for(let x=0;x<a;x++)d[x]=o.multiply(f[x],n);return new pt(o,d)}multiplyByMonomial(n,a){if(n<0)throw new T;if(a===0)return this.field.getZero();const o=this.coefficients,d=o.length,f=new Int32Array(d+n),x=this.field;for(let p=0;p<d;p++)f[p]=x.multiply(o[p],a);return new pt(x,f)}divide(n){if(!this.field.equals(n.field))throw new T("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new T("Divide by 0");const a=this.field;let o=a.getZero(),d=this;const f=n.getCoefficient(n.getDegree()),x=a.inverse(f);for(;d.getDegree()>=n.getDegree()&&!d.isZero();){const p=d.getDegree()-n.getDegree(),v=a.multiply(d.getCoefficient(d.getDegree()),x),E=n.multiplyByMonomial(p,v),S=a.buildMonomial(p,v);o=o.addOrSubtract(S),d=d.addOrSubtract(E)}return[o,d]}toString(){let n="";for(let a=this.getDegree();a>=0;a--){let o=this.getCoefficient(a);if(o!==0){if(o<0?(n+=" - ",o=-o):n.length>0&&(n+=" + "),a===0||o!==1){const d=this.field.log(o);d===0?n+="1":d===1?n+="a":(n+="a^",n+=d)}a!==0&&(a===1?n+="x":(n+="x^",n+=a))}}return n}}class it extends N{}it.kind="ArithmeticException";class de extends Et{constructor(n,a,o){super(),this.primitive=n,this.size=a,this.generatorBase=o;const d=new Int32Array(a);let f=1;for(let p=0;p<a;p++)d[p]=f,f*=2,f>=a&&(f^=n,f&=a-1);this.expTable=d;const x=new Int32Array(a);for(let p=0;p<a-1;p++)x[d[p]]=p;this.logTable=x,this.zero=new pt(this,Int32Array.from([0])),this.one=new pt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,a){if(n<0)throw new T;if(a===0)return this.zero;const o=new Int32Array(n+1);return o[0]=a,new pt(this,o)}inverse(n){if(n===0)throw new it;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,a){return n===0||a===0?0:this.expTable[(this.logTable[n]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}de.AZTEC_DATA_12=new de(4201,4096,1),de.AZTEC_DATA_10=new de(1033,1024,1),de.AZTEC_DATA_6=new de(67,64,1),de.AZTEC_PARAM=new de(19,16,1),de.QR_CODE_FIELD_256=new de(285,256,0),de.DATA_MATRIX_FIELD_256=new de(301,256,1),de.AZTEC_DATA_8=de.DATA_MATRIX_FIELD_256,de.MAXICODE_FIELD_64=de.AZTEC_DATA_6;class Ge extends N{}Ge.kind="ReedSolomonException";class He extends N{}He.kind="IllegalStateException";class mt{constructor(n){this.field=n}decode(n,a){const o=this.field,d=new pt(o,n),f=new Int32Array(a);let x=!0;for(let P=0;P<a;P++){const H=d.evaluateAt(o.exp(P+o.getGeneratorBase()));f[f.length-1-P]=H,H!==0&&(x=!1)}if(x)return;const p=new pt(o,f),v=this.runEuclideanAlgorithm(o.buildMonomial(a,1),p,a),E=v[0],S=v[1],M=this.findErrorLocations(E),D=this.findErrorMagnitudes(S,M);for(let P=0;P<M.length;P++){const H=n.length-1-o.log(M[P]);if(H<0)throw new Ge("Bad error location");n[H]=de.addOrSubtract(n[H],D[P])}}runEuclideanAlgorithm(n,a,o){if(n.getDegree()<a.getDegree()){const P=n;n=a,a=P}const d=this.field;let f=n,x=a,p=d.getZero(),v=d.getOne();for(;x.getDegree()>=(o/2|0);){let P=f,H=p;if(f=x,p=v,f.isZero())throw new Ge("r_{i-1} was zero");x=P;let q=d.getZero();const ie=f.getCoefficient(f.getDegree()),me=d.inverse(ie);for(;x.getDegree()>=f.getDegree()&&!x.isZero();){const Me=x.getDegree()-f.getDegree(),Te=d.multiply(x.getCoefficient(x.getDegree()),me);q=q.addOrSubtract(d.buildMonomial(Me,Te)),x=x.addOrSubtract(f.multiplyByMonomial(Me,Te))}if(v=q.multiply(p).addOrSubtract(H),x.getDegree()>=f.getDegree())throw new He("Division algorithm failed to reduce polynomial?")}const E=v.getCoefficient(0);if(E===0)throw new Ge("sigmaTilde(0) was zero");const S=d.inverse(E),M=v.multiplyScalar(S),D=x.multiplyScalar(S);return[M,D]}findErrorLocations(n){const a=n.getDegree();if(a===1)return Int32Array.from([n.getCoefficient(1)]);const o=new Int32Array(a);let d=0;const f=this.field;for(let x=1;x<f.getSize()&&d<a;x++)n.evaluateAt(x)===0&&(o[d]=f.inverse(x),d++);if(d!==a)throw new Ge("Error locator degree does not match number of roots");return o}findErrorMagnitudes(n,a){const o=a.length,d=new Int32Array(o),f=this.field;for(let x=0;x<o;x++){const p=f.inverse(a[x]);let v=1;for(let E=0;E<o;E++)if(x!==E){const S=f.multiply(a[E],p),M=(S&1)===0?S|1:S&-2;v=f.multiply(v,M)}d[x]=f.multiply(n.evaluateAt(p),f.inverse(v)),f.getGeneratorBase()!==0&&(d[x]=f.multiply(d[x],p))}return d}}var vt;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(vt||(vt={}));class be{decode(n){this.ddata=n;let a=n.getBits(),o=this.extractBits(a),d=this.correctBits(o),f=be.convertBoolArrayToByteArray(d),x=be.getEncodedData(d),p=new wt(f,x,null,null);return p.setNumBits(d.length),p}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let a=n.length,o=vt.UPPER,d=vt.UPPER,f="",x=0;for(;x<a;)if(d===vt.BINARY){if(a-x<5)break;let p=be.readCode(n,x,5);if(x+=5,p===0){if(a-x<11)break;p=be.readCode(n,x,11)+31,x+=11}for(let v=0;v<p;v++){if(a-x<8){x=a;break}const E=be.readCode(n,x,8);f+=se.castAsNonUtf8Char(E),x+=8}d=o}else{let p=d===vt.DIGIT?4:5;if(a-x<p)break;let v=be.readCode(n,x,p);x+=p;let E=be.getCharacter(d,v);E.startsWith("CTRL_")?(o=d,d=be.getTable(E.charAt(5)),E.charAt(6)==="L"&&(o=d)):(f+=E,d=o)}return f}static getTable(n){switch(n){case"L":return vt.LOWER;case"P":return vt.PUNCT;case"M":return vt.MIXED;case"D":return vt.DIGIT;case"B":return vt.BINARY;default:return vt.UPPER}}static getCharacter(n,a){switch(n){case vt.UPPER:return be.UPPER_TABLE[a];case vt.LOWER:return be.LOWER_TABLE[a];case vt.MIXED:return be.MIXED_TABLE[a];case vt.PUNCT:return be.PUNCT_TABLE[a];case vt.DIGIT:return be.DIGIT_TABLE[a];default:throw new He("Bad table")}}correctBits(n){let a,o;this.ddata.getNbLayers()<=2?(o=6,a=de.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,a=de.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,a=de.AZTEC_DATA_10):(o=12,a=de.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),f=n.length/o;if(f<d)throw new G;let x=n.length%o,p=new Int32Array(f);for(let D=0;D<f;D++,x+=o)p[D]=be.readCode(n,x,o);try{new mt(a).decode(p,f-d)}catch(D){throw new G(D)}let v=(1<<o)-1,E=0;for(let D=0;D<d;D++){let P=p[D];if(P===0||P===v)throw new G;(P===1||P===v-1)&&E++}let S=new Array(d*o-E),M=0;for(let D=0;D<d;D++){let P=p[D];if(P===1||P===v-1)S.fill(P>1,M,M+o-1),M+=o-1;else for(let H=o-1;H>=0;--H)S[M++]=(P&1<<H)!==0}return S}extractBits(n){let a=this.ddata.isCompact(),o=this.ddata.getNbLayers(),d=(a?11:14)+o*4,f=new Int32Array(d),x=new Array(this.totalBitsInLayer(o,a));if(a)for(let p=0;p<f.length;p++)f[p]=p;else{let p=d+1+2*W.truncDivision(W.truncDivision(d,2)-1,15),v=d/2,E=W.truncDivision(p,2);for(let S=0;S<v;S++){let M=S+W.truncDivision(S,15);f[v-S-1]=E-M-1,f[v+S]=E+M+1}}for(let p=0,v=0;p<o;p++){let E=(o-p)*4+(a?9:12),S=p*2,M=d-1-S;for(let D=0;D<E;D++){let P=D*2;for(let H=0;H<2;H++)x[v+P+H]=n.get(f[S+H],f[S+D]),x[v+2*E+P+H]=n.get(f[S+D],f[M-H]),x[v+4*E+P+H]=n.get(f[M-H],f[M-D]),x[v+6*E+P+H]=n.get(f[M-D],f[S+H])}v+=E*8}return x}static readCode(n,a,o){let d=0;for(let f=a;f<a+o;f++)d<<=1,n[f]&&(d|=1);return d}static readByte(n,a){let o=n.length-a;return o>=8?be.readCode(n,a,8):be.readCode(n,a,o)<<8-o}static convertBoolArrayToByteArray(n){let a=new Uint8Array((n.length+7)/8);for(let o=0;o<a.length;o++)a[o]=be.readByte(n,8*o);return a}totalBitsInLayer(n,a){return((a?88:112)+16*n)*n}}be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ie{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,a,o,d){const f=n-o,x=a-d;return Math.sqrt(f*f+x*x)}static sum(n){let a=0;for(let o=0,d=n.length;o!==d;o++){const f=n[o];a+=f}return a}}class Nt{static floatToIntBits(n){return n}}Nt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class je{constructor(n,a){this.x=n,this.y=a}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof je){const a=n;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Nt.floatToIntBits(this.x)+Nt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const a=this.distance(n[0],n[1]),o=this.distance(n[1],n[2]),d=this.distance(n[0],n[2]);let f,x,p;if(o>=a&&o>=d?(x=n[0],f=n[1],p=n[2]):d>=o&&d>=a?(x=n[1],f=n[0],p=n[2]):(x=n[2],f=n[0],p=n[1]),this.crossProductZ(f,x,p)<0){const v=f;f=p,p=v}n[0]=f,n[1]=x,n[2]=p}static distance(n,a){return Ie.distance(n.x,n.y,a.x,a.y)}static crossProductZ(n,a,o){const d=a.x,f=a.y;return(o.x-d)*(n.y-f)-(o.y-f)*(n.x-d)}}class Tn{constructor(n,a){this.bits=n,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class De extends Tn{constructor(n,a,o,d,f){super(n,a),this.compact=o,this.nbDatablocks=d,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ft{constructor(n,a,o,d){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),a==null&&(a=ft.INIT_SIZE),o==null&&(o=n.getWidth()/2|0),d==null&&(d=n.getHeight()/2|0);const f=a/2|0;if(this.leftInit=o-f,this.rightInit=o+f,this.upInit=d-f,this.downInit=d+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let n=this.leftInit,a=this.rightInit,o=this.upInit,d=this.downInit,f=!1,x=!0,p=!1,v=!1,E=!1,S=!1,M=!1;const D=this.width,P=this.height;for(;x;){x=!1;let H=!0;for(;(H||!v)&&a<D;)H=this.containsBlackPoint(o,d,a,!1),H?(a++,x=!0,v=!0):v||a++;if(a>=D){f=!0;break}let q=!0;for(;(q||!E)&&d<P;)q=this.containsBlackPoint(n,a,d,!0),q?(d++,x=!0,E=!0):E||d++;if(d>=P){f=!0;break}let ie=!0;for(;(ie||!S)&&n>=0;)ie=this.containsBlackPoint(o,d,n,!1),ie?(n--,x=!0,S=!0):S||n--;if(n<0){f=!0;break}let me=!0;for(;(me||!M)&&o>=0;)me=this.containsBlackPoint(n,a,o,!0),me?(o--,x=!0,M=!0):M||o--;if(o<0){f=!0;break}x&&(p=!0)}if(!f&&p){const H=a-n;let q=null;for(let Te=1;q===null&&Te<H;Te++)q=this.getBlackPointOnSegment(n,d-Te,n+Te,d);if(q==null)throw new Y;let ie=null;for(let Te=1;ie===null&&Te<H;Te++)ie=this.getBlackPointOnSegment(n,o+Te,n+Te,o);if(ie==null)throw new Y;let me=null;for(let Te=1;me===null&&Te<H;Te++)me=this.getBlackPointOnSegment(a,o+Te,a-Te,o);if(me==null)throw new Y;let Me=null;for(let Te=1;Me===null&&Te<H;Te++)Me=this.getBlackPointOnSegment(a,d-Te,a-Te,d);if(Me==null)throw new Y;return this.centerEdges(Me,q,me,ie)}else throw new Y}getBlackPointOnSegment(n,a,o,d){const f=Ie.round(Ie.distance(n,a,o,d)),x=(o-n)/f,p=(d-a)/f,v=this.image;for(let E=0;E<f;E++){const S=Ie.round(n+E*x),M=Ie.round(a+E*p);if(v.get(S,M))return new je(S,M)}return null}centerEdges(n,a,o,d){const f=n.getX(),x=n.getY(),p=a.getX(),v=a.getY(),E=o.getX(),S=o.getY(),M=d.getX(),D=d.getY(),P=ft.CORR;return f<this.width/2?[new je(M-P,D+P),new je(p+P,v+P),new je(E-P,S-P),new je(f+P,x-P)]:[new je(M+P,D+P),new je(p+P,v-P),new je(E-P,S+P),new je(f-P,x-P)]}containsBlackPoint(n,a,o,d){const f=this.image;if(d){for(let x=n;x<=a;x++)if(f.get(x,o))return!0}else for(let x=n;x<=a;x++)if(f.get(o,x))return!0;return!1}}ft.INIT_SIZE=10,ft.CORR=1;class ee{static checkAndNudgePoints(n,a){const o=n.getWidth(),d=n.getHeight();let f=!0;for(let x=0;x<a.length&&f;x+=2){const p=Math.floor(a[x]),v=Math.floor(a[x+1]);if(p<-1||p>o||v<-1||v>d)throw new Y;f=!1,p===-1?(a[x]=0,f=!0):p===o&&(a[x]=o-1,f=!0),v===-1?(a[x+1]=0,f=!0):v===d&&(a[x+1]=d-1,f=!0)}f=!0;for(let x=a.length-2;x>=0&&f;x-=2){const p=Math.floor(a[x]),v=Math.floor(a[x+1]);if(p<-1||p>o||v<-1||v>d)throw new Y;f=!1,p===-1?(a[x]=0,f=!0):p===o&&(a[x]=o-1,f=!0),v===-1?(a[x+1]=0,f=!0):v===d&&(a[x+1]=d-1,f=!0)}}}class ke{constructor(n,a,o,d,f,x,p,v,E){this.a11=n,this.a21=a,this.a31=o,this.a12=d,this.a22=f,this.a32=x,this.a13=p,this.a23=v,this.a33=E}static quadrilateralToQuadrilateral(n,a,o,d,f,x,p,v,E,S,M,D,P,H,q,ie){const me=ke.quadrilateralToSquare(n,a,o,d,f,x,p,v);return ke.squareToQuadrilateral(E,S,M,D,P,H,q,ie).times(me)}transformPoints(n){const a=n.length,o=this.a11,d=this.a12,f=this.a13,x=this.a21,p=this.a22,v=this.a23,E=this.a31,S=this.a32,M=this.a33;for(let D=0;D<a;D+=2){const P=n[D],H=n[D+1],q=f*P+v*H+M;n[D]=(o*P+x*H+E)/q,n[D+1]=(d*P+p*H+S)/q}}transformPointsWithValues(n,a){const o=this.a11,d=this.a12,f=this.a13,x=this.a21,p=this.a22,v=this.a23,E=this.a31,S=this.a32,M=this.a33,D=n.length;for(let P=0;P<D;P++){const H=n[P],q=a[P],ie=f*H+v*q+M;n[P]=(o*H+x*q+E)/ie,a[P]=(d*H+p*q+S)/ie}}static squareToQuadrilateral(n,a,o,d,f,x,p,v){const E=n-o+f-p,S=a-d+x-v;if(E===0&&S===0)return new ke(o-n,f-o,n,d-a,x-d,a,0,0,1);{const M=o-f,D=p-f,P=d-x,H=v-x,q=M*H-D*P,ie=(E*H-D*S)/q,me=(M*S-E*P)/q;return new ke(o-n+ie*o,p-n+me*p,n,d-a+ie*d,v-a+me*v,a,ie,me,1)}}static quadrilateralToSquare(n,a,o,d,f,x,p,v){return ke.squareToQuadrilateral(n,a,o,d,f,x,p,v).buildAdjoint()}buildAdjoint(){return new ke(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new ke(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Pe extends ee{sampleGrid(n,a,o,d,f,x,p,v,E,S,M,D,P,H,q,ie,me,Me,Te){const Se=ke.quadrilateralToQuadrilateral(d,f,x,p,v,E,S,M,D,P,H,q,ie,me,Me,Te);return this.sampleGridWithTransform(n,a,o,Se)}sampleGridWithTransform(n,a,o,d){if(a<=0||o<=0)throw new Y;const f=new Ae(a,o),x=new Float32Array(2*a);for(let p=0;p<o;p++){const v=x.length,E=p+.5;for(let S=0;S<v;S+=2)x[S]=S/2+.5,x[S+1]=E;d.transformPoints(x),ee.checkAndNudgePoints(n,x);try{for(let S=0;S<v;S+=2)n.get(Math.floor(x[S]),Math.floor(x[S+1]))&&f.set(S/2,p)}catch{throw new Y}}return f}}class nt{static setGridSampler(n){nt.gridSampler=n}static getInstance(){return nt.gridSampler}}nt.gridSampler=new Pe;class lt{constructor(n,a){this.x=n,this.y=a}toResultPoint(){return new je(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class In{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let a=this.getMatrixCenter(),o=this.getBullsEyeCorners(a);if(n){let x=o[0];o[0]=o[2],o[2]=x}this.extractParameters(o);let d=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),f=this.getMatrixCornerPoints(o);return new De(d,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new Y;let a=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(n[0],n[1],a),this.sampleLine(n[1],n[2],a),this.sampleLine(n[2],n[3],a),this.sampleLine(n[3],n[0],a)]);this.shift=this.getRotation(o,a);let d=0;for(let x=0;x<4;x++){let p=o[(this.shift+x)%4];this.compact?(d<<=7,d+=p>>1&127):(d<<=10,d+=(p>>2&992)+(p>>1&31))}let f=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(n,a){let o=0;n.forEach((d,f,x)=>{let p=(d>>a-2<<1)+(d&1);o=(o<<3)+p}),o=((o&1)<<11)+(o>>1);for(let d=0;d<4;d++)if(W.bitCount(o^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new Y}getCorrectedParameterData(n,a){let o,d;a?(o=7,d=2):(o=10,d=4);let f=o-d,x=new Int32Array(o);for(let v=o-1;v>=0;--v)x[v]=n&15,n>>=4;try{new mt(de.AZTEC_PARAM).decode(x,f)}catch{throw new Y}let p=0;for(let v=0;v<d;v++)p=(p<<4)+x[v];return p}getBullsEyeCorners(n){let a=n,o=n,d=n,f=n,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(a,x,1,-1),D=this.getFirstDifferent(o,x,1,1),P=this.getFirstDifferent(d,x,-1,1),H=this.getFirstDifferent(f,x,-1,-1);if(this.nbCenterLayers>2){let q=this.distancePoint(H,M)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(q<.75||q>1.25||!this.isWhiteOrBlackRectangle(M,D,P,H))break}a=M,o=D,d=P,f=H,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let p=new je(a.getX()+.5,a.getY()-.5),v=new je(o.getX()+.5,o.getY()+.5),E=new je(d.getX()-.5,d.getY()+.5),S=new je(f.getX()-.5,f.getY()-.5);return this.expandSquare([p,v,E,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,a,o,d;try{let p=new ft(this.image).detect();n=p[0],a=p[1],o=p[2],d=p[3]}catch{let v=this.image.getWidth()/2,E=this.image.getHeight()/2;n=this.getFirstDifferent(new lt(v+7,E-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new lt(v+7,E+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new lt(v-7,E+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new lt(v-7,E-7),!1,-1,-1).toResultPoint()}let f=Ie.round((n.getX()+d.getX()+a.getX()+o.getX())/4),x=Ie.round((n.getY()+d.getY()+a.getY()+o.getY())/4);try{let p=new ft(this.image,15,f,x).detect();n=p[0],a=p[1],o=p[2],d=p[3]}catch{n=this.getFirstDifferent(new lt(f+7,x-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new lt(f+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new lt(f-7,x+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new lt(f-7,x-7),!1,-1,-1).toResultPoint()}return f=Ie.round((n.getX()+d.getX()+a.getX()+o.getX())/4),x=Ie.round((n.getY()+d.getY()+a.getY()+o.getY())/4),new lt(f,x)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,a,o,d,f){let x=nt.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,E=p/2+this.nbCenterLayers;return x.sampleGrid(n,p,p,v,v,E,v,E,E,v,E,a.getX(),a.getY(),o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY())}sampleLine(n,a,o){let d=0,f=this.distanceResultPoint(n,a),x=f/o,p=n.getX(),v=n.getY(),E=x*(a.getX()-n.getX())/f,S=x*(a.getY()-n.getY())/f;for(let M=0;M<o;M++)this.image.get(Ie.round(p+M*E),Ie.round(v+M*S))&&(d|=1<<o-M-1);return d}isWhiteOrBlackRectangle(n,a,o,d){let f=3;n=new lt(n.getX()-f,n.getY()+f),a=new lt(a.getX()-f,a.getY()-f),o=new lt(o.getX()+f,o.getY()-f),d=new lt(d.getX()+f,d.getY()+f);let x=this.getColor(d,n);if(x===0)return!1;let p=this.getColor(n,a);return p!==x||(p=this.getColor(a,o),p!==x)?!1:(p=this.getColor(o,d),p===x)}getColor(n,a){let o=this.distancePoint(n,a),d=(a.getX()-n.getX())/o,f=(a.getY()-n.getY())/o,x=0,p=n.getX(),v=n.getY(),E=this.image.get(n.getX(),n.getY()),S=Math.ceil(o);for(let D=0;D<S;D++)p+=d,v+=f,this.image.get(Ie.round(p),Ie.round(v))!==E&&x++;let M=x/o;return M>.1&&M<.9?0:M<=.1===E?1:-1}getFirstDifferent(n,a,o,d){let f=n.getX()+o,x=n.getY()+d;for(;this.isValid(f,x)&&this.image.get(f,x)===a;)f+=o,x+=d;for(f-=o,x-=d;this.isValid(f,x)&&this.image.get(f,x)===a;)f+=o;for(f-=o;this.isValid(f,x)&&this.image.get(f,x)===a;)x+=d;return x-=d,new lt(f,x)}expandSquare(n,a,o){let d=o/(2*a),f=n[0].getX()-n[2].getX(),x=n[0].getY()-n[2].getY(),p=(n[0].getX()+n[2].getX())/2,v=(n[0].getY()+n[2].getY())/2,E=new je(p+d*f,v+d*x),S=new je(p-d*f,v-d*x);f=n[1].getX()-n[3].getX(),x=n[1].getY()-n[3].getY(),p=(n[1].getX()+n[3].getX())/2,v=(n[1].getY()+n[3].getY())/2;let M=new je(p+d*f,v+d*x),D=new je(p-d*f,v-d*x);return[E,M,S,D]}isValid(n,a){return n>=0&&n<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(n){let a=Ie.round(n.getX()),o=Ie.round(n.getY());return this.isValid(a,o)}distancePoint(n,a){return Ie.distance(n.getX(),n.getY(),a.getX(),a.getY())}distanceResultPoint(n,a){return Ie.distance(n.getX(),n.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class gs{decode(n,a=null){let o=null,d=new In(n.getBlackMatrix()),f=null,x=null;try{let S=d.detectMirror(!1);f=S.getPoints(),this.reportFoundResultPoints(a,f),x=new be().decode(S)}catch(S){o=S}if(x==null)try{let S=d.detectMirror(!0);f=S.getPoints(),this.reportFoundResultPoints(a,f),x=new be().decode(S)}catch(S){throw o??S}let p=new _e(x.getText(),x.getRawBytes(),x.getNumBits(),f,Le.AZTEC,z.currentTimeMillis()),v=x.getByteSegments();v!=null&&p.putMetadata(rt.BYTE_SEGMENTS,v);let E=x.getECLevel();return E!=null&&p.putMetadata(rt.ERROR_CORRECTION_LEVEL,E),p}reportFoundResultPoints(n,a){if(n!=null){let o=n.get(ce.NEED_RESULT_POINT_CALLBACK);o!=null&&a.forEach((d,f,x)=>{o.foundPossibleResultPoint(d)})}}reset(){}}class pi extends Be{constructor(n=500){super(new gs,n)}}class Gt{decode(n,a){try{return this.doDecode(n,a)}catch{if(a&&a.get(ce.TRY_HARDER)===!0&&n.isRotateSupported()){const f=n.rotateCounterClockwise(),x=this.doDecode(f,a),p=x.getResultMetadata();let v=270;p!==null&&p.get(rt.ORIENTATION)===!0&&(v=v+p.get(rt.ORIENTATION)%360),x.putMetadata(rt.ORIENTATION,v);const E=x.getResultPoints();if(E!==null){const S=f.getHeight();for(let M=0;M<E.length;M++)E[M]=new je(S-E[M].getY()-1,E[M].getX())}return x}else throw new Y}}reset(){}doDecode(n,a){const o=n.getWidth(),d=n.getHeight();let f=new te(o);const x=a&&a.get(ce.TRY_HARDER)===!0,p=Math.max(1,d>>(x?8:5));let v;x?v=d:v=15;const E=Math.trunc(d/2);for(let S=0;S<v;S++){const M=Math.trunc((S+1)/2),D=(S&1)===0,P=E+p*(D?M:-M);if(P<0||P>=d)break;try{f=n.getBlackRow(P,f)}catch{continue}for(let H=0;H<2;H++){if(H===1&&(f.reverse(),a&&a.get(ce.NEED_RESULT_POINT_CALLBACK)===!0)){const q=new Map;a.forEach((ie,me)=>q.set(me,ie)),q.delete(ce.NEED_RESULT_POINT_CALLBACK),a=q}try{const q=this.decodeRow(P,f,a);if(H===1){q.putMetadata(rt.ORIENTATION,180);const ie=q.getResultPoints();ie!==null&&(ie[0]=new je(o-ie[0].getX()-1,ie[0].getY()),ie[1]=new je(o-ie[1].getX()-1,ie[1].getY()))}return q}catch{}}}throw new Y}static recordPattern(n,a,o){const d=o.length;for(let E=0;E<d;E++)o[E]=0;const f=n.getSize();if(a>=f)throw new Y;let x=!n.get(a),p=0,v=a;for(;v<f;){if(n.get(v)!==x)o[p]++;else{if(++p===d)break;o[p]=1,x=!x}v++}if(!(p===d||p===d-1&&v===f))throw new Y}static recordPatternInReverse(n,a,o){let d=o.length,f=n.get(a);for(;a>0&&d>=0;)n.get(--a)!==f&&(d--,f=!f);if(d>=0)throw new Y;Gt.recordPattern(n,a+1,o)}static patternMatchVariance(n,a,o){const d=n.length;let f=0,x=0;for(let E=0;E<d;E++)f+=n[E],x+=a[E];if(f<x)return Number.POSITIVE_INFINITY;const p=f/x;o*=p;let v=0;for(let E=0;E<d;E++){const S=n[E],M=a[E]*p,D=S>M?S-M:M-S;if(D>o)return Number.POSITIVE_INFINITY;v+=D}return v/f}}class Re extends Gt{static findStartPattern(n){const a=n.getSize(),o=n.getNextSet(0);let d=0,f=Int32Array.from([0,0,0,0,0,0]),x=o,p=!1;const v=6;for(let E=o;E<a;E++)if(n.get(E)!==p)f[d]++;else{if(d===v-1){let S=Re.MAX_AVG_VARIANCE,M=-1;for(let D=Re.CODE_START_A;D<=Re.CODE_START_C;D++){const P=Gt.patternMatchVariance(f,Re.CODE_PATTERNS[D],Re.MAX_INDIVIDUAL_VARIANCE);P<S&&(S=P,M=D)}if(M>=0&&n.isRange(Math.max(0,x-(E-x)/2),x,!1))return Int32Array.from([x,E,M]);x+=f[0]+f[1],f=f.slice(2,f.length-1),f[d-1]=0,f[d]=0,d--}else d++;f[d]=1,p=!p}throw new Y}static decodeCode(n,a,o){Gt.recordPattern(n,o,a);let d=Re.MAX_AVG_VARIANCE,f=-1;for(let x=0;x<Re.CODE_PATTERNS.length;x++){const p=Re.CODE_PATTERNS[x],v=this.patternMatchVariance(a,p,Re.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,f=x)}if(f>=0)return f;throw new Y}decodeRow(n,a,o){const d=o&&o.get(ce.ASSUME_GS1)===!0,f=Re.findStartPattern(a),x=f[2];let p=0;const v=new Uint8Array(20);v[p++]=x;let E;switch(x){case Re.CODE_START_A:E=Re.CODE_CODE_A;break;case Re.CODE_START_B:E=Re.CODE_CODE_B;break;case Re.CODE_START_C:E=Re.CODE_CODE_C;break;default:throw new G}let S=!1,M=!1,D="",P=f[0],H=f[1];const q=Int32Array.from([0,0,0,0,0,0]);let ie=0,me=0,Me=x,Te=0,Se=!0,_t=!1,bt=!1;for(;!S;){const or=M;switch(M=!1,ie=me,me=Re.decodeCode(a,q,H),v[p++]=me,me!==Re.CODE_STOP&&(Se=!0),me!==Re.CODE_STOP&&(Te++,Me+=Te*me),P=H,H+=q.reduce((Tu,$o)=>Tu+$o,0),me){case Re.CODE_START_A:case Re.CODE_START_B:case Re.CODE_START_C:throw new G}switch(E){case Re.CODE_CODE_A:if(me<64)bt===_t?D+=String.fromCharCode(32+me):D+=String.fromCharCode(32+me+128),bt=!1;else if(me<96)bt===_t?D+=String.fromCharCode(me-64):D+=String.fromCharCode(me+64),bt=!1;else switch(me!==Re.CODE_STOP&&(Se=!1),me){case Re.CODE_FNC_1:d&&(D.length===0?D+="]C1":D+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_A:!_t&&bt?(_t=!0,bt=!1):_t&&bt?(_t=!1,bt=!1):bt=!0;break;case Re.CODE_SHIFT:M=!0,E=Re.CODE_CODE_B;break;case Re.CODE_CODE_B:E=Re.CODE_CODE_B;break;case Re.CODE_CODE_C:E=Re.CODE_CODE_C;break;case Re.CODE_STOP:S=!0;break}break;case Re.CODE_CODE_B:if(me<96)bt===_t?D+=String.fromCharCode(32+me):D+=String.fromCharCode(32+me+128),bt=!1;else switch(me!==Re.CODE_STOP&&(Se=!1),me){case Re.CODE_FNC_1:d&&(D.length===0?D+="]C1":D+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_B:!_t&&bt?(_t=!0,bt=!1):_t&&bt?(_t=!1,bt=!1):bt=!0;break;case Re.CODE_SHIFT:M=!0,E=Re.CODE_CODE_A;break;case Re.CODE_CODE_A:E=Re.CODE_CODE_A;break;case Re.CODE_CODE_C:E=Re.CODE_CODE_C;break;case Re.CODE_STOP:S=!0;break}break;case Re.CODE_CODE_C:if(me<100)me<10&&(D+="0"),D+=me;else switch(me!==Re.CODE_STOP&&(Se=!1),me){case Re.CODE_FNC_1:d&&(D.length===0?D+="]C1":D+="");break;case Re.CODE_CODE_A:E=Re.CODE_CODE_A;break;case Re.CODE_CODE_B:E=Re.CODE_CODE_B;break;case Re.CODE_STOP:S=!0;break}break}or&&(E=E===Re.CODE_CODE_A?Re.CODE_CODE_B:Re.CODE_CODE_A)}const Dn=H-P;if(H=a.getNextUnset(H),!a.isRange(H,Math.min(a.getSize(),H+(H-P)/2),!1))throw new Y;if(Me-=Te*ie,Me%103!==ie)throw new U;const _s=D.length;if(_s===0)throw new Y;_s>0&&Se&&(E===Re.CODE_CODE_C?D=D.substring(0,_s-2):D=D.substring(0,_s-1));const as=(f[1]+f[0])/2,tn=P+Dn/2,Kn=v.length,ws=new Uint8Array(Kn);for(let or=0;or<Kn;or++)ws[or]=v[or];const Qr=[new je(as,n),new je(tn,n)];return new _e(D,ws,0,Qr,Le.CODE_128,new Date().getTime())}}Re.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Re.MAX_AVG_VARIANCE=.25,Re.MAX_INDIVIDUAL_VARIANCE=.7,Re.CODE_SHIFT=98,Re.CODE_CODE_C=99,Re.CODE_CODE_B=100,Re.CODE_CODE_A=101,Re.CODE_FNC_1=102,Re.CODE_FNC_2=97,Re.CODE_FNC_3=96,Re.CODE_FNC_4_A=101,Re.CODE_FNC_4_B=100,Re.CODE_START_A=103,Re.CODE_START_B=104,Re.CODE_START_C=105,Re.CODE_STOP=106;class Jt extends Gt{constructor(n=!1,a=!1){super(),this.usingCheckDigit=n,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,a,o){let d=this.counters;d.fill(0),this.decodeRowResult="";let f=Jt.findAsteriskPattern(a,d),x=a.getNextSet(f[1]),p=a.getSize(),v,E;do{Jt.recordPattern(a,x,d);let q=Jt.toNarrowWidePattern(d);if(q<0)throw new Y;v=Jt.patternToChar(q),this.decodeRowResult+=v,E=x;for(let ie of d)x+=ie;x=a.getNextSet(x)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let q of d)S+=q;let M=x-E-S;if(x!==p&&M*2<S)throw new Y;if(this.usingCheckDigit){let q=this.decodeRowResult.length-1,ie=0;for(let me=0;me<q;me++)ie+=Jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(me));if(this.decodeRowResult.charAt(q)!==Jt.ALPHABET_STRING.charAt(ie%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,q)}if(this.decodeRowResult.length===0)throw new Y;let D;this.extendedMode?D=Jt.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;let P=(f[1]+f[0])/2,H=E+S/2;return new _e(D,null,0,[new je(P,n),new je(H,n)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(n,a){let o=n.getSize(),d=n.getNextSet(0),f=0,x=d,p=!1,v=a.length;for(let E=d;E<o;E++)if(n.get(E)!==p)a[f]++;else{if(f===v-1){if(this.toNarrowWidePattern(a)===Jt.ASTERISK_ENCODING&&n.isRange(Math.max(0,x-Math.floor((E-x)/2)),x,!1))return[x,E];x+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,p=!p}throw new Y}static toNarrowWidePattern(n){let a=n.length,o=0,d;do{let f=2147483647;for(let v of n)v<f&&v>o&&(f=v);o=f,d=0;let x=0,p=0;for(let v=0;v<a;v++){let E=n[v];E>o&&(p|=1<<a-1-v,d++,x+=E)}if(d===3){for(let v=0;v<a&&d>0;v++){let E=n[v];if(E>o&&(d--,E*2>=x))return-1}return p}}while(d>3);return-1}static patternToChar(n){for(let a=0;a<Jt.CHARACTER_ENCODINGS.length;a++)if(Jt.CHARACTER_ENCODINGS[a]===n)return Jt.ALPHABET_STRING.charAt(a);if(n===Jt.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(n){let a=n.length,o="";for(let d=0;d<a;d++){let f=n.charAt(d);if(f==="+"||f==="$"||f==="%"||f==="/"){let x=n.charAt(d+1),p="\0";switch(f){case"+":if(x>="A"&&x<="Z")p=String.fromCharCode(x.charCodeAt(0)+32);else throw new G;break;case"$":if(x>="A"&&x<="Z")p=String.fromCharCode(x.charCodeAt(0)-64);else throw new G;break;case"%":if(x>="A"&&x<="E")p=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")p=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")p=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")p=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")p="\0";else if(x==="V")p="@";else if(x==="W")p="`";else if(x==="X"||x==="Y"||x==="Z")p="";else throw new G;break;case"/":if(x>="A"&&x<="O")p=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")p=":";else throw new G;break}o+=p,d++}else o+=f}return o}}Jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Jt.ASTERISK_ENCODING=148;class yt extends Gt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,a,o){let d=this.decodeStart(a),f=this.decodeEnd(a),x=new ge;yt.decodeMiddle(a,d[1],f[0],x);let p=x.toString(),v=null;o!=null&&(v=o.get(ce.ALLOWED_LENGTHS)),v==null&&(v=yt.DEFAULT_ALLOWED_LENGTHS);let E=p.length,S=!1,M=0;for(let H of v){if(E===H){S=!0;break}H>M&&(M=H)}if(!S&&E>M&&(S=!0),!S)throw new G;const D=[new je(d[1],n),new je(f[0],n)];return new _e(p,null,0,D,Le.ITF,new Date().getTime())}static decodeMiddle(n,a,o,d){let f=new Int32Array(10),x=new Int32Array(5),p=new Int32Array(5);for(f.fill(0),x.fill(0),p.fill(0);a<o;){Gt.recordPattern(n,a,f);for(let E=0;E<5;E++){let S=2*E;x[E]=f[S],p[E]=f[S+1]}let v=yt.decodeDigit(x);d.append(v.toString()),v=this.decodeDigit(p),d.append(v.toString()),f.forEach(function(E){a+=E})}}decodeStart(n){let a=yt.skipWhiteSpace(n),o=yt.findGuardPattern(n,a,yt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o}validateQuietZone(n,a){let o=this.narrowLineWidth*10;o=o<a?o:a;for(let d=a-1;o>0&&d>=0&&!n.get(d);d--)o--;if(o!==0)throw new Y}static skipWhiteSpace(n){const a=n.getSize(),o=n.getNextSet(0);if(o===a)throw new Y;return o}decodeEnd(n){n.reverse();try{let a=yt.skipWhiteSpace(n),o;try{o=yt.findGuardPattern(n,a,yt.END_PATTERN_REVERSED[0])}catch(f){f instanceof Y&&(o=yt.findGuardPattern(n,a,yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);let d=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-d,o}finally{n.reverse()}}static findGuardPattern(n,a,o){let d=o.length,f=new Int32Array(d),x=n.getSize(),p=!1,v=0,E=a;f.fill(0);for(let S=a;S<x;S++)if(n.get(S)!==p)f[v]++;else{if(v===d-1){if(Gt.patternMatchVariance(f,o,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return[E,S];E+=f[0]+f[1],z.arraycopy(f,2,f,0,v-1),f[v-1]=0,f[v]=0,v--}else v++;f[v]=1,p=!p}throw new Y}static decodeDigit(n){let a=yt.MAX_AVG_VARIANCE,o=-1,d=yt.PATTERNS.length;for(let f=0;f<d;f++){let x=yt.PATTERNS[f],p=Gt.patternMatchVariance(n,x,yt.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,o=f):p===a&&(o=-1)}if(o>=0)return o%10;throw new Y}}yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yt.MAX_AVG_VARIANCE=.38,yt.MAX_INDIVIDUAL_VARIANCE=.5,yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yt.START_PATTERN=Int32Array.from([1,1,1,1]),yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pn extends Gt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let a=!1,o,d=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),o=pn.findGuardPattern(n,d,!1,this.START_END_PATTERN,f);let x=o[0];d=o[1];let p=x-(d-x);p>=0&&(a=n.isRange(p,x,!1))}return o}static checkChecksum(n){return pn.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let a=n.length;if(a===0)return!1;let o=parseInt(n.charAt(a-1),10);return pn.getStandardUPCEANChecksum(n.substring(0,a-1))===o}static getStandardUPCEANChecksum(n){let a=n.length,o=0;for(let d=a-1;d>=0;d-=2){let f=n.charAt(d).charCodeAt(0)-48;if(f<0||f>9)throw new G;o+=f}o*=3;for(let d=a-2;d>=0;d-=2){let f=n.charAt(d).charCodeAt(0)-48;if(f<0||f>9)throw new G;o+=f}return(1e3-o)%10}static decodeEnd(n,a){return pn.findGuardPattern(n,a,!1,pn.START_END_PATTERN,new Int32Array(pn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,a,o,d){return this.findGuardPattern(n,a,o,d,new Int32Array(d.length))}static findGuardPattern(n,a,o,d,f){let x=n.getSize();a=o?n.getNextUnset(a):n.getNextSet(a);let p=0,v=a,E=d.length,S=o;for(let M=a;M<x;M++)if(n.get(M)!==S)f[p]++;else{if(p===E-1){if(Gt.patternMatchVariance(f,d,pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return Int32Array.from([v,M]);v+=f[0]+f[1];let D=f.slice(2,f.length-1);for(let P=0;P<p-1;P++)f[P]=D[P];f[p-1]=0,f[p]=0,p--}else p++;f[p]=1,S=!S}throw new Y}static decodeDigit(n,a,o,d){this.recordPattern(n,o,a);let f=this.MAX_AVG_VARIANCE,x=-1,p=d.length;for(let v=0;v<p;v++){let E=d[v],S=Gt.patternMatchVariance(a,E,pn.MAX_INDIVIDUAL_VARIANCE);S<f&&(f=S,x=v)}if(x>=0)return x;throw new Y}}pn.MAX_AVG_VARIANCE=.48,pn.MAX_INDIVIDUAL_VARIANCE=.7,pn.START_END_PATTERN=Int32Array.from([1,1,1]),pn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class tr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,a,o){let d=this.decodeRowStringBuffer,f=this.decodeMiddle(a,o,d),x=d.toString(),p=tr.parseExtensionString(x),v=[new je((o[0]+o[1])/2,n),new je(f,n)],E=new _e(x,null,0,v,Le.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(n,a,o){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=n.getSize(),x=a[1],p=0;for(let E=0;E<5&&x<f;E++){let S=pn.decodeDigit(n,d,x,pn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+S%10);for(let M of d)x+=M;S>=10&&(p|=1<<4-E),E!==4&&(x=n.getNextSet(x),x=n.getNextUnset(x))}if(o.length!==5)throw new Y;let v=this.determineCheckDigit(p);if(tr.extensionChecksum(o.toString())!==v)throw new Y;return x}static extensionChecksum(n){let a=n.length,o=0;for(let d=a-2;d>=0;d-=2)o+=n.charAt(d).charCodeAt(0)-48;o*=3;for(let d=a-1;d>=0;d-=2)o+=n.charAt(d).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(n){for(let a=0;a<10;a++)if(n===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new Y}static parseExtensionString(n){if(n.length!==5)return null;let a=tr.parseExtension5String(n);return a==null?null:new Map([[rt.SUGGESTED_PRICE,a]])}static parseExtension5String(n){let a;switch(n.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let o=parseInt(n.substring(1)),d=(o/100).toString(),f=o%100,x=f<10?"0"+f:f.toString();return a+d+"."+x}}class La{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,a,o){let d=this.decodeRowStringBuffer,f=this.decodeMiddle(a,o,d),x=d.toString(),p=La.parseExtensionString(x),v=[new je((o[0]+o[1])/2,n),new je(f,n)],E=new _e(x,null,0,v,Le.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(n,a,o){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=n.getSize(),x=a[1],p=0;for(let v=0;v<2&&x<f;v++){let E=pn.decodeDigit(n,d,x,pn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let S of d)x+=S;E>=10&&(p|=1<<1-v),v!==1&&(x=n.getNextSet(x),x=n.getNextUnset(x))}if(o.length!==2)throw new Y;if(parseInt(o.toString())%4!==p)throw new Y;return x}static parseExtensionString(n){return n.length!==2?null:new Map([[rt.ISSUE_NUMBER,parseInt(n)]])}}class ka{static decodeRow(n,a,o){let d=pn.findGuardPattern(a,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new tr().decodeRow(n,a,d)}catch{return new La().decodeRow(n,a,d)}}}ka.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Lt extends pn{constructor(){super(),this.decodeRowStringBuffer="",Lt.L_AND_G_PATTERNS=Lt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let a=Lt.L_PATTERNS[n-10],o=new Int32Array(a.length);for(let d=0;d<a.length;d++)o[d]=a[a.length-d-1];Lt.L_AND_G_PATTERNS[n]=o}}decodeRow(n,a,o){let d=Lt.findStartGuardPattern(a),f=o==null?null:o.get(ce.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Se=new je((d[0]+d[1])/2,n);f.foundPossibleResultPoint(Se)}let x=this.decodeMiddle(a,d,this.decodeRowStringBuffer),p=x.rowOffset,v=x.resultString;if(f!=null){const Se=new je(p,n);f.foundPossibleResultPoint(Se)}let E=this.decodeEnd(a,p);if(f!=null){const Se=new je((E[0]+E[1])/2,n);f.foundPossibleResultPoint(Se)}let S=E[1],M=S+(S-E[0]);if(M>=a.getSize()||!a.isRange(S,M,!1))throw new Y;let D=v.toString();if(D.length<8)throw new G;if(!Lt.checkChecksum(D))throw new U;let P=(d[1]+d[0])/2,H=(E[1]+E[0])/2,q=this.getBarcodeFormat(),ie=[new je(P,n),new je(H,n)],me=new _e(D,null,0,ie,q,new Date().getTime()),Me=0;try{let Se=ka.decodeRow(n,a,E[1]);me.putMetadata(rt.UPC_EAN_EXTENSION,Se.getText()),me.putAllMetadata(Se.getResultMetadata()),me.addResultPoints(Se.getResultPoints()),Me=Se.getText().length}catch{}let Te=o==null?null:o.get(ce.ALLOWED_EAN_EXTENSIONS);if(Te!=null){let Se=!1;for(let _t in Te)if(Me.toString()===_t){Se=!0;break}if(!Se)throw new Y}return me}decodeEnd(n,a){return Lt.findGuardPattern(n,a,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Lt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let a=n.length;if(a===0)return!1;let o=parseInt(n.charAt(a-1),10);return Lt.getStandardUPCEANChecksum(n.substring(0,a-1))===o}static getStandardUPCEANChecksum(n){let a=n.length,o=0;for(let d=a-1;d>=0;d-=2){let f=n.charAt(d).charCodeAt(0)-48;if(f<0||f>9)throw new G;o+=f}o*=3;for(let d=a-2;d>=0;d-=2){let f=n.charAt(d).charCodeAt(0)-48;if(f<0||f>9)throw new G;o+=f}return(1e3-o)%10}}class $s extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,a,o){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=n.getSize(),x=a[1],p=0;for(let E=0;E<6&&x<f;E++){let S=Lt.decodeDigit(n,d,x,Lt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+S%10);for(let M of d)x+=M;S>=10&&(p|=1<<5-E)}o=$s.determineFirstDigit(o,p),x=Lt.findGuardPattern(n,x,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&x<f;E++){let S=Lt.decodeDigit(n,d,x,Lt.L_PATTERNS);o+=String.fromCharCode(48+S);for(let M of d)x+=M}return{rowOffset:x,resultString:o}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(n,a){for(let o=0;o<10;o++)if(a===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode(48+o)+n,n;throw new Y}}$s.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ji extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,a,o){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=n.getSize(),x=a[1];for(let v=0;v<4&&x<f;v++){let E=Lt.decodeDigit(n,d,x,Lt.L_PATTERNS);o+=String.fromCharCode(48+E);for(let S of d)x+=S}x=Lt.findGuardPattern(n,x,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&x<f;v++){let E=Lt.decodeDigit(n,d,x,Lt.L_PATTERNS);o+=String.fromCharCode(48+E);for(let S of d)x+=S}return{rowOffset:x,resultString:o}}getBarcodeFormat(){return Le.EAN_8}}class Ba extends Lt{constructor(){super(...arguments),this.ean13Reader=new $s}getBarcodeFormat(){return Le.UPC_A}decode(n,a){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,a,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,a,o))}decodeMiddle(n,a,o){return this.ean13Reader.decodeMiddle(n,a,o)}maybeReturnResult(n){let a=n.getText();if(a.charAt(0)==="0"){let o=new _e(a.substring(1),null,null,n.getResultPoints(),Le.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new Y}reset(){this.ean13Reader.reset()}}class rs extends Lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,a,o){const d=this.decodeMiddleCounters.map(E=>E);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const f=n.getSize();let x=a[1],p=0;for(let E=0;E<6&&x<f;E++){const S=rs.decodeDigit(n,d,x,rs.L_AND_G_PATTERNS);o+=String.fromCharCode(48+S%10);for(let M of d)x+=M;S>=10&&(p|=1<<5-E)}let v=rs.determineNumSysAndCheckDigit(o,p);return{rowOffset:x,resultString:v}}decodeEnd(n,a){return rs.findGuardPatternWithoutCounters(n,a,!0,rs.MIDDLE_END_PATTERN)}checkChecksum(n){return Lt.checkChecksum(rs.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,a){for(let o=0;o<=1;o++)for(let d=0;d<10;d++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][d]){let f=String.fromCharCode(48+o),x=String.fromCharCode(48+d);return f+n+x}throw Y.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(n){const a=n.slice(1,7).split("").map(f=>f.charCodeAt(0)),o=new ge;o.append(n.charAt(0));let d=a[5];switch(d){case 0:case 1:case 2:o.appendChars(a,0,2),o.append(d),o.append("0000"),o.appendChars(a,2,3);break;case 3:o.appendChars(a,0,3),o.append("00000"),o.appendChars(a,3,2);break;case 4:o.appendChars(a,0,4),o.append("00000"),o.append(a[4]);break;default:o.appendChars(a,0,5),o.append("0000"),o.append(d);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()}}rs.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),rs.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Vo extends Gt{constructor(n){super();let a=n==null?null:n.get(ce.POSSIBLE_FORMATS),o=[];l(a)?(o.push(new $s),o.push(new Ba),o.push(new ji),o.push(new rs)):(a.indexOf(Le.EAN_13)>-1&&o.push(new $s),a.indexOf(Le.UPC_A)>-1&&o.push(new Ba),a.indexOf(Le.EAN_8)>-1&&o.push(new ji),a.indexOf(Le.UPC_E)>-1&&o.push(new rs)),this.readers=o}decodeRow(n,a,o){for(let d of this.readers)try{const f=d.decodeRow(n,a,o),x=f.getBarcodeFormat()===Le.EAN_13&&f.getText().charAt(0)==="0",p=o==null?null:o.get(ce.POSSIBLE_FORMATS),v=p==null||p.includes(Le.UPC_A);if(x&&v){const E=f.getRawBytes(),S=new _e(f.getText().substring(1),E,E?E.length:null,f.getResultPoints(),Le.UPC_A);return S.putAllMetadata(f.getResultMetadata()),S}return f}catch{}throw new Y}reset(){for(let n of this.readers)n.reset()}}class Xn extends Gt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,a){for(let o=0;o<a.length;o++)if(Gt.patternMatchVariance(n,a[o],Xn.MAX_INDIVIDUAL_VARIANCE)<Xn.MAX_AVG_VARIANCE)return o;throw new Y}static count(n){return Ie.sum(new Int32Array(n))}static increment(n,a){let o=0,d=a[0];for(let f=1;f<n.length;f++)a[f]>d&&(d=a[f],o=f);n[o]++}static decrement(n,a){let o=0,d=a[0];for(let f=1;f<n.length;f++)a[f]<d&&(d=a[f],o=f);n[o]--}static isFinderPattern(n){let a=n[0]+n[1],o=a+n[2]+n[3],d=a/o;if(d>=Xn.MIN_FINDER_PATTERN_RATIO&&d<=Xn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let p of n)p>x&&(x=p),p<f&&(f=p);return x<10*f}return!1}}Xn.MAX_AVG_VARIANCE=.2,Xn.MAX_INDIVIDUAL_VARIANCE=.45,Xn.MIN_FINDER_PATTERN_RATIO=9.5/12,Xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Li{constructor(n,a){this.value=n,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Li))return!1;const a=n;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ki{constructor(n,a,o,d,f){this.value=n,this.startEnd=a,this.value=n,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new je(o,f)),this.resultPoints.push(new je(d,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof ki))return!1;const a=n;return this.value===a.value}hashCode(){return this.value}}class ei{constructor(){}static getRSSvalue(n,a,o){let d=0;for(let v of n)d+=v;let f=0,x=0,p=n.length;for(let v=0;v<p-1;v++){let E;for(E=1,x|=1<<v;E<n[v];E++,x&=~(1<<v)){let S=ei.combins(d-E-1,p-v-2);if(o&&x===0&&d-E-(p-v-1)>=p-v-1&&(S-=ei.combins(d-E-(p-v),p-v-2)),p-v-1>1){let M=0;for(let D=d-E-(p-v-2);D>a;D--)M+=ei.combins(d-E-D-1,p-v-3);S-=M*(p-1-v)}else d-E>a&&S--;f+=S}d-=E}return f}static combins(n,a){let o,d;n-a>a?(d=a,o=n-a):(d=n-a,o=a);let f=1,x=1;for(let p=n;p>o;p--)f*=p,x<=d&&(f/=x,x++);for(;x<=d;)f/=x,x++;return f}}class mu{static buildBitArray(n){let a=n.length*2-1;n[n.length-1].getRightChar()==null&&(a-=1);let o=12*a,d=new te(o),f=0,p=n[0].getRightChar().getValue();for(let v=11;v>=0;--v)(p&1<<v)!=0&&d.set(f),f++;for(let v=1;v<n.length;++v){let E=n[v],S=E.getLeftChar().getValue();for(let M=11;M>=0;--M)(S&1<<M)!=0&&d.set(f),f++;if(E.getRightChar()!=null){let M=E.getRightChar().getValue();for(let D=11;D>=0;--D)(M&1<<D)!=0&&d.set(f),f++}}return d}}class Bi{constructor(n,a){a?this.decodedInformation=null:(this.finished=n,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Al{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class es extends Al{constructor(n,a){super(n),this.value=a}getValue(){return this.value}isFNC1(){return this.value===es.FNC1}}es.FNC1="$";class bi extends Al{constructor(n,a,o){super(n),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class xs extends Al{constructor(n,a,o){if(super(n),a<0||a>10||o<0||o>10)throw new G;this.firstDigit=a,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===xs.FNC1}isSecondDigitFNC1(){return this.secondDigit===xs.FNC1}isAnyFNC1(){return this.firstDigit===xs.FNC1||this.secondDigit===xs.FNC1}}xs.FNC1=10;class Fe{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new Y;let a=n.substring(0,2);for(let f of Fe.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(2,f[2],n):Fe.processFixedAI(2,f[1],n);if(n.length<3)throw new Y;let o=n.substring(0,3);for(let f of Fe.THREE_DIGIT_DATA_LENGTH)if(f[0]===o)return f[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(3,f[2],n):Fe.processFixedAI(3,f[1],n);for(let f of Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===o)return f[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,f[2],n):Fe.processFixedAI(4,f[1],n);if(n.length<4)throw new Y;let d=n.substring(0,4);for(let f of Fe.FOUR_DIGIT_DATA_LENGTH)if(f[0]===d)return f[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,f[2],n):Fe.processFixedAI(4,f[1],n);throw new Y}static processFixedAI(n,a,o){if(o.length<n)throw new Y;let d=o.substring(0,n);if(o.length<n+a)throw new Y;let f=o.substring(n,n+a),x=o.substring(n+a),p="("+d+")"+f,v=Fe.parseFieldsInGeneralPurpose(x);return v==null?p:p+v}static processVariableAI(n,a,o){let d=o.substring(0,n),f;o.length<n+a?f=o.length:f=n+a;let x=o.substring(n,f),p=o.substring(f),v="("+d+")"+x,E=Fe.parseFieldsInGeneralPurpose(p);return E==null?v:v+E}}Fe.VARIABLE_LENGTH=[],Fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Fe.VARIABLE_LENGTH,20],["22",Fe.VARIABLE_LENGTH,29],["30",Fe.VARIABLE_LENGTH,8],["37",Fe.VARIABLE_LENGTH,8],["90",Fe.VARIABLE_LENGTH,30],["91",Fe.VARIABLE_LENGTH,30],["92",Fe.VARIABLE_LENGTH,30],["93",Fe.VARIABLE_LENGTH,30],["94",Fe.VARIABLE_LENGTH,30],["95",Fe.VARIABLE_LENGTH,30],["96",Fe.VARIABLE_LENGTH,30],["97",Fe.VARIABLE_LENGTH,3],["98",Fe.VARIABLE_LENGTH,30],["99",Fe.VARIABLE_LENGTH,30]],Fe.THREE_DIGIT_DATA_LENGTH=[["240",Fe.VARIABLE_LENGTH,30],["241",Fe.VARIABLE_LENGTH,30],["242",Fe.VARIABLE_LENGTH,6],["250",Fe.VARIABLE_LENGTH,30],["251",Fe.VARIABLE_LENGTH,30],["253",Fe.VARIABLE_LENGTH,17],["254",Fe.VARIABLE_LENGTH,20],["400",Fe.VARIABLE_LENGTH,30],["401",Fe.VARIABLE_LENGTH,30],["402",17],["403",Fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Fe.VARIABLE_LENGTH,20],["421",Fe.VARIABLE_LENGTH,15],["422",3],["423",Fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Fe.VARIABLE_LENGTH,15],["391",Fe.VARIABLE_LENGTH,18],["392",Fe.VARIABLE_LENGTH,15],["393",Fe.VARIABLE_LENGTH,18],["703",Fe.VARIABLE_LENGTH,30]],Fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Fe.VARIABLE_LENGTH,20],["8003",Fe.VARIABLE_LENGTH,30],["8004",Fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Fe.VARIABLE_LENGTH,30],["8008",Fe.VARIABLE_LENGTH,12],["8018",18],["8020",Fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Fe.VARIABLE_LENGTH,70],["8200",Fe.VARIABLE_LENGTH,70]];class ps{constructor(n){this.buffer=new ge,this.information=n}decodeAllCodes(n,a){let o=a,d=null;do{let f=this.decodeGeneralPurposeField(o,d),x=Fe.parseFieldsInGeneralPurpose(f.getNewString());if(x!=null&&n.append(x),f.isRemaining()?d=""+f.getRemainingValue():d=null,o===f.getNewPosition())break;o=f.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let a=n;a<n+3;++a)if(this.information.get(a))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(n,4);return f===0?new xs(this.information.getSize(),xs.FNC1,xs.FNC1):new xs(this.information.getSize(),f-1,xs.FNC1)}let a=this.extractNumericValueFromBitArray(n,7),o=(a-8)/11,d=(a-8)%11;return new xs(n+7,o,d)}extractNumericValueFromBitArray(n,a){return ps.extractNumericValueFromBitArray(this.information,n,a)}static extractNumericValueFromBitArray(n,a,o){let d=0;for(let f=0;f<o;++f)n.get(a+f)&&(d|=1<<o-f-1);return d}decodeGeneralPurposeField(n,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(n);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new bi(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new bi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,a;do{let o=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),n=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),n=a.isFinished()):(a=this.parseNumericBlock(),n=a.isFinished()),!(o!==this.current.getPosition())&&!n)break}while(!n);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let a;return n.isSecondDigitFNC1()?a=new bi(this.current.getPosition(),this.buffer.toString()):a=new bi(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Bi(!0,a)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let a=new bi(this.current.getPosition(),this.buffer.toString());return new Bi(!0,a)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Bi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let a=new bi(this.current.getPosition(),this.buffer.toString());return new Bi(!0,a)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Bi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let a=new bi(this.current.getPosition(),this.buffer.toString());return new Bi(!0,a)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Bi(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,5);if(a>=5&&a<16)return!0;if(n+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<116)return!0;if(n+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(n,8);return d>=232&&d<253}decodeIsoIec646(n){let a=this.extractNumericValueFromBitArray(n,5);if(a===15)return new es(n+5,es.FNC1);if(a>=5&&a<15)return new es(n+5,"0"+(a-5));let o=this.extractNumericValueFromBitArray(n,7);if(o>=64&&o<90)return new es(n+7,""+(o+1));if(o>=90&&o<116)return new es(n+7,""+(o+7));let d=this.extractNumericValueFromBitArray(n,8),f;switch(d){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new G}return new es(n+8,f)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,5);if(a>=5&&a<16)return!0;if(n+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,6);return o>=16&&o<63}decodeAlphanumeric(n){let a=this.extractNumericValueFromBitArray(n,5);if(a===15)return new es(n+5,es.FNC1);if(a>=5&&a<15)return new es(n+5,"0"+(a-5));let o=this.extractNumericValueFromBitArray(n,6);if(o>=32&&o<58)return new es(n+6,""+(o+33));let d;switch(o){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new He("Decoding invalid alphanumeric value: "+o)}return new es(n+6,d)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let a=0;a<5&&a+n<this.information.getSize();++a)if(a===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+a))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let a=n;a<n+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let a=0;a<4&&a+n<this.information.getSize();++a)if(this.information.get(n+a))return!1;return!0}}class kn{constructor(n){this.information=n,this.generalDecoder=new ps(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class rn extends kn{constructor(n){super(n)}encodeCompressedGtin(n,a){n.append("(01)");let o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,a,o)}encodeCompressedGtinWithoutAI(n,a,o){for(let d=0;d<4;++d){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*d,10);f/100===0&&n.append("0"),f/10===0&&n.append("0"),n.append(f)}rn.appendCheckDigit(n,o)}static appendCheckDigit(n,a){let o=0;for(let d=0;d<13;d++){let f=n.charAt(d+a).charCodeAt(0)-48;o+=(d&1)===0?3*f:f}o=10-o%10,o===10&&(o=0),n.append(o)}}rn.GTIN_SIZE=40;class ks extends rn{constructor(n){super(n)}parseInformation(){let n=new ge;n.append("(01)");let a=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(ks.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,ks.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(n,ks.HEADER_SIZE+44)}}ks.HEADER_SIZE=4;class kr extends kn{constructor(n){super(n)}parseInformation(){let n=new ge;return this.getGeneralDecoder().decodeAllCodes(n,kr.HEADER_SIZE)}}kr.HEADER_SIZE=5;class Sl extends rn{constructor(n){super(n)}encodeCompressedWeight(n,a,o){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a,o);this.addWeightCode(n,d);let f=this.checkWeight(d),x=1e5;for(let p=0;p<5;++p)f/x===0&&n.append("0"),x/=10;n.append(f)}}class ti extends Sl{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=ti.HEADER_SIZE+Sl.GTIN_SIZE+ti.WEIGHT_SIZE)throw new Y;let n=new ge;return this.encodeCompressedGtin(n,ti.HEADER_SIZE),this.encodeCompressedWeight(n,ti.HEADER_SIZE+Sl.GTIN_SIZE,ti.WEIGHT_SIZE),n.toString()}}ti.HEADER_SIZE=5,ti.WEIGHT_SIZE=15;class gu extends ti{constructor(n){super(n)}addWeightCode(n,a){n.append("(3103)")}checkWeight(n){return n}}class Pa extends ti{constructor(n){super(n)}addWeightCode(n,a){a<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class Es extends rn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Es.HEADER_SIZE+rn.GTIN_SIZE)throw new Y;let n=new ge;this.encodeCompressedGtin(n,Es.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Es.HEADER_SIZE+rn.GTIN_SIZE,Es.LAST_DIGIT_SIZE);n.append("(392"),n.append(a),n.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(Es.HEADER_SIZE+rn.GTIN_SIZE+Es.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()}}Es.HEADER_SIZE=8,Es.LAST_DIGIT_SIZE=2;class Rn extends rn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Rn.HEADER_SIZE+rn.GTIN_SIZE)throw new Y;let n=new ge;this.encodeCompressedGtin(n,Rn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Rn.HEADER_SIZE+rn.GTIN_SIZE,Rn.LAST_DIGIT_SIZE);n.append("(393"),n.append(a),n.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Rn.HEADER_SIZE+rn.GTIN_SIZE+Rn.LAST_DIGIT_SIZE,Rn.FIRST_THREE_DIGITS_SIZE);o/100==0&&n.append("0"),o/10==0&&n.append("0"),n.append(o);let d=this.getGeneralDecoder().decodeGeneralPurposeField(Rn.HEADER_SIZE+rn.GTIN_SIZE+Rn.LAST_DIGIT_SIZE+Rn.FIRST_THREE_DIGITS_SIZE,null);return n.append(d.getNewString()),n.toString()}}Rn.HEADER_SIZE=8,Rn.LAST_DIGIT_SIZE=2,Rn.FIRST_THREE_DIGITS_SIZE=10;class Qt extends Sl{constructor(n,a,o){super(n),this.dateCode=o,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE+Qt.DATE_SIZE)throw new Y;let n=new ge;return this.encodeCompressedGtin(n,Qt.HEADER_SIZE),this.encodeCompressedWeight(n,Qt.HEADER_SIZE+Qt.GTIN_SIZE,Qt.WEIGHT_SIZE),this.encodeCompressedDate(n,Qt.HEADER_SIZE+Qt.GTIN_SIZE+Qt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,a){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Qt.DATE_SIZE);if(o==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let d=o%32;o/=32;let f=o%12+1;o/=12;let x=o;x/10==0&&n.append("0"),n.append(x),f/10==0&&n.append("0"),n.append(f),d/10==0&&n.append("0"),n.append(d)}addWeightCode(n,a){n.append("("),n.append(this.firstAIdigits),n.append(a/1e5),n.append(")")}checkWeight(n){return n%1e5}}Qt.HEADER_SIZE=8,Qt.WEIGHT_SIZE=20,Qt.DATE_SIZE=16;function Br(R){try{if(R.get(1))return new ks(R);if(!R.get(2))return new kr(R);switch(ps.extractNumericValueFromBitArray(R,1,4)){case 4:return new gu(R);case 5:return new Pa(R)}switch(ps.extractNumericValueFromBitArray(R,1,5)){case 12:return new Es(R);case 13:return new Rn(R)}switch(ps.extractNumericValueFromBitArray(R,1,7)){case 56:return new Qt(R,"310","11");case 57:return new Qt(R,"320","11");case 58:return new Qt(R,"310","13");case 59:return new Qt(R,"320","13");case 60:return new Qt(R,"310","15");case 61:return new Qt(R,"320","15");case 62:return new Qt(R,"310","17");case 63:return new Qt(R,"320","17")}}catch(n){throw console.log(n),new He("unknown decoder: "+R)}}class bs{constructor(n,a,o,d){this.leftchar=n,this.rightchar=a,this.finderpattern=o,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,a){return n instanceof bs?bs.equalsOrNull(n.leftchar,a.leftchar)&&bs.equalsOrNull(n.rightchar,a.rightchar)&&bs.equalsOrNull(n.finderpattern,a.finderpattern):!1}static equalsOrNull(n,a){return n===null?a===null:bs.equals(n,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Mn{constructor(n,a,o){this.pairs=n,this.rowNumber=a,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,a){return n instanceof Mn?this.checkEqualitity(n,a)&&n.wasReversed===a.wasReversed:!1}checkEqualitity(n,a){if(!n||!a)return;let o;return n.forEach((d,f)=>{a.forEach(x=>{d.getLeftChar().getValue()===x.getLeftChar().getValue()&&d.getRightChar().getValue()===x.getRightChar().getValue()&&d.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(o=!0)})}),o}}class Ee extends Xn{constructor(n){super(...arguments),this.pairs=new Array(Ee.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,a,o){this.pairs.length=0,this.startFromEven=!1;try{return Ee.constructResult(this.decodeRow2pairs(n,a))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Ee.constructResult(this.decodeRow2pairs(n,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,a){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,n))}catch(f){if(f instanceof Y){if(!this.pairs.length)throw new Y;o=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(n,!1),d){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new Y}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return n&&(this.rows=this.rows.reverse()),a}checkRows(n,a){for(let o=a;o<this.rows.length;o++){let d=this.rows[o];this.pairs.length=0;for(let x of n)this.pairs.push(x.getPairs());if(this.pairs.push(d.getPairs()),!Ee.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(n);f.push(d);try{return this.checkRows(f,o+1)}catch(x){this.verbose&&console.log(x)}}throw new Y}static isValidSequence(n){for(let a of Ee.FINDER_PATTERN_SEQUENCES){if(n.length>a.length)continue;let o=!0;for(let d=0;d<n.length;d++)if(n[d].getFinderPattern().getValue()!=a[d]){o=!1;break}if(o)return!0}return!1}storeRow(n,a){let o=0,d=!1,f=!1;for(;o<this.rows.length;){let x=this.rows[o];if(x.getRowNumber()>n){f=x.isEquivalent(this.pairs);break}d=x.isEquivalent(this.pairs),o++}f||d||Ee.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Mn(this.pairs,n,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,a){for(let o of a)if(o.getPairs().length!==n.length){for(let d of o.getPairs())for(let f of n)if(bs.equals(d,f))break}}static isPartialRow(n,a){for(let o of a){let d=!0;for(let f of n){let x=!1;for(let p of o.getPairs())if(f.equals(p)){x=!0;break}if(!x){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(n){let a=mu.buildBitArray(n),d=Br(a).parseInformation(),f=n[0].getFinderPattern().getResultPoints(),x=n[n.length-1].getFinderPattern().getResultPoints(),p=[f[0],f[1],x[0],x[1]];return new _e(d,null,null,p,Le.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),a=n.getLeftChar(),o=n.getRightChar();if(o==null)return!1;let d=o.getChecksumPortion(),f=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);d+=v.getLeftChar().getChecksumPortion(),f++;let E=v.getRightChar();E!=null&&(d+=E.getChecksumPortion(),f++)}return d%=211,211*(f-4)+d==a.getValue()}static getNextSecondBar(n,a){let o;return n.get(a)?(o=n.getNextUnset(a),o=n.getNextSet(o)):(o=n.getNextSet(a),o=n.getNextUnset(o)),o}retrieveNextPair(n,a,o){let d=a.length%2==0;this.startFromEven&&(d=!d);let f,x=!0,p=-1;do this.findNextPair(n,a,p),f=this.parseFoundFinderPattern(n,o,d),f==null?p=Ee.getNextSecondBar(n,this.startEnd[0]):x=!1;while(x);let v=this.decodeDataCharacter(n,f,d,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new Y;let E;try{E=this.decodeDataCharacter(n,f,d,!1)}catch(S){E=null,this.verbose&&console.log(S)}return new bs(v,E,f,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,a,o){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let f=n.getSize(),x;o>=0?x=o:this.isEmptyPair(a)?x=0:x=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;x<f&&(v=!n.get(x),!!v);)x++;let E=0,S=x;for(let M=x;M<f;M++)if(n.get(M)!=v)d[E]++;else{if(E==3){if(p&&Ee.reverseCounters(d),Ee.isFinderPattern(d)){this.startEnd[0]=S,this.startEnd[1]=M;return}p&&Ee.reverseCounters(d),S+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,E--}else E++;d[E]=1,v=!v}throw new Y}static reverseCounters(n){let a=n.length;for(let o=0;o<a/2;++o){let d=n[o];n[o]=n[a-o-1],n[a-o-1]=d}}parseFoundFinderPattern(n,a,o){let d,f,x;if(o){let E=this.startEnd[0]-1;for(;E>=0&&!n.get(E);)E--;E++,d=this.startEnd[0]-E,f=E,x=this.startEnd[1]}else f=this.startEnd[0],x=n.getNextUnset(this.startEnd[1]+1),d=x-this.startEnd[1];let p=this.getDecodeFinderCounters();z.arraycopy(p,0,p,1,p.length-1),p[0]=d;let v;try{v=this.parseFinderValue(p,Ee.FINDER_PATTERNS)}catch{return null}return new ki(v,[f,x],f,x,a)}decodeDataCharacter(n,a,o,d){let f=this.getDataCharacterCounters();for(let tn=0;tn<f.length;tn++)f[tn]=0;if(d)Ee.recordPatternInReverse(n,a.getStartEnd()[0],f);else{Ee.recordPattern(n,a.getStartEnd()[1],f);for(let tn=0,Kn=f.length-1;tn<Kn;tn++,Kn--){let ws=f[tn];f[tn]=f[Kn],f[Kn]=ws}}let x=17,p=Ie.sum(new Int32Array(f))/x,v=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new Y;let E=this.getOddCounts(),S=this.getEvenCounts(),M=this.getOddRoundingErrors(),D=this.getEvenRoundingErrors();for(let tn=0;tn<f.length;tn++){let Kn=1*f[tn]/p,ws=Kn+.5;if(ws<1){if(Kn<.3)throw new Y;ws=1}else if(ws>8){if(Kn>8.7)throw new Y;ws=8}let Qr=tn/2;(tn&1)==0?(E[Qr]=ws,M[Qr]=Kn-ws):(S[Qr]=ws,D[Qr]=Kn-ws)}this.adjustOddEvenCounts(x);let P=4*a.getValue()+(o?0:2)+(d?0:1)-1,H=0,q=0;for(let tn=E.length-1;tn>=0;tn--){if(Ee.isNotA1left(a,o,d)){let Kn=Ee.WEIGHTS[P][2*tn];q+=E[tn]*Kn}H+=E[tn]}let ie=0;for(let tn=S.length-1;tn>=0;tn--)if(Ee.isNotA1left(a,o,d)){let Kn=Ee.WEIGHTS[P][2*tn+1];ie+=S[tn]*Kn}let me=q+ie;if((H&1)!=0||H>13||H<4)throw new Y;let Me=(13-H)/2,Te=Ee.SYMBOL_WIDEST[Me],Se=9-Te,_t=ei.getRSSvalue(E,Te,!0),bt=ei.getRSSvalue(S,Se,!1),Dn=Ee.EVEN_TOTAL_SUBSET[Me],_s=Ee.GSUM[Me],as=_t*Dn+bt+_s;return new Li(as,me)}static isNotA1left(n,a,o){return!(n.getValue()==0&&a&&o)}adjustOddEvenCounts(n){let a=Ie.sum(new Int32Array(this.getOddCounts())),o=Ie.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1;a>13?f=!0:a<4&&(d=!0);let x=!1,p=!1;o>13?p=!0:o<4&&(x=!0);let v=a+o-n,E=(a&1)==1,S=(o&1)==0;if(v==1)if(E){if(S)throw new Y;f=!0}else{if(!S)throw new Y;p=!0}else if(v==-1)if(E){if(S)throw new Y;d=!0}else{if(!S)throw new Y;x=!0}else if(v==0){if(E){if(!S)throw new Y;a<o?(d=!0,p=!0):(f=!0,x=!0)}else if(S)throw new Y}else throw new Y;if(d){if(f)throw new Y;Ee.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ee.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(p)throw new Y;Ee.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Ee.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ee.SYMBOL_WIDEST=[7,5,4,3,1],Ee.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ee.GSUM=[0,348,1388,2948,3988],Ee.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ee.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ee.FINDER_PAT_A=0,Ee.FINDER_PAT_B=1,Ee.FINDER_PAT_C=2,Ee.FINDER_PAT_D=3,Ee.FINDER_PAT_E=4,Ee.FINDER_PAT_F=5,Ee.FINDER_PATTERN_SEQUENCES=[[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_C,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_C],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_E,Ee.FINDER_PAT_B,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_E],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F],[Ee.FINDER_PAT_A,Ee.FINDER_PAT_A,Ee.FINDER_PAT_B,Ee.FINDER_PAT_B,Ee.FINDER_PAT_C,Ee.FINDER_PAT_D,Ee.FINDER_PAT_D,Ee.FINDER_PAT_E,Ee.FINDER_PAT_E,Ee.FINDER_PAT_F,Ee.FINDER_PAT_F]],Ee.MAX_PAIRS=11;class xu extends Li{constructor(n,a,o){super(n,a),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $t extends Xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,a,o){const d=this.decodePair(a,!1,n,o);$t.addOrTally(this.possibleLeftPairs,d),a.reverse();let f=this.decodePair(a,!0,n,o);$t.addOrTally(this.possibleRightPairs,f),a.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&$t.checkChecksum(x,p))return $t.constructResult(x,p)}throw new Y}static addOrTally(n,a){if(a==null)return;let o=!1;for(let d of n)if(d.getValue()===a.getValue()){d.incrementCount(),o=!0;break}o||n.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,a){let o=4537077*n.getValue()+a.getValue(),d=new String(o).toString(),f=new ge;for(let E=13-d.length;E>0;E--)f.append("0");f.append(d);let x=0;for(let E=0;E<13;E++){let S=f.charAt(E).charCodeAt(0)-48;x+=(E&1)===0?3*S:S}x=10-x%10,x===10&&(x=0),f.append(x.toString());let p=n.getFinderPattern().getResultPoints(),v=a.getFinderPattern().getResultPoints();return new _e(f.toString(),null,0,[p[0],p[1],v[0],v[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(n,a){let o=(n.getChecksumPortion()+16*a.getChecksumPortion())%79,d=9*n.getFinderPattern().getValue()+a.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,o===d}decodePair(n,a,o,d){try{let f=this.findFinderPattern(n,a),x=this.parseFoundFinderPattern(n,o,a,f),p=d==null?null:d.get(ce.NEED_RESULT_POINT_CALLBACK);if(p!=null){let S=(f[0]+f[1])/2;a&&(S=n.getSize()-1-S),p.foundPossibleResultPoint(new je(S,o))}let v=this.decodeDataCharacter(n,x,!0),E=this.decodeDataCharacter(n,x,!1);return new xu(1597*v.getValue()+E.getValue(),v.getChecksumPortion()+4*E.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(n,a,o){let d=this.getDataCharacterCounters();for(let ie=0;ie<d.length;ie++)d[ie]=0;if(o)Gt.recordPatternInReverse(n,a.getStartEnd()[0],d);else{Gt.recordPattern(n,a.getStartEnd()[1]+1,d);for(let ie=0,me=d.length-1;ie<me;ie++,me--){let Me=d[ie];d[ie]=d[me],d[me]=Me}}let f=o?16:15,x=Ie.sum(new Int32Array(d))/f,p=this.getOddCounts(),v=this.getEvenCounts(),E=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let ie=0;ie<d.length;ie++){let me=d[ie]/x,Me=Math.floor(me+.5);Me<1?Me=1:Me>8&&(Me=8);let Te=Math.floor(ie/2);(ie&1)===0?(p[Te]=Me,E[Te]=me-Me):(v[Te]=Me,S[Te]=me-Me)}this.adjustOddEvenCounts(o,f);let M=0,D=0;for(let ie=p.length-1;ie>=0;ie--)D*=9,D+=p[ie],M+=p[ie];let P=0,H=0;for(let ie=v.length-1;ie>=0;ie--)P*=9,P+=v[ie],H+=v[ie];let q=D+3*P;if(o){if((M&1)!==0||M>12||M<4)throw new Y;let ie=(12-M)/2,me=$t.OUTSIDE_ODD_WIDEST[ie],Me=9-me,Te=ei.getRSSvalue(p,me,!1),Se=ei.getRSSvalue(v,Me,!0),_t=$t.OUTSIDE_EVEN_TOTAL_SUBSET[ie],bt=$t.OUTSIDE_GSUM[ie];return new Li(Te*_t+Se+bt,q)}else{if((H&1)!==0||H>10||H<4)throw new Y;let ie=(10-H)/2,me=$t.INSIDE_ODD_WIDEST[ie],Me=9-me,Te=ei.getRSSvalue(p,me,!0),Se=ei.getRSSvalue(v,Me,!1),_t=$t.INSIDE_ODD_TOTAL_SUBSET[ie],bt=$t.INSIDE_GSUM[ie];return new Li(Se*_t+Te+bt,q)}}findFinderPattern(n,a){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let d=n.getSize(),f=!1,x=0;for(;x<d&&(f=!n.get(x),a!==f);)x++;let p=0,v=x;for(let E=x;E<d;E++)if(n.get(E)!==f)o[p]++;else{if(p===3){if(Xn.isFinderPattern(o))return[v,E];v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,f=!f}throw new Y}parseFoundFinderPattern(n,a,o,d){let f=n.get(d[0]),x=d[0]-1;for(;x>=0&&f!==n.get(x);)x--;x++;const p=d[0]-x,v=this.getDecodeFinderCounters(),E=new Int32Array(v.length);z.arraycopy(v,0,E,1,v.length-1),E[0]=p;const S=this.parseFinderValue(E,$t.FINDER_PATTERNS);let M=x,D=d[1];return o&&(M=n.getSize()-1-M,D=n.getSize()-1-D),new ki(S,[x,d[1]],M,D,a)}adjustOddEvenCounts(n,a){let o=Ie.sum(new Int32Array(this.getOddCounts())),d=Ie.sum(new Int32Array(this.getEvenCounts())),f=!1,x=!1,p=!1,v=!1;n?(o>12?x=!0:o<4&&(f=!0),d>12?v=!0:d<4&&(p=!0)):(o>11?x=!0:o<5&&(f=!0),d>10?v=!0:d<4&&(p=!0));let E=o+d-a,S=(o&1)===(n?1:0),M=(d&1)===1;if(E===1)if(S){if(M)throw new Y;x=!0}else{if(!M)throw new Y;v=!0}else if(E===-1)if(S){if(M)throw new Y;f=!0}else{if(!M)throw new Y;p=!0}else if(E===0){if(S){if(!M)throw new Y;o<d?(f=!0,v=!0):(x=!0,p=!0)}else if(M)throw new Y}else throw new Y;if(f){if(x)throw new Y;Xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&Xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new Y;Xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&Xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$t.OUTSIDE_GSUM=[0,161,961,2015,2715],$t.INSIDE_GSUM=[0,336,1036,1516],$t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$t.INSIDE_ODD_WIDEST=[2,4,6,8],$t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Bs extends Gt{constructor(n,a){super(),this.readers=[],this.verbose=a===!0;const o=n?n.get(ce.POSSIBLE_FORMATS):null,d=n&&n.get(ce.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(Le.EAN_13)||o.includes(Le.UPC_A)||o.includes(Le.EAN_8)||o.includes(Le.UPC_E))&&this.readers.push(new Vo(n)),o.includes(Le.CODE_39)&&this.readers.push(new Jt(d)),o.includes(Le.CODE_128)&&this.readers.push(new Re),o.includes(Le.ITF)&&this.readers.push(new yt),o.includes(Le.RSS_14)&&this.readers.push(new $t),o.includes(Le.RSS_EXPANDED)&&this.readers.push(new Ee(this.verbose))):(this.readers.push(new Vo(n)),this.readers.push(new Jt),this.readers.push(new Vo(n)),this.readers.push(new Re),this.readers.push(new yt),this.readers.push(new $t),this.readers.push(new Ee(this.verbose)))}decodeRow(n,a,o){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(n,a,o)}catch{}throw new Y}reset(){this.readers.forEach(n=>n.reset())}}class Gh extends Be{constructor(n=500,a){super(new Bs(a),n,a)}}class Yt{constructor(n,a,o){this.ecCodewords=n,this.ecBlocks=[a],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ft{constructor(n,a){this.count=n,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Dt{constructor(n,a,o,d,f,x){this.versionNumber=n,this.symbolSizeRows=a,this.symbolSizeColumns=o,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=f,this.ecBlocks=x;let p=0;const v=x.getECCodewords(),E=x.getECBlocks();for(let S of E)p+=S.getCount()*(S.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,a){if((n&1)!==0||(a&1)!==0)throw new G;for(let o of Dt.VERSIONS)if(o.symbolSizeRows===n&&o.symbolSizeColumns===a)return o;throw new G}toString(){return""+this.versionNumber}static buildVersions(){return[new Dt(1,10,10,8,8,new Yt(5,new Ft(1,3))),new Dt(2,12,12,10,10,new Yt(7,new Ft(1,5))),new Dt(3,14,14,12,12,new Yt(10,new Ft(1,8))),new Dt(4,16,16,14,14,new Yt(12,new Ft(1,12))),new Dt(5,18,18,16,16,new Yt(14,new Ft(1,18))),new Dt(6,20,20,18,18,new Yt(18,new Ft(1,22))),new Dt(7,22,22,20,20,new Yt(20,new Ft(1,30))),new Dt(8,24,24,22,22,new Yt(24,new Ft(1,36))),new Dt(9,26,26,24,24,new Yt(28,new Ft(1,44))),new Dt(10,32,32,14,14,new Yt(36,new Ft(1,62))),new Dt(11,36,36,16,16,new Yt(42,new Ft(1,86))),new Dt(12,40,40,18,18,new Yt(48,new Ft(1,114))),new Dt(13,44,44,20,20,new Yt(56,new Ft(1,144))),new Dt(14,48,48,22,22,new Yt(68,new Ft(1,174))),new Dt(15,52,52,24,24,new Yt(42,new Ft(2,102))),new Dt(16,64,64,14,14,new Yt(56,new Ft(2,140))),new Dt(17,72,72,16,16,new Yt(36,new Ft(4,92))),new Dt(18,80,80,18,18,new Yt(48,new Ft(4,114))),new Dt(19,88,88,20,20,new Yt(56,new Ft(4,144))),new Dt(20,96,96,22,22,new Yt(68,new Ft(4,174))),new Dt(21,104,104,24,24,new Yt(56,new Ft(6,136))),new Dt(22,120,120,18,18,new Yt(68,new Ft(6,175))),new Dt(23,132,132,20,20,new Yt(62,new Ft(8,163))),new Dt(24,144,144,22,22,new Yt(62,new Ft(8,156),new Ft(2,155))),new Dt(25,8,18,6,16,new Yt(7,new Ft(1,5))),new Dt(26,8,32,6,14,new Yt(11,new Ft(1,10))),new Dt(27,12,26,10,24,new Yt(14,new Ft(1,16))),new Dt(28,12,36,10,16,new Yt(18,new Ft(1,22))),new Dt(29,16,36,14,16,new Yt(24,new Ft(1,32))),new Dt(30,16,48,14,22,new Yt(28,new Ft(1,49)))]}}Dt.VERSIONS=Dt.buildVersions();class Pr{constructor(n){const a=n.getHeight();if(a<8||a>144||(a&1)!==0)throw new G;this.version=Pr.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Ae(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const a=n.getHeight(),o=n.getWidth();return Dt.getVersionForDimensions(a,o)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let a=0,o=4,d=0;const f=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let p=!1,v=!1,E=!1,S=!1;do if(o===f&&d===0&&!p)n[a++]=this.readCorner1(f,x)&255,o-=2,d+=2,p=!0;else if(o===f-2&&d===0&&(x&3)!==0&&!v)n[a++]=this.readCorner2(f,x)&255,o-=2,d+=2,v=!0;else if(o===f+4&&d===2&&(x&7)===0&&!E)n[a++]=this.readCorner3(f,x)&255,o-=2,d+=2,E=!0;else if(o===f-2&&d===0&&(x&7)===4&&!S)n[a++]=this.readCorner4(f,x)&255,o-=2,d+=2,S=!0;else{do o<f&&d>=0&&!this.readMappingMatrix.get(d,o)&&(n[a++]=this.readUtah(o,d,f,x)&255),o-=2,d+=2;while(o>=0&&d<x);o+=1,d+=3;do o>=0&&d<x&&!this.readMappingMatrix.get(d,o)&&(n[a++]=this.readUtah(o,d,f,x)&255),o+=2,d-=2;while(o<f&&d>=0);o+=3,d+=1}while(o<f||d<x);if(a!==this.version.getTotalCodewords())throw new G;return n}readModule(n,a,o,d){return n<0&&(n+=o,a+=4-(o+4&7)),a<0&&(a+=d,n+=4-(d+4&7)),this.readMappingMatrix.set(a,n),this.mappingBitMatrix.get(a,n)}readUtah(n,a,o,d){let f=0;return this.readModule(n-2,a-2,o,d)&&(f|=1),f<<=1,this.readModule(n-2,a-1,o,d)&&(f|=1),f<<=1,this.readModule(n-1,a-2,o,d)&&(f|=1),f<<=1,this.readModule(n-1,a-1,o,d)&&(f|=1),f<<=1,this.readModule(n-1,a,o,d)&&(f|=1),f<<=1,this.readModule(n,a-2,o,d)&&(f|=1),f<<=1,this.readModule(n,a-1,o,d)&&(f|=1),f<<=1,this.readModule(n,a,o,d)&&(f|=1),f}readCorner1(n,a){let o=0;return this.readModule(n-1,0,n,a)&&(o|=1),o<<=1,this.readModule(n-1,1,n,a)&&(o|=1),o<<=1,this.readModule(n-1,2,n,a)&&(o|=1),o<<=1,this.readModule(0,a-2,n,a)&&(o|=1),o<<=1,this.readModule(0,a-1,n,a)&&(o|=1),o<<=1,this.readModule(1,a-1,n,a)&&(o|=1),o<<=1,this.readModule(2,a-1,n,a)&&(o|=1),o<<=1,this.readModule(3,a-1,n,a)&&(o|=1),o}readCorner2(n,a){let o=0;return this.readModule(n-3,0,n,a)&&(o|=1),o<<=1,this.readModule(n-2,0,n,a)&&(o|=1),o<<=1,this.readModule(n-1,0,n,a)&&(o|=1),o<<=1,this.readModule(0,a-4,n,a)&&(o|=1),o<<=1,this.readModule(0,a-3,n,a)&&(o|=1),o<<=1,this.readModule(0,a-2,n,a)&&(o|=1),o<<=1,this.readModule(0,a-1,n,a)&&(o|=1),o<<=1,this.readModule(1,a-1,n,a)&&(o|=1),o}readCorner3(n,a){let o=0;return this.readModule(n-1,0,n,a)&&(o|=1),o<<=1,this.readModule(n-1,a-1,n,a)&&(o|=1),o<<=1,this.readModule(0,a-3,n,a)&&(o|=1),o<<=1,this.readModule(0,a-2,n,a)&&(o|=1),o<<=1,this.readModule(0,a-1,n,a)&&(o|=1),o<<=1,this.readModule(1,a-3,n,a)&&(o|=1),o<<=1,this.readModule(1,a-2,n,a)&&(o|=1),o<<=1,this.readModule(1,a-1,n,a)&&(o|=1),o}readCorner4(n,a){let o=0;return this.readModule(n-3,0,n,a)&&(o|=1),o<<=1,this.readModule(n-2,0,n,a)&&(o|=1),o<<=1,this.readModule(n-1,0,n,a)&&(o|=1),o<<=1,this.readModule(0,a-2,n,a)&&(o|=1),o<<=1,this.readModule(0,a-1,n,a)&&(o|=1),o<<=1,this.readModule(1,a-1,n,a)&&(o|=1),o<<=1,this.readModule(2,a-1,n,a)&&(o|=1),o<<=1,this.readModule(3,a-1,n,a)&&(o|=1),o}extractDataRegion(n){const a=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(n.getHeight()!==a)throw new T("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),x=a/d|0,p=o/f|0,v=x*d,E=p*f,S=new Ae(E,v);for(let M=0;M<x;++M){const D=M*d;for(let P=0;P<p;++P){const H=P*f;for(let q=0;q<d;++q){const ie=M*(d+2)+1+q,me=D+q;for(let Me=0;Me<f;++Me){const Te=P*(f+2)+1+Me;if(n.get(Te,ie)){const Se=H+Me;S.set(Se,me)}}}}}return S}}class Ur{constructor(n,a){this.numDataCodewords=n,this.codewords=a}static getDataBlocks(n,a){const o=a.getECBlocks();let d=0;const f=o.getECBlocks();for(let q of f)d+=q.getCount();const x=new Array(d);let p=0;for(let q of f)for(let ie=0;ie<q.getCount();ie++){const me=q.getDataCodewords(),Me=o.getECCodewords()+me;x[p++]=new Ur(me,new Uint8Array(Me))}const E=x[0].codewords.length-o.getECCodewords(),S=E-1;let M=0;for(let q=0;q<S;q++)for(let ie=0;ie<p;ie++)x[ie].codewords[q]=n[M++];const D=a.getVersionNumber()===24,P=D?8:p;for(let q=0;q<P;q++)x[q].codewords[E-1]=n[M++];const H=x[0].codewords.length;for(let q=E;q<H;q++)for(let ie=0;ie<p;ie++){const me=D?(ie+8)%p:ie,Me=D&&me>7?q-1:q;x[me].codewords[Me]=n[M++]}if(M!==n.length)throw new T;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ps{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new T(""+n);let a=0,o=this.bitOffset,d=this.byteOffset;const f=this.bytes;if(o>0){const x=8-o,p=n<x?n:x,v=x-p,E=255>>8-p<<v;a=(f[d]&E)>>v,n-=p,o+=p,o===8&&(o=0,d++)}if(n>0){for(;n>=8;)a=a<<8|f[d]&255,d++,n-=8;if(n>0){const x=8-n,p=255>>x<<x;a=a<<n|(f[d]&p)>>x,o+=n}}return this.bitOffset=o,this.byteOffset=d,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class yi{static decode(n){const a=new Ps(n),o=new ge,d=new ge,f=new Array;let x=qt.ASCII_ENCODE;do if(x===qt.ASCII_ENCODE)x=this.decodeAsciiSegment(a,o,d);else{switch(x){case qt.C40_ENCODE:this.decodeC40Segment(a,o);break;case qt.TEXT_ENCODE:this.decodeTextSegment(a,o);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,o);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(a,o);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(a,o,f);break;default:throw new G}x=qt.ASCII_ENCODE}while(x!==qt.PAD_ENCODE&&a.available()>0);return d.length()>0&&o.append(d.toString()),new wt(n,o.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(n,a,o){let d=!1;do{let f=n.readBits(8);if(f===0)throw new G;if(f<=128)return d&&(f+=128),a.append(String.fromCharCode(f-1)),qt.ASCII_ENCODE;if(f===129)return qt.PAD_ENCODE;if(f<=229){const x=f-130;x<10&&a.append("0"),a.append(""+x)}else switch(f){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:a.append("[)>05"),o.insert(0,"");break;case 237:a.append("[)>06"),o.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||n.available()!==0)throw new G;break}}while(n.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(n,a){let o=!1;const d=[];let f=0;do{if(n.available()===8)return;const x=n.readBits(8);if(x===254)return;this.parseTwoBytes(x,n.readBits(8),d);for(let p=0;p<3;p++){const v=d[p];switch(f){case 0:if(v<3)f=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[v];o?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):a.append(E)}else throw new G;break;case 1:o?(a.append(String.fromCharCode(v+128)),o=!1):a.append(String.fromCharCode(v)),f=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[v];o?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):a.append(E)}else switch(v){case 27:a.append("");break;case 30:o=!0;break;default:throw new G}f=0;break;case 3:o?(a.append(String.fromCharCode(v+224)),o=!1):a.append(String.fromCharCode(v+96)),f=0;break;default:throw new G}}}while(n.available()>0)}static decodeTextSegment(n,a){let o=!1,d=[],f=0;do{if(n.available()===8)return;const x=n.readBits(8);if(x===254)return;this.parseTwoBytes(x,n.readBits(8),d);for(let p=0;p<3;p++){const v=d[p];switch(f){case 0:if(v<3)f=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[v];o?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):a.append(E)}else throw new G;break;case 1:o?(a.append(String.fromCharCode(v+128)),o=!1):a.append(String.fromCharCode(v)),f=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[v];o?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):a.append(E)}else switch(v){case 27:a.append("");break;case 30:o=!0;break;default:throw new G}f=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[v];o?(a.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):a.append(E),f=0}else throw new G;break;default:throw new G}}}while(n.available()>0)}static decodeAnsiX12Segment(n,a){const o=[];do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),o);for(let f=0;f<3;f++){const x=o[f];switch(x){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(x<14)a.append(String.fromCharCode(x+44));else if(x<40)a.append(String.fromCharCode(x+51));else throw new G;break}}}while(n.available()>0)}static parseTwoBytes(n,a,o){let d=(n<<8)+a-1,f=Math.floor(d/1600);o[0]=f,d-=f*1600,f=Math.floor(d/40),o[1]=f,o[2]=d-f*40}static decodeEdifactSegment(n,a){do{if(n.available()<=16)return;for(let o=0;o<4;o++){let d=n.readBits(6);if(d===31){const f=8-n.getBitOffset();f!==8&&n.readBits(f);return}(d&32)===0&&(d|=64),a.append(String.fromCharCode(d))}}while(n.available()>0)}static decodeBase256Segment(n,a,o){let d=1+n.getByteOffset();const f=this.unrandomize255State(n.readBits(8),d++);let x;if(f===0?x=n.available()/8|0:f<250?x=f:x=250*(f-249)+this.unrandomize255State(n.readBits(8),d++),x<0)throw new G;const p=new Uint8Array(x);for(let v=0;v<x;v++){if(n.available()<8)throw new G;p[v]=this.unrandomize255State(n.readBits(8),d++)}o.push(p);try{a.append(Z.decode(p,se.ISO88591))}catch(v){throw new He("Platform does not support required encoding: "+v.message)}}static unrandomize255State(n,a){const o=149*a%255+1,d=n-o;return d>=0?d:d+256}}yi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yi.TEXT_SHIFT2_SET_CHARS=yi.C40_SHIFT2_SET_CHARS,yi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Yh{constructor(){this.rsDecoder=new mt(de.DATA_MATRIX_FIELD_256)}decode(n){const a=new Pr(n),o=a.getVersion(),d=a.readCodewords(),f=Ur.getDataBlocks(d,o);let x=0;for(let E of f)x+=E.getNumDataCodewords();const p=new Uint8Array(x),v=f.length;for(let E=0;E<v;E++){const S=f[E],M=S.getCodewords(),D=S.getNumDataCodewords();this.correctErrors(M,D);for(let P=0;P<D;P++)p[P*v+E]=M[P]}return yi.decode(p)}correctErrors(n,a){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-a)}catch{throw new U}for(let d=0;d<a;d++)n[d]=o[d]}}class bn{constructor(n){this.image=n,this.rectangleDetector=new ft(this.image)}detect(){const n=this.rectangleDetector.detect();let a=this.detectSolid1(n);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new Y;a=this.shiftToModuleCenter(a);const o=a[0],d=a[1],f=a[2],x=a[3];let p=this.transitionsBetween(o,x)+1,v=this.transitionsBetween(f,x)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let E=bn.sampleGrid(this.image,o,d,f,x,p,v);return new Tn(E,[o,d,f,x])}static shiftPoint(n,a,o){let d=(a.getX()-n.getX())/(o+1),f=(a.getY()-n.getY())/(o+1);return new je(n.getX()+d,n.getY()+f)}static moveAway(n,a,o){let d=n.getX(),f=n.getY();return d<a?d-=1:d+=1,f<o?f-=1:f+=1,new je(d,f)}detectSolid1(n){let a=n[0],o=n[1],d=n[3],f=n[2],x=this.transitionsBetween(a,o),p=this.transitionsBetween(o,d),v=this.transitionsBetween(d,f),E=this.transitionsBetween(f,a),S=x,M=[f,a,o,d];return S>p&&(S=p,M[0]=a,M[1]=o,M[2]=d,M[3]=f),S>v&&(S=v,M[0]=o,M[1]=d,M[2]=f,M[3]=a),S>E&&(M[0]=d,M[1]=f,M[2]=a,M[3]=o),M}detectSolid2(n){let a=n[0],o=n[1],d=n[2],f=n[3],x=this.transitionsBetween(a,f),p=bn.shiftPoint(o,d,(x+1)*4),v=bn.shiftPoint(d,o,(x+1)*4),E=this.transitionsBetween(p,a),S=this.transitionsBetween(v,f);return E<S?(n[0]=a,n[1]=o,n[2]=d,n[3]=f):(n[0]=o,n[1]=d,n[2]=f,n[3]=a),n}correctTopRight(n){let a=n[0],o=n[1],d=n[2],f=n[3],x=this.transitionsBetween(a,f),p=this.transitionsBetween(o,f),v=bn.shiftPoint(a,o,(p+1)*4),E=bn.shiftPoint(d,o,(x+1)*4);x=this.transitionsBetween(v,f),p=this.transitionsBetween(E,f);let S=new je(f.getX()+(d.getX()-o.getX())/(x+1),f.getY()+(d.getY()-o.getY())/(x+1)),M=new je(f.getX()+(a.getX()-o.getX())/(p+1),f.getY()+(a.getY()-o.getY())/(p+1));if(!this.isValid(S))return this.isValid(M)?M:null;if(!this.isValid(M))return S;let D=this.transitionsBetween(v,S)+this.transitionsBetween(E,S),P=this.transitionsBetween(v,M)+this.transitionsBetween(E,M);return D>P?S:M}shiftToModuleCenter(n){let a=n[0],o=n[1],d=n[2],f=n[3],x=this.transitionsBetween(a,f)+1,p=this.transitionsBetween(d,f)+1,v=bn.shiftPoint(a,o,p*4),E=bn.shiftPoint(d,o,x*4);x=this.transitionsBetween(v,f)+1,p=this.transitionsBetween(E,f)+1,(x&1)===1&&(x+=1),(p&1)===1&&(p+=1);let S=(a.getX()+o.getX()+d.getX()+f.getX())/4,M=(a.getY()+o.getY()+d.getY()+f.getY())/4;a=bn.moveAway(a,S,M),o=bn.moveAway(o,S,M),d=bn.moveAway(d,S,M),f=bn.moveAway(f,S,M);let D,P;return v=bn.shiftPoint(a,o,p*4),v=bn.shiftPoint(v,f,x*4),D=bn.shiftPoint(o,a,p*4),D=bn.shiftPoint(D,d,x*4),E=bn.shiftPoint(d,f,p*4),E=bn.shiftPoint(E,o,x*4),P=bn.shiftPoint(f,d,p*4),P=bn.shiftPoint(P,a,x*4),[v,D,E,P]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,a,o,d,f,x,p){return nt.getInstance().sampleGrid(n,x,p,.5,.5,x-.5,.5,x-.5,p-.5,.5,p-.5,a.getX(),a.getY(),f.getX(),f.getY(),d.getX(),d.getY(),o.getX(),o.getY())}transitionsBetween(n,a){let o=Math.trunc(n.getX()),d=Math.trunc(n.getY()),f=Math.trunc(a.getX()),x=Math.trunc(a.getY()),p=Math.abs(x-d)>Math.abs(f-o);if(p){let q=o;o=d,d=q,q=f,f=x,x=q}let v=Math.abs(f-o),E=Math.abs(x-d),S=-v/2,M=d<x?1:-1,D=o<f?1:-1,P=0,H=this.image.get(p?d:o,p?o:d);for(let q=o,ie=d;q!==f;q+=D){let me=this.image.get(p?ie:q,p?q:ie);if(me!==H&&(P++,H=me),S+=E,S>0){if(ie===x)break;ie+=M,S-=v}}return P}}class vi{constructor(){this.decoder=new Yh}decode(n,a=null){let o,d;if(a!=null&&a.has(ce.PURE_BARCODE)){const E=vi.extractPureBits(n.getBlackMatrix());o=this.decoder.decode(E),d=vi.NO_POINTS}else{const E=new bn(n.getBlackMatrix()).detect();o=this.decoder.decode(E.getBits()),d=E.getPoints()}const f=o.getRawBytes(),x=new _e(o.getText(),f,8*f.length,d,Le.DATA_MATRIX,z.currentTimeMillis()),p=o.getByteSegments();p!=null&&x.putMetadata(rt.BYTE_SEGMENTS,p);const v=o.getECLevel();return v!=null&&x.putMetadata(rt.ERROR_CORRECTION_LEVEL,v),x}reset(){}static extractPureBits(n){const a=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(a==null||o==null)throw new Y;const d=this.moduleSize(a,n);let f=a[1];const x=o[1];let p=a[0];const E=(o[0]-p+1)/d,S=(x-f+1)/d;if(E<=0||S<=0)throw new Y;const M=d/2;f+=M,p+=M;const D=new Ae(E,S);for(let P=0;P<S;P++){const H=f+P*d;for(let q=0;q<E;q++)n.get(p+q*d,H)&&D.set(q,P)}return D}static moduleSize(n,a){const o=a.getWidth();let d=n[0];const f=n[1];for(;d<o&&a.get(d,f);)d++;if(d===o)throw new Y;const x=d-n[0];if(x===0)throw new Y;return x}}vi.NO_POINTS=[];class _l extends Be{constructor(n=500){super(new vi,n)}}var zr;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(zr||(zr={}));class It{constructor(n,a,o){this.value=n,this.stringValue=a,this.bits=o,It.FOR_BITS.set(o,this),It.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return It.L;case"M":return It.M;case"Q":return It.Q;case"H":return It.H;default:throw new I(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof It))return!1;const a=n;return this.value===a.value}static forBits(n){if(n<0||n>=It.FOR_BITS.size)throw new T;return It.FOR_BITS.get(n)}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.L=new It(zr.L,"L",1),It.M=new It(zr.M,"M",0),It.Q=new It(zr.Q,"Q",3),It.H=new It(zr.H,"H",2);class Hn{constructor(n){this.errorCorrectionLevel=It.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,a){return W.bitCount(n^a)}static decodeFormatInformation(n,a){const o=Hn.doDecodeFormatInformation(n,a);return o!==null?o:Hn.doDecodeFormatInformation(n^Hn.FORMAT_INFO_MASK_QR,a^Hn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,a){let o=Number.MAX_SAFE_INTEGER,d=0;for(const f of Hn.FORMAT_INFO_DECODE_LOOKUP){const x=f[0];if(x===n||x===a)return new Hn(f[1]);let p=Hn.numBitsDiffering(n,x);p<o&&(d=f[1],o=p),n!==a&&(p=Hn.numBitsDiffering(a,x),p<o&&(d=f[1],o=p))}return o<=3?new Hn(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Hn))return!1;const a=n;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Hn.FORMAT_INFO_MASK_QR=21522,Hn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class re{constructor(n,...a){this.ecCodewordsPerBlock=n,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const a=this.ecBlocks;for(const o of a)n+=o.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class L{constructor(n,a){this.count=n,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Qe{constructor(n,a,...o){this.versionNumber=n,this.alignmentPatternCenters=a,this.ecBlocks=o;let d=0;const f=o[0].getECCodewordsPerBlock(),x=o[0].getECBlocks();for(const p of x)d+=p.getCount()*(p.getDataCodewords()+f);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new G;try{return this.getVersionForNumber((n-17)/4)}catch{throw new G}}static getVersionForNumber(n){if(n<1||n>40)throw new T;return Qe.VERSIONS[n-1]}static decodeVersionInformation(n){let a=Number.MAX_SAFE_INTEGER,o=0;for(let d=0;d<Qe.VERSION_DECODE_INFO.length;d++){const f=Qe.VERSION_DECODE_INFO[d];if(f===n)return Qe.getVersionForNumber(d+7);const x=Hn.numBitsDiffering(n,f);x<a&&(o=d+7,a=x)}return a<=3?Qe.getVersionForNumber(o):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),a=new Ae(n);a.setRegion(0,0,9,9),a.setRegion(n-8,0,8,9),a.setRegion(0,n-8,9,8);const o=this.alignmentPatternCenters.length;for(let d=0;d<o;d++){const f=this.alignmentPatternCenters[d]-2;for(let x=0;x<o;x++)d===0&&(x===0||x===o-1)||d===o-1&&x===0||a.setRegion(this.alignmentPatternCenters[x]-2,f,5,5)}return a.setRegion(6,9,1,n-17),a.setRegion(9,6,n-17,1),this.versionNumber>6&&(a.setRegion(n-11,0,3,6),a.setRegion(0,n-11,6,3)),a}toString(){return""+this.versionNumber}}Qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Qe.VERSIONS=[new Qe(1,new Int32Array(0),new re(7,new L(1,19)),new re(10,new L(1,16)),new re(13,new L(1,13)),new re(17,new L(1,9))),new Qe(2,Int32Array.from([6,18]),new re(10,new L(1,34)),new re(16,new L(1,28)),new re(22,new L(1,22)),new re(28,new L(1,16))),new Qe(3,Int32Array.from([6,22]),new re(15,new L(1,55)),new re(26,new L(1,44)),new re(18,new L(2,17)),new re(22,new L(2,13))),new Qe(4,Int32Array.from([6,26]),new re(20,new L(1,80)),new re(18,new L(2,32)),new re(26,new L(2,24)),new re(16,new L(4,9))),new Qe(5,Int32Array.from([6,30]),new re(26,new L(1,108)),new re(24,new L(2,43)),new re(18,new L(2,15),new L(2,16)),new re(22,new L(2,11),new L(2,12))),new Qe(6,Int32Array.from([6,34]),new re(18,new L(2,68)),new re(16,new L(4,27)),new re(24,new L(4,19)),new re(28,new L(4,15))),new Qe(7,Int32Array.from([6,22,38]),new re(20,new L(2,78)),new re(18,new L(4,31)),new re(18,new L(2,14),new L(4,15)),new re(26,new L(4,13),new L(1,14))),new Qe(8,Int32Array.from([6,24,42]),new re(24,new L(2,97)),new re(22,new L(2,38),new L(2,39)),new re(22,new L(4,18),new L(2,19)),new re(26,new L(4,14),new L(2,15))),new Qe(9,Int32Array.from([6,26,46]),new re(30,new L(2,116)),new re(22,new L(3,36),new L(2,37)),new re(20,new L(4,16),new L(4,17)),new re(24,new L(4,12),new L(4,13))),new Qe(10,Int32Array.from([6,28,50]),new re(18,new L(2,68),new L(2,69)),new re(26,new L(4,43),new L(1,44)),new re(24,new L(6,19),new L(2,20)),new re(28,new L(6,15),new L(2,16))),new Qe(11,Int32Array.from([6,30,54]),new re(20,new L(4,81)),new re(30,new L(1,50),new L(4,51)),new re(28,new L(4,22),new L(4,23)),new re(24,new L(3,12),new L(8,13))),new Qe(12,Int32Array.from([6,32,58]),new re(24,new L(2,92),new L(2,93)),new re(22,new L(6,36),new L(2,37)),new re(26,new L(4,20),new L(6,21)),new re(28,new L(7,14),new L(4,15))),new Qe(13,Int32Array.from([6,34,62]),new re(26,new L(4,107)),new re(22,new L(8,37),new L(1,38)),new re(24,new L(8,20),new L(4,21)),new re(22,new L(12,11),new L(4,12))),new Qe(14,Int32Array.from([6,26,46,66]),new re(30,new L(3,115),new L(1,116)),new re(24,new L(4,40),new L(5,41)),new re(20,new L(11,16),new L(5,17)),new re(24,new L(11,12),new L(5,13))),new Qe(15,Int32Array.from([6,26,48,70]),new re(22,new L(5,87),new L(1,88)),new re(24,new L(5,41),new L(5,42)),new re(30,new L(5,24),new L(7,25)),new re(24,new L(11,12),new L(7,13))),new Qe(16,Int32Array.from([6,26,50,74]),new re(24,new L(5,98),new L(1,99)),new re(28,new L(7,45),new L(3,46)),new re(24,new L(15,19),new L(2,20)),new re(30,new L(3,15),new L(13,16))),new Qe(17,Int32Array.from([6,30,54,78]),new re(28,new L(1,107),new L(5,108)),new re(28,new L(10,46),new L(1,47)),new re(28,new L(1,22),new L(15,23)),new re(28,new L(2,14),new L(17,15))),new Qe(18,Int32Array.from([6,30,56,82]),new re(30,new L(5,120),new L(1,121)),new re(26,new L(9,43),new L(4,44)),new re(28,new L(17,22),new L(1,23)),new re(28,new L(2,14),new L(19,15))),new Qe(19,Int32Array.from([6,30,58,86]),new re(28,new L(3,113),new L(4,114)),new re(26,new L(3,44),new L(11,45)),new re(26,new L(17,21),new L(4,22)),new re(26,new L(9,13),new L(16,14))),new Qe(20,Int32Array.from([6,34,62,90]),new re(28,new L(3,107),new L(5,108)),new re(26,new L(3,41),new L(13,42)),new re(30,new L(15,24),new L(5,25)),new re(28,new L(15,15),new L(10,16))),new Qe(21,Int32Array.from([6,28,50,72,94]),new re(28,new L(4,116),new L(4,117)),new re(26,new L(17,42)),new re(28,new L(17,22),new L(6,23)),new re(30,new L(19,16),new L(6,17))),new Qe(22,Int32Array.from([6,26,50,74,98]),new re(28,new L(2,111),new L(7,112)),new re(28,new L(17,46)),new re(30,new L(7,24),new L(16,25)),new re(24,new L(34,13))),new Qe(23,Int32Array.from([6,30,54,78,102]),new re(30,new L(4,121),new L(5,122)),new re(28,new L(4,47),new L(14,48)),new re(30,new L(11,24),new L(14,25)),new re(30,new L(16,15),new L(14,16))),new Qe(24,Int32Array.from([6,28,54,80,106]),new re(30,new L(6,117),new L(4,118)),new re(28,new L(6,45),new L(14,46)),new re(30,new L(11,24),new L(16,25)),new re(30,new L(30,16),new L(2,17))),new Qe(25,Int32Array.from([6,32,58,84,110]),new re(26,new L(8,106),new L(4,107)),new re(28,new L(8,47),new L(13,48)),new re(30,new L(7,24),new L(22,25)),new re(30,new L(22,15),new L(13,16))),new Qe(26,Int32Array.from([6,30,58,86,114]),new re(28,new L(10,114),new L(2,115)),new re(28,new L(19,46),new L(4,47)),new re(28,new L(28,22),new L(6,23)),new re(30,new L(33,16),new L(4,17))),new Qe(27,Int32Array.from([6,34,62,90,118]),new re(30,new L(8,122),new L(4,123)),new re(28,new L(22,45),new L(3,46)),new re(30,new L(8,23),new L(26,24)),new re(30,new L(12,15),new L(28,16))),new Qe(28,Int32Array.from([6,26,50,74,98,122]),new re(30,new L(3,117),new L(10,118)),new re(28,new L(3,45),new L(23,46)),new re(30,new L(4,24),new L(31,25)),new re(30,new L(11,15),new L(31,16))),new Qe(29,Int32Array.from([6,30,54,78,102,126]),new re(30,new L(7,116),new L(7,117)),new re(28,new L(21,45),new L(7,46)),new re(30,new L(1,23),new L(37,24)),new re(30,new L(19,15),new L(26,16))),new Qe(30,Int32Array.from([6,26,52,78,104,130]),new re(30,new L(5,115),new L(10,116)),new re(28,new L(19,47),new L(10,48)),new re(30,new L(15,24),new L(25,25)),new re(30,new L(23,15),new L(25,16))),new Qe(31,Int32Array.from([6,30,56,82,108,134]),new re(30,new L(13,115),new L(3,116)),new re(28,new L(2,46),new L(29,47)),new re(30,new L(42,24),new L(1,25)),new re(30,new L(23,15),new L(28,16))),new Qe(32,Int32Array.from([6,34,60,86,112,138]),new re(30,new L(17,115)),new re(28,new L(10,46),new L(23,47)),new re(30,new L(10,24),new L(35,25)),new re(30,new L(19,15),new L(35,16))),new Qe(33,Int32Array.from([6,30,58,86,114,142]),new re(30,new L(17,115),new L(1,116)),new re(28,new L(14,46),new L(21,47)),new re(30,new L(29,24),new L(19,25)),new re(30,new L(11,15),new L(46,16))),new Qe(34,Int32Array.from([6,34,62,90,118,146]),new re(30,new L(13,115),new L(6,116)),new re(28,new L(14,46),new L(23,47)),new re(30,new L(44,24),new L(7,25)),new re(30,new L(59,16),new L(1,17))),new Qe(35,Int32Array.from([6,30,54,78,102,126,150]),new re(30,new L(12,121),new L(7,122)),new re(28,new L(12,47),new L(26,48)),new re(30,new L(39,24),new L(14,25)),new re(30,new L(22,15),new L(41,16))),new Qe(36,Int32Array.from([6,24,50,76,102,128,154]),new re(30,new L(6,121),new L(14,122)),new re(28,new L(6,47),new L(34,48)),new re(30,new L(46,24),new L(10,25)),new re(30,new L(2,15),new L(64,16))),new Qe(37,Int32Array.from([6,28,54,80,106,132,158]),new re(30,new L(17,122),new L(4,123)),new re(28,new L(29,46),new L(14,47)),new re(30,new L(49,24),new L(10,25)),new re(30,new L(24,15),new L(46,16))),new Qe(38,Int32Array.from([6,32,58,84,110,136,162]),new re(30,new L(4,122),new L(18,123)),new re(28,new L(13,46),new L(32,47)),new re(30,new L(48,24),new L(14,25)),new re(30,new L(42,15),new L(32,16))),new Qe(39,Int32Array.from([6,26,54,82,110,138,166]),new re(30,new L(20,117),new L(4,118)),new re(28,new L(40,47),new L(7,48)),new re(30,new L(43,24),new L(22,25)),new re(30,new L(10,15),new L(67,16))),new Qe(40,Int32Array.from([6,30,58,86,114,142,170]),new re(30,new L(19,118),new L(6,119)),new re(28,new L(18,47),new L(31,48)),new re(30,new L(34,24),new L(34,25)),new re(30,new L(20,15),new L(61,16)))];var Bn;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(Bn||(Bn={}));class ys{constructor(n,a){this.value=n,this.isMasked=a}unmaskBitMatrix(n,a){for(let o=0;o<a;o++)for(let d=0;d<a;d++)this.isMasked(o,d)&&n.flip(d,o)}}ys.values=new Map([[Bn.DATA_MASK_000,new ys(Bn.DATA_MASK_000,(R,n)=>(R+n&1)===0)],[Bn.DATA_MASK_001,new ys(Bn.DATA_MASK_001,(R,n)=>(R&1)===0)],[Bn.DATA_MASK_010,new ys(Bn.DATA_MASK_010,(R,n)=>n%3===0)],[Bn.DATA_MASK_011,new ys(Bn.DATA_MASK_011,(R,n)=>(R+n)%3===0)],[Bn.DATA_MASK_100,new ys(Bn.DATA_MASK_100,(R,n)=>(Math.floor(R/2)+Math.floor(n/3)&1)===0)],[Bn.DATA_MASK_101,new ys(Bn.DATA_MASK_101,(R,n)=>R*n%6===0)],[Bn.DATA_MASK_110,new ys(Bn.DATA_MASK_110,(R,n)=>R*n%6<3)],[Bn.DATA_MASK_111,new ys(Bn.DATA_MASK_111,(R,n)=>(R+n+R*n%3&1)===0)]]);class Fr{constructor(n){const a=n.getHeight();if(a<21||(a&3)!==1)throw new G;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let f=0;f<6;f++)n=this.copyBit(f,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let f=5;f>=0;f--)n=this.copyBit(8,f,n);const a=this.bitMatrix.getHeight();let o=0;const d=a-7;for(let f=a-1;f>=d;f--)o=this.copyBit(8,f,o);for(let f=a-8;f<a;f++)o=this.copyBit(f,8,o);if(this.parsedFormatInfo=Hn.decodeFormatInformation(n,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),a=Math.floor((n-17)/4);if(a<=6)return Qe.getVersionForNumber(a);let o=0;const d=n-11;for(let x=5;x>=0;x--)for(let p=n-9;p>=d;p--)o=this.copyBit(p,x,o);let f=Qe.decodeVersionInformation(o);if(f!==null&&f.getDimensionForVersion()===n)return this.parsedVersion=f,f;o=0;for(let x=5;x>=0;x--)for(let p=n-9;p>=d;p--)o=this.copyBit(x,p,o);if(f=Qe.decodeVersionInformation(o),f!==null&&f.getDimensionForVersion()===n)return this.parsedVersion=f,f;throw new G}copyBit(n,a,o){return(this.isMirror?this.bitMatrix.get(a,n):this.bitMatrix.get(n,a))?o<<1|1:o<<1}readCodewords(){const n=this.readFormatInformation(),a=this.readVersion(),o=ys.values.get(n.getDataMask()),d=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,d);const f=a.buildFunctionPattern();let x=!0;const p=new Uint8Array(a.getTotalCodewords());let v=0,E=0,S=0;for(let M=d-1;M>0;M-=2){M===6&&M--;for(let D=0;D<d;D++){const P=x?d-1-D:D;for(let H=0;H<2;H++)f.get(M-H,P)||(S++,E<<=1,this.bitMatrix.get(M-H,P)&&(E|=1),S===8&&(p[v++]=E,S=0,E=0))}x=!x}if(v!==a.getTotalCodewords())throw new G;return p}remask(){if(this.parsedFormatInfo===null)return;const n=ys.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let a=0,o=n.getWidth();a<o;a++)for(let d=a+1,f=n.getHeight();d<f;d++)n.get(a,d)!==n.get(d,a)&&(n.flip(d,a),n.flip(a,d))}}class Go{constructor(n,a){this.numDataCodewords=n,this.codewords=a}static getDataBlocks(n,a,o){if(n.length!==a.getTotalCodewords())throw new T;const d=a.getECBlocksForLevel(o);let f=0;const x=d.getECBlocks();for(const H of x)f+=H.getCount();const p=new Array(f);let v=0;for(const H of x)for(let q=0;q<H.getCount();q++){const ie=H.getDataCodewords(),me=d.getECCodewordsPerBlock()+ie;p[v++]=new Go(ie,new Uint8Array(me))}const E=p[0].codewords.length;let S=p.length-1;for(;S>=0&&p[S].codewords.length!==E;)S--;S++;const M=E-d.getECCodewordsPerBlock();let D=0;for(let H=0;H<M;H++)for(let q=0;q<v;q++)p[q].codewords[H]=n[D++];for(let H=S;H<v;H++)p[H].codewords[M]=n[D++];const P=p[0].codewords.length;for(let H=M;H<P;H++)for(let q=0;q<v;q++){const ie=q<S?H:H+1;p[q].codewords[ie]=n[D++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var vs;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(vs||(vs={}));class at{constructor(n,a,o,d){this.value=n,this.stringValue=a,this.characterCountBitsForVersions=o,this.bits=d,at.FOR_BITS.set(d,this),at.FOR_VALUE.set(n,this)}static forBits(n){const a=at.FOR_BITS.get(n);if(a===void 0)throw new T;return a}getCharacterCountBits(n){const a=n.getVersionNumber();let o;return a<=9?o=0:a<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof at))return!1;const a=n;return this.value===a.value}toString(){return this.stringValue}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.TERMINATOR=new at(vs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),at.NUMERIC=new at(vs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),at.ALPHANUMERIC=new at(vs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),at.STRUCTURED_APPEND=new at(vs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),at.BYTE=new at(vs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),at.ECI=new at(vs.ECI,"ECI",Int32Array.from([0,0,0]),7),at.KANJI=new at(vs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),at.FNC1_FIRST_POSITION=new at(vs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),at.FNC1_SECOND_POSITION=new at(vs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),at.HANZI=new at(vs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class fn{static decode(n,a,o,d){const f=new Ps(n);let x=new ge;const p=new Array;let v=-1,E=-1;try{let S=null,M=!1,D;do{if(f.available()<4)D=at.TERMINATOR;else{const P=f.readBits(4);D=at.forBits(P)}switch(D){case at.TERMINATOR:break;case at.FNC1_FIRST_POSITION:case at.FNC1_SECOND_POSITION:M=!0;break;case at.STRUCTURED_APPEND:if(f.available()<16)throw new G;v=f.readBits(8),E=f.readBits(8);break;case at.ECI:const P=fn.parseECIValue(f);if(S=Q.getCharacterSetECIByValue(P),S===null)throw new G;break;case at.HANZI:const H=f.readBits(4),q=f.readBits(D.getCharacterCountBits(a));H===fn.GB2312_SUBSET&&fn.decodeHanziSegment(f,x,q);break;default:const ie=f.readBits(D.getCharacterCountBits(a));switch(D){case at.NUMERIC:fn.decodeNumericSegment(f,x,ie);break;case at.ALPHANUMERIC:fn.decodeAlphanumericSegment(f,x,ie,M);break;case at.BYTE:fn.decodeByteSegment(f,x,ie,S,p,d);break;case at.KANJI:fn.decodeKanjiSegment(f,x,ie);break;default:throw new G}break}}while(D!==at.TERMINATOR)}catch{throw new G}return new wt(n,x.toString(),p.length===0?null:p,o===null?null:o.toString(),v,E)}static decodeHanziSegment(n,a,o){if(o*13>n.available())throw new G;const d=new Uint8Array(2*o);let f=0;for(;o>0;){const x=n.readBits(13);let p=x/96<<8&4294967295|x%96;p<959?p+=41377:p+=42657,d[f]=p>>8&255,d[f+1]=p&255,f+=2,o--}try{a.append(Z.decode(d,se.GB2312))}catch(x){throw new G(x)}}static decodeKanjiSegment(n,a,o){if(o*13>n.available())throw new G;const d=new Uint8Array(2*o);let f=0;for(;o>0;){const x=n.readBits(13);let p=x/192<<8&4294967295|x%192;p<7936?p+=33088:p+=49472,d[f]=p>>8,d[f+1]=p,f+=2,o--}try{a.append(Z.decode(d,se.SHIFT_JIS))}catch(x){throw new G(x)}}static decodeByteSegment(n,a,o,d,f,x){if(8*o>n.available())throw new G;const p=new Uint8Array(o);for(let E=0;E<o;E++)p[E]=n.readBits(8);let v;d===null?v=se.guessEncoding(p,x):v=d.getName();try{a.append(Z.decode(p,v))}catch(E){throw new G(E)}f.push(p)}static toAlphaNumericChar(n){if(n>=fn.ALPHANUMERIC_CHARS.length)throw new G;return fn.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,a,o,d){const f=a.length();for(;o>1;){if(n.available()<11)throw new G;const x=n.readBits(11);a.append(fn.toAlphaNumericChar(Math.floor(x/45))),a.append(fn.toAlphaNumericChar(x%45)),o-=2}if(o===1){if(n.available()<6)throw new G;a.append(fn.toAlphaNumericChar(n.readBits(6)))}if(d)for(let x=f;x<a.length();x++)a.charAt(x)==="%"&&(x<a.length()-1&&a.charAt(x+1)==="%"?a.deleteCharAt(x+1):a.setCharAt(x,""))}static decodeNumericSegment(n,a,o){for(;o>=3;){if(n.available()<10)throw new G;const d=n.readBits(10);if(d>=1e3)throw new G;a.append(fn.toAlphaNumericChar(Math.floor(d/100))),a.append(fn.toAlphaNumericChar(Math.floor(d/10)%10)),a.append(fn.toAlphaNumericChar(d%10)),o-=3}if(o===2){if(n.available()<7)throw new G;const d=n.readBits(7);if(d>=100)throw new G;a.append(fn.toAlphaNumericChar(Math.floor(d/10))),a.append(fn.toAlphaNumericChar(d%10))}else if(o===1){if(n.available()<4)throw new G;const d=n.readBits(4);if(d>=10)throw new G;a.append(fn.toAlphaNumericChar(d))}}static parseECIValue(n){const a=n.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const o=n.readBits(8);return(a&63)<<8&4294967295|o}if((a&224)===192){const o=n.readBits(16);return(a&31)<<16&4294967295|o}throw new G}}fn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",fn.GB2312_SUBSET=1;class pu{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const a=n[0];n[0]=n[2],n[2]=a}}class qh{constructor(){this.rsDecoder=new mt(de.QR_CODE_FIELD_256)}decodeBooleanArray(n,a){return this.decodeBitMatrix(Ae.parseFromBooleanArray(n),a)}decodeBitMatrix(n,a){const o=new Fr(n);let d=null;try{return this.decodeBitMatrixParser(o,a)}catch(f){d=f}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const f=this.decodeBitMatrixParser(o,a);return f.setOther(new pu(!0)),f}catch(f){throw d!==null?d:f}}decodeBitMatrixParser(n,a){const o=n.readVersion(),d=n.readFormatInformation().getErrorCorrectionLevel(),f=n.readCodewords(),x=Go.getDataBlocks(f,o,d);let p=0;for(const S of x)p+=S.getNumDataCodewords();const v=new Uint8Array(p);let E=0;for(const S of x){const M=S.getCodewords(),D=S.getNumDataCodewords();this.correctErrors(M,D);for(let P=0;P<D;P++)v[E++]=M[P]}return fn.decode(v,o,d,a)}correctErrors(n,a){const o=new Int32Array(n);try{this.rsDecoder.decode(o,n.length-a)}catch{throw new U}for(let d=0;d<a;d++)n[d]=o[d]}}class Hr extends je{constructor(n,a,o){super(n,a),this.estimatedModuleSize=o}aboutEquals(n,a,o){if(Math.abs(a-this.getY())<=n&&Math.abs(o-this.getX())<=n){const d=Math.abs(n-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(n,a,o){const d=(this.getX()+a)/2,f=(this.getY()+n)/2,x=(this.estimatedModuleSize+o)/2;return new Hr(d,f,x)}}class As{constructor(n,a,o,d,f,x,p){this.image=n,this.startX=a,this.startY=o,this.width=d,this.height=f,this.moduleSize=x,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,a=this.height,o=this.width,d=n+o,f=this.startY+a/2,x=new Int32Array(3),p=this.image;for(let v=0;v<a;v++){const E=f+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));x[0]=0,x[1]=0,x[2]=0;let S=n;for(;S<d&&!p.get(S,E);)S++;let M=0;for(;S<d;){if(p.get(S,E))if(M===1)x[1]++;else if(M===2){if(this.foundPatternCross(x)){const D=this.handlePossibleCenter(x,E,S);if(D!==null)return D}x[0]=x[2],x[1]=1,x[2]=0,M=1}else x[++M]++;else M===1&&M++,x[M]++;S++}if(this.foundPatternCross(x)){const D=this.handlePossibleCenter(x,E,d);if(D!==null)return D}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(n,a){return a-n[2]-n[1]/2}foundPatternCross(n){const a=this.moduleSize,o=a/2;for(let d=0;d<3;d++)if(Math.abs(a-n[d])>=o)return!1;return!0}crossCheckVertical(n,a,o,d){const f=this.image,x=f.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=n;for(;v>=0&&f.get(a,v)&&p[1]<=o;)p[1]++,v--;if(v<0||p[1]>o)return NaN;for(;v>=0&&!f.get(a,v)&&p[0]<=o;)p[0]++,v--;if(p[0]>o)return NaN;for(v=n+1;v<x&&f.get(a,v)&&p[1]<=o;)p[1]++,v++;if(v===x||p[1]>o)return NaN;for(;v<x&&!f.get(a,v)&&p[2]<=o;)p[2]++,v++;if(p[2]>o)return NaN;const E=p[0]+p[1]+p[2];return 5*Math.abs(E-d)>=2*d?NaN:this.foundPatternCross(p)?As.centerFromEnd(p,v):NaN}handlePossibleCenter(n,a,o){const d=n[0]+n[1]+n[2],f=As.centerFromEnd(n,o),x=this.crossCheckVertical(a,f,2*n[1],d);if(!isNaN(x)){const p=(n[0]+n[1]+n[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(p,x,f))return E.combineEstimate(x,f,p);const v=new Hr(f,x,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class Ua extends je{constructor(n,a,o,d){super(n,a),this.estimatedModuleSize=o,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,a,o){if(Math.abs(a-this.getY())<=n&&Math.abs(o-this.getX())<=n){const d=Math.abs(n-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(n,a,o){const d=this.count+1,f=(this.count*this.getX()+a)/d,x=(this.count*this.getY()+n)/d,p=(this.count*this.estimatedModuleSize+o)/d;return new Ua(f,x,p,d)}}class Yo{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class yn{constructor(n,a){this.image=n,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const a=n!=null&&n.get(ce.TRY_HARDER)!==void 0,o=n!=null&&n.get(ce.PURE_BARCODE)!==void 0,d=this.image,f=d.getHeight(),x=d.getWidth();let p=Math.floor(3*f/(4*yn.MAX_MODULES));(p<yn.MIN_SKIP||a)&&(p=yn.MIN_SKIP);let v=!1;const E=new Int32Array(5);for(let M=p-1;M<f&&!v;M+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let D=0;for(let P=0;P<x;P++)if(d.get(P,M))(D&1)===1&&D++,E[D]++;else if((D&1)===0)if(D===4)if(yn.foundPatternCross(E)){if(this.handlePossibleCenter(E,M,P,o)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const q=this.findRowSkip();q>E[2]&&(M+=q-E[2]-p,P=x-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;continue}D=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,D=3;else E[++D]++;else E[D]++;yn.foundPatternCross(E)&&this.handlePossibleCenter(E,M,x,o)===!0&&(p=E[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return je.orderBestPatterns(S),new Yo(S)}static centerFromEnd(n,a){return a-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let a=0;for(let f=0;f<5;f++){const x=n[f];if(x===0)return!1;a+=x}if(a<7)return!1;const o=a/7,d=o/2;return Math.abs(o-n[0])<d&&Math.abs(o-n[1])<d&&Math.abs(3*o-n[2])<3*d&&Math.abs(o-n[3])<d&&Math.abs(o-n[4])<d}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,a,o,d){const f=this.getCrossCheckStateCount();let x=0;const p=this.image;for(;n>=x&&a>=x&&p.get(a-x,n-x);)f[2]++,x++;if(n<x||a<x)return!1;for(;n>=x&&a>=x&&!p.get(a-x,n-x)&&f[1]<=o;)f[1]++,x++;if(n<x||a<x||f[1]>o)return!1;for(;n>=x&&a>=x&&p.get(a-x,n-x)&&f[0]<=o;)f[0]++,x++;if(f[0]>o)return!1;const v=p.getHeight(),E=p.getWidth();for(x=1;n+x<v&&a+x<E&&p.get(a+x,n+x);)f[2]++,x++;if(n+x>=v||a+x>=E)return!1;for(;n+x<v&&a+x<E&&!p.get(a+x,n+x)&&f[3]<o;)f[3]++,x++;if(n+x>=v||a+x>=E||f[3]>=o)return!1;for(;n+x<v&&a+x<E&&p.get(a+x,n+x)&&f[4]<o;)f[4]++,x++;if(f[4]>=o)return!1;const S=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(S-d)<2*d&&yn.foundPatternCross(f)}crossCheckVertical(n,a,o,d){const f=this.image,x=f.getHeight(),p=this.getCrossCheckStateCount();let v=n;for(;v>=0&&f.get(a,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!f.get(a,v)&&p[1]<=o;)p[1]++,v--;if(v<0||p[1]>o)return NaN;for(;v>=0&&f.get(a,v)&&p[0]<=o;)p[0]++,v--;if(p[0]>o)return NaN;for(v=n+1;v<x&&f.get(a,v);)p[2]++,v++;if(v===x)return NaN;for(;v<x&&!f.get(a,v)&&p[3]<o;)p[3]++,v++;if(v===x||p[3]>=o)return NaN;for(;v<x&&f.get(a,v)&&p[4]<o;)p[4]++,v++;if(p[4]>=o)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-d)>=2*d?NaN:yn.foundPatternCross(p)?yn.centerFromEnd(p,v):NaN}crossCheckHorizontal(n,a,o,d){const f=this.image,x=f.getWidth(),p=this.getCrossCheckStateCount();let v=n;for(;v>=0&&f.get(v,a);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!f.get(v,a)&&p[1]<=o;)p[1]++,v--;if(v<0||p[1]>o)return NaN;for(;v>=0&&f.get(v,a)&&p[0]<=o;)p[0]++,v--;if(p[0]>o)return NaN;for(v=n+1;v<x&&f.get(v,a);)p[2]++,v++;if(v===x)return NaN;for(;v<x&&!f.get(v,a)&&p[3]<o;)p[3]++,v++;if(v===x||p[3]>=o)return NaN;for(;v<x&&f.get(v,a)&&p[4]<o;)p[4]++,v++;if(p[4]>=o)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-d)>=d?NaN:yn.foundPatternCross(p)?yn.centerFromEnd(p,v):NaN}handlePossibleCenter(n,a,o,d){const f=n[0]+n[1]+n[2]+n[3]+n[4];let x=yn.centerFromEnd(n,o),p=this.crossCheckVertical(a,Math.floor(x),n[2],f);if(!isNaN(p)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(p),n[2],f),!isNaN(x)&&(!d||this.crossCheckDiagonal(Math.floor(p),Math.floor(x),n[2],f)))){const v=f/7;let E=!1;const S=this.possibleCenters;for(let M=0,D=S.length;M<D;M++){const P=S[M];if(P.aboutEquals(v,p,x)){S[M]=P.combineEstimate(p,x,v),E=!0;break}}if(!E){const M=new Ua(x,p,v);S.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const o of this.possibleCenters)if(o.getCount()>=yn.CENTER_QUORUM)if(a==null)a=o;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-o.getX())-Math.abs(a.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,a=0;const o=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=yn.CENTER_QUORUM&&(n++,a+=x.getEstimatedModuleSize());if(n<3)return!1;const d=a/o;let f=0;for(const x of this.possibleCenters)f+=Math.abs(x.getEstimatedModuleSize()-d);return f<=.05*a}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new Y;const a=this.possibleCenters;let o;if(n>3){let d=0,f=0;for(const v of this.possibleCenters){const E=v.getEstimatedModuleSize();d+=E,f+=E*E}o=d/n;let x=Math.sqrt(f/n-o*o);a.sort((v,E)=>{const S=Math.abs(E.getEstimatedModuleSize()-o),M=Math.abs(v.getEstimatedModuleSize()-o);return S<M?-1:S>M?1:0});const p=Math.max(.2*o,x);for(let v=0;v<a.length&&a.length>3;v++){const E=a[v];Math.abs(E.getEstimatedModuleSize()-o)>p&&(a.splice(v,1),v--)}}if(a.length>3){let d=0;for(const f of a)d+=f.getEstimatedModuleSize();o=d/a.length,a.sort((f,x)=>{if(x.getCount()===f.getCount()){const p=Math.abs(x.getEstimatedModuleSize()-o),v=Math.abs(f.getEstimatedModuleSize()-o);return p<v?1:p>v?-1:0}else return x.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}yn.CENTER_QUORUM=2,yn.MIN_SKIP=3,yn.MAX_MODULES=57;class ni{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(ce.NEED_RESULT_POINT_CALLBACK);const o=new yn(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(o)}processFinderPatternInfo(n){const a=n.getTopLeft(),o=n.getTopRight(),d=n.getBottomLeft(),f=this.calculateModuleSize(a,o,d);if(f<1)throw new Y("No pattern found in proccess finder.");const x=ni.computeDimension(a,o,d,f),p=Qe.getProvisionalVersionForDimension(x),v=p.getDimensionForVersion()-7;let E=null;if(p.getAlignmentPatternCenters().length>0){const P=o.getX()-a.getX()+d.getX(),H=o.getY()-a.getY()+d.getY(),q=1-3/v,ie=Math.floor(a.getX()+q*(P-a.getX())),me=Math.floor(a.getY()+q*(H-a.getY()));for(let Me=4;Me<=16;Me<<=1)try{E=this.findAlignmentInRegion(f,ie,me,Me);break}catch(Te){if(!(Te instanceof Y))throw Te}}const S=ni.createTransform(a,o,d,E,x),M=ni.sampleGrid(this.image,S,x);let D;return E===null?D=[d,a,o]:D=[d,a,o,E],new Tn(M,D)}static createTransform(n,a,o,d,f){const x=f-3.5;let p,v,E,S;return d!==null?(p=d.getX(),v=d.getY(),E=x-3,S=E):(p=a.getX()-n.getX()+o.getX(),v=a.getY()-n.getY()+o.getY(),E=x,S=x),ke.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,E,S,3.5,x,n.getX(),n.getY(),a.getX(),a.getY(),p,v,o.getX(),o.getY())}static sampleGrid(n,a,o){return nt.getInstance().sampleGridWithTransform(n,o,o,a)}static computeDimension(n,a,o,d){const f=Ie.round(je.distance(n,a)/d),x=Ie.round(je.distance(n,o)/d);let p=Math.floor((f+x)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new Y("Dimensions could be not found.")}return p}calculateModuleSize(n,a,o){return(this.calculateModuleSizeOneWay(n,a)+this.calculateModuleSizeOneWay(n,o))/2}calculateModuleSizeOneWay(n,a){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(a.getX()),Math.floor(a.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(o)?d/7:isNaN(d)?o/7:(o+d)/14}sizeOfBlackWhiteBlackRunBothWays(n,a,o,d){let f=this.sizeOfBlackWhiteBlackRun(n,a,o,d),x=1,p=n-(o-n);p<0?(x=n/(n-p),p=0):p>=this.image.getWidth()&&(x=(this.image.getWidth()-1-n)/(p-n),p=this.image.getWidth()-1);let v=Math.floor(a-(d-a)*x);return x=1,v<0?(x=a/(a-v),v=0):v>=this.image.getHeight()&&(x=(this.image.getHeight()-1-a)/(v-a),v=this.image.getHeight()-1),p=Math.floor(n+(p-n)*x),f+=this.sizeOfBlackWhiteBlackRun(n,a,p,v),f-1}sizeOfBlackWhiteBlackRun(n,a,o,d){const f=Math.abs(d-a)>Math.abs(o-n);if(f){let P=n;n=a,a=P,P=o,o=d,d=P}const x=Math.abs(o-n),p=Math.abs(d-a);let v=-x/2;const E=n<o?1:-1,S=a<d?1:-1;let M=0;const D=o+E;for(let P=n,H=a;P!==D;P+=E){const q=f?H:P,ie=f?P:H;if(M===1===this.image.get(q,ie)){if(M===2)return Ie.distance(P,H,n,a);M++}if(v+=p,v>0){if(H===d)break;H+=S,v-=x}}return M===2?Ie.distance(o+E,d,n,a):NaN}findAlignmentInRegion(n,a,o,d){const f=Math.floor(d*n),x=Math.max(0,a-f),p=Math.min(this.image.getWidth()-1,a+f);if(p-x<n*3)throw new Y("Alignment top exceeds estimated module size.");const v=Math.max(0,o-f),E=Math.min(this.image.getHeight()-1,o+f);if(E-v<n*3)throw new Y("Alignment bottom exceeds estimated module size.");return new As(this.image,x,v,p-x,E-v,n,this.resultPointCallback).find()}}class wi{constructor(){this.decoder=new qh}getDecoder(){return this.decoder}decode(n,a){let o,d;if(a!=null&&a.get(ce.PURE_BARCODE)!==void 0){const v=wi.extractPureBits(n.getBlackMatrix());o=this.decoder.decodeBitMatrix(v,a),d=wi.NO_POINTS}else{const v=new ni(n.getBlackMatrix()).detect(a);o=this.decoder.decodeBitMatrix(v.getBits(),a),d=v.getPoints()}o.getOther()instanceof pu&&o.getOther().applyMirroredCorrection(d);const f=new _e(o.getText(),o.getRawBytes(),void 0,d,Le.QR_CODE,void 0),x=o.getByteSegments();x!==null&&f.putMetadata(rt.BYTE_SEGMENTS,x);const p=o.getECLevel();return p!==null&&f.putMetadata(rt.ERROR_CORRECTION_LEVEL,p),o.hasStructuredAppend()&&(f.putMetadata(rt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),f.putMetadata(rt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),f}reset(){}static extractPureBits(n){const a=n.getTopLeftOnBit(),o=n.getBottomRightOnBit();if(a===null||o===null)throw new Y;const d=this.moduleSize(a,n);let f=a[1],x=o[1],p=a[0],v=o[0];if(p>=v||f>=x)throw new Y;if(x-f!==v-p&&(v=p+(x-f),v>=n.getWidth()))throw new Y;const E=Math.round((v-p+1)/d),S=Math.round((x-f+1)/d);if(E<=0||S<=0)throw new Y;if(S!==E)throw new Y;const M=Math.floor(d/2);f+=M,p+=M;const D=p+Math.floor((E-1)*d)-v;if(D>0){if(D>M)throw new Y;p-=D}const P=f+Math.floor((S-1)*d)-x;if(P>0){if(P>M)throw new Y;f-=P}const H=new Ae(E,S);for(let q=0;q<S;q++){const ie=f+Math.floor(q*d);for(let me=0;me<E;me++)n.get(p+Math.floor(me*d),ie)&&H.set(me,q)}return H}static moduleSize(n,a){const o=a.getHeight(),d=a.getWidth();let f=n[0],x=n[1],p=!0,v=0;for(;f<d&&x<o;){if(p!==a.get(f,x)){if(++v===5)break;p=!p}f++,x++}if(f===d||x===o)throw new Y;return(f-n[0])/7}}wi.NO_POINTS=new Array;class ct{PDF417Common(){}static getBitCountSum(n){return Ie.sum(n)}static toIntArray(n){if(n==null||!n.length)return ct.EMPTY_INT_ARRAY;const a=new Int32Array(n.length);let o=0;for(const d of n)a[o++]=d;return a}static getCodeword(n){const a=B.binarySearch(ct.SYMBOL_TABLE,n&262143);return a<0?-1:(ct.CODEWORD_TABLE[a]-1)%ct.NUMBER_OF_CODEWORDS}}ct.NUMBER_OF_CODEWORDS=929,ct.MAX_CODEWORDS_IN_BARCODE=ct.NUMBER_OF_CODEWORDS-1,ct.MIN_ROWS_IN_BARCODE=3,ct.MAX_ROWS_IN_BARCODE=90,ct.MODULES_IN_CODEWORD=17,ct.MODULES_IN_STOP_PATTERN=18,ct.BARS_IN_MODULE=8,ct.EMPTY_INT_ARRAY=new Int32Array([]),ct.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ct.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class bu{constructor(n,a){this.bits=n,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class xt{static detectMultiple(n,a,o){let d=n.getBlackMatrix(),f=xt.detect(o,d);return f.length||(d=d.clone(),d.rotate180(),f=xt.detect(o,d)),new bu(d,f)}static detect(n,a){const o=new Array;let d=0,f=0,x=!1;for(;d<a.getHeight();){const p=xt.findVertices(a,d,f);if(p[0]==null&&p[3]==null){if(!x)break;x=!1,f=0;for(const v of o)v[1]!=null&&(d=Math.trunc(Math.max(d,v[1].getY()))),v[3]!=null&&(d=Math.max(d,Math.trunc(v[3].getY())));d+=xt.ROW_STEP;continue}if(x=!0,o.push(p),!n)break;p[2]!=null?(f=Math.trunc(p[2].getX()),d=Math.trunc(p[2].getY())):(f=Math.trunc(p[4].getX()),d=Math.trunc(p[4].getY()))}return o}static findVertices(n,a,o){const d=n.getHeight(),f=n.getWidth(),x=new Array(8);return xt.copyToResult(x,xt.findRowsWithPattern(n,d,f,a,o,xt.START_PATTERN),xt.INDEXES_START_PATTERN),x[4]!=null&&(o=Math.trunc(x[4].getX()),a=Math.trunc(x[4].getY())),xt.copyToResult(x,xt.findRowsWithPattern(n,d,f,a,o,xt.STOP_PATTERN),xt.INDEXES_STOP_PATTERN),x}static copyToResult(n,a,o){for(let d=0;d<o.length;d++)n[o[d]]=a[d]}static findRowsWithPattern(n,a,o,d,f,x){const p=new Array(4);let v=!1;const E=new Int32Array(x.length);for(;d<a;d+=xt.ROW_STEP){let M=xt.findGuardPattern(n,f,d,o,!1,x,E);if(M!=null){for(;d>0;){const D=xt.findGuardPattern(n,f,--d,o,!1,x,E);if(D!=null)M=D;else{d++;break}}p[0]=new je(M[0],d),p[1]=new je(M[1],d),v=!0;break}}let S=d+1;if(v){let M=0,D=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;S<a;S++){const P=xt.findGuardPattern(n,D[0],S,o,!1,x,E);if(P!=null&&Math.abs(D[0]-P[0])<xt.MAX_PATTERN_DRIFT&&Math.abs(D[1]-P[1])<xt.MAX_PATTERN_DRIFT)D=P,M=0;else{if(M>xt.SKIPPED_ROW_COUNT_MAX)break;M++}}S-=M+1,p[2]=new je(D[0],S),p[3]=new je(D[1],S)}return S-d<xt.BARCODE_MIN_HEIGHT&&B.fill(p,null),p}static findGuardPattern(n,a,o,d,f,x,p){B.fillWithin(p,0,p.length,0);let v=a,E=0;for(;n.get(v,o)&&v>0&&E++<xt.MAX_PIXEL_DRIFT;)v--;let S=v,M=0,D=x.length;for(let P=f;S<d;S++)if(n.get(S,o)!==P)p[M]++;else{if(M===D-1){if(xt.patternMatchVariance(p,x,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return new Int32Array([v,S]);v+=p[0]+p[1],z.arraycopy(p,2,p,0,M-1),p[M-1]=0,p[M]=0,M--}else M++;p[M]=1,P=!P}return M===D-1&&xt.patternMatchVariance(p,x,xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE?new Int32Array([v,S-1]):null}static patternMatchVariance(n,a,o){let d=n.length,f=0,x=0;for(let E=0;E<d;E++)f+=n[E],x+=a[E];if(f<x)return 1/0;let p=f/x;o*=p;let v=0;for(let E=0;E<d;E++){let S=n[E],M=a[E]*p,D=S>M?S-M:M-S;if(D>o)return 1/0;v+=D}return v/f}}xt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),xt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),xt.MAX_AVG_VARIANCE=.42,xt.MAX_INDIVIDUAL_VARIANCE=.8,xt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),xt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),xt.MAX_PIXEL_DRIFT=3,xt.MAX_PATTERN_DRIFT=5,xt.SKIPPED_ROW_COUNT_MAX=25,xt.ROW_STEP=5,xt.BARCODE_MIN_HEIGHT=10;class mn{constructor(n,a){if(a.length===0)throw new T;this.field=n;let o=a.length;if(o>1&&a[0]===0){let d=1;for(;d<o&&a[d]===0;)d++;d===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-d),z.arraycopy(a,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let d=0;for(let f of this.coefficients)d=this.field.add(d,f);return d}let a=this.coefficients[0],o=this.coefficients.length;for(let d=1;d<o;d++)a=this.field.add(this.field.multiply(n,a),this.coefficients[d]);return a}add(n){if(!this.field.equals(n.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let a=this.coefficients,o=n.coefficients;if(a.length>o.length){let x=a;a=o,o=x}let d=new Int32Array(o.length),f=o.length-a.length;z.arraycopy(o,0,d,0,f);for(let x=f;x<o.length;x++)d[x]=this.field.add(a[x-f],o[x]);return new mn(this.field,d)}subtract(n){if(!this.field.equals(n.field))throw new T("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof mn?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new mn(this.field,new Int32Array([0]));let a=this.coefficients,o=a.length,d=n.coefficients,f=d.length,x=new Int32Array(o+f-1);for(let p=0;p<o;p++){let v=a[p];for(let E=0;E<f;E++)x[p+E]=this.field.add(x[p+E],this.field.multiply(v,d[E]))}return new mn(this.field,x)}negative(){let n=this.coefficients.length,a=new Int32Array(n);for(let o=0;o<n;o++)a[o]=this.field.subtract(0,this.coefficients[o]);return new mn(this.field,a)}multiplyScalar(n){if(n===0)return new mn(this.field,new Int32Array([0]));if(n===1)return this;let a=this.coefficients.length,o=new Int32Array(a);for(let d=0;d<a;d++)o[d]=this.field.multiply(this.coefficients[d],n);return new mn(this.field,o)}multiplyByMonomial(n,a){if(n<0)throw new T;if(a===0)return new mn(this.field,new Int32Array([0]));let o=this.coefficients.length,d=new Int32Array(o+n);for(let f=0;f<o;f++)d[f]=this.field.multiply(this.coefficients[f],a);return new mn(this.field,d)}toString(){let n=new ge;for(let a=this.getDegree();a>=0;a--){let o=this.getCoefficient(a);o!==0&&(o<0?(n.append(" - "),o=-o):n.length()>0&&n.append(" + "),(a===0||o!==1)&&n.append(o),a!==0&&(a===1?n.append("x"):(n.append("x^"),n.append(a))))}return n.toString()}}class qo{add(n,a){return(n+a)%this.modulus}subtract(n,a){return(this.modulus+n-a)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new T;return this.logTable[n]}inverse(n){if(n===0)throw new it;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,a){return n===0||a===0?0:this.expTable[(this.logTable[n]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class nr extends qo{constructor(n,a){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let o=1;for(let d=0;d<n;d++)this.expTable[d]=o,o=o*a%n;for(let d=0;d<n-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new mn(this,new Int32Array([0])),this.one=new mn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,a){if(n<0)throw new T;if(a===0)return this.zero;let o=new Int32Array(n+1);return o[0]=a,new mn(this,o)}}nr.PDF417_GF=new nr(ct.NUMBER_OF_CODEWORDS,3);class Ni{constructor(){this.field=nr.PDF417_GF}decode(n,a,o){let d=new mn(this.field,n),f=new Int32Array(a),x=!1;for(let H=a;H>0;H--){let q=d.evaluateAt(this.field.exp(H));f[a-H]=q,q!==0&&(x=!0)}if(!x)return 0;let p=this.field.getOne();if(o!=null)for(const H of o){let q=this.field.exp(n.length-1-H),ie=new mn(this.field,new Int32Array([this.field.subtract(0,q),1]));p=p.multiply(ie)}let v=new mn(this.field,f),E=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),v,a),S=E[0],M=E[1],D=this.findErrorLocations(S),P=this.findErrorMagnitudes(M,S,D);for(let H=0;H<D.length;H++){let q=n.length-1-this.field.log(D[H]);if(q<0)throw U.getChecksumInstance();n[q]=this.field.subtract(n[q],P[H])}return D.length}runEuclideanAlgorithm(n,a,o){if(n.getDegree()<a.getDegree()){let D=n;n=a,a=D}let d=n,f=a,x=this.field.getZero(),p=this.field.getOne();for(;f.getDegree()>=Math.round(o/2);){let D=d,P=x;if(d=f,x=p,d.isZero())throw U.getChecksumInstance();f=D;let H=this.field.getZero(),q=d.getCoefficient(d.getDegree()),ie=this.field.inverse(q);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){let me=f.getDegree()-d.getDegree(),Me=this.field.multiply(f.getCoefficient(f.getDegree()),ie);H=H.add(this.field.buildMonomial(me,Me)),f=f.subtract(d.multiplyByMonomial(me,Me))}p=H.multiply(x).subtract(P).negative()}let v=p.getCoefficient(0);if(v===0)throw U.getChecksumInstance();let E=this.field.inverse(v),S=p.multiply(E),M=f.multiply(E);return[S,M]}findErrorLocations(n){let a=n.getDegree(),o=new Int32Array(a),d=0;for(let f=1;f<this.field.getSize()&&d<a;f++)n.evaluateAt(f)===0&&(o[d]=this.field.inverse(f),d++);if(d!==a)throw U.getChecksumInstance();return o}findErrorMagnitudes(n,a,o){let d=a.getDegree(),f=new Int32Array(d);for(let E=1;E<=d;E++)f[d-E]=this.field.multiply(E,a.getCoefficient(E));let x=new mn(this.field,f),p=o.length,v=new Int32Array(p);for(let E=0;E<p;E++){let S=this.field.inverse(o[E]),M=this.field.subtract(0,n.evaluateAt(S)),D=this.field.inverse(x.evaluateAt(S));v[E]=this.field.multiply(M,D)}return v}}class Ci{constructor(n,a,o,d,f){n instanceof Ci?this.constructor_2(n):this.constructor_1(n,a,o,d,f)}constructor_1(n,a,o,d,f){const x=a==null||o==null,p=d==null||f==null;if(x&&p)throw new Y;x?(a=new je(0,d.getY()),o=new je(0,f.getY())):p&&(d=new je(n.getWidth()-1,a.getY()),f=new je(n.getWidth()-1,o.getY())),this.image=n,this.topLeft=a,this.bottomLeft=o,this.topRight=d,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),o.getX())),this.maxX=Math.trunc(Math.max(d.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),d.getY())),this.maxY=Math.trunc(Math.max(o.getY(),f.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,a){return n==null?a:a==null?n:new Ci(n.image,n.topLeft,n.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(n,a,o){let d=this.topLeft,f=this.bottomLeft,x=this.topRight,p=this.bottomRight;if(n>0){let v=o?this.topLeft:this.topRight,E=Math.trunc(v.getY()-n);E<0&&(E=0);let S=new je(v.getX(),E);o?d=S:x=S}if(a>0){let v=o?this.bottomLeft:this.bottomRight,E=Math.trunc(v.getY()+a);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let S=new je(v.getX(),E);o?f=S:p=S}return new Ci(this.image,d,f,x,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Tl{constructor(n,a,o,d){this.columnCount=n,this.errorCorrectionLevel=d,this.rowCountUpperPart=a,this.rowCountLowerPart=o,this.rowCount=a+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vr{constructor(){this.buffer=""}static form(n,a){let o=-1;function d(x,p,v,E,S,M){if(x==="%%")return"%";if(a[++o]===void 0)return;x=E?parseInt(E.substr(1)):void 0;let D=S?parseInt(S.substr(1)):void 0,P;switch(M){case"s":P=a[o];break;case"c":P=a[o][0];break;case"f":P=parseFloat(a[o]).toFixed(x);break;case"p":P=parseFloat(a[o]).toPrecision(x);break;case"e":P=parseFloat(a[o]).toExponential(x);break;case"x":P=parseInt(a[o]).toString(D||16);break;case"d":P=parseFloat(parseInt(a[o],D||10).toPrecision(x)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(D);let H=parseInt(v),q=v&&v[0]+""=="0"?"0":" ";for(;P.length<H;)P=p!==void 0?P+q:q+P;return P}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(f,d)}format(n,...a){this.buffer+=Vr.form(n,a)}toString(){return this.buffer}}class Pi{constructor(n){this.boundingBox=new Ci(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let a=this.getCodeword(n);if(a!=null)return a;for(let o=1;o<Pi.MAX_NEARBY_DISTANCE;o++){let d=this.imageRowToCodewordIndex(n)-o;if(d>=0&&(a=this.codewords[d],a!=null)||(d=this.imageRowToCodewordIndex(n)+o,d<this.codewords.length&&(a=this.codewords[d],a!=null)))return a}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,a){this.codewords[this.imageRowToCodewordIndex(n)]=a}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Vr;let a=0;for(const o of this.codewords){if(o==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,o.getRowNumber(),o.getValue())}return n.toString()}}Pi.MAX_NEARBY_DISTANCE=5;class Ui{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let a=this.values.get(n);a==null&&(a=0),a++,this.values.set(n,a)}getValue(){let n=-1,a=new Array;for(const[o,d]of this.values.entries()){const f={getKey:()=>o,getValue:()=>d};f.getValue()>n?(n=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===n&&a.push(f.getKey())}return ct.toIntArray(a)}getConfidence(n){return this.values.get(n)}}class Wo extends Pi{constructor(n,a){super(n),this._isLeft=a}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,n);let o=this.getBoundingBox(),d=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=-1,E=1,S=0;for(let M=x;M<p;M++){if(a[M]==null)continue;let D=a[M],P=D.getRowNumber()-v;if(P===0)S++;else if(P===1)E=Math.max(E,S),S=1,v=D.getRowNumber();else if(P<0||D.getRowNumber()>=n.getRowCount()||P>M)a[M]=null;else{let H;E>2?H=(E-2)*P:H=P;let q=H>=M;for(let ie=1;ie<=H&&!q;ie++)q=a[M-ie]!=null;q?a[M]=null:(v=D.getRowNumber(),S=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let a=new Int32Array(n.getRowCount());for(let o of this.getCodewords())if(o!=null){let d=o.getRowNumber();if(d>=a.length)continue;a[d]++}return a}adjustIncompleteIndicatorColumnRowNumbers(n){let a=this.getBoundingBox(),o=this._isLeft?a.getTopLeft():a.getTopRight(),d=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=this.getCodewords(),v=-1;for(let E=f;E<x;E++){if(p[E]==null)continue;let S=p[E];S.setRowNumberAsRowIndicatorColumn();let M=S.getRowNumber()-v;M===0||(M===1?v=S.getRowNumber():S.getRowNumber()>=n.getRowCount()?p[E]=null:v=S.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),a=new Ui,o=new Ui,d=new Ui,f=new Ui;for(let p of n){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,E=p.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:o.setValue(v*3+1);break;case 1:f.setValue(v/3),d.setValue(v%3);break;case 2:a.setValue(v+1);break}}if(a.getValue().length===0||o.getValue().length===0||d.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+d.getValue()[0]<ct.MIN_ROWS_IN_BARCODE||o.getValue()[0]+d.getValue()[0]>ct.MAX_ROWS_IN_BARCODE)return null;let x=new Tl(a.getValue()[0],o.getValue()[0],d.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(n,x),x}removeIncorrectCodewords(n,a){for(let o=0;o<n.length;o++){let d=n[o];if(n[o]==null)continue;let f=d.getValue()%30,x=d.getRowNumber();if(x>a.getRowCount()){n[o]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(n[o]=null);break;case 2:f+1!==a.getColumnCount()&&(n[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Vn{constructor(n,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=ct.MAX_CODEWORDS_IN_BARCODE,a;do a=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let o=this.detectionResultColumns[a].getCodewords();for(let d=0;d<o.length;d++)o[d]!=null&&(o[d].hasValidRowNumber()||this.adjustRowNumbers(a,d,o))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<n.length;o++)if(n[o]!=null&&a[o]!=null&&n[o].getRowNumber()===a[o].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let f=this.detectionResultColumns[d].getCodewords()[o];f!=null&&(f.setRowNumber(n[o].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<a.length;o++){if(a[o]==null)continue;let d=a[o].getRowNumber(),f=0;for(let x=this.barcodeColumnCount+1;x>0&&f<this.ADJUST_ROW_NUMBER_SKIP;x--){let p=this.detectionResultColumns[x].getCodewords()[o];p!=null&&(f=Vn.adjustRowNumberIfValid(d,f,p),p.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,a=this.detectionResultColumns[0].getCodewords();for(let o=0;o<a.length;o++){if(a[o]==null)continue;let d=a[o].getRowNumber(),f=0;for(let x=1;x<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;x++){let p=this.detectionResultColumns[x].getCodewords()[o];p!=null&&(f=Vn.adjustRowNumberIfValid(d,f,p),p.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,a,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(n)?(o.setRowNumber(n),a=0):++a),a}adjustRowNumbers(n,a,o){if(!this.detectionResultColumns[n-1])return;let d=o[a],f=this.detectionResultColumns[n-1].getCodewords(),x=f;this.detectionResultColumns[n+1]!=null&&(x=this.detectionResultColumns[n+1].getCodewords());let p=new Array(14);p[2]=f[a],p[3]=x[a],a>0&&(p[0]=o[a-1],p[4]=f[a-1],p[5]=x[a-1]),a>1&&(p[8]=o[a-2],p[10]=f[a-2],p[11]=x[a-2]),a<o.length-1&&(p[1]=o[a+1],p[6]=f[a+1],p[7]=x[a+1]),a<o.length-2&&(p[9]=o[a+2],p[12]=f[a+2],p[13]=x[a+2]);for(let v of p)if(Vn.adjustRowNumber(d,v))return}static adjustRowNumber(n,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===n.getBucket()?(n.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,a){this.detectionResultColumns[n]=a}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Vr;for(let o=0;o<n.getCodewords().length;o++){a.format("CW %3d:",o);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[d].getCodewords()[o];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class Us{constructor(n,a,o,d){this.rowNumber=Us.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(a),this.bucket=Math.trunc(o),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Us.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Us.BARCODE_ROW_UNKNOWN=-1;class Qn{static initialize(){for(let n=0;n<ct.SYMBOL_TABLE.length;n++){let a=ct.SYMBOL_TABLE[n],o=a&1;for(let d=0;d<ct.BARS_IN_MODULE;d++){let f=0;for(;(a&1)===o;)f+=1,a>>=1;o=a&1,Qn.RATIOS_TABLE[n]||(Qn.RATIOS_TABLE[n]=new Array(ct.BARS_IN_MODULE)),Qn.RATIOS_TABLE[n][ct.BARS_IN_MODULE-d-1]=Math.fround(f/ct.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let a=Qn.getDecodedCodewordValue(Qn.sampleBitCounts(n));return a!==-1?a:Qn.getClosestDecodedValue(n)}static sampleBitCounts(n){let a=Ie.sum(n),o=new Int32Array(ct.BARS_IN_MODULE),d=0,f=0;for(let x=0;x<ct.MODULES_IN_CODEWORD;x++){let p=a/(2*ct.MODULES_IN_CODEWORD)+x*a/ct.MODULES_IN_CODEWORD;f+n[d]<=p&&(f+=n[d],d++),o[d]++}return o}static getDecodedCodewordValue(n){let a=Qn.getBitValue(n);return ct.getCodeword(a)===-1?-1:a}static getBitValue(n){let a=0;for(let o=0;o<n.length;o++)for(let d=0;d<n[o];d++)a=a<<1|(o%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(n){let a=Ie.sum(n),o=new Array(ct.BARS_IN_MODULE);if(a>1)for(let x=0;x<o.length;x++)o[x]=Math.fround(n[x]/a);let d=Nt.MAX_VALUE,f=-1;this.bSymbolTableReady||Qn.initialize();for(let x=0;x<Qn.RATIOS_TABLE.length;x++){let p=0,v=Qn.RATIOS_TABLE[x];for(let E=0;E<ct.BARS_IN_MODULE;E++){let S=Math.fround(v[E]-o[E]);if(p+=Math.fround(S*S),p>=d)break}p<d&&(d=p,f=ct.SYMBOL_TABLE[x])}return f}}Qn.bSymbolTableReady=!1,Qn.RATIOS_TABLE=new Array(ct.SYMBOL_TABLE.length).map(R=>new Array(ct.BARS_IN_MODULE));class Gr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class yu{static parseLong(n,a=void 0){return parseInt(n,a)}}class Il extends N{}Il.kind="NullPointerException";class Xo{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,a,o){if(n==null)throw new Il;if(a<0||a>n.length||o<0||a+o>n.length||a+o<0)throw new ae;if(o===0)return;for(let d=0;d<o;d++)this.write(n[a+d])}flush(){}close(){}}class za extends N{}class Rl extends Xo{constructor(n=32){if(super(),this.count=0,n<0)throw new T("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let o=this.buf.length<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new za;o=W.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,o)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,a,o){if(a<0||a>n.length||o<0||a+o-n.length>0)throw new ae;this.ensureCapacity(this.count+o),z.arraycopy(n,a,this.buf,this.count,o),this.count+=o}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Zt;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Zt||(Zt={}));function vu(){if(typeof window<"u")return window.BigInt||null;if(typeof Md<"u")return Md.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ml;function zi(R){if(typeof Ml>"u"&&(Ml=vu()),Ml===null)throw new Error("BigInt is not supported!");return Ml(R)}function Qo(){let R=[];R[0]=zi(1);let n=zi(900);R[1]=n;for(let a=2;a<16;a++)R[a]=R[a-1]*n;return R}class xe{static decode(n,a){let o=new ge(""),d=Q.ISO8859_1;o.enableDecoding(d);let f=1,x=n[f++],p=new Gr;for(;f<n[0];){switch(x){case xe.TEXT_COMPACTION_MODE_LATCH:f=xe.textCompaction(n,f,o);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:f=xe.byteCompaction(x,n,d,f,o);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[f++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:f=xe.numericCompaction(n,f,o);break;case xe.ECI_CHARSET:Q.getCharacterSetECIByValue(n[f++]);break;case xe.ECI_GENERAL_PURPOSE:f+=2;break;case xe.ECI_USER_DEFINED:f++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=xe.decodeMacroBlock(n,f,p);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new G;default:f--,f=xe.textCompaction(n,f,o);break}if(f<n.length)x=n[f++];else throw G.getFormatInstance()}if(o.length()===0)throw G.getFormatInstance();let v=new wt(null,o.toString(),null,a);return v.setOther(p),v}static decodeMacroBlock(n,a,o){if(a+xe.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw G.getFormatInstance();let d=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<xe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)d[p]=n[a];o.setSegmentIndex(W.parseInt(xe.decodeBase900toBase10(d,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new ge;a=xe.textCompaction(n,a,f),o.setFileId(f.toString());let x=-1;for(n[a]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=a+1);a<n[0];)switch(n[a]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,n[a]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new ge;a=xe.textCompaction(n,a+1,p),o.setFileName(p.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new ge;a=xe.textCompaction(n,a+1,v),o.setSender(v.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new ge;a=xe.textCompaction(n,a+1,E),o.setAddressee(E.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new ge;a=xe.numericCompaction(n,a+1,S),o.setSegmentCount(W.parseInt(S.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new ge;a=xe.numericCompaction(n,a+1,M),o.setTimestamp(yu.parseLong(M.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let D=new ge;a=xe.numericCompaction(n,a+1,D),o.setChecksum(W.parseInt(D.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let P=new ge;a=xe.numericCompaction(n,a+1,P),o.setFileSize(yu.parseLong(P.toString()));break;default:throw G.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:a++,o.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(x!==-1){let p=a-x;o.isLastSegment()&&p--,o.setOptionalData(B.copyOfRange(n,x,x+p))}return a}static textCompaction(n,a,o){let d=new Int32Array((n[0]-a)*2),f=new Int32Array((n[0]-a)*2),x=0,p=!1;for(;a<n[0]&&!p;){let v=n[a++];if(v<xe.TEXT_COMPACTION_MODE_LATCH)d[x]=v/30,d[x+1]=v%30,x+=2;else switch(v){case xe.TEXT_COMPACTION_MODE_LATCH:d[x++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[x]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=n[a++],f[x]=v,x++;break}}return xe.decodeTextCompaction(d,f,x,o),a}static decodeTextCompaction(n,a,o,d){let f=Zt.ALPHA,x=Zt.ALPHA,p=0;for(;p<o;){let v=n[p],E="";switch(f){case Zt.ALPHA:if(v<26)E=String.fromCharCode(65+v);else switch(v){case 26:E=" ";break;case xe.LL:f=Zt.LOWER;break;case xe.ML:f=Zt.MIXED;break;case xe.PS:x=f,f=Zt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Zt.ALPHA;break}break;case Zt.LOWER:if(v<26)E=String.fromCharCode(97+v);else switch(v){case 26:E=" ";break;case xe.AS:x=f,f=Zt.ALPHA_SHIFT;break;case xe.ML:f=Zt.MIXED;break;case xe.PS:x=f,f=Zt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Zt.ALPHA;break}break;case Zt.MIXED:if(v<xe.PL)E=xe.MIXED_CHARS[v];else switch(v){case xe.PL:f=Zt.PUNCT;break;case 26:E=" ";break;case xe.LL:f=Zt.LOWER;break;case xe.AL:f=Zt.ALPHA;break;case xe.PS:x=f,f=Zt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Zt.ALPHA;break}break;case Zt.PUNCT:if(v<xe.PAL)E=xe.PUNCT_CHARS[v];else switch(v){case xe.PAL:f=Zt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Zt.ALPHA;break}break;case Zt.ALPHA_SHIFT:if(f=x,v<26)E=String.fromCharCode(65+v);else switch(v){case 26:E=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Zt.ALPHA;break}break;case Zt.PUNCT_SHIFT:if(f=x,v<xe.PAL)E=xe.PUNCT_CHARS[v];else switch(v){case xe.PAL:f=Zt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(a[p]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Zt.ALPHA;break}break}E!==""&&d.append(E),p++}}static byteCompaction(n,a,o,d,f){let x=new Rl,p=0,v=0,E=!1;switch(n){case xe.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),M=a[d++];for(;d<a[0]&&!E;)switch(S[p++]=M,v=900*v+M,M=a[d++],M){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:d--,E=!0;break;default:if(p%5===0&&p>0){for(let D=0;D<6;++D)x.write(Number(zi(v)>>zi(8*(5-D))));v=0,p=0}break}d===a[0]&&M<xe.TEXT_COMPACTION_MODE_LATCH&&(S[p++]=M);for(let D=0;D<p;D++)x.write(S[D]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;d<a[0]&&!E;){let D=a[d++];if(D<xe.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+D;else switch(D){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:d--,E=!0;break}if(p%5===0&&p>0){for(let P=0;P<6;++P)x.write(Number(zi(v)>>zi(8*(5-P))));v=0,p=0}}break}return f.append(Z.decode(x.toByteArray(),o)),d}static numericCompaction(n,a,o){let d=0,f=!1,x=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;a<n[0]&&!f;){let p=n[a++];if(a===n[0]&&(f=!0),p<xe.TEXT_COMPACTION_MODE_LATCH)x[d]=p,d++;else switch(p){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(d%xe.MAX_NUMERIC_CODEWORDS===0||p===xe.NUMERIC_COMPACTION_MODE_LATCH||f)&&d>0&&(o.append(xe.decodeBase900toBase10(x,d)),d=0)}return a}static decodeBase900toBase10(n,a){let o=zi(0);for(let f=0;f<a;f++)o+=xe.EXP900[a-f-1]*zi(n[f]);let d=o.toString();if(d.charAt(0)!=="1")throw new G;return d.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=vu()?Qo():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class At{constructor(){}static decode(n,a,o,d,f,x,p){let v=new Ci(n,a,o,d,f),E=null,S=null,M;for(let H=!0;;H=!1){if(a!=null&&(E=At.getRowIndicatorColumn(n,v,a,!0,x,p)),d!=null&&(S=At.getRowIndicatorColumn(n,v,d,!1,x,p)),M=At.merge(E,S),M==null)throw Y.getNotFoundInstance();let q=M.getBoundingBox();if(H&&q!=null&&(q.getMinY()<v.getMinY()||q.getMaxY()>v.getMaxY()))v=q;else break}M.setBoundingBox(v);let D=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,E),M.setDetectionResultColumn(D,S);let P=E!=null;for(let H=1;H<=D;H++){let q=P?H:D-H;if(M.getDetectionResultColumn(q)!==void 0)continue;let ie;q===0||q===D?ie=new Wo(v,q===0):ie=new Pi(v),M.setDetectionResultColumn(q,ie);let me=-1,Me=me;for(let Te=v.getMinY();Te<=v.getMaxY();Te++){if(me=At.getStartColumn(M,q,Te,P),me<0||me>v.getMaxX()){if(Me===-1)continue;me=Me}let Se=At.detectCodeword(n,v.getMinX(),v.getMaxX(),P,me,Te,x,p);Se!=null&&(ie.setCodeword(Te,Se),Me=me,x=Math.min(x,Se.getWidth()),p=Math.max(p,Se.getWidth()))}}return At.createDecoderResult(M)}static merge(n,a){if(n==null&&a==null)return null;let o=At.getBarcodeMetadata(n,a);if(o==null)return null;let d=Ci.merge(At.adjustBoundingBox(n),At.adjustBoundingBox(a));return new Vn(o,d)}static adjustBoundingBox(n){if(n==null)return null;let a=n.getRowHeights();if(a==null)return null;let o=At.getMax(a),d=0;for(let p of a)if(d+=o-p,p>0)break;let f=n.getCodewords();for(let p=0;d>0&&f[p]==null;p++)d--;let x=0;for(let p=a.length-1;p>=0&&(x+=o-a[p],!(a[p]>0));p--);for(let p=f.length-1;x>0&&f[p]==null;p--)x--;return n.getBoundingBox().addMissingRows(d,x,n.isLeft())}static getMax(n){let a=-1;for(let o of n)a=Math.max(a,o);return a}static getBarcodeMetadata(n,a){let o;if(n==null||(o=n.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let d;return a==null||(d=a.getBarcodeMetadata())==null?o:o.getColumnCount()!==d.getColumnCount()&&o.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&o.getRowCount()!==d.getRowCount()?null:o}static getRowIndicatorColumn(n,a,o,d,f,x){let p=new Wo(a,d);for(let v=0;v<2;v++){let E=v===0?1:-1,S=Math.trunc(Math.trunc(o.getX()));for(let M=Math.trunc(Math.trunc(o.getY()));M<=a.getMaxY()&&M>=a.getMinY();M+=E){let D=At.detectCodeword(n,0,n.getWidth(),d,S,M,f,x);D!=null&&(p.setCodeword(M,D),d?S=D.getStartX():S=D.getEndX())}}return p}static adjustCodewordCount(n,a){let o=a[0][1],d=o.getValue(),f=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-At.getNumberOfECCodeWords(n.getBarcodeECLevel());if(d.length===0){if(f<1||f>ct.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();o.setValue(f)}else d[0]!==f&&o.setValue(f)}static createDecoderResult(n){let a=At.createBarcodeMatrix(n);At.adjustCodewordCount(n,a);let o=new Array,d=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),f=[],x=new Array;for(let v=0;v<n.getBarcodeRowCount();v++)for(let E=0;E<n.getBarcodeColumnCount();E++){let S=a[v][E+1].getValue(),M=v*n.getBarcodeColumnCount()+E;S.length===0?o.push(M):S.length===1?d[M]=S[0]:(x.push(M),f.push(S))}let p=new Array(f.length);for(let v=0;v<p.length;v++)p[v]=f[v];return At.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),d,ct.toIntArray(o),ct.toIntArray(x),p)}static createDecoderResultFromAmbiguousValues(n,a,o,d,f){let x=new Int32Array(d.length),p=100;for(;p-- >0;){for(let v=0;v<x.length;v++)a[d[v]]=f[v][x[v]];try{return At.decodeCodewords(a,n,o)}catch(v){if(!(v instanceof U))throw v}if(x.length===0)throw U.getChecksumInstance();for(let v=0;v<x.length;v++)if(x[v]<f[v].length-1){x[v]++;break}else if(x[v]=0,v===x.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(n){let a=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let d=0;d<a.length;d++)for(let f=0;f<a[d].length;f++)a[d][f]=new Ui;let o=0;for(let d of n.getDetectionResultColumns()){if(d!=null){for(let f of d.getCodewords())if(f!=null){let x=f.getRowNumber();if(x>=0){if(x>=a.length)continue;a[x][o].setValue(f.getValue())}}}o++}return a}static isValidBarcodeColumn(n,a){return a>=0&&a<=n.getBarcodeColumnCount()+1}static getStartColumn(n,a,o,d){let f=d?1:-1,x=null;if(At.isValidBarcodeColumn(n,a-f)&&(x=n.getDetectionResultColumn(a-f).getCodeword(o)),x!=null)return d?x.getEndX():x.getStartX();if(x=n.getDetectionResultColumn(a).getCodewordNearby(o),x!=null)return d?x.getStartX():x.getEndX();if(At.isValidBarcodeColumn(n,a-f)&&(x=n.getDetectionResultColumn(a-f).getCodewordNearby(o)),x!=null)return d?x.getEndX():x.getStartX();let p=0;for(;At.isValidBarcodeColumn(n,a-f);){a-=f;for(let v of n.getDetectionResultColumn(a).getCodewords())if(v!=null)return(d?v.getEndX():v.getStartX())+f*p*(v.getEndX()-v.getStartX());p++}return d?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,a,o,d,f,x,p,v){f=At.adjustCodewordStartColumn(n,a,o,d,f,x);let E=At.getModuleBitCount(n,a,o,d,f,x);if(E==null)return null;let S,M=Ie.sum(E);if(d)S=f+M;else{for(let H=0;H<E.length/2;H++){let q=E[H];E[H]=E[E.length-1-H],E[E.length-1-H]=q}S=f,f=S-M}if(!At.checkCodewordSkew(M,p,v))return null;let D=Qn.getDecodedValue(E),P=ct.getCodeword(D);return P===-1?null:new Us(f,S,At.getCodewordBucketNumber(D),P)}static getModuleBitCount(n,a,o,d,f,x){let p=f,v=new Int32Array(8),E=0,S=d?1:-1,M=d;for(;(d?p<o:p>=a)&&E<v.length;)n.get(p,x)===M?(v[E]++,p+=S):(E++,M=!M);return E===v.length||p===(d?o:a)&&E===v.length-1?v:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,a,o,d,f,x){let p=f,v=d?-1:1;for(let E=0;E<2;E++){for(;(d?p>=a:p<o)&&d===n.get(p,x);){if(Math.abs(f-p)>At.CODEWORD_SKEW_SIZE)return f;p+=v}v=-v,d=!d}return p}static checkCodewordSkew(n,a,o){return a-At.CODEWORD_SKEW_SIZE<=n&&n<=o+At.CODEWORD_SKEW_SIZE}static decodeCodewords(n,a,o){if(n.length===0)throw G.getFormatInstance();let d=1<<a+1,f=At.correctErrors(n,o,d);At.verifyCodewordCount(n,d);let x=xe.decode(n,""+a);return x.setErrorsCorrected(f),x.setErasures(o.length),x}static correctErrors(n,a,o){if(a!=null&&a.length>o/2+At.MAX_ERRORS||o<0||o>At.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return At.errorCorrection.decode(n,o,a)}static verifyCodewordCount(n,a){if(n.length<4)throw G.getFormatInstance();let o=n[0];if(o>n.length)throw G.getFormatInstance();if(o===0)if(a<n.length)n[0]=n.length-a;else throw G.getFormatInstance()}static getBitCountForCodeword(n){let a=new Int32Array(8),o=0,d=a.length-1;for(;!((n&1)!==o&&(o=n&1,d--,d<0));)a[d]++,n>>=1;return a}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return At.getCodewordBucketNumber(At.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let a=new Vr;for(let o=0;o<n.length;o++){a.format("Row %2d: ",o);for(let d=0;d<n[o].length;d++){let f=n[o][d];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}At.CODEWORD_SKEW_SIZE=2,At.MAX_ERRORS=3,At.MAX_EC_CODEWORDS=512,At.errorCorrection=new Ni;class Zn{decode(n,a=null){let o=Zn.decode(n,a,!1);if(o==null||o.length===0||o[0]==null)throw Y.getNotFoundInstance();return o[0]}decodeMultiple(n,a=null){try{return Zn.decode(n,a,!0)}catch(o){throw o instanceof G||o instanceof U?Y.getNotFoundInstance():o}}static decode(n,a,o){const d=new Array,f=xt.detectMultiple(n,a,o);for(const x of f.getPoints()){const p=At.decode(f.getBits(),x[4],x[5],x[6],x[7],Zn.getMinCodewordWidth(x),Zn.getMaxCodewordWidth(x)),v=new _e(p.getText(),p.getRawBytes(),void 0,x,Le.PDF_417);v.putMetadata(rt.ERROR_CORRECTION_LEVEL,p.getECLevel());const E=p.getOther();E!=null&&v.putMetadata(rt.PDF417_EXTRA_METADATA,E),d.push(v)}return d.map(x=>x)}static getMaxWidth(n,a){return n==null||a==null?0:Math.trunc(Math.abs(n.getX()-a.getX()))}static getMinWidth(n,a){return n==null||a==null?W.MAX_VALUE:Math.trunc(Math.abs(n.getX()-a.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Zn.getMaxWidth(n[0],n[4]),Zn.getMaxWidth(n[6],n[2])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN),Math.max(Zn.getMaxWidth(n[1],n[5]),Zn.getMaxWidth(n[7],n[3])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Zn.getMinWidth(n[0],n[4]),Zn.getMinWidth(n[6],n[2])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN),Math.min(Zn.getMinWidth(n[1],n[5]),Zn.getMinWidth(n[7],n[3])*ct.MODULES_IN_CODEWORD/ct.MODULES_IN_STOP_PATTERN)))}reset(){}}class Dl extends N{}Dl.kind="ReaderException";class wu{constructor(n,a){this.verbose=n===!0,a&&this.setHints(a)}decode(n,a){return a&&this.setHints(a),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const a=!l(n)&&n.get(ce.TRY_HARDER)===!0,o=l(n)?null:n.get(ce.POSSIBLE_FORMATS),d=new Array;if(!l(o)){const f=o.some(x=>x===Le.UPC_A||x===Le.UPC_E||x===Le.EAN_13||x===Le.EAN_8||x===Le.CODABAR||x===Le.CODE_39||x===Le.CODE_93||x===Le.CODE_128||x===Le.ITF||x===Le.RSS_14||x===Le.RSS_EXPANDED);f&&!a&&d.push(new Bs(n,this.verbose)),o.includes(Le.QR_CODE)&&d.push(new wi),o.includes(Le.DATA_MATRIX)&&d.push(new vi),o.includes(Le.AZTEC)&&d.push(new gs),o.includes(Le.PDF_417)&&d.push(new Zn),f&&a&&d.push(new Bs(n,this.verbose))}d.length===0&&(a||d.push(new Bs(n,this.verbose)),d.push(new wi),d.push(new vi),d.push(new gs),d.push(new Zn),a&&d.push(new Bs(n,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Dl("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(n,this.hints)}catch(o){if(o instanceof Dl)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class Nu extends Be{constructor(n=null,a=500){const o=new wu;o.setHints(n),super(o,a)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Wh extends Be{constructor(n=500){super(new Zn,n)}}class Xh extends Be{constructor(n=500){super(new wi,n)}}var Zo;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(Zo||(Zo={}));var Pn=Zo;class Fa{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new pt(n,Int32Array.from([1])))}buildGenerator(n){const a=this.cachedGenerators;if(n>=a.length){let o=a[a.length-1];const d=this.field;for(let f=a.length;f<=n;f++){const x=o.multiply(new pt(d,Int32Array.from([1,d.exp(f-1+d.getGeneratorBase())])));a.push(x),o=x}}return a[n]}encode(n,a){if(a===0)throw new T("No error correction bytes");const o=n.length-a;if(o<=0)throw new T("No data bytes provided");const d=this.buildGenerator(a),f=new Int32Array(o);z.arraycopy(n,0,f,0,o);let x=new pt(this.field,f);x=x.multiplyByMonomial(a,1);const v=x.divide(d)[1].getCoefficients(),E=a-v.length;for(let S=0;S<E;S++)n[o+S]=0;z.arraycopy(v,0,n,o+E,v.length)}}class Sn{constructor(){}static applyMaskPenaltyRule1(n){return Sn.applyMaskPenaltyRule1Internal(n,!0)+Sn.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let a=0;const o=n.getArray(),d=n.getWidth(),f=n.getHeight();for(let x=0;x<f-1;x++){const p=o[x];for(let v=0;v<d-1;v++){const E=p[v];E===p[v+1]&&E===o[x+1][v]&&E===o[x+1][v+1]&&a++}}return Sn.N2*a}static applyMaskPenaltyRule3(n){let a=0;const o=n.getArray(),d=n.getWidth(),f=n.getHeight();for(let x=0;x<f;x++)for(let p=0;p<d;p++){const v=o[x];p+6<d&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(Sn.isWhiteHorizontal(v,p-4,p)||Sn.isWhiteHorizontal(v,p+7,p+11))&&a++,x+6<f&&o[x][p]===1&&o[x+1][p]===0&&o[x+2][p]===1&&o[x+3][p]===1&&o[x+4][p]===1&&o[x+5][p]===0&&o[x+6][p]===1&&(Sn.isWhiteVertical(o,p,x-4,x)||Sn.isWhiteVertical(o,p,x+7,x+11))&&a++}return a*Sn.N3}static isWhiteHorizontal(n,a,o){a=Math.max(a,0),o=Math.min(o,n.length);for(let d=a;d<o;d++)if(n[d]===1)return!1;return!0}static isWhiteVertical(n,a,o,d){o=Math.max(o,0),d=Math.min(d,n.length);for(let f=o;f<d;f++)if(n[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let a=0;const o=n.getArray(),d=n.getWidth(),f=n.getHeight();for(let v=0;v<f;v++){const E=o[v];for(let S=0;S<d;S++)E[S]===1&&a++}const x=n.getHeight()*n.getWidth();return Math.floor(Math.abs(a*2-x)*10/x)*Sn.N4}static getDataMaskBit(n,a,o){let d,f;switch(n){case 0:d=o+a&1;break;case 1:d=o&1;break;case 2:d=a%3;break;case 3:d=(o+a)%3;break;case 4:d=Math.floor(o/2)+Math.floor(a/3)&1;break;case 5:f=o*a,d=(f&1)+f%3;break;case 6:f=o*a,d=(f&1)+f%3&1;break;case 7:f=o*a,d=f%3+(o+a&1)&1;break;default:throw new T("Invalid mask pattern: "+n)}return d===0}static applyMaskPenaltyRule1Internal(n,a){let o=0;const d=a?n.getHeight():n.getWidth(),f=a?n.getWidth():n.getHeight(),x=n.getArray();for(let p=0;p<d;p++){let v=0,E=-1;for(let S=0;S<f;S++){const M=a?x[p][S]:x[S][p];M===E?v++:(v>=5&&(o+=Sn.N1+(v-5)),v=1,E=M)}v>=5&&(o+=Sn.N1+(v-5))}return o}}Sn.N1=3,Sn.N2=3,Sn.N3=40,Sn.N4=10;class Ol{constructor(n,a){this.width=n,this.height=a;const o=new Array(a);for(let d=0;d!==a;d++)o[d]=new Uint8Array(n);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(n,a){return this.bytes[a][n]}getArray(){return this.bytes}setNumber(n,a,o){this.bytes[a][n]=o}setBoolean(n,a,o){this.bytes[a][n]=o?1:0}clear(n){for(const a of this.bytes)B.fill(a,n)}equals(n){if(!(n instanceof Ol))return!1;const a=n;if(this.width!==a.width||this.height!==a.height)return!1;for(let o=0,d=this.height;o<d;++o){const f=this.bytes[o],x=a.bytes[o];for(let p=0,v=this.width;p<v;++p)if(f[p]!==x[p])return!1}return!0}toString(){const n=new ge;for(let a=0,o=this.height;a<o;++a){const d=this.bytes[a];for(let f=0,x=this.width;f<x;++f)switch(d[f]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class sr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ge;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<sr.NUM_MASK_PATTERNS}}sr.NUM_MASK_PATTERNS=8;class en extends N{}en.kind="WriterException";class ut{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,a,o,d,f){ut.clearMatrix(f),ut.embedBasicPatterns(o,f),ut.embedTypeInfo(a,d,f),ut.maybeEmbedVersionInfo(o,f),ut.embedDataBits(n,d,f)}static embedBasicPatterns(n,a){ut.embedPositionDetectionPatternsAndSeparators(a),ut.embedDarkDotAtLeftBottomCorner(a),ut.maybeEmbedPositionAdjustmentPatterns(n,a),ut.embedTimingPatterns(a)}static embedTypeInfo(n,a,o){const d=new te;ut.makeTypeInfoBits(n,a,d);for(let f=0,x=d.getSize();f<x;++f){const p=d.get(d.getSize()-1-f),v=ut.TYPE_INFO_COORDINATES[f],E=v[0],S=v[1];if(o.setBoolean(E,S,p),f<8){const M=o.getWidth()-f-1;o.setBoolean(M,8,p)}else{const D=o.getHeight()-7+(f-8);o.setBoolean(8,D,p)}}}static maybeEmbedVersionInfo(n,a){if(n.getVersionNumber()<7)return;const o=new te;ut.makeVersionInfoBits(n,o);let d=17;for(let f=0;f<6;++f)for(let x=0;x<3;++x){const p=o.get(d);d--,a.setBoolean(f,a.getHeight()-11+x,p),a.setBoolean(a.getHeight()-11+x,f,p)}}static embedDataBits(n,a,o){let d=0,f=-1,x=o.getWidth()-1,p=o.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);p>=0&&p<o.getHeight();){for(let v=0;v<2;++v){const E=x-v;if(!ut.isEmpty(o.get(E,p)))continue;let S;d<n.getSize()?(S=n.get(d),++d):S=!1,a!==255&&Sn.getDataMaskBit(a,E,p)&&(S=!S),o.setBoolean(E,p,S)}p+=f}f=-f,p+=f,x-=2}if(d!==n.getSize())throw new en("Not all bits consumed: "+d+"/"+n.getSize())}static findMSBSet(n){return 32-W.numberOfLeadingZeros(n)}static calculateBCHCode(n,a){if(a===0)throw new T("0 polynomial");const o=ut.findMSBSet(a);for(n<<=o-1;ut.findMSBSet(n)>=o;)n^=a<<ut.findMSBSet(n)-o;return n}static makeTypeInfoBits(n,a,o){if(!sr.isValidMaskPattern(a))throw new en("Invalid mask pattern");const d=n.getBits()<<3|a;o.appendBits(d,5);const f=ut.calculateBCHCode(d,ut.TYPE_INFO_POLY);o.appendBits(f,10);const x=new te;if(x.appendBits(ut.TYPE_INFO_MASK_PATTERN,15),o.xor(x),o.getSize()!==15)throw new en("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(n,a){a.appendBits(n.getVersionNumber(),6);const o=ut.calculateBCHCode(n.getVersionNumber(),ut.VERSION_INFO_POLY);if(a.appendBits(o,12),a.getSize()!==18)throw new en("should not happen but we got: "+a.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let a=8;a<n.getWidth()-8;++a){const o=(a+1)%2;ut.isEmpty(n.get(a,6))&&n.setNumber(a,6,o),ut.isEmpty(n.get(6,a))&&n.setNumber(6,a,o)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new en;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,a,o){for(let d=0;d<8;++d){if(!ut.isEmpty(o.get(n+d,a)))throw new en;o.setNumber(n+d,a,0)}}static embedVerticalSeparationPattern(n,a,o){for(let d=0;d<7;++d){if(!ut.isEmpty(o.get(n,a+d)))throw new en;o.setNumber(n,a+d,0)}}static embedPositionAdjustmentPattern(n,a,o){for(let d=0;d<5;++d){const f=ut.POSITION_ADJUSTMENT_PATTERN[d];for(let x=0;x<5;++x)o.setNumber(n+x,a+d,f[x])}}static embedPositionDetectionPattern(n,a,o){for(let d=0;d<7;++d){const f=ut.POSITION_DETECTION_PATTERN[d];for(let x=0;x<7;++x)o.setNumber(n+x,a+d,f[x])}}static embedPositionDetectionPatternsAndSeparators(n){const a=ut.POSITION_DETECTION_PATTERN[0].length;ut.embedPositionDetectionPattern(0,0,n),ut.embedPositionDetectionPattern(n.getWidth()-a,0,n),ut.embedPositionDetectionPattern(0,n.getWidth()-a,n);const o=8;ut.embedHorizontalSeparationPattern(0,o-1,n),ut.embedHorizontalSeparationPattern(n.getWidth()-o,o-1,n),ut.embedHorizontalSeparationPattern(0,n.getWidth()-o,n);const d=7;ut.embedVerticalSeparationPattern(d,0,n),ut.embedVerticalSeparationPattern(n.getHeight()-d-1,0,n),ut.embedVerticalSeparationPattern(d,n.getHeight()-d,n)}static maybeEmbedPositionAdjustmentPatterns(n,a){if(n.getVersionNumber()<2)return;const o=n.getVersionNumber()-1,d=ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let f=0,x=d.length;f!==x;f++){const p=d[f];if(p>=0)for(let v=0;v!==x;v++){const E=d[v];E>=0&&ut.isEmpty(a.get(E,p))&&ut.embedPositionAdjustmentPattern(E-2,p-2,a)}}}}ut.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ut.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ut.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ut.VERSION_INFO_POLY=7973,ut.TYPE_INFO_POLY=1335,ut.TYPE_INFO_MASK_PATTERN=21522;class Qh{constructor(n,a){this.dataBytes=n,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class gn{constructor(){}static calculateMaskPenalty(n){return Sn.applyMaskPenaltyRule1(n)+Sn.applyMaskPenaltyRule2(n)+Sn.applyMaskPenaltyRule3(n)+Sn.applyMaskPenaltyRule4(n)}static encode(n,a,o=null){let d=gn.DEFAULT_BYTE_MODE_ENCODING;const f=o!==null&&o.get(Pn.CHARACTER_SET)!==void 0;f&&(d=o.get(Pn.CHARACTER_SET).toString());const x=this.chooseMode(n,d),p=new te;if(x===at.BYTE&&(f||gn.DEFAULT_BYTE_MODE_ENCODING!==d)){const Te=Q.getCharacterSetECIByName(d);Te!==void 0&&this.appendECI(Te,p)}this.appendModeInfo(x,p);const v=new te;this.appendBytes(n,x,v,d);let E;if(o!==null&&o.get(Pn.QR_VERSION)!==void 0){const Te=Number.parseInt(o.get(Pn.QR_VERSION).toString(),10);E=Qe.getVersionForNumber(Te);const Se=this.calculateBitsNeeded(x,p,v,E);if(!this.willFit(Se,E,a))throw new en("Data too big for requested version")}else E=this.recommendVersion(a,x,p,v);const S=new te;S.appendBitArray(p);const M=x===at.BYTE?v.getSizeInBytes():n.length;this.appendLengthInfo(M,E,x,S),S.appendBitArray(v);const D=E.getECBlocksForLevel(a),P=E.getTotalCodewords()-D.getTotalECCodewords();this.terminateBits(P,S);const H=this.interleaveWithECBytes(S,E.getTotalCodewords(),P,D.getNumBlocks()),q=new sr;q.setECLevel(a),q.setMode(x),q.setVersion(E);const ie=E.getDimensionForVersion(),me=new Ol(ie,ie),Me=this.chooseMaskPattern(H,a,E,me);return q.setMaskPattern(Me),ut.buildMatrix(H,a,E,Me,me),q.setMatrix(me),q}static recommendVersion(n,a,o,d){const f=this.calculateBitsNeeded(a,o,d,Qe.getVersionForNumber(1)),x=this.chooseVersion(f,n),p=this.calculateBitsNeeded(a,o,d,x);return this.chooseVersion(p,n)}static calculateBitsNeeded(n,a,o,d){return a.getSize()+n.getCharacterCountBits(d)+o.getSize()}static getAlphanumericCode(n){return n<gn.ALPHANUMERIC_TABLE.length?gn.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,a=null){if(Q.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(n))return at.KANJI;let o=!1,d=!1;for(let f=0,x=n.length;f<x;++f){const p=n.charAt(f);if(gn.isDigit(p))o=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)d=!0;else return at.BYTE}return d?at.ALPHANUMERIC:o?at.NUMERIC:at.BYTE}static isOnlyDoubleByteKanji(n){let a;try{a=Z.encode(n,Q.SJIS)}catch{return!1}const o=a.length;if(o%2!==0)return!1;for(let d=0;d<o;d+=2){const f=a[d]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(n,a,o,d){let f=Number.MAX_SAFE_INTEGER,x=-1;for(let p=0;p<sr.NUM_MASK_PATTERNS;p++){ut.buildMatrix(n,a,o,p,d);let v=this.calculateMaskPenalty(d);v<f&&(f=v,x=p)}return x}static chooseVersion(n,a){for(let o=1;o<=40;o++){const d=Qe.getVersionForNumber(o);if(gn.willFit(n,d,a))return d}throw new en("Data too big")}static willFit(n,a,o){const d=a.getTotalCodewords(),x=a.getECBlocksForLevel(o).getTotalECCodewords(),p=d-x,v=(n+7)/8;return p>=v}static terminateBits(n,a){const o=n*8;if(a.getSize()>o)throw new en("data bits cannot fit in the QR Code"+a.getSize()+" > "+o);for(let x=0;x<4&&a.getSize()<o;++x)a.appendBit(!1);const d=a.getSize()&7;if(d>0)for(let x=d;x<8;x++)a.appendBit(!1);const f=n-a.getSizeInBytes();for(let x=0;x<f;++x)a.appendBits((x&1)===0?236:17,8);if(a.getSize()!==o)throw new en("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,a,o,d,f,x){if(d>=o)throw new en("Block ID too large");const p=n%o,v=o-p,E=Math.floor(n/o),S=E+1,M=Math.floor(a/o),D=M+1,P=E-M,H=S-D;if(P!==H)throw new en("EC bytes mismatch");if(o!==v+p)throw new en("RS blocks mismatch");if(n!==(M+P)*v+(D+H)*p)throw new en("Total bytes mismatch");d<v?(f[0]=M,x[0]=P):(f[0]=D,x[0]=H)}static interleaveWithECBytes(n,a,o,d){if(n.getSizeInBytes()!==o)throw new en("Number of bits and data bytes does not match");let f=0,x=0,p=0;const v=new Array;for(let S=0;S<d;++S){const M=new Int32Array(1),D=new Int32Array(1);gn.getNumDataBytesAndNumECBytesForBlockID(a,o,d,S,M,D);const P=M[0],H=new Uint8Array(P);n.toBytes(8*f,H,0,P);const q=gn.generateECBytes(H,D[0]);v.push(new Qh(H,q)),x=Math.max(x,P),p=Math.max(p,q.length),f+=M[0]}if(o!==f)throw new en("Data bytes does not match offset");const E=new te;for(let S=0;S<x;++S)for(const M of v){const D=M.getDataBytes();S<D.length&&E.appendBits(D[S],8)}for(let S=0;S<p;++S)for(const M of v){const D=M.getErrorCorrectionBytes();S<D.length&&E.appendBits(D[S],8)}if(a!==E.getSizeInBytes())throw new en("Interleaving error: "+a+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(n,a){const o=n.length,d=new Int32Array(o+a);for(let x=0;x<o;x++)d[x]=n[x]&255;new Fa(de.QR_CODE_FIELD_256).encode(d,a);const f=new Uint8Array(a);for(let x=0;x<a;x++)f[x]=d[o+x];return f}static appendModeInfo(n,a){a.appendBits(n.getBits(),4)}static appendLengthInfo(n,a,o,d){const f=o.getCharacterCountBits(a);if(n>=1<<f)throw new en(n+" is bigger than "+((1<<f)-1));d.appendBits(n,f)}static appendBytes(n,a,o,d){switch(a){case at.NUMERIC:gn.appendNumericBytes(n,o);break;case at.ALPHANUMERIC:gn.appendAlphanumericBytes(n,o);break;case at.BYTE:gn.append8BitBytes(n,o,d);break;case at.KANJI:gn.appendKanjiBytes(n,o);break;default:throw new en("Invalid mode: "+a)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const a=gn.getDigit(n);return a>=0&&a<=9}static appendNumericBytes(n,a){const o=n.length;let d=0;for(;d<o;){const f=gn.getDigit(n.charAt(d));if(d+2<o){const x=gn.getDigit(n.charAt(d+1)),p=gn.getDigit(n.charAt(d+2));a.appendBits(f*100+x*10+p,10),d+=3}else if(d+1<o){const x=gn.getDigit(n.charAt(d+1));a.appendBits(f*10+x,7),d+=2}else a.appendBits(f,4),d++}}static appendAlphanumericBytes(n,a){const o=n.length;let d=0;for(;d<o;){const f=gn.getAlphanumericCode(n.charCodeAt(d));if(f===-1)throw new en;if(d+1<o){const x=gn.getAlphanumericCode(n.charCodeAt(d+1));if(x===-1)throw new en;a.appendBits(f*45+x,11),d+=2}else a.appendBits(f,6),d++}}static append8BitBytes(n,a,o){let d;try{d=Z.encode(n,o)}catch(f){throw new en(f)}for(let f=0,x=d.length;f!==x;f++){const p=d[f];a.appendBits(p,8)}}static appendKanjiBytes(n,a){let o;try{o=Z.encode(n,Q.SJIS)}catch(f){throw new en(f)}const d=o.length;for(let f=0;f<d;f+=2){const x=o[f]&255,p=o[f+1]&255,v=x<<8&4294967295|p;let E=-1;if(v>=33088&&v<=40956?E=v-33088:v>=57408&&v<=60351&&(E=v-49472),E===-1)throw new en("Invalid byte sequence");const S=(E>>8)*192+(E&255);a.appendBits(S,13)}}static appendECI(n,a){a.appendBits(at.ECI.getBits(),4),a.appendBits(n.getValue(),8)}}gn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),gn.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class ir{write(n,a,o,d=null){if(n.length===0)throw new T("Found empty contents");if(a<0||o<0)throw new T("Requested dimensions are too small: "+a+"x"+o);let f=It.L,x=ir.QUIET_ZONE_SIZE;d!==null&&(d.get(Pn.ERROR_CORRECTION)!==void 0&&(f=It.fromString(d.get(Pn.ERROR_CORRECTION).toString())),d.get(Pn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(Pn.MARGIN).toString(),10)));const p=gn.encode(n,f,d);return this.renderResult(p,a,o,x)}writeToDom(n,a,o,d,f=null){typeof n=="string"&&(n=document.querySelector(n));const x=this.write(a,o,d,f);n&&n.appendChild(x)}renderResult(n,a,o,d){const f=n.getMatrix();if(f===null)throw new He;const x=f.getWidth(),p=f.getHeight(),v=x+d*2,E=p+d*2,S=Math.max(a,v),M=Math.max(o,E),D=Math.min(Math.floor(S/v),Math.floor(M/E)),P=Math.floor((S-x*D)/2),H=Math.floor((M-p*D)/2),q=this.createSVGElement(S,M);for(let ie=0,me=H;ie<p;ie++,me+=D)for(let Me=0,Te=P;Me<x;Me++,Te+=D)if(f.get(Me,ie)===1){const Se=this.createSvgRectElement(Te,me,D,D);q.appendChild(Se)}return q}createSVGElement(n,a){const o=document.createElementNS(ir.SVG_NS,"svg");return o.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width",a.toString()),o}createSvgRectElement(n,a,o,d){const f=document.createElementNS(ir.SVG_NS,"rect");return f.setAttributeNS(null,"x",n.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",o.toString()),f.setAttributeNS(null,"width",d.toString()),f.setAttributeNS(null,"fill","#000000"),f}}ir.QUIET_ZONE_SIZE=4,ir.SVG_NS="http://www.w3.org/2000/svg";class Yr{encode(n,a,o,d,f){if(n.length===0)throw new T("Found empty contents");if(a!==Le.QR_CODE)throw new T("Can only encode QR_CODE, but got "+a);if(o<0||d<0)throw new T(`Requested dimensions are too small: ${o}x${d}`);let x=It.L,p=Yr.QUIET_ZONE_SIZE;f!==null&&(f.get(Pn.ERROR_CORRECTION)!==void 0&&(x=It.fromString(f.get(Pn.ERROR_CORRECTION).toString())),f.get(Pn.MARGIN)!==void 0&&(p=Number.parseInt(f.get(Pn.MARGIN).toString(),10)));const v=gn.encode(n,x,f);return Yr.renderResult(v,o,d,p)}static renderResult(n,a,o,d){const f=n.getMatrix();if(f===null)throw new He;const x=f.getWidth(),p=f.getHeight(),v=x+d*2,E=p+d*2,S=Math.max(a,v),M=Math.max(o,E),D=Math.min(Math.floor(S/v),Math.floor(M/E)),P=Math.floor((S-x*D)/2),H=Math.floor((M-p*D)/2),q=new Ae(S,M);for(let ie=0,me=H;ie<p;ie++,me+=D)for(let Me=0,Te=P;Me<x;Me++,Te+=D)f.get(Me,ie)===1&&q.setRegion(Te,me,D,D);return q}}Yr.QUIET_ZONE_SIZE=4;class Zh{encode(n,a,o,d,f){let x;if(a===Le.QR_CODE)x=new Yr;else throw new T("No encoder available for format "+a);return x.encode(n,a,o,d,f)}}class si extends ye{constructor(n,a,o,d,f,x,p,v){if(super(x,p),this.yuvData=n,this.dataWidth=a,this.dataHeight=o,this.left=d,this.top=f,d+x>a||f+p>o)throw new T("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(x,p)}getRow(n,a){if(n<0||n>=this.getHeight())throw new T("Requested row is outside the image: "+n);const o=this.getWidth();(a==null||a.length<o)&&(a=new Uint8ClampedArray(o));const d=(n+this.top)*this.dataWidth+this.left;return z.arraycopy(this.yuvData,d,a,0,o),a}getMatrix(){const n=this.getWidth(),a=this.getHeight();if(n===this.dataWidth&&a===this.dataHeight)return this.yuvData;const o=n*a,d=new Uint8ClampedArray(o);let f=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return z.arraycopy(this.yuvData,f,d,0,o),d;for(let x=0;x<a;x++){const p=x*n;z.arraycopy(this.yuvData,f,d,p,n),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(n,a,o,d){return new si(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+a,o,d,!1)}renderThumbnail(){const n=this.getWidth()/si.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/si.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*a),d=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let x=0;x<a;x++){const p=x*n;for(let v=0;v<n;v++){const E=d[f+v*si.THUMBNAIL_SCALE_FACTOR]&255;o[p+v]=4278190080|E*65793}f+=this.dataWidth*si.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/si.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/si.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,a){const o=this.yuvData;for(let d=0,f=this.top*this.dataWidth+this.left;d<a;d++,f+=this.dataWidth){const x=f+n/2;for(let p=f,v=f+n-1;p<x;p++,v--){const E=o[p];o[p]=o[v],o[v]=E}}}invert(){return new tt(this)}}si.THUMBNAIL_SCALE_FACTOR=2;class Ko extends ye{constructor(n,a,o,d,f,x,p){if(super(a,o),this.dataWidth=d,this.dataHeight=f,this.left=x,this.top=p,n.BYTES_PER_ELEMENT===4){const v=a*o,E=new Uint8ClampedArray(v);for(let S=0;S<v;S++){const M=n[S],D=M>>16&255,P=M>>7&510,H=M&255;E[S]=(D+P+H)/4&255}this.luminances=E}else this.luminances=n;if(d===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=o),x===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+o>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(n,a){if(n<0||n>=this.getHeight())throw new T("Requested row is outside the image: "+n);const o=this.getWidth();(a==null||a.length<o)&&(a=new Uint8ClampedArray(o));const d=(n+this.top)*this.dataWidth+this.left;return z.arraycopy(this.luminances,d,a,0,o),a}getMatrix(){const n=this.getWidth(),a=this.getHeight();if(n===this.dataWidth&&a===this.dataHeight)return this.luminances;const o=n*a,d=new Uint8ClampedArray(o);let f=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return z.arraycopy(this.luminances,f,d,0,o),d;for(let x=0;x<a;x++){const p=x*n;z.arraycopy(this.luminances,f,d,p,n),f+=this.dataWidth}return d}isCropSupported(){return!0}crop(n,a,o,d){return new Ko(this.luminances,o,d,this.dataWidth,this.dataHeight,this.left+n,this.top+a)}invert(){return new tt(this)}}class Cu extends Q{static forName(n){return this.getCharacterSetECIByName(n)}}class Ha{}Ha.ISO_8859_1=Q.ISO8859_1;class qr{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Eu{static singletonList(n){return[n]}static min(n,a){return n.sort(a)[0]}}class Au{constructor(n){this.previous=n}getPrevious(){return this.previous}}class rr extends Au{constructor(n,a,o){super(n),this.value=a,this.bitCount=o}appendTo(n,a){n.appendBits(this.value,this.bitCount)}add(n,a){return new rr(this,n,a)}addBinaryShift(n,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new rr(this,n,a)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+W.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class jl extends rr{constructor(n,a,o){super(n,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=o}appendTo(n,a){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(a[this.binaryShiftStart+o],8)}addBinaryShift(n,a){return new jl(this,n,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Su(R,n,a){return new jl(R,n,a)}function Wr(R,n,a){return new rr(R,n,a)}const Xr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Fi=0,Ll=1,Ss=2,Jo=3,zs=4,Va=new rr(null,0,0),ar=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Kh(R){for(let n of R)B.fill(n,-1);return R[Fi][zs]=0,R[Ll][zs]=0,R[Ll][Fi]=28,R[Jo][zs]=0,R[Ss][zs]=0,R[Ss][Fi]=15,R}const Ga=Kh(B.createInt32Array(6,6));class Fs{constructor(n,a,o,d){this.token=n,this.mode=a,this.binaryShiftByteCount=o,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,a){let o=this.bitCount,d=this.token;if(n!==this.mode){let x=ar[this.mode][n];d=Wr(d,x&65535,x>>16),o+=x>>16}let f=n===Ss?4:5;return d=Wr(d,a,f),new Fs(d,n,0,o+f)}shiftAndAppend(n,a){let o=this.token,d=this.mode===Ss?4:5;return o=Wr(o,Ga[this.mode][n],d),o=Wr(o,a,5),new Fs(o,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(n){let a=this.token,o=this.mode,d=this.bitCount;if(this.mode===zs||this.mode===Ss){let p=ar[o][Fi];a=Wr(a,p&65535,p>>16),d+=p>>16,o=Fi}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new Fs(a,o,this.binaryShiftByteCount+1,d+f);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(n+1)),x}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=Su(a,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Fs(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let a=this.bitCount+(ar[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?a+=Fs.calculateBinaryShiftCost(n)-Fs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(a+=10),a<=n.bitCount}toBitArray(n){let a=[];for(let d=this.endBinaryShift(n.length).token;d!==null;d=d.getPrevious())a.unshift(d);let o=new te;for(const d of a)d.appendTo(o,n);return o}toString(){return se.format("%s bits=%d bytes=%d",Xr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Fs.INITIAL_STATE=new Fs(Va,Fi,0,0);function _u(R){const n=se.getCharCode(" "),a=se.getCharCode("."),o=se.getCharCode(",");R[Fi][n]=1;const d=se.getCharCode("Z"),f=se.getCharCode("A");for(let D=f;D<=d;D++)R[Fi][D]=D-f+2;R[Ll][n]=1;const x=se.getCharCode("z"),p=se.getCharCode("a");for(let D=p;D<=x;D++)R[Ll][D]=D-p+2;R[Ss][n]=1;const v=se.getCharCode("9"),E=se.getCharCode("0");for(let D=E;D<=v;D++)R[Ss][D]=D-E+2;R[Ss][o]=12,R[Ss][a]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let D=0;D<S.length;D++)R[Jo][se.getCharCode(S[D])]=D;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let D=0;D<M.length;D++)se.getCharCode(M[D])>0&&(R[zs][se.getCharCode(M[D])]=D);return R}const Ya=_u(B.createInt32Array(5,256));class lr{constructor(n){this.text=n}encode(){const n=se.getCharCode(" "),a=se.getCharCode(`
`);let o=Eu.singletonList(Fs.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let x,p=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case se.getCharCode("\r"):x=p===a?2:0;break;case se.getCharCode("."):x=p===n?3:0;break;case se.getCharCode(","):x=p===n?4:0;break;case se.getCharCode(":"):x=p===n?5:0;break;default:x=0}x>0?(o=lr.updateStateListForPair(o,f,x),f++):o=this.updateStateListForChar(o,f)}return Eu.min(o,(f,x)=>f.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,a){const o=[];for(let d of n)this.updateStateForChar(d,a,o);return lr.simplifyStates(o)}updateStateForChar(n,a,o){let d=this.text[a]&255,f=Ya[n.getMode()][d]>0,x=null;for(let p=0;p<=zs;p++){let v=Ya[p][d];if(v>0){if(x==null&&(x=n.endBinaryShift(a)),!f||p===n.getMode()||p===Ss){const E=x.latchAndAppend(p,v);o.push(E)}if(!f&&Ga[n.getMode()][p]>=0){const E=x.shiftAndAppend(p,v);o.push(E)}}}if(n.getBinaryShiftByteCount()>0||Ya[n.getMode()][d]===0){let p=n.addBinaryShiftChar(a);o.push(p)}}static updateStateListForPair(n,a,o){const d=[];for(let f of n)this.updateStateForPair(f,a,o,d);return this.simplifyStates(d)}static updateStateForPair(n,a,o,d){let f=n.endBinaryShift(a);if(d.push(f.latchAndAppend(zs,o)),n.getMode()!==zs&&d.push(f.shiftAndAppend(zs,o)),o===3||o===4){let x=f.latchAndAppend(Ss,16-o).latchAndAppend(Ss,1);d.push(x)}if(n.getBinaryShiftByteCount()>0){let x=n.addBinaryShiftChar(a).addBinaryShiftChar(a+1);d.push(x)}}static simplifyStates(n){let a=[];for(const o of n){let d=!0;for(const f of a){if(f.isBetterThanOrEqualTo(o)){d=!1;break}o.isBetterThanOrEqualTo(f)&&(a=a.filter(x=>x!==f))}d&&a.push(o)}return a}}class kt{constructor(){}static encodeBytes(n){return kt.encode(n,kt.DEFAULT_EC_PERCENT,kt.DEFAULT_AZTEC_LAYERS)}static encode(n,a,o){let d=new lr(n).encode(),f=W.truncDivision(d.getSize()*a,100)+11,x=d.getSize()+f,p,v,E,S,M;if(o!==kt.DEFAULT_AZTEC_LAYERS){if(p=o<0,v=Math.abs(o),v>(p?kt.MAX_NB_BITS_COMPACT:kt.MAX_NB_BITS))throw new T(se.format("Illegal value %s for layers",o));E=kt.totalBitsInLayer(v,p),S=kt.WORD_SIZE[v];let Se=E-E%S;if(M=kt.stuffBits(d,S),M.getSize()+f>Se)throw new T("Data to large for user specified layer");if(p&&M.getSize()>S*64)throw new T("Data to large for user specified layer")}else{S=0,M=null;for(let Se=0;;Se++){if(Se>kt.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(p=Se<=3,v=p?Se+1:Se,E=kt.totalBitsInLayer(v,p),x>E)continue;(M==null||S!==kt.WORD_SIZE[v])&&(S=kt.WORD_SIZE[v],M=kt.stuffBits(d,S));let _t=E-E%S;if(!(p&&M.getSize()>S*64)&&M.getSize()+f<=_t)break}}let D=kt.generateCheckWords(M,E,S),P=M.getSize()/S,H=kt.generateModeMessage(p,v,P),q=(p?11:14)+v*4,ie=new Int32Array(q),me;if(p){me=q;for(let Se=0;Se<ie.length;Se++)ie[Se]=Se}else{me=q+1+2*W.truncDivision(W.truncDivision(q,2)-1,15);let Se=W.truncDivision(q,2),_t=W.truncDivision(me,2);for(let bt=0;bt<Se;bt++){let Dn=bt+W.truncDivision(bt,15);ie[Se-bt-1]=_t-Dn-1,ie[Se+bt]=_t+Dn+1}}let Me=new Ae(me);for(let Se=0,_t=0;Se<v;Se++){let bt=(v-Se)*4+(p?9:12);for(let Dn=0;Dn<bt;Dn++){let _s=Dn*2;for(let as=0;as<2;as++)D.get(_t+_s+as)&&Me.set(ie[Se*2+as],ie[Se*2+Dn]),D.get(_t+bt*2+_s+as)&&Me.set(ie[Se*2+Dn],ie[q-1-Se*2-as]),D.get(_t+bt*4+_s+as)&&Me.set(ie[q-1-Se*2-as],ie[q-1-Se*2-Dn]),D.get(_t+bt*6+_s+as)&&Me.set(ie[q-1-Se*2-Dn],ie[Se*2+as])}_t+=bt*8}if(kt.drawModeMessage(Me,p,me,H),p)kt.drawBullsEye(Me,W.truncDivision(me,2),5);else{kt.drawBullsEye(Me,W.truncDivision(me,2),7);for(let Se=0,_t=0;Se<W.truncDivision(q,2)-1;Se+=15,_t+=16)for(let bt=W.truncDivision(me,2)&1;bt<me;bt+=2)Me.set(W.truncDivision(me,2)-_t,bt),Me.set(W.truncDivision(me,2)+_t,bt),Me.set(bt,W.truncDivision(me,2)-_t),Me.set(bt,W.truncDivision(me,2)+_t)}let Te=new qr;return Te.setCompact(p),Te.setSize(me),Te.setLayers(v),Te.setCodeWords(P),Te.setMatrix(Me),Te}static drawBullsEye(n,a,o){for(let d=0;d<o;d+=2)for(let f=a-d;f<=a+d;f++)n.set(f,a-d),n.set(f,a+d),n.set(a-d,f),n.set(a+d,f);n.set(a-o,a-o),n.set(a-o+1,a-o),n.set(a-o,a-o+1),n.set(a+o,a-o),n.set(a+o,a-o+1),n.set(a+o,a+o-1)}static generateModeMessage(n,a,o){let d=new te;return n?(d.appendBits(a-1,2),d.appendBits(o-1,6),d=kt.generateCheckWords(d,28,4)):(d.appendBits(a-1,5),d.appendBits(o-1,11),d=kt.generateCheckWords(d,40,4)),d}static drawModeMessage(n,a,o,d){let f=W.truncDivision(o,2);if(a)for(let x=0;x<7;x++){let p=f-3+x;d.get(x)&&n.set(p,f-5),d.get(x+7)&&n.set(f+5,p),d.get(20-x)&&n.set(p,f+5),d.get(27-x)&&n.set(f-5,p)}else for(let x=0;x<10;x++){let p=f-5+x+W.truncDivision(x,5);d.get(x)&&n.set(p,f-7),d.get(x+10)&&n.set(f+7,p),d.get(29-x)&&n.set(p,f+7),d.get(39-x)&&n.set(f-7,p)}}static generateCheckWords(n,a,o){let d=n.getSize()/o,f=new Fa(kt.getGF(o)),x=W.truncDivision(a,o),p=kt.bitsToWords(n,o,x);f.encode(p,x-d);let v=a%o,E=new te;E.appendBits(0,v);for(const S of Array.from(p))E.appendBits(S,o);return E}static bitsToWords(n,a,o){let d=new Int32Array(o),f,x;for(f=0,x=n.getSize()/a;f<x;f++){let p=0;for(let v=0;v<a;v++)p|=n.get(f*a+v)?1<<a-v-1:0;d[f]=p}return d}static getGF(n){switch(n){case 4:return de.AZTEC_PARAM;case 6:return de.AZTEC_DATA_6;case 8:return de.AZTEC_DATA_8;case 10:return de.AZTEC_DATA_10;case 12:return de.AZTEC_DATA_12;default:throw new T("Unsupported word size "+n)}}static stuffBits(n,a){let o=new te,d=n.getSize(),f=(1<<a)-2;for(let x=0;x<d;x+=a){let p=0;for(let v=0;v<a;v++)(x+v>=d||n.get(x+v))&&(p|=1<<a-1-v);(p&f)===f?(o.appendBits(p&f,a),x--):(p&f)===0?(o.appendBits(p|1,a),x--):o.appendBits(p,a)}return o}static totalBitsInLayer(n,a){return((a?88:112)+16*n)*n}}kt.DEFAULT_EC_PERCENT=33,kt.DEFAULT_AZTEC_LAYERS=0,kt.MAX_NB_BITS=32,kt.MAX_NB_BITS_COMPACT=4,kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class qa{encode(n,a,o,d){return this.encodeWithHints(n,a,o,d,null)}encodeWithHints(n,a,o,d,f){let x=Ha.ISO_8859_1,p=kt.DEFAULT_EC_PERCENT,v=kt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Pn.CHARACTER_SET)&&(x=Cu.forName(f.get(Pn.CHARACTER_SET).toString())),f.has(Pn.ERROR_CORRECTION)&&(p=W.parseInt(f.get(Pn.ERROR_CORRECTION).toString())),f.has(Pn.AZTEC_LAYERS)&&(v=W.parseInt(f.get(Pn.AZTEC_LAYERS).toString()))),qa.encodeLayers(n,a,o,d,x,p,v)}static encodeLayers(n,a,o,d,f,x,p){if(a!==Le.AZTEC)throw new T("Can only encode AZTEC, but got "+a);let v=kt.encode(se.getBytes(n,f),x,p);return qa.renderResult(v,o,d)}static renderResult(n,a,o){let d=n.getMatrix();if(d==null)throw new He;let f=d.getWidth(),x=d.getHeight(),p=Math.max(a,f),v=Math.max(o,x),E=Math.min(p/f,v/x),S=(p-f*E)/2,M=(v-x*E)/2,D=new Ae(p,v);for(let P=0,H=M;P<x;P++,H+=E)for(let q=0,ie=S;q<f;q++,ie+=E)d.get(q,P)&&D.setRegion(ie,H,E,E);return D}}s.AbstractExpandedDecoder=kn,s.ArgumentException=I,s.ArithmeticException=it,s.AztecCode=qr,s.AztecCodeReader=gs,s.AztecCodeWriter=qa,s.AztecDecoder=be,s.AztecDetector=In,s.AztecDetectorResult=De,s.AztecEncoder=kt,s.AztecHighLevelEncoder=lr,s.AztecPoint=lt,s.BarcodeFormat=Le,s.Binarizer=X,s.BinaryBitmap=k,s.BitArray=te,s.BitMatrix=Ae,s.BitSource=Ps,s.BrowserAztecCodeReader=pi,s.BrowserBarcodeReader=Gh,s.BrowserCodeReader=Be,s.BrowserDatamatrixCodeReader=_l,s.BrowserMultiFormatReader=Nu,s.BrowserPDF417Reader=Wh,s.BrowserQRCodeReader=Xh,s.BrowserQRCodeSvgWriter=ir,s.CharacterSetECI=Q,s.ChecksumException=U,s.Code128Reader=Re,s.Code39Reader=Jt,s.DataMatrixDecodedBitStreamParser=yi,s.DataMatrixReader=vi,s.DecodeHintType=ce,s.DecoderResult=wt,s.DefaultGridSampler=Pe,s.DetectorResult=Tn,s.EAN13Reader=$s,s.EncodeHintType=Pn,s.Exception=N,s.FormatException=G,s.GenericGF=de,s.GenericGFPoly=pt,s.GlobalHistogramBinarizer=V,s.GridSampler=ee,s.GridSamplerInstance=nt,s.HTMLCanvasElementLuminanceSource=Ke,s.HybridBinarizer=ue,s.ITFReader=yt,s.IllegalArgumentException=T,s.IllegalStateException=He,s.InvertedLuminanceSource=tt,s.LuminanceSource=ye,s.MathUtils=Ie,s.MultiFormatOneDReader=Bs,s.MultiFormatReader=wu,s.MultiFormatWriter=Zh,s.NotFoundException=Y,s.OneDReader=Gt,s.PDF417DecodedBitStreamParser=xe,s.PDF417DecoderErrorCorrection=Ni,s.PDF417Reader=Zn,s.PDF417ResultMetadata=Gr,s.PerspectiveTransform=ke,s.PlanarYUVLuminanceSource=si,s.QRCodeByteMatrix=Ol,s.QRCodeDataMask=ys,s.QRCodeDecodedBitStreamParser=fn,s.QRCodeDecoderErrorCorrectionLevel=It,s.QRCodeDecoderFormatInformation=Hn,s.QRCodeEncoder=gn,s.QRCodeEncoderQRCode=sr,s.QRCodeMaskUtil=Sn,s.QRCodeMatrixUtil=ut,s.QRCodeMode=at,s.QRCodeReader=wi,s.QRCodeVersion=Qe,s.QRCodeWriter=Yr,s.RGBLuminanceSource=Ko,s.RSS14Reader=$t,s.RSSExpandedReader=Ee,s.ReaderException=Dl,s.ReedSolomonDecoder=mt,s.ReedSolomonEncoder=Fa,s.ReedSolomonException=Ge,s.Result=_e,s.ResultMetadataType=rt,s.ResultPoint=je,s.StringUtils=se,s.UnsupportedOperationException=Ce,s.VideoInputDevice=ht,s.WhiteRectangleDetector=ft,s.WriterException=en,s.ZXingArrays=B,s.ZXingCharset=Cu,s.ZXingInteger=W,s.ZXingStandardCharsets=Ha,s.ZXingStringBuilder=ge,s.ZXingStringEncoding=Z,s.ZXingSystem=z,s.createAbstractExpandedDecoder=Br,Object.defineProperty(s,"__esModule",{value:!0})}))})(Fc,Fc.exports)),Fc.exports}var Nn=j8();const L8=Ty(Nn),k8=JE({__proto__:null,default:L8},[Nn]);var ay=(function(){function r(e,s,l){if(this.formatMap=new Map([[Ve.QR_CODE,Nn.BarcodeFormat.QR_CODE],[Ve.AZTEC,Nn.BarcodeFormat.AZTEC],[Ve.CODABAR,Nn.BarcodeFormat.CODABAR],[Ve.CODE_39,Nn.BarcodeFormat.CODE_39],[Ve.CODE_93,Nn.BarcodeFormat.CODE_93],[Ve.CODE_128,Nn.BarcodeFormat.CODE_128],[Ve.DATA_MATRIX,Nn.BarcodeFormat.DATA_MATRIX],[Ve.MAXICODE,Nn.BarcodeFormat.MAXICODE],[Ve.ITF,Nn.BarcodeFormat.ITF],[Ve.EAN_13,Nn.BarcodeFormat.EAN_13],[Ve.EAN_8,Nn.BarcodeFormat.EAN_8],[Ve.PDF_417,Nn.BarcodeFormat.PDF_417],[Ve.RSS_14,Nn.BarcodeFormat.RSS_14],[Ve.RSS_EXPANDED,Nn.BarcodeFormat.RSS_EXPANDED],[Ve.UPC_A,Nn.BarcodeFormat.UPC_A],[Ve.UPC_E,Nn.BarcodeFormat.UPC_E],[Ve.UPC_EAN_EXTENSION,Nn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!k8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=l;var h=this.createZXingFormats(e),g=new Map;g.set(Nn.DecodeHintType.POSSIBLE_FORMATS,h),g.set(Nn.DecodeHintType.TRY_HARDER,!1),this.hints=g}return r.prototype.decodeAsync=function(e){var s=this;return new Promise(function(l,h){try{l(s.decode(e))}catch(g){h(g)}})},r.prototype.decode=function(e){var s=new Nn.MultiFormatReader(this.verbose,this.hints),l=new Nn.HTMLCanvasElementLuminanceSource(e),h=new Nn.BinaryBitmap(new Nn.HybridBinarizer(l)),g=s.decode(h);return{text:g.text,format:MN.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(s,l,h){e.set(s,l)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var s=[],l=0,h=e;l<h.length;l++){var g=h[l];this.formatMap.has(g)?s.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return s},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),B8=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},P8=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},ly=(function(){function r(e,s,l){if(this.formatMap=new Map([[Ve.QR_CODE,"qr_code"],[Ve.AZTEC,"aztec"],[Ve.CODABAR,"codabar"],[Ve.CODE_39,"code_39"],[Ve.CODE_93,"code_93"],[Ve.CODE_128,"code_128"],[Ve.DATA_MATRIX,"data_matrix"],[Ve.ITF,"itf"],[Ve.EAN_13,"ean_13"],[Ve.EAN_8,"ean_8"],[Ve.PDF_417,"pdf417"],[Ve.UPC_A,"upc_a"],[Ve.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=l;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return B8(this,void 0,void 0,function(){var s,l;return P8(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(s=h.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return l=this.selectLargestBarcode(s),[2,{text:l.rawValue,format:MN.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var s=null,l=0,h=0,g=e;h<g.length;h++){var y=g[h],C=y.boundingBox.width*y.boundingBox.height;C>l&&(l=C,s=y)}if(!s)throw"No largest barcode found";return s},r.prototype.createBarcodeDetectorFormats=function(e){for(var s=[],l=0,h=e;l<h.length;l++){var g=h[l];this.formatMap.has(g)?s.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(s,l,h){e.set(s,l)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),oy=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},cy=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},U8=(function(){function r(e,s,l,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=l,s&&ly.isSupported()?(this.primaryDecoder=new ly(e,l,h),this.secondaryDecoder=new ay(e,l,h)):this.primaryDecoder=new ay(e,l,h)}return r.prototype.decodeAsync=function(e){return oy(this,void 0,void 0,function(){var s;return cy(this,function(l){switch(l.label){case 0:s=performance.now(),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,l.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return oy(this,void 0,void 0,function(){var s,l;return cy(this,function(h){switch(h.label){case 0:s=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(l=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw l;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var s=performance.now()-e;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,s=0,l=this.executionResults;s<l.length;s++){var h=l[s];e+=h}var g=e/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),Z1=(function(){var r=function(e,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g])},r(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(e,s);function l(){this.constructor=e}e.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}})(),Ah=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},Sh=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},LN=(function(){function r(e,s){this.name=e,this.track=s}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var s={};s[this.name]=e;var l={advanced:[s]};return this.track.applyConstraints(l)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var s=e[this.name];return s}return null},r})(),z8=(function(r){Z1(e,r);function e(s,l){return r.call(this,s,l)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(s){var l={};l[this.name]=s;var h={advanced:[l]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),l=s[this.name];return{min:l.min,max:l.max,step:l.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(LN),F8=(function(r){Z1(e,r);function e(s){return r.call(this,"zoom",s)||this}return e})(z8),H8=(function(r){Z1(e,r);function e(s){return r.call(this,"torch",s)||this}return e})(LN),V8=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new F8(this.track)},r.prototype.torchFeature=function(){return new H8(this.track)},r})(),G8=(function(){function r(e,s,l){this.isClosed=!1,this.parentElement=e,this.mediaStream=s,this.callbacks=l,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var s=document.createElement("video");return s.style.width="".concat(e,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var l=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(l,h),e.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,s,l,h){return Ah(this,void 0,void 0,function(){var g,y;return Sh(this,function(C){switch(C.label){case 0:return g=new r(e,s,h),l.aspectRatio?(y={aspectRatio:l.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:C.sent(),C.label=2;case 2:return g.setupSurface(),[2,g]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var s=this,l=function(){setTimeout(e,200),s.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return Ah(this,void 0,void 0,function(){return Sh(this,function(s){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(s,l){var h=e.mediaStream.getVideoTracks(),g=h.length,y=0;e.mediaStream.getVideoTracks().forEach(function(C){e.mediaStream.removeTrack(C),C.stop(),++y,y>=g&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),s())})})},r.prototype.getCapabilities=function(){return new V8(this.getFirstTrackOrFail())},r})(),Y8=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,s,l){return Ah(this,void 0,void 0,function(){return Sh(this,function(h){return[2,G8.create(e,this.mediaStream,s,l)]})})},r.create=function(e){return Ah(this,void 0,void 0,function(){var s,l;return Sh(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return l=h.sent(),[2,new r(l)]}})})},r})(),uy=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},dy=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},q8=(function(){function r(){}return r.failIfNotSupported=function(){return uy(this,void 0,void 0,function(){return dy(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return uy(this,void 0,void 0,function(){return dy(this,function(s){return[2,Y8.create(e)]})})},r})(),W8=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},X8=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},Q8=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=yo.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=yo.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return W8(this,void 0,void 0,function(){var e,s,l,h,g,y,C;return X8(this,function(A){switch(A.label){case 0:return e=function(N){for(var I=N.getVideoTracks(),T=0,k=I;T<k.length;T++){var U=k[T];U.enabled=!1,U.stop(),N.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=A.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(l=A.sent(),h=[],g=0,y=l;g<y.length;g++)C=y[g],C.kind==="videoinput"&&h.push({id:C.deviceId,label:C.label});return e(s),[2,h]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,s){var l=function(g){for(var y=[],C=0,A=g;C<A.length;C++){var N=A[C];N.kind==="video"&&y.push({id:N.id,label:N.label})}e(y)},h=MediaStreamTrack;h.getSources(l)})},r})(),Ln;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(Ln||(Ln={}));var Z8=(function(){function r(){this.state=Ln.NOT_STARTED,this.onGoingTransactionNewState=Ln.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===Ln.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ln.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ln.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ln.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ln.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case Ln.UNKNOWN:throw"Transition from unknown is not allowed";case Ln.NOT_STARTED:this.failIfNewStateIs(e,[Ln.PAUSED]);break;case Ln.SCANNING:break;case Ln.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,s){for(var l=0,h=s;l<h.length;l++){var g=h[l];if(e===g)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),K8=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===Ln.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==Ln.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ln.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===Ln.PAUSED},r})(),J8=(function(){function r(){}return r.create=function(){return new K8(new Z8)},r})(),$8=(function(){var r=function(e,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g])},r(e,s)};return function(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(e,s);function l(){this.constructor=e}e.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}})(),Xs=(function(r){$8(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(_i),e5=(function(){function r(e,s){this.logger=s,this.fps=Xs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Xs.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?jN.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!Wi(this.qrbox)},r.create=function(e,s){return new r(e,s)},r})(),hy=(function(){function r(e,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var l;typeof s=="boolean"?this.verbose=s===!0:s&&(l=s,this.verbose=l.verbose===!0,l.experimentalFeatures),this.logger=new ON(this.verbose),this.qrcode=new U8(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(l),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=J8.create()}return r.prototype.start=function(e,s,l,h){var g=this;if(!e)throw"cameraIdOrConfig is required";if(!l||typeof l!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;h?y=h:y=this.verbose?this.logger.log:function(){};var C=e5.create(s,this.logger);this.clearElement();var A=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?A=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var N=A,I=document.getElementById(this.elementId);I.clientWidth?I.clientWidth:Xs.DEFAULT_WIDTH,I.style.position="relative",this.shouldScan=!0,this.element=I;var T=this,k=this.stateManagerProxy.startTransition(Ln.SCANNING);return new Promise(function(U,X){var z=N?C.videoConstraints:T.createVideoConstraints(e);if(!z){k.cancel(),X("videoConstraints should be defined");return}var ae={};(!N||C.aspectRatio)&&(ae.aspectRatio=C.aspectRatio);var fe={onRenderSurfaceReady:function(B,W){T.setupUi(B,W,C),T.isScanning=!0,T.foreverScan(C,l,y)}};q8.failIfNotSupported().then(function(B){B.create(z).then(function(W){return W.render(g.element,ae,fe).then(function(te){T.renderedCamera=te,k.execute(),U(null)}).catch(function(te){k.cancel(),X(te)})}).catch(function(W){k.cancel(),X(yo.errorGettingUserMedia(W))})}).catch(function(B){k.cancel(),X(yo.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ln.PAUSED),this.showPausedState(),(Wi(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,s=function(){e.stateManagerProxy.directTransition(Ln.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(Ln.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var l=function(){if(e.element){var g=document.getElementById(Xs.SHADED_REGION_ELEMENT_ID);g&&e.element.removeChild(g)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),l(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),s.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,s){return this.scanFileV2(e,s).then(function(l){return l.decodedText})},r.prototype.scanFileV2=function(e,s){var l=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Wi(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,g){l.possiblyCloseLastScanImageFile(),l.clearElement(),l.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var C=y.width,A=y.height,N=document.getElementById(l.elementId),I=N.clientWidth?N.clientWidth:Xs.DEFAULT_WIDTH,T=Math.max(N.clientHeight?N.clientHeight:A,Xs.FILE_SCAN_MIN_HEIGHT),k=l.computeCanvasDrawConfig(C,A,I,T);if(s){var U=l.createCanvasElement(I,T,"qr-canvas-visible");U.style.display="inline-block",N.appendChild(U);var X=U.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=I,X.canvas.height=T,X.drawImage(y,0,0,C,A,k.x,k.y,k.width,k.height)}var z=Xs.FILE_SCAN_HIDDEN_CANVAS_PADDING,ae=Math.max(y.width,k.width),fe=Math.max(y.height,k.height),B=ae+2*z,W=fe+2*z,te=l.createCanvasElement(B,W);N.appendChild(te);var ne=te.getContext("2d");if(!ne)throw"Unable to get 2d context from canvas";ne.canvas.width=B,ne.canvas.height=W,ne.drawImage(y,0,0,C,A,z,z,ae,fe);try{l.qrcode.decodeRobustlyAsync(te).then(function(ce){h(sy.createFromQrcodeResult(ce))}).catch(g)}catch(ce){g("QR code parse error, error = ".concat(ce))}},y.onerror=g,y.onabort=g,y.onstalled=g,y.onsuspend=g,y.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return Q8.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!jN.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var s=[Ve.QR_CODE,Ve.AZTEC,Ve.CODABAR,Ve.CODE_39,Ve.CODE_93,Ve.CODE_128,Ve.DATA_MATRIX,Ve.MAXICODE,Ve.ITF,Ve.EAN_13,Ve.EAN_8,Ve.PDF_417,Ve.RSS_14,Ve.RSS_EXPANDED,Ve.UPC_A,Ve.UPC_E,Ve.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return s;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var l=[],h=0,g=e.formatsToSupport;h<g.length;h++){var y=g[h];M8(y)?l.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(l.length===0)throw"None of formatsToSupport match supported values.";return l},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Wi(e))return!0;if(!Wi(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Wi(e.experimentalFeatures))return!0;var s=e.experimentalFeatures;return Wi(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,s,l){var h=this,g=l.qrbox;this.validateQrboxConfig(g);var y=this.toQrdimensions(e,s,g),C=function(N){if(N<Xs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Xs.MIN_QR_BOX_SIZE,"px.")},A=function(N){return N>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),N=e),N};C(y.width),C(y.height),y.width=A(y.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,s,l){if(typeof l=="number")return{width:l,height:l};if(typeof l=="function")try{return l(e,s)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return l},r.prototype.setupUi=function(e,s,l){l.isShadedBoxEnabled()&&this.validateQrboxSize(e,s,l);var h=Wi(l.qrbox)?{width:e,height:s}:l.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(e,s,h);g.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=l.isShadedBoxEnabled()&&g.height<=s,C={x:0,y:0,width:e,height:s},A=y?this.getShadedRegionBounds(e,s,g):C,N=this.createCanvasElement(A.width,A.height),I={willReadFrequently:!0},T=N.getContext("2d",I);T.canvas.width=A.width,T.canvas.height=A.height,this.element.append(N),y&&this.possiblyInsertShadingElement(this.element,e,s,g),this.createScannerPausedUiElement(this.element),this.qrRegion=A,this.context=T,this.canvasElement=N},r.prototype.createScannerPausedUiElement=function(e){var s=document.createElement("div");s.innerText=yo.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",e.appendChild(s),this.scannerPausedUiElement=s},r.prototype.scanContext=function(e,s){var l=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,sy.createFromQrcodeResult(h)),l.possiblyUpdateShaders(!0),!0}).catch(function(h){l.possiblyUpdateShaders(!1);var g=yo.codeParseError(h);return s(g,DN.createFrom(g)),!1})},r.prototype.foreverScan=function(e,s,l){var h=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),y=g.videoWidth/g.clientWidth,C=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var A=this.qrRegion.width*y,N=this.qrRegion.height*C,I=this.qrRegion.x*y,T=this.qrRegion.y*C;this.context.drawImage(g,I,T,A,N,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,s,l)},h.getTimeoutFps(e.fps))};this.scanContext(s,l).then(function(U){!U&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(s,l).finally(function(){k()})):k()}).catch(function(U){h.logger.logError("Error happend while scanning context",U),k()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var s="facingMode",l="deviceId",h={user:!0,environment:!0},g="exact",y=function(X){if(X in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},C=Object.keys(e);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var A=Object.keys(e)[0];if(A!==s&&A!==l)throw"Only '".concat(s,"' and '").concat(l,"' ")+" are supported for 'cameraIdOrConfig'";if(A===s){var N=e.facingMode;if(typeof N=="string"){if(y(N))return{facingMode:N}}else if(typeof N=="object")if(g in N){if(y(N["".concat(g)]))return{facingMode:{exact:N["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var I=typeof N;throw"Invalid type of 'facingMode' = ".concat(I)}}else{var T=e.deviceId;if(typeof T=="string")return{deviceId:T};if(typeof T=="object"){if(g in T)return{deviceId:{exact:T["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var k=typeof T;throw"Invalid type of 'deviceId' = ".concat(k)}}}var U=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},r.prototype.computeCanvasDrawConfig=function(e,s,l,h){if(e<=l&&s<=h){var g=(l-e)/2,y=(h-s)/2;return{x:g,y,width:e,height:s}}else{var C=e,A=s;return e>l&&(s=l/e*s,e=l),s>h&&(e=h/s*e,s=h),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(A)+" to ".concat(e,"X").concat(s,".")),this.computeCanvasDrawConfig(e,s,l,h)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=e?Xs.BORDER_SHADER_MATCH_COLOR:Xs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,s,l){var h=e,g=s,y=document.createElement("canvas");return y.style.width="".concat(h,"px"),y.style.height="".concat(g,"px"),y.style.display="none",y.id=Wi(l)?"qr-canvas":l,y},r.prototype.getShadedRegionBounds=function(e,s,l){if(l.width>e||l.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-l.width)/2,y:(s-l.height)/2,width:l.width,height:l.height}},r.prototype.possiblyInsertShadingElement=function(e,s,l,h){if(!(s-h.width<1||l-h.height<1)){var g=document.createElement("div");g.style.position="absolute";var y=(s-h.width)/2,C=(l-h.height)/2;if(g.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Xs.SHADED_REGION_ELEMENT_ID),s-h.width<11||l-h.height<11)this.hasBorderShaders=!1;else{var A=5,N=40;this.insertShaderBorders(g,N,A,-A,null,0,!0),this.insertShaderBorders(g,N,A,-A,null,0,!1),this.insertShaderBorders(g,N,A,null,-A,0,!0),this.insertShaderBorders(g,N,A,null,-A,0,!1),this.insertShaderBorders(g,A,N+A,-A,null,-A,!0),this.insertShaderBorders(g,A,N+A,null,-A,-A,!0),this.insertShaderBorders(g,A,N+A,-A,null,-A,!1),this.insertShaderBorders(g,A,N+A,null,-A,-A,!1),this.hasBorderShaders=!0}e.append(g)}},r.prototype.insertShaderBorders=function(e,s,l,h,g,y,C){var A=document.createElement("div");A.style.position="absolute",A.style.backgroundColor=Xs.BORDER_SHADER_DEFAULT_COLOR,A.style.width="".concat(s,"px"),A.style.height="".concat(l,"px"),h!==null&&(A.style.top="".concat(h,"px")),g!==null&&(A.style.bottom="".concat(g,"px")),C?A.style.left="".concat(y,"px"):A.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(A),e.appendChild(A)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),K1="data:image/svg+xml;base64,",t5=K1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",n5=K1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",fy=K1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",s5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",my=(function(){function r(){}return r.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},r})(),i5=(function(){function r(){this.data=my.createDefault();var e=localStorage.getItem(r.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return r.prototype.hasCameraPermissions=function(){return this.data.hasPermission},r.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},r.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},r.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},r.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},r.prototype.reset=function(){this.data=my.createDefault(),this.flush()},r.prototype.flush=function(){localStorage.setItem(r.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},r.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",r})(),r5=(function(){function r(){this.infoDiv=document.createElement("div")}return r.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=iy.poweredBy();var s=document.createElement("a");s.innerText="ScanApp",s.href="https://scanapp.org",s.target="new",s.style.color="white",this.infoDiv.appendChild(s);var l=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(l),this.infoDiv.appendChild(h);var g=document.createElement("a");g.innerText=iy.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),e.appendChild(this.infoDiv)},r.prototype.show=function(){this.infoDiv.style.display="block"},r.prototype.hide=function(){this.infoDiv.style.display="none"},r})(),a5=(function(){function r(e,s){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=s,this.infoIcon=document.createElement("img")}return r.prototype.renderInto=function(e){var s=this;this.infoIcon.alt="Info icon",this.infoIcon.src=fy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(l){return s.onHoverIn()},this.infoIcon.onmouseout=function(l){return s.onHoverOut()},this.infoIcon.onclick=function(l){return s.onClick()},e.appendChild(this.infoIcon)},r.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},r.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},r.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=s5,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=fy,this.infoIcon.style.opacity="0.6")},r})(),l5=(function(){function r(){var e=this;this.infoDiv=new r5,this.infoIcon=new a5(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return r.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},r})(),o5=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},c5=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},gy=(function(){function r(){}return r.hasPermissions=function(){return o5(this,void 0,void 0,function(){var e,s,l,h;return c5(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=g.sent(),s=0,l=e;s<l.length;s++)if(h=l[s],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},r})(),wa=(function(){function r(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return r.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},r.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},r.prototype.isCameraScanRequired=function(){for(var e=0,s=this.supportedScanTypes;e<s.length;e++){var l=s[e];if(r.isCameraScanType(l))return!0}return!1},r.isCameraScanType=function(e){return e===Ma.SCAN_TYPE_CAMERA},r.isFileScanType=function(e){return e===Ma.SCAN_TYPE_FILE},r.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return _i.DEFAULT_SUPPORTED_SCAN_TYPE;var s=_i.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>s)throw"Max ".concat(s," values expected for ")+"supportedScanTypes";for(var l=0,h=e;l<h.length;l++){var g=h[l];if(!_i.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return e},r})(),Zs=(function(){function r(){}return r.ALL_ELEMENT_CLASS="html5-qrcode-element",r.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",r.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",r.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",r.TORCH_BUTTON_ID="html5-qrcode-button-torch",r.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",r.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",r.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",r.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",r.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",r.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",r})(),Ir=(function(){function r(){}return r.createElement=function(e,s){var l=document.createElement(e);return l.id=s,l.classList.add(Zs.ALL_ELEMENT_CLASS),e==="button"&&l.setAttribute("type","button"),l},r})(),kN=function(r,e,s,l){function h(g){return g instanceof s?g:new s(function(y){y(g)})}return new(s||(s=Promise))(function(g,y){function C(I){try{N(l.next(I))}catch(T){y(T)}}function A(I){try{N(l.throw(I))}catch(T){y(T)}}function N(I){I.done?g(I.value):h(I.value).then(C,A)}N((l=l.apply(r,e||[])).next())})},BN=function(r,e){var s={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,y;return y={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function C(N){return function(I){return A([N,I])}}function A(N){if(l)throw new TypeError("Generator is already executing.");for(;y&&(y=0,N[0]&&(s=0)),s;)try{if(l=1,h&&(g=N[0]&2?h.return:N[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,N[1])).done)return g;switch(h=0,g&&(N=[N[0]&2,g.value]),N[0]){case 0:case 1:g=N;break;case 4:return s.label++,{value:N[1],done:!1};case 5:s.label++,h=N[1],N=[0];continue;case 7:N=s.ops.pop(),s.trys.pop();continue;default:if(g=s.trys,!(g=g.length>0&&g[g.length-1])&&(N[0]===6||N[0]===2)){s=0;continue}if(N[0]===3&&(!g||N[1]>g[0]&&N[1]<g[3])){s.label=N[1];break}if(N[0]===6&&s.label<g[1]){s.label=g[1],g=N;break}if(g&&s.label<g[2]){s.label=g[2],s.ops.push(N);break}g[2]&&s.ops.pop(),s.trys.pop();continue}N=e.call(r,s)}catch(I){N=[6,I],h=0}finally{l=g=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},xy=(function(){function r(e,s,l){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=s,this.onTorchActionFailureCallback=l}return r.prototype.isTorchEnabled=function(){return this.isTorchOn},r.prototype.flipState=function(){return kN(this,void 0,void 0,function(){var e,s;return BN(this,function(l){switch(l.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return l.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return s=l.sent(),this.propagateFailure(e,s),this.buttonController.enable(),[3,4];case 4:return[2]}})})},r.prototype.updateUiBasedOnLatestSettings=function(e,s){e===s?(this.buttonController.setText(s?on.torchOffButton():on.torchOnButton()),this.isTorchOn=s):this.propagateFailure(s),this.buttonController.enable()},r.prototype.propagateFailure=function(e,s){var l=e?on.torchOnFailedMessage():on.torchOffFailedMessage();s&&(l+="; Error = "+s),this.onTorchActionFailureCallback(l)},r.prototype.reset=function(){this.isTorchOn=!1},r})(),u5=(function(){function r(e,s){this.onTorchActionFailureCallback=s,this.torchButton=Ir.createElement("button",Zs.TORCH_BUTTON_ID),this.torchController=new xy(e,this,s)}return r.prototype.render=function(e,s){var l=this;this.torchButton.innerText=on.torchOnButton(),this.torchButton.style.display=s.display,this.torchButton.style.marginLeft=s.marginLeft;var h=this;this.torchButton.addEventListener("click",function(g){return kN(l,void 0,void 0,function(){return BN(this,function(y){switch(y.label){case 0:return[4,h.torchController.flipState()];case 1:return y.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove(Zs.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add(Zs.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove(Zs.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add(Zs.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},r.prototype.updateTorchCapability=function(e){this.torchController=new xy(e,this,this.onTorchActionFailureCallback)},r.prototype.getTorchButton=function(){return this.torchButton},r.prototype.hide=function(){this.torchButton.style.display="none"},r.prototype.show=function(){this.torchButton.style.display="inline-block"},r.prototype.disable=function(){this.torchButton.disabled=!0},r.prototype.enable=function(){this.torchButton.disabled=!1},r.prototype.setText=function(e){this.torchButton.innerText=e},r.prototype.reset=function(){this.torchButton.innerText=on.torchOnButton(),this.torchController.reset()},r.create=function(e,s,l,h){var g=new r(s,h);return g.render(e,l),g},r})(),d5=(function(){function r(e,s,l){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=s?"block":"none",e.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=Ir.createElement("button",Zs.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(C){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=Ir.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(C){if(!(C==null||C.target==null)){var A=C.target;if(!(A.files&&A.files.length===0)){var N=A.files,I=N[0],T=I.name;g.setImageNameToButton(T),l(I)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(C){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(C){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(C){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(C){C.stopPropagation(),C.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var A=C.dataTransfer;if(A){var N=A.files;if(!N||N.length===0)return;for(var I=!1,T=0;T<N.length;++T){var k=N.item(T);if(k){var U=/image.*/;if(k.type.match(U)){I=!0;var X=k.name;g.setImageNameToButton(X),l(k),y.innerText=on.dragAndDropMessage();break}}}I||(y.innerText=on.dragAndDropMessageOnlyImages())}})}return r.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},r.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},r.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},r.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},r.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},r.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},r.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},r.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=on.dragAndDropMessage(),e.style.fontWeight="400",e},r.prototype.setImageNameToButton=function(e){var s=20;if(e.length>s){var l=e.substring(0,8),h=e.length,g=e.substring(h-8,h);e="".concat(l,"....").concat(g)}var y=on.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=y},r.prototype.setInitialValueToButton=function(){var e=on.fileSelectionChooseImage()+" - "+on.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},r.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},r.create=function(e,s,l){var h=new r(e,s,l);return h},r})(),h5=(function(){function r(e){this.selectElement=Ir.createElement("select",Zs.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return r.prototype.render=function(e){var s=document.createElement("span");s.style.marginRight="10px";var l=this.cameras.length;if(l===0)throw new Error("No cameras found");if(l===1)s.style.display="none";else{var h=on.selectCamera();s.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var g=1,y=0,C=this.cameras;y<C.length;y++){var A=C[y],N=A.id,I=A.label==null?N:A.label;(!I||I==="")&&(I=[on.anonymousCameraPrefix(),g++].join(" "));var T=document.createElement("option");T.value=N,T.innerText=I,this.options.push(T),this.selectElement.appendChild(T)}s.appendChild(this.selectElement),e.appendChild(s)},r.prototype.disable=function(){this.selectElement.disabled=!0},r.prototype.isDisabled=function(){return this.selectElement.disabled===!0},r.prototype.enable=function(){this.selectElement.disabled=!1},r.prototype.getValue=function(){return this.selectElement.value},r.prototype.hasValue=function(e){for(var s=0,l=this.options;s<l.length;s++){var h=l[s];if(h.value===e)return!0}return!1},r.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},r.prototype.hasSingleItem=function(){return this.cameras.length===1},r.prototype.numCameras=function(){return this.cameras.length},r.create=function(e,s){var l=new r(s);return l.render(e),l},r})(),f5=(function(){function r(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ir.createElement("input",Zs.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return r.prototype.render=function(e,s){this.zoomElementContainer.style.display=s?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var l=on.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(l),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},r.prototype.onValueChange=function(){var e=on.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},r.prototype.setValues=function(e,s,l,h){this.rangeInput.min=e.toString(),this.rangeInput.max=s.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=l.toString(),this.onValueChange()},r.prototype.show=function(){this.zoomElementContainer.style.display="block"},r.prototype.hide=function(){this.zoomElementContainer.style.display="none"},r.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},r.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},r.create=function(e,s){var l=new r;return l.render(e,s),l},r})(),Qs;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Qs||(Qs={}));function m5(r){return{fps:r.fps,qrbox:r.qrbox,aspectRatio:r.aspectRatio,disableFlip:r.disableFlip,videoConstraints:r.videoConstraints}}function g5(r,e){return{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:e}}var x5=(function(){function r(e,s,l){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(s),this.verbose=l===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new wa(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ON(this.verbose),this.persistedDataManager=new i5,s.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return r.prototype.render=function(e,s){var l=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,y){if(e)e(g,y);else{if(l.lastMatchFound===g)return;l.lastMatchFound=g,l.setHeaderMessage(on.lastMatch(g),Qs.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,y){s&&s(g,y)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new hy(this.getScanRegionId(),g5(this.config,this.verbose))},r.prototype.pause=function(e){(Wi(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},r.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},r.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},r.prototype.clear=function(){var e=this,s=function(){var l=document.getElementById(e.elementId);l&&(l.innerHTML="",e.resetBasicLayout(l))};return this.html5Qrcode?new Promise(function(l,h){if(!e.html5Qrcode){l();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(g){if(!e.html5Qrcode){l();return}e.html5Qrcode.clear(),s(),l()}).catch(function(g){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",g),h(g)}):(e.html5Qrcode.clear(),s(),l())}):Promise.resolve()},r.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},r.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},r.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},r.prototype.createConfig=function(e){return e?(e.fps||(e.fps=_i.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!_i.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=_i.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=_i.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:_i.SCAN_DEFAULT_FPS,rememberLastUsedCamera:_i.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:_i.DEFAULT_SUPPORTED_SCAN_TYPE}},r.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var s=document.createElement("div"),l=this.getScanRegionId();s.id=l,s.style.width="100%",s.style.minHeight="100px",s.style.textAlign="center",e.appendChild(s),wa.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),g=this.getDashboardId();h.id=g,h.style.width="100%",e.appendChild(h),this.setupInitialDashboard(h)},r.prototype.resetBasicLayout=function(e){e.style.border="none"},r.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},r.prototype.createHeader=function(e){var s=document.createElement("div");s.style.textAlign="left",s.style.margin="0px",e.appendChild(s);var l=new l5;l.renderInto(s);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",s.appendChild(h)},r.prototype.createSection=function(e){var s=document.createElement("div");s.id=this.getDashboardSectionId(),s.style.width="100%",s.style.padding="10px 0px 10px 0px",s.style.textAlign="left",e.appendChild(s)},r.prototype.createCameraListUi=function(e,s,l){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(on.cameraPermissionRequesting());var g=function(){l||h.createPermissionButton(e,s)};hy.getCameras().then(function(y){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),y&&y.length>0?(e.removeChild(s),h.renderCameraSelection(y)):(h.setHeaderMessage(on.noCameraFound(),Qs.STATUS_WARNING),g())}).catch(function(y){h.persistedDataManager.setHasPermission(!1),l?l.disabled=!1:g(),h.setHeaderMessage(y,Qs.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},r.prototype.createPermissionButton=function(e,s){var l=this,h=Ir.createElement("button",this.getCameraPermissionButtonId());h.innerText=on.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,l.createCameraListUi(e,s,h)}),s.appendChild(h)},r.prototype.createPermissionsUi=function(e,s){var l=this;if(wa.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){gy.hasPermissions().then(function(h){h?l.createCameraListUi(e,s):(l.persistedDataManager.setHasPermission(!1),l.createPermissionButton(e,s))}).catch(function(h){l.persistedDataManager.setHasPermission(!1),l.createPermissionButton(e,s)});return}this.createPermissionButton(e,s)},r.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),s=document.createElement("div");e.appendChild(s);var l=document.createElement("div");l.id=this.getDashboardSectionCameraScanRegionId(),l.style.display=wa.isCameraScanType(this.currentScanType)?"block":"none",s.appendChild(l);var h=document.createElement("div");h.style.textAlign="center",l.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(l,h),this.renderFileScanUi(s)},r.prototype.renderFileScanUi=function(e){var s=wa.isFileScanType(this.currentScanType),l=this,h=function(g){if(!l.html5Qrcode)throw"html5Qrcode not defined";wa.isFileScanType(l.currentScanType)&&(l.setHeaderMessage(on.loadingImage()),l.html5Qrcode.scanFileV2(g,!0).then(function(y){l.resetHeaderMessage(),l.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){l.setHeaderMessage(y,Qs.STATUS_WARNING),l.qrCodeErrorCallback(y,DN.createFrom(y))}))};this.fileSelectionUi=d5.create(e,s,h)},r.prototype.renderCameraSelection=function(e){var s=this,l=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var g=f5.create(h,!1),y=function(z){var ae=z.zoomFeature();if(ae.isSupported()){g.setOnCameraZoomValueChangeCallback(function(B){ae.apply(B)});var fe=1;s.config.defaultZoomValueIfSupported&&(fe=s.config.defaultZoomValueIfSupported),fe=D8(fe,ae.min(),ae.max()),g.setValues(ae.min(),ae.max(),fe,ae.step()),g.show()}},C=h5.create(h,e),A=document.createElement("span"),N=Ir.createElement("button",Zs.CAMERA_START_BUTTON_ID);N.innerText=on.scanButtonStartScanningText(),A.appendChild(N);var I=Ir.createElement("button",Zs.CAMERA_STOP_BUTTON_ID);I.innerText=on.scanButtonStopScanningText(),I.style.display="none",I.disabled=!0,A.appendChild(I);var T,k=function(z){if(!z.torchFeature().isSupported()){T&&T.hide();return}T?T.updateTorchCapability(z.torchFeature()):T=u5.create(A,z.torchFeature(),{display:"none",marginLeft:"5px"},function(ae){l.setHeaderMessage(ae,Qs.STATUS_WARNING)}),T.show()};h.appendChild(A);var U=function(z){z||(N.style.display="none"),N.innerText=on.scanButtonStartScanningText(),N.style.opacity="1",N.disabled=!1,z&&(N.style.display="inline-block")};if(N.addEventListener("click",function(z){N.innerText=on.scanButtonScanningStarting(),C.disable(),N.disabled=!0,N.style.opacity="0.5",s.scanTypeSelector.hasMoreThanOneScanType()&&l.showHideScanTypeSwapLink(!1),l.resetHeaderMessage();var ae=C.getValue();l.persistedDataManager.setLastUsedCameraId(ae),l.html5Qrcode.start(ae,m5(l.config),l.qrCodeSuccessCallback,l.qrCodeErrorCallback).then(function(fe){I.disabled=!1,I.style.display="inline-block",U(!1);var B=l.html5Qrcode.getRunningTrackCameraCapabilities();s.config.showTorchButtonIfSupported===!0&&k(B),s.config.showZoomSliderIfSupported===!0&&y(B)}).catch(function(fe){l.showHideScanTypeSwapLink(!0),C.enable(),U(!0),l.setHeaderMessage(fe,Qs.STATUS_WARNING)})}),C.hasSingleItem()&&N.click(),I.addEventListener("click",function(z){if(!l.html5Qrcode)throw"html5Qrcode not defined";I.disabled=!0,l.html5Qrcode.stop().then(function(ae){s.scanTypeSelector.hasMoreThanOneScanType()&&l.showHideScanTypeSwapLink(!0),C.enable(),N.disabled=!1,I.style.display="none",N.style.display="inline-block",T&&(T.reset(),T.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),l.insertCameraScanImageToScanRegion()}).catch(function(ae){I.disabled=!1,l.setHeaderMessage(ae,Qs.STATUS_WARNING)})}),l.persistedDataManager.getLastUsedCameraId()){var X=l.persistedDataManager.getLastUsedCameraId();C.hasValue(X)?(C.setValue(X),N.click()):l.persistedDataManager.resetLastUsedCameraId()}},r.prototype.createSectionSwap=function(){var e=this,s=on.textIfCameraScanSelected(),l=on.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var y=Ir.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=wa.isCameraScanType(this.currentScanType)?s:l,y.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,wa.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),y.innerText=l,e.currentScanType=Ma.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),y.innerText=s,e.currentScanType=Ma.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),g.appendChild(y),h.appendChild(g)},r.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,s=this;if(this.persistedDataManager.hasCameraPermissions()){gy.hasPermissions().then(function(l){if(l){var h=document.getElementById(s.getCameraPermissionButtonId());if(!h)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else s.persistedDataManager.setHasPermission(!1)}).catch(function(l){s.persistedDataManager.setHasPermission(!1)});return}},r.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},r.prototype.setHeaderMessage=function(e,s){s||(s=Qs.STATUS_DEFAULT);var l=this.getHeaderMessageDiv();switch(l.innerText=e,l.style.display="block",s){case Qs.STATUS_SUCCESS:l.style.background="rgba(106, 175, 80, 0.26)",l.style.color="#477735";break;case Qs.STATUS_WARNING:l.style.background="rgba(203, 36, 49, 0.14)",l.style.color="#cb2431";break;case Qs.STATUS_DEFAULT:default:l.style.background="rgba(0, 0, 0, 0)",l.style.color="rgb(17, 17, 17)";break}},r.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},r.prototype.insertCameraScanImageToScanRegion=function(){var e=this,s=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){s.innerHTML="<br>",s.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(l){s.innerHTML="<br>",s.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=t5,this.cameraScanImage.alt=on.cameraScanAltText()},r.prototype.insertFileScanImageToScanRegion=function(){var e=this,s=document.getElementById(this.getScanRegionId());if(this.fileScanImage){s.innerHTML="<br>",s.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(l){s.innerHTML="<br>",s.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=n5,this.fileScanImage.alt=on.fileScanAltText()},r.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},r.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},r.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},r.prototype.getDashboardSectionSwapLinkId=function(){return Zs.SCAN_TYPE_CHANGE_ANCHOR_ID},r.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},r.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},r.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},r.prototype.getCameraPermissionButtonId=function(){return Zs.CAMERA_PERMISSION_BUTTON_ID},r.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},r.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},r.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},r})();function p5({onScan:r,onReset:e,currentPatient:s,currentNurse:l,requireCabinet:h=!0}){const[g,y]=j.useState(""),[C,A]=j.useState(""),[N,I]=j.useState(""),[T,k]=j.useState([]),[U,X]=j.useState([]),[z,ae]=j.useState(!1),[fe,B]=j.useState(!1),[W,te]=j.useState(-1),[ne,ce]=j.useState(!1),[G,J]=j.useState(!1),[Q,Ce]=j.useState(!1),[Z,se]=j.useState(null),[ge,Ae]=j.useState(null),Y=j.useRef(null),V=j.useRef(null),ue=j.useRef(null),ye=j.useRef(null),tt=j.useRef(null),{patients:Ke}=fu(),ht=[{id:"N001",name:"Sister Anita Kumar"},{id:"N002",name:"Nurse Priya Sharma"},{id:"N003",name:"Nurse Rajesh Patel"},{id:"N004",name:"Sister Meera Singh"}],ze=[{id:"CAB-A1",name:"Cabinet A1 - General Meds",location:"Ward A"},{id:"CAB-A2",name:"Cabinet A2 - Emergency",location:"Ward A"},{id:"CAB-B1",name:"Cabinet B1 - Antibiotics",location:"Ward B"},{id:"CAB-B2",name:"Cabinet B2 - Controlled Substances",location:"Ward B"},{id:"CAB-C1",name:"Cabinet C1 - ICU Medications",location:"ICU"}];j.useEffect(()=>{if(g.length>=1){const de=Ke.filter(Ge=>Ge.hhid.toLowerCase().includes(g.toLowerCase())||Ge.name.toLowerCase().includes(g.toLowerCase())).slice(0,5);k(de),ae(de.length>0)}else k([]),ae(!1)},[g,Ke]),j.useEffect(()=>{if(C.length>=1){const de=ht.filter(Ge=>Ge.id.toLowerCase().includes(C.toLowerCase())||Ge.name.toLowerCase().includes(C.toLowerCase())).slice(0,5);X(de),B(de.length>0)}else X([]),B(!1)},[C]),j.useEffect(()=>{if(N){const de=setInterval(()=>{ze.some(He=>He.id===N.toUpperCase())&&!ne&&setTimeout(()=>{ce(!0),Le()},2e3)},500);return()=>clearInterval(de)}},[N]);const Be=de=>{se(de),Ce(!0),Ae(null),setTimeout(()=>{try{const Ge={fps:10,qrbox:{width:250,height:150},aspectRatio:1,rememberLastUsedCamera:!0,supportedScanTypes:[0,1,2,3,4,5,6,7]};tt.current=new x5("barcode-scanner-container",Ge,!1),tt.current.render(He=>{st(He,de)},He=>{console.log("Scan error (normal):",He)})}catch(Ge){console.error("Scanner initialization error:",Ge),Ae("Failed to start camera. Please check permissions."),_e()}},100)},_e=()=>{if(tt.current){try{tt.current.clear()}catch(de){console.error("Error stopping scanner:",de)}tt.current=null}Ce(!1),se(null),Ae(null)},st=(de,Ge)=>{const He=de.trim().toUpperCase();Ge==="patient"?(y(He),setTimeout(()=>V.current?.focus(),100)):Ge==="nurse"?(A(He),h&&setTimeout(()=>ue.current?.focus(),100)):Ge==="cabinet"&&(I(He),ce(!1),J(!0)),_e(),Le()},Le=()=>{try{const de=new(window.AudioContext||window.webkitAudioContext),Ge=de.createOscillator(),He=de.createGain();Ge.connect(He),He.connect(de.destination),Ge.frequency.value=800,Ge.type="sine",He.gain.setValueAtTime(.3,de.currentTime),He.gain.exponentialRampToValueAtTime(.01,de.currentTime+.2),Ge.start(de.currentTime),Ge.stop(de.currentTime+.2)}catch{console.log("Audio not supported")}};j.useEffect(()=>()=>{_e()},[]);const Ye=()=>{h?g&&C&&N&&ne?(r(g.toUpperCase(),C.toUpperCase(),N.toUpperCase()),ae(!1),B(!1)):ne||J(!0):g&&C&&(r(g.toUpperCase(),C.toUpperCase()),ae(!1),B(!1))},rt=()=>{y(""),A(""),I(""),ce(!1),J(!1),k([]),X([]),ae(!1),B(!1),_e(),e()},wt=de=>{y(de.hhid),ae(!1),V.current?.focus()},Et=de=>{A(de.id),B(!1),h&&setTimeout(()=>ue.current?.focus(),100)},pt=de=>{z&&(de.key==="ArrowDown"?(de.preventDefault(),te(Ge=>Math.min(Ge+1,T.length-1))):de.key==="ArrowUp"?(de.preventDefault(),te(Ge=>Math.max(Ge-1,0))):de.key==="Enter"&&W>=0?(de.preventDefault(),wt(T[W]),te(-1)):de.key==="Escape"&&(ae(!1),te(-1)))},it=()=>{ce(!0),J(!1),Le()};return u.jsxs(Tt,{className:"border-2 border-blue-200 shadow-xl sm:shadow-2xl overflow-hidden relative group",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-indigo-500/5 to-cyan-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700 text-white p-3 sm:p-4 md:p-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 sm:w-32 h-24 sm:h-32 bg-white/10 rounded-full blur-2xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-16 sm:w-24 h-16 sm:h-24 bg-white/10 rounded-full blur-xl animate-pulse",style:{animationDelay:"1s"}}),u.jsxs("div",{className:"relative z-10",children:[u.jsxs("h3",{className:"flex items-center gap-2 text-sm sm:text-base md:text-lg font-bold mb-1",children:[u.jsx("div",{className:"bg-white/20 p-1.5 sm:p-2 rounded-lg backdrop-blur-sm animate-bounce",children:u.jsx(aE,{size:16,className:"sm:w-5 sm:h-5 md:w-6 md:h-6"})}),u.jsx("span",{className:"truncate",children:h?"Smart Authentication System":"Patient & Nurse Verification"})]}),u.jsxs("p",{className:"text-white/90 text-[10px] sm:text-xs md:text-sm flex items-center gap-2",children:[u.jsx(fl,{size:12,className:"flex-shrink-0 animate-pulse"}),u.jsx("span",{className:"truncate",children:h?"Scan ID + Unlock Cabinet":"Scan barcode or type to search"})]})]})]}),u.jsxs(Mt,{className:"p-3 sm:p-4 md:p-6 relative z-10",children:[Q&&u.jsx("div",{className:"mb-6 animate-in slide-in-from-top duration-500",children:u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-4 relative overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-600 p-2 rounded-lg animate-pulse",children:u.jsx(Uc,{size:20,className:"text-white"})}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-slate-900 text-sm sm:text-base",children:["Scanning ",Z==="patient"?"Patient HHID":Z==="nurse"?"Nurse ID":"Cabinet ID"]}),u.jsx("p",{className:"text-xs text-slate-600",children:"Position barcode within frame"})]})]}),u.jsxs(et,{size:"sm",variant:"outline",onClick:_e,className:"border-red-300 hover:bg-red-50 hover:border-red-500",children:[u.jsx(lE,{size:14,className:"mr-1"}),"Stop"]})]}),u.jsx("div",{id:"barcode-scanner-container",ref:ye,className:"rounded-lg overflow-hidden bg-black/5"}),ge&&u.jsxs("div",{className:"mt-4 bg-red-50 border-2 border-red-300 rounded-lg p-3 flex items-start gap-2",children:[u.jsx(Io,{size:18,className:"text-red-600 flex-shrink-0 mt-0.5"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-red-900 text-sm",children:"Camera Error"}),u.jsx("p",{className:"text-xs text-red-700 mt-1",children:ge})]})]}),u.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[u.jsxs("div",{className:"bg-white rounded-lg p-2 border border-blue-200",children:[u.jsx("p",{className:"font-semibold text-blue-900",children:" Hold Steady"}),u.jsx("p",{className:"text-slate-600 text-[10px]",children:"Keep device stable"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-2 border border-blue-200",children:[u.jsx("p",{className:"font-semibold text-blue-900",children:" Good Light"}),u.jsx("p",{className:"text-slate-600 text-[10px]",children:"Ensure proper lighting"})]}),u.jsxs("div",{className:"bg-white rounded-lg p-2 border border-blue-200",children:[u.jsx("p",{className:"font-semibold text-blue-900",children:" Center Code"}),u.jsx("p",{className:"text-slate-600 text-[10px]",children:"Align within box"})]})]})]})}),G&&!ne&&N&&u.jsx("div",{className:"mb-6 animate-in slide-in-from-top duration-500",children:u.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-400 rounded-xl p-4 relative overflow-hidden",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"bg-amber-500 p-2 rounded-lg animate-pulse flex-shrink-0",children:u.jsx(To,{size:20,className:"text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-bold text-amber-900 text-sm sm:text-base mb-2",children:" Cabinet Access Required"}),u.jsxs("p",{className:"text-xs sm:text-sm text-amber-800 mb-3",children:["Please physically unlock ",u.jsx("span",{className:"font-mono font-bold",children:N})," to proceed with medication administration."]}),u.jsx("div",{className:"flex items-center gap-2 mb-3",children:u.jsxs("div",{className:"flex-1 bg-white rounded-lg p-2 border border-amber-300",children:[u.jsx("p",{className:"text-xs text-slate-600",children:"Waiting for IoT signal..."}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx(oE,{size:12,className:"text-amber-600 animate-pulse"}),u.jsx("div",{className:"flex-1 bg-amber-100 rounded-full h-1.5 overflow-hidden",children:u.jsx("div",{className:"bg-amber-500 h-1.5 rounded-full animate-pulse",style:{width:"70%"}})})]})]})}),u.jsxs(et,{size:"sm",onClick:it,className:"bg-green-600 hover:bg-green-700 text-white",children:[u.jsx(Ti,{size:14,className:"mr-2"}),"Simulate Cabinet Unlock (Demo)"]})]})]})})}),ne&&N&&u.jsx("div",{className:"mb-4 animate-in slide-in-from-top duration-500",children:u.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-400 rounded-xl p-3 flex items-center gap-3",children:[u.jsx("div",{className:"bg-green-500 p-2 rounded-lg animate-bounce",children:u.jsx(Ti,{size:18,className:"text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-bold text-green-900 text-sm",children:" Cabinet Unlocked!"}),u.jsxs("p",{className:"text-xs text-green-700",children:[u.jsx("span",{className:"font-mono font-bold",children:N})," is now accessible"]})]}),u.jsx(nn,{size:20,className:"text-green-600"})]})}),!s&&!Q?u.jsxs("div",{className:"space-y-3 sm:space-y-4 md:space-y-5",children:[u.jsxs("div",{className:"space-y-2 relative",children:[u.jsxs("label",{className:"text-xs sm:text-sm font-semibold flex items-center gap-2 text-slate-700",children:[u.jsx("div",{className:"bg-blue-100 p-1 sm:p-1.5 rounded-md",children:u.jsx(Rr,{size:12,className:"sm:w-3.5 sm:h-3.5 text-blue-600"})}),"Patient HHID / Name"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Je,{ref:Y,placeholder:"Type HH001 or name...",value:g,onChange:de=>y(de.target.value),onKeyDown:pt,onFocus:()=>g&&ae(T.length>0),className:"text-sm sm:text-base md:text-lg font-mono pr-10 h-11 sm:h-12 border-2 border-slate-200 focus:border-blue-500 transition-colors"}),u.jsx(Cs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-400 animate-pulse",size:16})]}),u.jsxs(et,{type:"button",onClick:()=>Be("patient"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 h-11 sm:h-12 px-4 shadow-lg hover:shadow-xl transition-all",children:[u.jsx(Uc,{size:18,className:"sm:mr-2"}),u.jsx("span",{className:"hidden sm:inline",children:"Scan"})]})]}),z&&T.length>0&&u.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-blue-200 rounded-lg sm:rounded-xl shadow-2xl max-h-56 sm:max-h-64 overflow-y-auto animate-in slide-in-from-top duration-300",children:T.map((de,Ge)=>u.jsx("div",{onClick:()=>wt(de),className:`p-2.5 sm:p-3 cursor-pointer transition-all duration-200 border-b border-slate-100 last:border-0 active:bg-blue-100
                        ${W===Ge?"bg-blue-50 border-l-4 border-l-blue-600":"hover:bg-blue-50"}
                      `,children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-sm sm:text-base text-slate-900 truncate",children:de.name}),u.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 mt-1 items-center",children:[u.jsx(Ze,{variant:"outline",className:"text-[10px] sm:text-xs font-mono bg-blue-50 border-blue-300",children:de.hhid}),u.jsxs("span",{className:"text-[10px] sm:text-xs text-slate-500 truncate",children:[de.age,"Y  ",de.sex,"  ",de.ward]})]})]}),de.status==="critical"&&u.jsx(Ze,{variant:"destructive",className:"text-[10px] sm:text-xs flex-shrink-0",children:"Critical"})]})},de.hhid))}),g&&!z&&T.length===0&&u.jsx("p",{className:"text-[10px] sm:text-xs text-amber-600 flex items-center gap-1 mt-1",children:" No patient found. Try different search."})]}),u.jsxs("div",{className:"space-y-2 relative",children:[u.jsxs("label",{className:"text-xs sm:text-sm font-semibold flex items-center gap-2 text-slate-700",children:[u.jsx("div",{className:"bg-blue-100 p-1 sm:p-1.5 rounded-md",children:u.jsx(U0,{size:12,className:"sm:w-3.5 sm:h-3.5 text-blue-600"})}),"Nurse ID / Name"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Je,{ref:V,placeholder:"Type N001 or name...",value:C,onChange:de=>A(de.target.value),onFocus:()=>C&&B(U.length>0),className:"text-sm sm:text-base md:text-lg font-mono pr-10 h-11 sm:h-12 border-2 border-slate-200 focus:border-blue-500 transition-colors",onKeyPress:de=>de.key==="Enter"&&!h&&Ye()}),u.jsx(Cs,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-400 animate-pulse",size:16})]}),u.jsxs(et,{type:"button",onClick:()=>Be("nurse"),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 h-11 sm:h-12 px-4 shadow-lg hover:shadow-xl transition-all",children:[u.jsx(Uc,{size:18,className:"sm:mr-2"}),u.jsx("span",{className:"hidden sm:inline",children:"Scan"})]})]}),fe&&U.length>0&&u.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-blue-200 rounded-lg sm:rounded-xl shadow-2xl max-h-44 sm:max-h-48 overflow-y-auto animate-in slide-in-from-top duration-300",children:U.map(de=>u.jsx("div",{onClick:()=>Et(de),className:"p-2.5 sm:p-3 cursor-pointer hover:bg-blue-50 active:bg-blue-100 transition-all duration-200 border-b border-slate-100 last:border-0",children:u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[u.jsx("div",{className:"bg-blue-100 p-1.5 sm:p-2 rounded-full flex-shrink-0",children:u.jsx(U0,{size:14,className:"sm:w-4 sm:h-4 text-blue-600"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-sm sm:text-base text-slate-900 truncate",children:de.name}),u.jsx(Ze,{variant:"outline",className:"text-[10px] sm:text-xs font-mono mt-1 bg-blue-50 border-blue-300",children:de.id})]})]})},de.id))})]}),h&&u.jsxs("div",{className:"space-y-2 relative",children:[u.jsxs("label",{className:"text-xs sm:text-sm font-semibold flex items-center gap-2 text-slate-700",children:[u.jsx("div",{className:"bg-purple-100 p-1 sm:p-1.5 rounded-md",children:u.jsx(Vc,{size:12,className:"sm:w-3.5 sm:h-3.5 text-purple-600"})}),"Cabinet / Rack ID",ne&&u.jsxs(Ze,{className:"bg-green-100 text-green-700 text-[10px] ml-auto",children:[u.jsx(Ti,{size:10,className:"mr-1"}),"Unlocked"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Je,{ref:ue,placeholder:"Type CAB-A1 or scan...",value:N,onChange:de=>{I(de.target.value),ce(!1)},className:"text-sm sm:text-base md:text-lg font-mono pr-10 h-11 sm:h-12 border-2 border-slate-200 focus:border-purple-500 transition-colors",onKeyPress:de=>de.key==="Enter"&&Ye()}),ne?u.jsx(Ti,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 animate-pulse",size:16}):u.jsx(To,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-amber-500 animate-pulse",size:16})]}),u.jsxs(et,{type:"button",onClick:()=>Be("cabinet"),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 h-11 sm:h-12 px-4 shadow-lg hover:shadow-xl transition-all",children:[u.jsx(Uc,{size:18,className:"sm:mr-2"}),u.jsx("span",{className:"hidden sm:inline",children:"Scan"})]})]}),N&&u.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 border border-slate-200 text-xs",children:[u.jsxs("p",{className:"font-semibold text-slate-700 mb-2 flex items-center gap-2",children:[u.jsx(Vc,{size:12}),"Available Cabinets:"]}),u.jsx("div",{className:"space-y-1",children:ze.filter(de=>de.id.toLowerCase().includes(N.toLowerCase())).slice(0,3).map(de=>u.jsxs("div",{onClick:()=>{I(de.id),ce(!1),J(!0)},className:"p-2 bg-white rounded border border-slate-200 hover:border-purple-400 hover:bg-purple-50 cursor-pointer transition-all",children:[u.jsx("p",{className:"font-mono font-bold text-slate-900",children:de.id}),u.jsxs("p",{className:"text-[10px] text-slate-600",children:[de.name,"  ",de.location]})]},de.id))})]})]}),u.jsxs(et,{onClick:Ye,disabled:h?!g||!C||!N||!ne:!g||!C,className:"w-full h-12 sm:h-14 text-sm sm:text-base md:text-lg bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700 hover:from-blue-700 hover:via-indigo-700 hover:to-blue-800 disabled:opacity-50 shadow-lg hover:shadow-xl active:scale-95 transition-all duration-300 font-bold",children:[u.jsx(nn,{className:"mr-2 animate-pulse",size:20}),h&&!ne?"Unlock Cabinet First":"Verify & Authenticate"]}),u.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200 text-xs",children:[u.jsx("p",{className:"font-semibold text-slate-700 mb-2",children:"Authentication Checklist:"}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsxs("div",{className:`flex items-center gap-2 ${g?"text-green-700":"text-slate-500"}`,children:[g?u.jsx(nn,{size:14}):u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-slate-300 rounded-full"}),u.jsx("span",{children:"Patient ID Scanned"})]}),u.jsxs("div",{className:`flex items-center gap-2 ${C?"text-green-700":"text-slate-500"}`,children:[C?u.jsx(nn,{size:14}):u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-slate-300 rounded-full"}),u.jsx("span",{children:"Nurse ID Verified"})]}),h&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`flex items-center gap-2 ${N?"text-green-700":"text-slate-500"}`,children:[N?u.jsx(nn,{size:14}):u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-slate-300 rounded-full"}),u.jsx("span",{children:"Cabinet Selected"})]}),u.jsxs("div",{className:`flex items-center gap-2 ${ne?"text-green-700":"text-slate-500"}`,children:[ne?u.jsx(nn,{size:14}):u.jsx("div",{className:"w-3.5 h-3.5 border-2 border-slate-300 rounded-full"}),u.jsx("span",{children:"Cabinet Unlocked"})]})]})]})]}),u.jsxs("div",{className:"border-t-2 border-dashed border-blue-200 pt-3 sm:pt-4 mt-3 sm:mt-4",children:[u.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 mb-2 flex items-center gap-1",children:[u.jsx(fl,{size:10,className:"sm:w-3 sm:h-3"}),"Quick Demo Access:"]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs(et,{size:"sm",variant:"outline",onClick:()=>{y("HH001"),A("N001"),h&&I("CAB-A1")},className:"text-xs sm:text-sm h-9 sm:h-10 hover:bg-blue-50 hover:border-blue-400 active:bg-blue-100 transition-all border-blue-200",children:[u.jsx(Fn,{size:12,className:"mr-1"}),"Load HH001"]}),u.jsxs(et,{size:"sm",variant:"outline",onClick:()=>{y("HH005"),A("N001"),h&&I("CAB-B1")},className:"text-xs sm:text-sm h-9 sm:h-10 hover:bg-blue-50 hover:border-blue-400 active:bg-blue-100 transition-all border-blue-200",children:[u.jsx(Fn,{size:12,className:"mr-1"}),"Load HH005"]})]})]})]}):Q?null:u.jsx("div",{className:"space-y-3 sm:space-y-4 animate-in zoom-in duration-500",children:u.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-24 sm:w-32 h-24 sm:h-32 bg-blue-400/20 rounded-full blur-3xl animate-pulse"}),u.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4 relative z-10 gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-blue-700 flex-1 min-w-0",children:[u.jsx("div",{className:"bg-blue-500 p-1.5 sm:p-2 rounded-full animate-bounce flex-shrink-0",children:u.jsx(nn,{size:18,className:"sm:w-6 sm:h-6 text-white"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("span",{className:"font-bold text-sm sm:text-base md:text-lg block truncate",children:[" ",h?"Full Authentication Success!":"Authentication Success!"]}),u.jsx("span",{className:"text-[10px] sm:text-xs text-blue-600 block truncate",children:h?"Cabinet unlocked  Access granted":"Access granted"})]})]}),u.jsxs(et,{size:"sm",variant:"outline",onClick:rt,className:"h-8 sm:h-9 px-2 sm:px-3 border-red-300 hover:bg-red-50 hover:border-red-500 active:bg-red-100 transition-all flex-shrink-0",children:[u.jsx(_a,{size:14,className:"sm:mr-1"}),u.jsx("span",{className:"hidden sm:inline",children:"Clear"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 relative z-10",children:[u.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-md border-l-4 border-l-blue-500 hover:shadow-lg active:shadow-xl transition-shadow",children:[u.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 uppercase font-bold mb-1.5 sm:mb-2 flex items-center gap-1",children:[u.jsx(Rr,{size:10,className:"sm:w-3 sm:h-3"}),"Patient"]}),u.jsx("p",{className:"font-bold text-base sm:text-lg md:text-xl mb-2 text-slate-900 truncate",children:s.name}),u.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-2 sm:mb-3",children:[u.jsx(Ze,{variant:"outline",className:"text-[10px] sm:text-xs font-mono bg-blue-50 border-blue-300",children:s.hhid}),u.jsx(Ze,{variant:s.status==="critical"?"destructive":"default",className:"text-[10px] sm:text-xs animate-pulse",children:s.status.toUpperCase()})]}),u.jsxs("div",{className:"text-[10px] sm:text-xs text-slate-600 space-y-1 bg-slate-50 p-2 rounded-md",children:[u.jsxs("p",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Age / Sex:"}),u.jsxs("span",{className:"font-semibold",children:[s.age,"Y  ",s.sex]})]}),u.jsxs("p",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Ward / Bed:"}),u.jsxs("span",{className:"font-semibold truncate",children:[s.ward," - ",s.bed]})]}),u.jsxs("p",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Weight:"}),u.jsxs("span",{className:"font-semibold",children:[s.weight," kg"]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-md border-l-4 border-l-blue-600 hover:shadow-lg active:shadow-xl transition-shadow",children:[u.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 uppercase font-bold mb-1.5 sm:mb-2 flex items-center gap-1",children:[u.jsx(U0,{size:10,className:"sm:w-3 sm:h-3"}),"Nurse"]}),u.jsx("p",{className:"font-bold text-base sm:text-lg md:text-xl mb-2 text-slate-900 truncate",children:l.name}),u.jsx(Ze,{variant:"outline",className:"text-[10px] sm:text-xs font-mono mb-2 sm:mb-3 bg-blue-50 border-blue-300",children:l.id}),u.jsxs("div",{className:"text-[10px] sm:text-xs text-slate-600 space-y-1 bg-slate-50 p-2 rounded-md",children:[u.jsxs("p",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Role:"}),u.jsx("span",{className:"font-semibold",children:"Staff Nurse"})]}),u.jsxs("p",{className:"flex items-center justify-between gap-2",children:[u.jsx("span",{children:"Time:"}),u.jsx("span",{className:"font-semibold",children:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("p",{className:"text-blue-600 font-bold flex items-center gap-1",children:[u.jsx(nn,{size:10,className:"sm:w-3 sm:h-3"}),"Access Granted"]})]})]})]}),h&&N&&u.jsxs("div",{className:"mt-3 sm:mt-4 bg-white rounded-lg sm:rounded-xl p-3 sm:p-4 shadow-md border-l-4 border-l-green-500 relative z-10",children:[u.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 uppercase font-bold mb-1.5 sm:mb-2 flex items-center gap-1",children:[u.jsx(Vc,{size:10,className:"sm:w-3 sm:h-3"}),"Cabinet Access"]}),u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-base sm:text-lg text-slate-900 font-mono",children:N}),u.jsx("p",{className:"text-[10px] sm:text-xs text-slate-600 mt-1",children:ze.find(de=>de.id===N)?.name||"Medication Cabinet"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ti,{size:20,className:"text-green-600 animate-pulse"}),u.jsx(Ze,{className:"bg-green-100 text-green-700",children:"Unlocked"})]})]})]})]})})]})]})}function b5(){const r=Da(),[e,s]=j.useState(""),[l,h]=j.useState(null),[g,y]=j.useState(""),[C,A]=j.useState(!1),[N,I]=j.useState("all"),[T,k]=j.useState(new Date),[U,X]=j.useState("medications"),[z,ae]=j.useState(null),[fe,B]=j.useState(null),[W,te]=j.useState(!1),[ne,ce]=j.useState(!1),[G,J]=j.useState(!1),[Q,Ce]=j.useState(!1),[Z,se]=j.useState(!1),[ge,Ae]=j.useState([]),[Y,V]=j.useState({drugName:"",brandName:"",quantity:"",lastRackId:""}),[ue,ye]=j.useState(!1),{patients:tt}=fu(),{medications:Ke,loading:ht}=Vh(),ze=()=>{if(!fe)return{name:"Nurse",id:"N001",ward:"General Ward"};const be={N001:"General Ward",N002:"ICU",N003:"Pediatric Ward",N004:"Emergency Ward"};return{name:fe.name,id:fe.id,ward:be[fe.id]||"General Ward"}};j.useEffect(()=>{const be=setInterval(()=>{k(new Date)},6e4);return()=>clearInterval(be)},[]);const Be=Ke.filter(be=>be.status==="active"),_e=be=>{const Ie=new Date().toISOString().split("T")[0];return be.administrationLogs?.filter(Nt=>new Date(Nt.timestamp).toISOString().split("T")[0]===Ie&&Nt.status==="administered")||[]},st=be=>{if(!be.timing||be.timing.length===0)return{allowed:!0,reason:"No specific timing set"};const Ie=T,Nt=Ie.getHours(),je=Ie.getMinutes(),Tn=Nt*60+je,De=Ie.toISOString().split("T")[0],ft=be.administrationLogs?.filter(lt=>new Date(lt.timestamp).toISOString().split("T")[0]===De&&lt.status==="administered")||[];for(const lt of be.timing){const[In,gs]=lt.split(":").map(Number),pi=In*60+gs;if(ft.some(Jt=>{const yt=new Date(Jt.timestamp),pn=yt.getHours(),tr=yt.getMinutes(),La=pn*60+tr;return Math.abs(La-pi)<=120}))continue;if(Math.abs(Tn-pi)<=60)return{allowed:!0,scheduledTime:lt,reason:`Within allowed window for ${lt}`}}const ke=be.timing.map(lt=>{const[In,gs]=lt.split(":").map(Number);let Gt=In*60+gs-Tn;return Gt<0&&(Gt+=1440),{time:lt,diff:Gt}}).sort((lt,In)=>lt.diff-In.diff)[0],Pe=Math.floor(ke.diff/60),nt=ke.diff%60;return{allowed:!1,nextTime:ke.time,reason:`Next dose at ${ke.time} (in ${Pe}h ${nt}m)`}},Le=be=>tt.find(Ie=>Ie.hhid===be),Ye=be=>{const Ie=tt.find(Nt=>Nt.hhid===be);return Ie?Ie.name:"Unknown Patient"},rt=Be.filter(be=>{const Ie=e.toLowerCase(),Nt=tt.find(Tn=>Tn.hhid===be.patientHHID),je=be.patientHHID.toLowerCase().includes(Ie)||be.drugName.toLowerCase().includes(Ie)||Nt&&Nt.name.toLowerCase().includes(Ie);if(N==="all")return je;if(N==="due"){const Tn=st(be);return je&&Tn.allowed}if(N==="administered"){const Tn=_e(be);return je&&Tn.length>0}return je}),wt=(be,Ie,Nt)=>{const je=Le(be);if(!je){alert(" Patient not found!");return}ae(je),B({id:Ie,name:Ie==="N001"?"Sister Anita Kumar":Ie==="N002"?"Nurse Priya Sharma":Ie==="N003"?"Nurse Rajesh Patel":Ie==="N004"?"Sister Meera Singh":Ie}),te(!0),Nt&&J(!0)},Et=()=>{ae(null),B(null),te(!1),h(null),J(!1),ce(!1),y("")},pt=async be=>{if(!W){alert(" Please scan Patient and Nurse IDs first!");return}if(z.hhid!==be.patientHHID){alert(` Wrong Patient!

Scanned: ${z.name}
Required: ${Ye(be.patientHHID)}`),Et();return}const Ie=st(be);if(!Ie.allowed){alert(` Cannot administer now!

${Ie.reason}`);return}h(be),be.rackId&&(ce(!0),J(!1))},it=async()=>{if(l.rackId){Ce(!0);try{fetch("http://192.168.1.63/open",{method:"GET",mode:"no-cors"}).catch(()=>{}),await new Promise(Ie=>setTimeout(Ie,2e3)),J(!0),alert(` Rack ${l.rackId} Unlocked!`)}catch{J(!0),alert(` Rack ${l.rackId} Triggered`)}finally{Ce(!1)}}},de=async()=>{if(l){if(l.rackId&&!G){alert(" Please trigger the rack first!"),ce(!0);return}A(!0);try{const be=st(l),Ie={patientHHID:l.patientHHID,medicationId:l.id,drugName:l.drugName,dose:l.dose,route:l.route,nurseName:fe.name,nurseId:fe.id,scheduledTime:be.scheduledTime||"As needed",status:"administered",notes:g,rackId:l.rackId||null,timestamp:new Date().toISOString()},Nt=await R8(Ie,l.id);Nt.success?(alert(" Medication administered successfully!"),h(null),ce(!1),J(!1),y("")):alert(` Error: ${Nt.error}`)}catch(be){console.error("Administration error:",be),alert(" Failed to record administration")}finally{A(!1)}}},Ge=()=>{if(!Y.drugName||!Y.brandName||!Y.quantity){alert(" Please fill all required fields!");return}Ae([...ge,{...Y,id:Date.now()}]),V({drugName:"",brandName:"",quantity:"",lastRackId:""})},He=be=>{Ae(ge.filter(Ie=>Ie.id!==be))},mt=async()=>{if(ge.length===0){alert(" Please add at least one item!");return}const be=ze(),Ie={id:`PO${Date.now().toString().slice(-6)}`,requestedBy:be.name,nurseId:be.id,ward:be.ward,items:ge,requestDate:new Date().toISOString(),status:"pending"};console.log("Request submitted:",Ie),alert(` Request submitted!

Order ID: ${Ie.id}
Items: ${ge.length}
Ward: ${Ie.ward}`),Ae([]),se(!1)},vt=be=>{const[Ie,Nt]=be.split(":"),je=parseInt(Ie),Tn=je>=12?"PM":"AM";return`${je%12||12}:${Nt} ${Tn}`};return ht?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-red-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-pink-200 border-t-pink-600 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-600 font-semibold",children:"Loading..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-red-100",children:[u.jsx("div",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-30",children:u.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs(et,{variant:"outline",onClick:()=>r("/dashboard"),size:"sm",className:"shrink-0",children:[u.jsx(cl,{size:16}),u.jsx("span",{className:"hidden sm:inline ml-2",children:"Back"})]}),u.jsxs("div",{className:"flex-1 min-w-0 text-center",children:[u.jsx("h1",{className:"text-sm sm:text-lg md:text-xl font-bold text-slate-900 truncate",children:"Medication Administration"}),u.jsx("p",{className:"text-xs text-slate-600 hidden sm:block",children:"IoT-Enabled System"})]}),u.jsx("div",{className:"bg-pink-50 rounded-lg px-2 py-1 sm:px-3 sm:py-2 shrink-0",children:u.jsx("p",{className:"text-xs font-bold text-pink-600",children:T.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})})]})})}),u.jsxs("div",{className:"px-3 sm:px-4 md:px-6 py-4 sm:py-6",children:[u.jsx(Tt,{className:"border-2 border-pink-200 shadow-lg mb-4",children:u.jsx(Mt,{className:"p-2",children:u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsx("button",{onClick:()=>X("medications"),className:`px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg font-semibold text-xs sm:text-sm transition-all ${U==="medications"?"bg-gradient-to-r from-pink-600 to-rose-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-1.5 sm:gap-2",children:[u.jsx(fi,{size:16}),u.jsx("span",{children:"Medications"})]})}),u.jsx("button",{onClick:()=>X("requests"),className:`px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg font-semibold text-xs sm:text-sm transition-all ${U==="requests"?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-1.5 sm:gap-2",children:[u.jsx(Dm,{size:16}),u.jsx("span",{children:"Requests"})]})})]})})}),u.jsx(hl,{mode:"wait",children:U==="medications"?u.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[u.jsx("div",{className:"mb-4",children:u.jsx(p5,{onScan:wt,onReset:Et,currentPatient:z,currentNurse:fe,requireCabinet:!1})}),W&&u.jsxs(u.Fragment,{children:[u.jsx(Tt,{className:"border-2 border-pink-200 shadow-lg mb-4",children:u.jsxs(Mt,{className:"p-3 sm:p-4",children:[u.jsxs("div",{className:"flex gap-2 mb-3 sm:mb-0",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx(Je,{placeholder:"Search...",value:e,onChange:be=>s(be.target.value),className:"pl-10 h-11"})]}),u.jsx(et,{variant:"outline",size:"sm",onClick:()=>ye(!ue),className:"sm:hidden shrink-0",children:u.jsx(Ay,{size:16})})]}),u.jsxs("div",{className:"hidden sm:block",children:[u.jsx("label",{className:"text-sm font-semibold mb-1 block",children:"Filter"}),u.jsxs("select",{value:N,onChange:be=>I(be.target.value),className:"w-full h-11 border-2 border-slate-200 rounded-md px-3",children:[u.jsxs("option",{value:"all",children:["All for ",z.name]}),u.jsx("option",{value:"due",children:"Due Now"}),u.jsx("option",{value:"administered",children:"Administered Today"})]})]}),ue&&u.jsxs(Oe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"sm:hidden mt-3",children:[u.jsx("label",{className:"text-sm font-semibold mb-1 block",children:"Filter Status"}),u.jsxs("select",{value:N,onChange:be=>{I(be.target.value),ye(!1)},className:"w-full h-11 border-2 border-slate-200 rounded-md px-3",children:[u.jsxs("option",{value:"all",children:["All for ",z.name]}),u.jsx("option",{value:"due",children:"Due Now"}),u.jsx("option",{value:"administered",children:"Administered Today"})]})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4",children:rt.filter(be=>be.patientHHID===z.hhid).length===0?u.jsx("div",{className:"col-span-full",children:u.jsx(Tt,{className:"border-2 border-dashed border-slate-300",children:u.jsxs(Mt,{className:"p-8 sm:p-12 text-center",children:[u.jsx(fi,{size:48,className:"mx-auto text-slate-300 mb-4"}),u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-700 mb-2",children:"No Medications Found"}),u.jsxs("p",{className:"text-sm text-slate-500",children:["No medications for ",z.name]})]})})}):rt.filter(be=>be.patientHHID===z.hhid).map(be=>{const Ie=st(be),Nt=_e(be);return u.jsxs(Tt,{className:"border-2 border-pink-200 shadow-lg hover:shadow-xl transition-all",children:[u.jsx("div",{className:"bg-gradient-to-r from-pink-100 to-rose-100 p-3 sm:p-4 border-b-2 border-pink-200",children:u.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[u.jsx("div",{className:"bg-pink-200 p-2 rounded-lg shrink-0",children:u.jsx(fi,{className:"text-pink-600",size:18})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h3",{className:"font-bold text-base sm:text-lg text-pink-900 truncate",children:be.drugName}),u.jsxs("p",{className:"text-xs text-pink-700",children:[be.dose,"  ",be.route]}),be.brandName&&u.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Brand: ",be.brandName]})]})]}),be.rackId&&u.jsxs(Ze,{variant:"outline",className:"text-[10px] sm:text-xs bg-purple-50 shrink-0",children:[u.jsx(Vc,{size:10,className:"mr-1"}),be.rackId]})]})}),u.jsxs(Mt,{className:"p-3 sm:p-4 space-y-2.5 sm:space-y-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-1",children:"Frequency"}),u.jsxs(Ze,{variant:"outline",className:"text-xs",children:[u.jsx(Fn,{size:10,className:"mr-1"}),be.frequency]})]}),be.timing&&be.timing.length>0&&u.jsxs("div",{children:[u.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-1.5",children:[u.jsx(Qc,{size:10,className:"inline mr-1"}),"Times"]}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:be.timing.map((je,Tn)=>u.jsx(Ze,{variant:"outline",className:"text-[10px] sm:text-xs bg-blue-50",children:vt(je)},Tn))})]}),Nt.length>0&&u.jsx("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:u.jsxs("p",{className:"text-xs font-semibold text-green-900",children:[u.jsx(nn,{size:10,className:"inline mr-1"}),"Administered (",Nt.length,")"]})}),!Ie.allowed&&u.jsx("div",{className:"p-2 bg-amber-50 border border-amber-300 rounded",children:u.jsxs("p",{className:"text-[10px] sm:text-xs text-amber-900",children:[u.jsx(Io,{size:10,className:"inline mr-1"}),Ie.reason]})}),Ie.allowed?u.jsx(et,{onClick:()=>pt(be),className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 h-11 text-sm",children:be.rackId?u.jsxs(u.Fragment,{children:[u.jsx(Ti,{size:16,className:"mr-2"}),"Trigger & Give"]}):u.jsxs(u.Fragment,{children:[u.jsx(nn,{size:16,className:"mr-2"}),"Administer"]})}):u.jsxs(et,{disabled:!0,variant:"outline",className:"w-full border-2 border-amber-300 text-amber-700 h-11 text-sm",children:[u.jsx(ih,{size:16,className:"mr-2"}),"Not Time Yet"]})]})]},be.id)})})]})]},"medications"):u.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(Tt,{className:"border-2 border-purple-200 shadow-xl",children:[u.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 sm:p-6",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-lg sm:text-2xl font-bold flex items-center gap-2",children:[u.jsx(Dm,{size:24}),"Request Supplies"]}),u.jsx("p",{className:"text-purple-100 text-xs sm:text-sm mt-1",children:"Request medications for your ward"})]}),u.jsxs(et,{onClick:()=>se(!0),className:"bg-white text-purple-600 hover:bg-purple-50 w-full sm:w-auto",children:[u.jsx(Xd,{size:18,className:"mr-2"}),"New Request"]})]})}),u.jsx(Mt,{className:"p-6 sm:p-8",children:u.jsxs("div",{className:"text-center py-8 sm:py-12",children:[u.jsx(zc,{size:48,"sm:size":64,className:"mx-auto text-slate-300 mb-4"}),u.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-700 mb-2",children:"No Active Requests"}),u.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Submit a supply request to the pharmacy"}),u.jsxs(et,{onClick:()=>se(!0),className:"bg-gradient-to-r from-purple-600 to-indigo-600",children:[u.jsx(Xd,{size:18,className:"mr-2"}),"Create Request"]})]})})]})},"requests")})]}),Z&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:u.jsxs(Oe.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},className:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"bg-purple-600 text-white p-4 sm:p-6 rounded-t-2xl sticky top-0",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg sm:text-2xl font-bold",children:"New Supply Request"}),u.jsxs("p",{className:"text-purple-100 text-xs sm:text-sm mt-1",children:["For ",ze().ward]})]}),u.jsx(et,{variant:"ghost",size:"sm",onClick:()=>{se(!1),Ae([]),V({drugName:"",brandName:"",quantity:"",lastRackId:""})},className:"text-white hover:bg-white/20 sm:hidden",children:u.jsx(_a,{size:20})})]})}),u.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[u.jsxs(Tt,{className:"border-2 border-slate-200",children:[u.jsx("div",{className:"bg-slate-50 p-3 sm:p-4 border-b",children:u.jsx("h3",{className:"font-bold text-sm sm:text-base",children:"Add Item"})}),u.jsxs(Mt,{className:"p-3 sm:p-4 space-y-3 sm:space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Drug Name *"}),u.jsx(Je,{placeholder:"e.g., Paracetamol",value:Y.drugName,onChange:be=>V({...Y,drugName:be.target.value}),className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Brand Name *"}),u.jsx(Je,{placeholder:"e.g., Crocin",value:Y.brandName,onChange:be=>V({...Y,brandName:be.target.value}),className:"h-11 border-blue-300 bg-blue-50"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Quantity *"}),u.jsx(Je,{type:"number",placeholder:"100",value:Y.quantity,onChange:be=>V({...Y,quantity:be.target.value}),className:"h-11"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Last Rack"}),u.jsx(Je,{placeholder:"R-A1",value:Y.lastRackId,onChange:be=>V({...Y,lastRackId:be.target.value}),className:"h-11"})]})]}),u.jsxs(et,{onClick:Ge,className:"w-full bg-blue-600 h-11",children:[u.jsx(Xd,{size:18,className:"mr-2"}),"Add Item"]})]})]}),ge.length>0&&u.jsxs(Tt,{className:"border-2 border-purple-200",children:[u.jsx("div",{className:"bg-purple-50 p-3 sm:p-4 border-b",children:u.jsxs("h3",{className:"font-bold text-sm sm:text-base",children:["Items (",ge.length,")"]})}),u.jsx(Mt,{className:"p-3 sm:p-4 space-y-2",children:ge.map(be=>u.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white border rounded-lg",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-sm truncate",children:be.drugName}),u.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[u.jsxs(Ze,{variant:"outline",className:"text-[10px] bg-blue-50",children:["Brand: ",be.brandName]}),u.jsxs(Ze,{variant:"outline",className:"text-[10px]",children:["",be.quantity]}),be.lastRackId&&u.jsx(Ze,{variant:"outline",className:"text-[10px] bg-purple-50",children:be.lastRackId})]})]}),u.jsx(et,{variant:"ghost",size:"sm",onClick:()=>He(be.id),className:"text-red-500 hover:bg-red-50 shrink-0",children:u.jsx(Sy,{size:16})})]},be.id))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[u.jsx(et,{variant:"outline",onClick:()=>{se(!1),Ae([]),V({drugName:"",brandName:"",quantity:"",lastRackId:""})},className:"flex-1 h-12 hidden sm:block",children:"Cancel"}),u.jsxs(et,{onClick:mt,disabled:ge.length===0,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 h-12 text-sm sm:text-base",children:[u.jsx(cE,{size:18,className:"mr-2"}),"Submit (",ge.length,")"]})]})]})]})}),ne&&l&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:u.jsxs(Oe.div,{initial:{y:"100%"},animate:{y:0},className:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"bg-blue-600 text-white p-4 sm:p-6 rounded-t-2xl sticky top-0",children:[u.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"IoT Cabinet Control"}),u.jsxs("p",{className:"text-blue-100 text-xs sm:text-sm mt-1",children:["For ",z?.name]})]}),u.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:[u.jsx("p",{className:"font-semibold text-base sm:text-lg",children:l.drugName}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:l.dose}),u.jsxs(Ze,{variant:"outline",className:"mt-2",children:["Rack ",l.rackId]})]}),u.jsx("div",{className:"bg-slate-100 rounded-lg p-4 sm:p-6",children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`w-24 h-32 sm:w-32 sm:h-40 border-4 rounded-lg flex items-center justify-center ${G?"border-green-500 bg-green-50":"border-slate-400 bg-white"}`,children:G?u.jsx(Ti,{size:40,className:"text-green-500"}):u.jsx(To,{size:40,className:"text-slate-400"})}),u.jsx("p",{className:"mt-4 font-medium text-center",children:G?" Rack OPEN":" Rack LOCKED"})]})}),u.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:G?u.jsxs(et,{onClick:()=>{ce(!1),setTimeout(()=>de(),100)},className:"flex-1 h-12 bg-green-600",children:[u.jsx(nn,{className:"mr-2"}),"Continue"]}):u.jsxs(u.Fragment,{children:[u.jsx(et,{onClick:it,disabled:Q,className:"flex-1 h-12 bg-blue-600",children:Q?u.jsxs(u.Fragment,{children:[u.jsx(Zc,{className:"mr-2 animate-spin"}),"Triggering..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ti,{className:"mr-2"}),"Trigger Cabinet"]})}),u.jsx(et,{variant:"outline",onClick:()=>ce(!1),className:"sm:w-auto h-12 hidden sm:block",children:"Cancel"})]})})]})]})}),l&&!ne&&(l.rackId?G:!0)&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:u.jsxs(Oe.div,{initial:{y:"100%"},animate:{y:0},className:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 sm:p-6 rounded-t-2xl sticky top-0",children:u.jsxs("h2",{className:"text-lg sm:text-2xl font-bold flex items-center gap-2",children:[u.jsx(nn,{size:24}),"Confirm Administration"]})}),u.jsxs("div",{className:"p-4 sm:p-6",children:[u.jsxs("div",{className:"space-y-3 sm:space-y-4 mb-6",children:[u.jsxs("div",{className:"p-3 sm:p-4 bg-pink-50 rounded-lg border-2 border-pink-200",children:[u.jsx("p",{className:"text-xs text-pink-700 mb-1",children:"Medication"}),u.jsx("p",{className:"font-bold text-lg sm:text-xl text-pink-900",children:l.drugName}),u.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[u.jsx(Ze,{className:"bg-pink-600 text-xs",children:l.dose}),u.jsx(Ze,{className:"bg-pink-600 text-xs",children:l.route}),l.rackId&&u.jsxs(Ze,{className:"bg-purple-600 text-xs",children:[u.jsx(Vc,{size:10,className:"mr-1"}),l.rackId]})]})]}),u.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border-2 border-blue-200",children:[u.jsx("p",{className:"text-xs text-blue-700 mb-1",children:"Patient"}),u.jsx("p",{className:"font-bold text-base sm:text-lg text-blue-900",children:z?.name}),u.jsx(Ze,{variant:"outline",className:"font-mono mt-1 text-xs",children:z?.hhid})]}),u.jsxs("div",{className:"p-3 sm:p-4 bg-indigo-50 rounded-lg border-2 border-indigo-200",children:[u.jsx("p",{className:"text-xs text-indigo-700 mb-1",children:"Administered By"}),u.jsx("p",{className:"font-bold text-base sm:text-lg text-indigo-900",children:fe?.name}),u.jsx(Ze,{variant:"outline",className:"font-mono mt-1 text-xs",children:fe?.id})]}),G&&l.rackId&&u.jsx("div",{className:"p-3 bg-green-50 rounded-lg border-2 border-green-300",children:u.jsxs("p",{className:"text-xs font-semibold text-green-900",children:[u.jsx(Ti,{size:12,className:"inline mr-1"}),"Cabinet Unlocked "]})}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold text-slate-700 mb-2 block",children:"Notes"}),u.jsx(hi,{value:g,onChange:be=>y(be.target.value),placeholder:"Any observations...",rows:3,className:"text-sm"})]})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[u.jsx(et,{variant:"outline",onClick:()=>{h(null),J(!1),y("")},disabled:C,className:"flex-1 h-12 hidden sm:block",children:"Cancel"}),u.jsx(et,{onClick:de,disabled:C,className:"flex-1 bg-green-600 h-12",children:C?u.jsxs(u.Fragment,{children:[u.jsx(Zc,{className:"mr-2 animate-spin"}),"Recording..."]}):u.jsxs(u.Fragment,{children:[u.jsx(nn,{className:"mr-2"}),"Confirm"]})})]})]})]})})]})}const py=[{category:"Analgesics",name:"Paracetamol",brandNames:["Dolo 650","Crocin","Calpol","Metacin","Pyrigesic"],commonDoses:["500mg","650mg","1g"],routes:["Oral","IV"],frequencies:["TID","QID","SOS"]},{category:"Analgesics",name:"Diclofenac",brandNames:["Voveran","Voltaren","Diclomol","Diclowin"],commonDoses:["50mg","75mg","100mg"],routes:["Oral","IM","IV"],frequencies:["BD","TID"]},{category:"Analgesics",name:"Ibuprofen",brandNames:["Brufen","Advil","Ibugesic","Combiflam"],commonDoses:["200mg","400mg","600mg"],routes:["Oral"],frequencies:["TID","QID"]},{category:"Analgesics",name:"Tramadol",brandNames:["Ultracet","Tramazac","Tramanyl","Tramol"],commonDoses:["50mg","100mg"],routes:["Oral","IM","IV"],frequencies:["TID","QID","SOS"]},{category:"Analgesics",name:"Aceclofenac + Paracetamol",brandNames:["Zerodol-P","Hifenac-P","Acenext-P","Dolopar"],commonDoses:["100mg + 325mg"],routes:["Oral"],frequencies:["BD","TID"]},{category:"Antibiotics",name:"Amoxicillin",brandNames:["Moxikind","Novamox","Amoxil","Zymox"],commonDoses:["250mg","500mg","1g"],routes:["Oral"],frequencies:["TID","BD"]},{category:"Antibiotics",name:"Amoxicillin + Clavulanic Acid",brandNames:["Augmentin","Clavam","Mox-CV","Advent"],commonDoses:["625mg","1g"],routes:["Oral","IV"],frequencies:["BD","TID"]},{category:"Antibiotics",name:"Azithromycin",brandNames:["Azithral","Azee","Zithromax","Azax"],commonDoses:["250mg","500mg"],routes:["Oral","IV"],frequencies:["OD","BD"]},{category:"Antibiotics",name:"Ciprofloxacin",brandNames:["Cifran","Ciplox","Ciprodac","Ciplox-TZ"],commonDoses:["250mg","500mg","750mg"],routes:["Oral","IV"],frequencies:["BD"]},{category:"Antibiotics",name:"Ceftriaxone",brandNames:["Monocef","Taxim","Ufoxime","Ceftas"],commonDoses:["500mg","1g","2g"],routes:["IM","IV"],frequencies:["OD","BD"]},{category:"Antibiotics",name:"Cefixime",brandNames:["Taxim-O","Cefolac","Ceftas","Mahacef"],commonDoses:["100mg","200mg"],routes:["Oral"],frequencies:["BD"]},{category:"Antibiotics",name:"Metronidazole",brandNames:["Flagyl","Metrogyl","Metron","Aldezol"],commonDoses:["200mg","400mg","500mg"],routes:["Oral","IV"],frequencies:["TID"]},{category:"Antibiotics",name:"Levofloxacin",brandNames:["Levoquin","Levoflox","Tavanic","Lquin"],commonDoses:["250mg","500mg","750mg"],routes:["Oral","IV"],frequencies:["OD","BD"]},{category:"Cardiovascular",name:"Amlodipine",brandNames:["Amlong","Amlodac","Stamlo","Amlokind"],commonDoses:["2.5mg","5mg","10mg"],routes:["Oral"],frequencies:["OD"]},{category:"Cardiovascular",name:"Atenolol",brandNames:["Aten","Tenormin","Ateheal","Betacard"],commonDoses:["25mg","50mg","100mg"],routes:["Oral"],frequencies:["OD","BD"]},{category:"Cardiovascular",name:"Telmisartan",brandNames:["Telma","Telmikind","Telsar","Telpres"],commonDoses:["20mg","40mg","80mg"],routes:["Oral"],frequencies:["OD"]},{category:"Cardiovascular",name:"Enalapril",brandNames:["Enace","Envas","Enam","Enacard"],commonDoses:["2.5mg","5mg","10mg"],routes:["Oral"],frequencies:["OD","BD"]},{category:"Cardiovascular",name:"Furosemide",brandNames:["Lasix","Frusemide","Frusenex","Frulac"],commonDoses:["20mg","40mg","80mg"],routes:["Oral","IV"],frequencies:["OD","BD"]},{category:"Cardiovascular",name:"Metoprolol",brandNames:["Metolar","Betaloc","Metpure","Metocard"],commonDoses:["25mg","50mg","100mg"],routes:["Oral"],frequencies:["BD"]},{category:"Cardiovascular",name:"Atorvastatin",brandNames:["Atorva","Lipitor","Tonact","Storvas"],commonDoses:["10mg","20mg","40mg","80mg"],routes:["Oral"],frequencies:["OD","HS"]},{category:"Cardiovascular",name:"Aspirin",brandNames:["Ecosprin","Disprin","Loprin","Delisprin"],commonDoses:["75mg","150mg","325mg"],routes:["Oral"],frequencies:["OD"]},{category:"Antidiabetic",name:"Metformin",brandNames:["Glycomet","Glucophage","Obimet","Glyciphage"],commonDoses:["500mg","850mg","1g"],routes:["Oral"],frequencies:["BD","TID"]},{category:"Antidiabetic",name:"Glimepiride",brandNames:["Amaryl","Glimestar","Gemer","Glimy"],commonDoses:["1mg","2mg","4mg"],routes:["Oral"],frequencies:["OD"]},{category:"Antidiabetic",name:"Glimepiride + Metformin",brandNames:["Glycomet GP","Amaryl M","Gemer Forte","Glynase MF"],commonDoses:["1mg + 500mg","2mg + 500mg"],routes:["Oral"],frequencies:["BD"]},{category:"Antidiabetic",name:"Human Insulin (Regular)",brandNames:["Actrapid","Huminsulin R","Insuman Rapid","Wosulin R"],commonDoses:["4 units","6 units","8 units","10 units"],routes:["SC"],frequencies:["TID","Before meals"]},{category:"Antidiabetic",name:"Insulin Glargine",brandNames:["Lantus","Basalog","Glaritus","Toujeo"],commonDoses:["10 units","15 units","20 units"],routes:["SC"],frequencies:["OD","HS"]},{category:"Gastrointestinal",name:"Omeprazole",brandNames:["Omez","Ocid","Omezol","Omecip"],commonDoses:["20mg","40mg"],routes:["Oral","IV"],frequencies:["OD","BD"]},{category:"Gastrointestinal",name:"Pantoprazole",brandNames:["Pan","Pantodac","Pantop","Pantocid"],commonDoses:["20mg","40mg"],routes:["Oral","IV"],frequencies:["OD","BD"]},{category:"Gastrointestinal",name:"Ranitidine",brandNames:["Aciloc","Rantac","Zinetac","Ranitin"],commonDoses:["150mg","300mg"],routes:["Oral","IV"],frequencies:["BD"]},{category:"Gastrointestinal",name:"Ondansetron",brandNames:["Emeset","Ondem","Vomikind","Zofran"],commonDoses:["4mg","8mg"],routes:["Oral","IV"],frequencies:["BD","TID","SOS"]},{category:"Gastrointestinal",name:"Domperidone",brandNames:["Domstal","Vomistop","Domcolic","Domperi"],commonDoses:["10mg","20mg"],routes:["Oral"],frequencies:["TID"]},{category:"Gastrointestinal",name:"Rabeprazole",brandNames:["Rablet","Razo","Rabicip","Happi"],commonDoses:["10mg","20mg"],routes:["Oral","IV"],frequencies:["OD","BD"]},{category:"Respiratory",name:"Salbutamol",brandNames:["Asthalin","Ventolin","Salbu","Levolin"],commonDoses:["2mg","4mg","100mcg/puff"],routes:["Oral","Nebulization","Inhaler"],frequencies:["TID","QID","SOS"]},{category:"Respiratory",name:"Budesonide",brandNames:["Budecort","Pulmicort","Budamate","Foracort"],commonDoses:["200mcg","400mcg"],routes:["Inhaler","Nebulization"],frequencies:["BD"]},{category:"Respiratory",name:"Montelukast",brandNames:["Montair","Montek","Airlukast","Montelo"],commonDoses:["4mg","5mg","10mg"],routes:["Oral"],frequencies:["OD","HS"]},{category:"Respiratory",name:"Montelukast + Levocetirizine",brandNames:["Montair LC","Montek LC","Lecope M","Montina L"],commonDoses:["10mg + 5mg"],routes:["Oral"],frequencies:["OD","HS"]},{category:"Respiratory",name:"Cetirizine",brandNames:["Zyrtec","Alerid","Cetzine","Okacet"],commonDoses:["5mg","10mg"],routes:["Oral"],frequencies:["OD","HS"]},{category:"Neurological",name:"Phenytoin",brandNames:["Eptoin","Dilantin","Zentil","Fentoin"],commonDoses:["100mg","300mg"],routes:["Oral","IV"],frequencies:["BD","TID"]},{category:"Neurological",name:"Levetiracetam",brandNames:["Levera","Keppra","Levipil","Epitoin"],commonDoses:["250mg","500mg","750mg","1g"],routes:["Oral","IV"],frequencies:["BD"]},{category:"Neurological",name:"Gabapentin",brandNames:["Gabapin","Neurontin","Gabadoc","Gabantin"],commonDoses:["100mg","300mg","400mg"],routes:["Oral"],frequencies:["TID"]},{category:"Neurological",name:"Pregabalin",brandNames:["Pregeb","Lyrica","Pregalin","Pregabid"],commonDoses:["75mg","150mg","300mg"],routes:["Oral"],frequencies:["BD"]},{category:"Psychiatric",name:"Alprazolam",brandNames:["Alprax","Zolam","Restyl","Alzolam"],commonDoses:["0.25mg","0.5mg","1mg"],routes:["Oral"],frequencies:["BD","TID","HS"]},{category:"Psychiatric",name:"Lorazepam",brandNames:["Ativan","Lorazep","Lorzem","Anzilum"],commonDoses:["1mg","2mg"],routes:["Oral","IV"],frequencies:["BD","TID","SOS"]},{category:"Psychiatric",name:"Clonazepam",brandNames:["Clonotril","Rivotril","Lonazep","Klonopin"],commonDoses:["0.5mg","1mg","2mg"],routes:["Oral"],frequencies:["BD","HS"]},{category:"Psychiatric",name:"Escitalopram",brandNames:["Nexito","Stalopam","S-Citadep","Escitalent"],commonDoses:["5mg","10mg","20mg"],routes:["Oral"],frequencies:["OD"]},{category:"Vitamins",name:"Vitamin B Complex",brandNames:["Becosules","Neurobion","Supradyn","Polybion"],commonDoses:["1 tablet"],routes:["Oral"],frequencies:["OD"]},{category:"Vitamins",name:"Vitamin D3",brandNames:["D-Rise","Tayo","Uprise-D3","Calcirol"],commonDoses:["60,000 IU","1000 IU","2000 IU"],routes:["Oral"],frequencies:["Weekly","OD"]},{category:"Vitamins",name:"Calcium + Vitamin D",brandNames:["Shelcal","Calcimax","Supracal","Calcivon"],commonDoses:["500mg","1g"],routes:["Oral"],frequencies:["OD","BD"]},{category:"Vitamins",name:"Iron + Folic Acid",brandNames:["Autrin","Fefol","Orofer","Dexorange"],commonDoses:["100mg + 0.5mg"],routes:["Oral"],frequencies:["OD"]},{category:"Vitamins",name:"Multivitamin",brandNames:["Revital","A to Z","HealthVit","Supradyn"],commonDoses:["1 tablet"],routes:["Oral"],frequencies:["OD"]},{category:"Emergency",name:"Adrenaline",brandNames:["Adrenalin","Epinephrine","EpiPen"],commonDoses:["1mg/ml"],routes:["IM","IV"],frequencies:["SOS","STAT"]},{category:"Emergency",name:"Atropine",brandNames:["Atropin","Atropine Sulphate"],commonDoses:["0.6mg","1mg"],routes:["IV","IM"],frequencies:["SOS","STAT"]},{category:"Emergency",name:"Dexamethasone",brandNames:["Decadron","Dexona","Dexa","Decdan"],commonDoses:["4mg","8mg"],routes:["IV","IM","Oral"],frequencies:["BD","TID","STAT"]},{category:"Emergency",name:"Hydrocortisone",brandNames:["Solu-Cortef","Hydrocort","Efcorlin"],commonDoses:["100mg","200mg"],routes:["IV"],frequencies:["BD","TID"]}],Gd=[{value:"OD",label:"OD (Once Daily)",timings:["09:00"]},{value:"BD",label:"BD (Twice Daily)",timings:["09:00","21:00"]},{value:"TID",label:"TID (Three Times Daily)",timings:["09:00","14:00","21:00"]},{value:"QID",label:"QID (Four Times Daily)",timings:["09:00","13:00","17:00","21:00"]},{value:"HS",label:"HS (At Bedtime)",timings:["22:00"]},{value:"SOS",label:"SOS (If Necessary)",timings:[]},{value:"STAT",label:"STAT (Immediately)",timings:[]},{value:"Q4H",label:"Q4H (Every 4 Hours)",timings:["06:00","10:00","14:00","18:00","22:00"]},{value:"Q6H",label:"Q6H (Every 6 Hours)",timings:["06:00","12:00","18:00","00:00"]},{value:"Q8H",label:"Q8H (Every 8 Hours)",timings:["08:00","16:00","00:00"]},{value:"Before meals",label:"Before Meals (AC)",timings:["08:30","13:30","20:30"]},{value:"After meals",label:"After Meals (PC)",timings:["09:30","14:30","21:30"]},{value:"Weekly",label:"Once Weekly",timings:[]}],by=["Oral","IV (Intravenous)","IM (Intramuscular)","SC (Subcutaneous)","Sublingual","Topical","Inhaler","Nebulization","Rectal","Per Vaginum","Nasal","Eye Drops","Ear Drops"];function y5(){const r=Da(),[e,s]=j.useState(""),[l,h]=j.useState(null),[g,y]=j.useState(!1),[C,A]=j.useState("prescriptions"),[N,I]=j.useState(!1),[T,k]=j.useState(""),[U,X]=j.useState(""),[z,ae]=j.useState([]),[fe,B]=j.useState(!1),[W,te]=j.useState("all"),[ne,ce]=j.useState(""),[G,J]=j.useState([]),[Q,Ce]=j.useState(""),[Z,se]=j.useState(""),[ge,Ae]=j.useState([]),[Y,V]=j.useState(""),[ue,ye]=j.useState(""),{patients:tt}=fu(),{medications:Ke}=Vh(),[ht,ze]=j.useState([{id:"PO001",requestedBy:"Nurse Priya Sharma",nurseId:"N002",ward:"General Ward",items:[{drugName:"Paracetamol 500mg",brandName:"Crocin",quantity:100},{drugName:"Amoxicillin 500mg",brandName:"Novamox",quantity:50}],requestDate:new Date().toISOString(),status:"pending"},{id:"PO002",requestedBy:"Sister Anita Kumar",nurseId:"N001",ward:"ICU",items:[{drugName:"Pantoprazole 40mg",brandName:"Pantocid",quantity:30},{drugName:"Insulin Injection",brandName:"Lantus",quantity:20}],requestDate:new Date(Date.now()-864e5).toISOString(),status:"pending"}]),[Be,_e]=j.useState(null),[st,Le]=j.useState(""),[Ye,rt]=j.useState(""),[wt,Et]=j.useState(!1),[pt,it]=j.useState(!1),de=[{id:"R-A1",name:"Rack A1 - General",location:"Ward A",ip:"192.168.1.63"},{id:"R-A2",name:"Rack A2 - Emergency",location:"Ward A",ip:"192.168.1.64"},{id:"R-B1",name:"Rack B1 - Antibiotics",location:"Ward B",ip:"192.168.1.65"},{id:"R-C1",name:"Rack C1 - ICU",location:"ICU",ip:"192.168.1.67"}],Ge=tt.filter(De=>De.hhid.toLowerCase().includes(e.toLowerCase())||De.name.toLowerCase().includes(e.toLowerCase())),He={totalPrescriptions:Ke.length,activePrescriptions:Ke.filter(De=>De.status==="active").length,patientsServed:new Set(Ke.map(De=>De.patientHHID)).size,categoriesUsed:new Set(Ke.map(De=>De.drugName)).size,pendingOrders:ht.filter(De=>De.status==="pending").length,fulfilledOrders:ht.filter(De=>De.status==="fulfilled").length},mt=["all",...new Set(py.map(De=>De.category))];j.useEffect(()=>{if(T.length>1){const De=py.filter(ft=>{const ee=T.toLowerCase(),ke=ft.name.toLowerCase().includes(ee),Pe=ft.brandNames?.some(lt=>lt.toLowerCase().includes(ee)),nt=W==="all"||ft.category===W;return(ke||Pe)&&nt});ae(De),B(!0)}else ae([]),B(!1)},[T,W]);const vt=De=>{if(k(De.name),De.brandNames&&De.brandNames.length>0&&X(De.brandNames[0]),J(De.commonDoses),B(!1),De.commonDoses.length>0&&ce(De.commonDoses[0]),De.routes.length>0&&Ce(De.routes[0]),De.frequencies.length>0){se(De.frequencies[0]);const ft=Gd.find(ee=>ee.value===De.frequencies[0]);ft&&Ae(ft.timings)}},be=De=>{se(De);const ft=Gd.find(ee=>ee.value===De);ft&&Ae(ft.timings)},Ie=async()=>{if(!l||!T||!U||!ne||!Q||!Z){alert(" Please fill all required fields including Brand Name!");return}y(!0);try{const De={patientHHID:l.hhid,patientName:l.name,drugName:T,brandName:U,dose:ne,route:Q,frequency:Z,timing:ge,instructions:Y,duration:ue,status:"active",rackId:"R-01",prescribedBy:"Dr. Smith"},ft=await I8(De);ft.success?(alert(" Medication prescribed successfully!"),k(""),X(""),ce(""),Ce(""),se(""),Ae([]),V(""),ye(""),J([]),h(null)):alert(` Error: ${ft.error}`)}catch(De){console.error("Error:",De),alert(" Failed to add medication")}finally{y(!1)}},Nt=De=>{_e(De),rt(""),it(!1)},je=async()=>{if(!st){alert(" Please scan your Pharmacist ID first!");return}if(!Ye){alert(" Please select a rack!");return}Et(!0);try{const ft=de.find(ee=>ee.id===Ye)?.ip||"192.168.1.63";fetch(`http://${ft}/open`,{method:"GET",mode:"no-cors"}).catch(()=>{}),await new Promise(ee=>setTimeout(ee,2e3)),it(!0),alert(` Rack ${Ye} Unlocked!`)}catch{it(!0),alert(` Rack ${Ye} Triggered`)}finally{Et(!1)}},Tn=()=>{if(!pt){alert(" Please trigger the rack first!");return}ze(De=>De.map(ft=>ft.id===Be.id?{...ft,status:"fulfilled",rackId:Ye,pharmacistId:st,fulfilledDate:new Date().toISOString()}:ft)),alert(` Order ${Be.id} fulfilled!`),_e(null),rt(""),Le(""),it(!1)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50",children:[u.jsx("div",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-30",children:u.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs(et,{variant:"outline",onClick:()=>r("/dashboard"),size:"sm",className:"shrink-0",children:[u.jsx(cl,{size:16}),u.jsx("span",{className:"hidden sm:inline ml-2",children:"Back"})]}),u.jsx("div",{className:"flex-1 min-w-0",children:u.jsxs("h1",{className:"text-base sm:text-xl md:text-2xl font-bold text-slate-900 truncate flex items-center gap-2",children:[u.jsx("span",{className:"hidden sm:inline",children:"Clinical Pharmacy"}),u.jsx("span",{className:"sm:hidden",children:"Pharmacy"}),u.jsx(fl,{size:16,className:"text-yellow-500 shrink-0"})]})}),u.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[u.jsxs(Ze,{className:"bg-emerald-600 text-xs px-2 py-1",children:[u.jsx(uE,{size:12,className:"mr-1"}),"ISO"]}),u.jsxs(Ze,{className:"bg-blue-600 text-xs px-2 py-1",children:[u.jsx(Ny,{size:12,className:"mr-1"}),"NABH"]})]})]})})}),u.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-[56px] sm:top-[72px] z-20",children:u.jsx("div",{className:"px-4 sm:px-6",children:u.jsxs("div",{className:"flex gap-1 overflow-x-auto",children:[u.jsx("button",{onClick:()=>A("prescriptions"),className:`px-4 sm:px-6 py-2.5 sm:py-3 font-semibold border-b-2 transition-colors whitespace-nowrap text-sm sm:text-base ${C==="prescriptions"?"border-emerald-600 text-emerald-600":"border-transparent text-slate-600"}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(fi,{size:16,"sm:size":18}),u.jsx("span",{children:"Prescriptions"})]})}),u.jsx("button",{onClick:()=>A("procurement"),className:`px-4 sm:px-6 py-2.5 sm:py-3 font-semibold border-b-2 transition-colors whitespace-nowrap text-sm sm:text-base ${C==="procurement"?"border-emerald-600 text-emerald-600":"border-transparent text-slate-600"}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(zc,{size:16,"sm:size":18}),u.jsx("span",{children:"Procurement"}),He.pendingOrders>0&&u.jsx(Ze,{variant:"destructive",className:"text-xs",children:He.pendingOrders})]})})]})})}),u.jsxs("div",{className:"px-3 sm:px-4 md:px-6 py-4 sm:py-6 max-w-7xl mx-auto",children:[u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[u.jsx(Tt,{className:"border-2 border-emerald-200 shadow-sm",children:u.jsxs(Mt,{className:"p-3 sm:p-6",children:[u.jsx("div",{className:"bg-emerald-100 p-2 sm:p-3 rounded-lg inline-block mb-2",children:u.jsx(dE,{className:"text-emerald-600",size:20})}),u.jsx("p",{className:"text-xl sm:text-3xl font-bold text-slate-900",children:He.totalPrescriptions}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Total Rx"})]})}),u.jsx(Tt,{className:"border-2 border-blue-200 shadow-sm",children:u.jsxs(Mt,{className:"p-3 sm:p-6",children:[u.jsx("div",{className:"bg-blue-100 p-2 sm:p-3 rounded-lg inline-block mb-2",children:u.jsx(Fn,{className:"text-blue-600",size:20})}),u.jsx("p",{className:"text-xl sm:text-3xl font-bold text-slate-900",children:He.activePrescriptions}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Active"})]})}),u.jsx(Tt,{className:"border-2 border-orange-200 shadow-sm",children:u.jsxs(Mt,{className:"p-3 sm:p-6",children:[u.jsx("div",{className:"bg-orange-100 p-2 sm:p-3 rounded-lg inline-block mb-2",children:u.jsx(Dm,{className:"text-orange-600",size:20})}),u.jsx("p",{className:"text-xl sm:text-3xl font-bold text-slate-900",children:He.pendingOrders}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Pending"})]})}),u.jsx(Tt,{className:"border-2 border-green-200 shadow-sm",children:u.jsxs(Mt,{className:"p-3 sm:p-6",children:[u.jsx("div",{className:"bg-green-100 p-2 sm:p-3 rounded-lg inline-block mb-2",children:u.jsx(nn,{className:"text-green-600",size:20})}),u.jsx("p",{className:"text-xl sm:text-3xl font-bold text-slate-900",children:He.fulfilledOrders}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Fulfilled"})]})})]}),u.jsx(hl,{mode:"wait",children:C==="prescriptions"?u.jsxs(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[l&&u.jsx(Tt,{className:"border-2 border-emerald-300 shadow-lg lg:hidden",children:u.jsx(Mt,{className:"p-4",children:u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-600 text-white flex items-center justify-center font-bold text-lg",children:l.name[0]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg",children:l.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx(Ze,{className:"bg-emerald-600 text-xs",children:l.hhid}),u.jsxs(Ze,{variant:"outline",className:"text-xs",children:[l.age,"Y"]})]})]})]}),u.jsx(et,{variant:"outline",size:"sm",onClick:()=>I(!N),children:N?u.jsx(_a,{size:16}):u.jsx(a1,{size:16})})]})})}),(!l||N)&&u.jsxs(Tt,{className:"border-2 border-emerald-200 shadow-lg lg:hidden",children:[u.jsx("div",{className:"bg-emerald-600 text-white p-4",children:u.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[u.jsx(Cs,{size:18}),"Select Patient"]})}),u.jsxs(Mt,{className:"p-4",children:[u.jsx(Je,{placeholder:"Search...",value:e,onChange:De=>s(De.target.value),className:"mb-3 h-12"}),u.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Ge.map(De=>u.jsxs("div",{onClick:()=>{h(De),I(!1)},className:"p-3 rounded-xl border-2 border-slate-200 hover:border-emerald-500 bg-white active:bg-emerald-50",children:[u.jsx("p",{className:"font-bold text-sm",children:De.name}),u.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[De.hhid,"  ",De.age,"Y"]})]},De.hhid))})]})]}),u.jsxs("div",{className:"hidden lg:grid lg:grid-cols-12 gap-6",children:[u.jsx("div",{className:"lg:col-span-4",children:u.jsxs(Tt,{className:"border-2 border-emerald-200 shadow-xl",children:[u.jsx("div",{className:"bg-emerald-600 text-white p-4 rounded-t-xl",children:u.jsx("h2",{className:"font-bold",children:"Patient Selection"})}),u.jsxs(Mt,{className:"p-4",children:[u.jsx(Je,{placeholder:"Search...",value:e,onChange:De=>s(De.target.value),className:"mb-4"}),l&&u.jsxs("div",{className:"mb-4 p-4 bg-emerald-50 border-2 border-emerald-300 rounded-xl",children:[u.jsx("p",{className:"font-bold text-lg",children:l.name}),u.jsx(Ze,{className:"mt-2",children:l.hhid})]}),u.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Ge.map(De=>u.jsxs("div",{onClick:()=>h(De),className:`p-3 rounded-xl cursor-pointer border-2 ${l?.hhid===De.hhid?"border-emerald-500 bg-emerald-50":"border-slate-200 hover:border-emerald-300"}`,children:[u.jsx("p",{className:"font-bold",children:De.name}),u.jsx("p",{className:"text-sm text-slate-600",children:De.hhid})]},De.hhid))})]})]})}),u.jsx("div",{className:"lg:col-span-8",children:l?u.jsx(yy,{selectedPatient:l,drugName:T,setDrugName:k,brandName:U,setBrandName:X,selectedCategory:W,setSelectedCategory:te,categories:mt,showSuggestions:fe,drugSuggestions:z,handleDrugSelect:vt,dose:ne,setDose:ce,doseSuggestions:G,route:Q,setRoute:Ce,routeOptions:by,frequency:Z,handleFrequencyChange:be,frequencyOptions:Gd,timing:ge,duration:ue,setDuration:ye,instructions:Y,setInstructions:V,loading:g,handleSubmit:Ie}):u.jsx(Tt,{className:"border-2 border-dashed border-slate-300",children:u.jsxs(Mt,{className:"p-16 text-center",children:[u.jsx(Rr,{size:48,className:"mx-auto text-slate-400 mb-4"}),u.jsx("h3",{className:"text-xl font-bold",children:"No Patient Selected"})]})})})]}),l&&!N&&u.jsx("div",{className:"lg:hidden",children:u.jsx(yy,{selectedPatient:l,drugName:T,setDrugName:k,brandName:U,setBrandName:X,selectedCategory:W,setSelectedCategory:te,categories:mt,showSuggestions:fe,drugSuggestions:z,handleDrugSelect:vt,dose:ne,setDose:ce,doseSuggestions:G,route:Q,setRoute:Ce,routeOptions:by,frequency:Z,handleFrequencyChange:be,frequencyOptions:Gd,timing:ge,duration:ue,setDuration:ye,instructions:Y,setInstructions:V,loading:g,handleSubmit:Ie})})]},"prescriptions"):u.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(Tt,{className:"border-2 border-purple-200 shadow-lg",children:[u.jsx("div",{className:"bg-purple-600 text-white p-4",children:u.jsxs("h2",{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[u.jsx(zc,{size:20,"sm:size":24}),"Ward Supply Requests"]})}),u.jsx(Mt,{className:"p-3 sm:p-6 space-y-3 sm:space-y-4",children:ht.map(De=>u.jsxs("div",{className:`border-2 rounded-xl p-4 sm:p-6 ${De.status==="pending"?"border-orange-200 bg-orange-50/30":"border-green-200 bg-green-50/30"}`,children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsxs("h3",{className:"text-base sm:text-lg font-bold",children:["#",De.id]}),u.jsx(Ze,{className:De.status==="pending"?"bg-orange-500":"bg-green-500",children:De.status})]}),u.jsxs("div",{className:"space-y-1 text-xs sm:text-sm text-slate-600",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"By:"})," ",De.requestedBy]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Ward:"})," ",De.ward]})]})]}),De.status==="pending"&&u.jsxs(et,{onClick:()=>Nt(De),className:"bg-blue-600 w-full sm:w-auto",size:"sm",children:[u.jsx(zc,{size:16,className:"mr-2"}),"Process"]})]}),u.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[u.jsx("p",{className:"text-sm font-semibold mb-2",children:"Items:"}),u.jsx("div",{className:"space-y-2",children:De.items.map((ft,ee)=>u.jsxs("div",{className:"flex justify-between text-sm py-2 border-b last:border-0",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:ft.drugName}),u.jsxs("p",{className:"text-xs text-blue-600",children:["Brand: ",ft.brandName]})]}),u.jsxs(Ze,{variant:"outline",className:"text-xs",children:["",ft.quantity]})]},ee))})]})]},De.id))})]})},"procurement")})]}),Be&&u.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:u.jsxs(Oe.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},className:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[u.jsx("div",{className:"bg-purple-600 text-white p-4 sm:p-6 rounded-t-2xl sticky top-0",children:u.jsxs("h2",{className:"text-lg sm:text-2xl font-bold flex items-center gap-2",children:[u.jsx(zc,{size:24}),"Process Order #",Be.id]})}),u.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Pharmacist ID *"}),u.jsx(Je,{placeholder:"Enter ID",value:st,onChange:De=>Le(De.target.value),className:"h-12 text-lg"})]}),u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsx("p",{className:"text-sm font-semibold text-blue-900",children:"Destination"}),u.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-700",children:Be.ward})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Storage Rack *"}),u.jsxs("select",{value:Ye,onChange:De=>{rt(De.target.value),it(!1)},className:"w-full h-12 border-2 rounded-lg px-4 text-sm sm:text-base",children:[u.jsx("option",{value:"",children:"Choose Rack..."}),de.map(De=>u.jsx("option",{value:De.id,children:De.name},De.id))]})]}),Ye&&u.jsx("div",{className:"bg-slate-100 rounded-lg p-4 sm:p-6",children:u.jsxs("div",{className:"flex flex-col items-center",children:[u.jsx("div",{className:`w-24 h-32 sm:w-32 sm:h-40 border-4 rounded-lg flex items-center justify-center ${pt?"border-green-500 bg-green-50":"border-slate-400 bg-white"}`,children:pt?u.jsx(Ti,{size:40,className:"text-green-500"}):u.jsx(To,{size:40,className:"text-slate-400"})}),u.jsx("p",{className:"mt-4 font-medium text-center",children:pt?" Rack OPEN":" Rack LOCKED"}),!pt&&u.jsx(et,{onClick:je,disabled:wt||!st,className:"mt-4 w-full h-12 bg-blue-600",children:wt?u.jsxs(u.Fragment,{children:[u.jsx(Zc,{className:"mr-2 animate-spin"}),"Triggering..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ti,{className:"mr-2"}),"Trigger Rack"]})})]})}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[u.jsx(et,{variant:"outline",onClick:()=>{_e(null),rt(""),Le(""),it(!1)},className:"flex-1 h-12",children:"Cancel"}),u.jsxs(et,{onClick:Tn,disabled:!pt,className:"flex-1 h-12 bg-green-600",children:[u.jsx(nn,{className:"mr-2"}),"Fulfill Order"]})]})]})]})})]})}function yy({selectedPatient:r,drugName:e,setDrugName:s,brandName:l,setBrandName:h,selectedCategory:g,setSelectedCategory:y,categories:C,showSuggestions:A,drugSuggestions:N,handleDrugSelect:I,dose:T,setDose:k,doseSuggestions:U,route:X,setRoute:z,routeOptions:ae,frequency:fe,handleFrequencyChange:B,frequencyOptions:W,timing:te,duration:ne,setDuration:ce,instructions:G,setInstructions:J,loading:Q,handleSubmit:Ce}){return u.jsxs(Tt,{className:"border-2 border-emerald-200 shadow-lg",children:[u.jsxs("div",{className:"bg-emerald-600 text-white p-4 sm:p-5 rounded-t-xl",children:[u.jsxs("h2",{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[u.jsx(ul,{size:20}),"New Prescription"]}),u.jsxs("p",{className:"text-xs sm:text-sm text-emerald-100 mt-1",children:["For: ",u.jsx("span",{className:"font-bold",children:r.name}),"  ",r.hhid]})]}),u.jsx(Mt,{className:"p-4 sm:p-6",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Category Filter"}),u.jsx("select",{value:g,onChange:Z=>y(Z.target.value),className:"w-full h-11 sm:h-12 border-2 rounded-xl px-3 sm:px-4 text-sm sm:text-base",children:C.map(Z=>u.jsx("option",{value:Z,children:Z==="all"?" All":` ${Z}`},Z))})]}),u.jsxs("div",{className:"relative",children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Drug Name (Generic) *"}),u.jsx(Je,{value:e,onChange:Z=>s(Z.target.value),placeholder:"Type medication...",className:"h-11 sm:h-12 text-sm sm:text-base"}),A&&N.length>0&&u.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border-2 border-emerald-400 rounded-xl shadow-2xl max-h-60 overflow-y-auto",children:N.map((Z,se)=>u.jsxs("div",{onClick:()=>I(Z),className:"p-3 hover:bg-emerald-50 border-b last:border-0 active:bg-emerald-100",children:[u.jsx("p",{className:"font-bold text-sm",children:Z.name}),Z.brandNames&&u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Z.brandNames.slice(0,3).map((ge,Ae)=>u.jsx(Ze,{variant:"outline",className:"text-xs",children:ge},Ae))})]},se))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Brand Name *"}),u.jsx(Je,{value:l,onChange:Z=>h(Z.target.value),placeholder:"e.g., Pantocid",className:"h-11 sm:h-12 border-2 border-blue-300 bg-blue-50"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Dosage *"}),U.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:U.map((Z,se)=>u.jsx(Ze,{onClick:()=>k(Z),className:`cursor-pointer px-3 py-2 text-xs sm:text-sm ${T===Z?"bg-emerald-600":"bg-slate-600"}`,children:Z},se))}),u.jsx(Je,{value:T,onChange:Z=>k(Z.target.value),placeholder:"e.g., 500mg",className:"h-11 sm:h-12"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Route *"}),u.jsxs("select",{value:X,onChange:Z=>z(Z.target.value),className:"w-full h-11 sm:h-12 border-2 rounded-xl px-3 sm:px-4 text-sm sm:text-base",children:[u.jsx("option",{value:"",children:"Select"}),ae.map(Z=>u.jsx("option",{value:Z,children:Z},Z))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Frequency *"}),u.jsxs("select",{value:fe,onChange:Z=>B(Z.target.value),className:"w-full h-11 sm:h-12 border-2 rounded-xl px-3 sm:px-4 text-sm sm:text-base",children:[u.jsx("option",{value:"",children:"Select"}),W.map(Z=>u.jsx("option",{value:Z.value,children:Z.label},Z.value))]})]})]}),te.length>0&&u.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 border-2 border-blue-300 rounded-xl",children:[u.jsxs("p",{className:"text-sm font-bold text-blue-900 mb-2",children:[u.jsx(Qc,{size:14,className:"inline mr-1"}),"Schedule (",te.length,"x/day)"]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:te.map((Z,se)=>u.jsx(Ze,{className:"bg-blue-600 px-3 py-1 text-xs sm:text-sm",children:Z},se))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Duration"}),u.jsx(Je,{value:ne,onChange:Z=>ce(Z.target.value),placeholder:"e.g., 7 days",className:"h-11 sm:h-12"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Special Instructions"}),u.jsx(hi,{value:G,onChange:Z=>J(Z.target.value),placeholder:"e.g., Take with food...",rows:3,className:"text-sm sm:text-base resize-none"})]}),u.jsx(et,{onClick:Ce,disabled:Q,className:"w-full bg-emerald-600 h-12 sm:h-14 text-base sm:text-lg font-bold",children:Q?u.jsxs(u.Fragment,{children:[u.jsx(Zc,{className:"mr-2 animate-spin",size:20}),"Processing..."]}):u.jsxs(u.Fragment,{children:[u.jsx(nn,{size:20,className:"mr-2"}),"Submit Prescription"]})})]})})]})}const vy=[{id:"cbc",name:"Complete Blood Count (CBC)",category:"Hematology",parameters:[{name:"Hemoglobin (Hb)",unit:"g/dL",range:{min:12,max:16},maleRange:{min:13.5,max:17.5},femaleRange:{min:12,max:15.5}},{name:"Total WBC Count",unit:"10/L",range:{min:4,max:11}},{name:"RBC Count",unit:"10/L",range:{min:4.5,max:5.5}},{name:"Platelet Count",unit:"10/L",range:{min:150,max:400}},{name:"Hematocrit (PCV)",unit:"%",range:{min:36,max:46}},{name:"MCV",unit:"fL",range:{min:80,max:96}},{name:"MCH",unit:"pg",range:{min:27,max:32}},{name:"MCHC",unit:"g/dL",range:{min:32,max:36}},{name:"Neutrophils",unit:"%",range:{min:40,max:75}},{name:"Lymphocytes",unit:"%",range:{min:20,max:45}},{name:"Monocytes",unit:"%",range:{min:2,max:10}},{name:"Eosinophils",unit:"%",range:{min:1,max:6}},{name:"Basophils",unit:"%",range:{min:0,max:2}}]},{id:"lft",name:"Liver Function Test (LFT)",category:"Biochemistry",parameters:[{name:"Bilirubin Total",unit:"mg/dL",range:{min:.3,max:1.2}},{name:"Bilirubin Direct",unit:"mg/dL",range:{min:0,max:.3}},{name:"Bilirubin Indirect",unit:"mg/dL",range:{min:.2,max:.9}},{name:"SGOT (AST)",unit:"U/L",range:{min:5,max:40}},{name:"SGPT (ALT)",unit:"U/L",range:{min:5,max:41}},{name:"Alkaline Phosphatase",unit:"U/L",range:{min:30,max:120}},{name:"Total Protein",unit:"g/dL",range:{min:6,max:8}},{name:"Albumin",unit:"g/dL",range:{min:3.5,max:5.5}},{name:"Globulin",unit:"g/dL",range:{min:2,max:3.5}},{name:"A/G Ratio",unit:"",range:{min:1,max:2}},{name:"GGT",unit:"U/L",range:{min:6,max:50}}]},{id:"rft",name:"Renal Function Test (RFT/KFT)",category:"Biochemistry",parameters:[{name:"Blood Urea",unit:"mg/dL",range:{min:15,max:40}},{name:"Serum Creatinine",unit:"mg/dL",range:{min:.6,max:1.2}},{name:"Uric Acid",unit:"mg/dL",range:{min:3.5,max:7.2}},{name:"Sodium (Na+)",unit:"mEq/L",range:{min:135,max:145}},{name:"Potassium (K+)",unit:"mEq/L",range:{min:3.5,max:5}},{name:"Chloride (Cl-)",unit:"mEq/L",range:{min:98,max:107}},{name:"Bicarbonate",unit:"mEq/L",range:{min:22,max:29}},{name:"eGFR",unit:"mL/min/1.73m",range:{min:90,max:120}}]},{id:"lipid",name:"Lipid Profile",category:"Biochemistry",parameters:[{name:"Total Cholesterol",unit:"mg/dL",range:{min:0,max:200},desirable:"< 200"},{name:"Triglycerides",unit:"mg/dL",range:{min:0,max:150},desirable:"< 150"},{name:"HDL Cholesterol",unit:"mg/dL",range:{min:40,max:60},desirable:"> 40"},{name:"LDL Cholesterol",unit:"mg/dL",range:{min:0,max:100},desirable:"< 100"},{name:"VLDL Cholesterol",unit:"mg/dL",range:{min:5,max:40}},{name:"Total Chol/HDL Ratio",unit:"",range:{min:0,max:5}},{name:"LDL/HDL Ratio",unit:"",range:{min:0,max:3}},{name:"Non-HDL Cholesterol",unit:"mg/dL",range:{min:0,max:130}}]},{id:"thyroid",name:"Thyroid Function Test (TFT)",category:"Endocrinology",parameters:[{name:"T3 (Triiodothyronine)",unit:"ng/dL",range:{min:80,max:200}},{name:"T4 (Thyroxine)",unit:"g/dL",range:{min:5,max:12}},{name:"TSH",unit:"IU/mL",range:{min:.4,max:4.5}},{name:"Free T3",unit:"pg/mL",range:{min:2,max:4.4}},{name:"Free T4",unit:"ng/dL",range:{min:.8,max:1.8}}]},{id:"blood-sugar",name:"Blood Sugar Tests",category:"Biochemistry",parameters:[{name:"Fasting Blood Sugar (FBS)",unit:"mg/dL",range:{min:70,max:100}},{name:"Post Prandial Blood Sugar (PPBS)",unit:"mg/dL",range:{min:70,max:140}},{name:"Random Blood Sugar (RBS)",unit:"mg/dL",range:{min:70,max:140}},{name:"HbA1c",unit:"%",range:{min:4,max:5.6}}]},{id:"electrolytes",name:"Serum Electrolytes",category:"Biochemistry",parameters:[{name:"Sodium (Na+)",unit:"mEq/L",range:{min:135,max:145}},{name:"Potassium (K+)",unit:"mEq/L",range:{min:3.5,max:5}},{name:"Chloride (Cl-)",unit:"mEq/L",range:{min:98,max:107}},{name:"Calcium",unit:"mg/dL",range:{min:8.5,max:10.5}},{name:"Magnesium",unit:"mg/dL",range:{min:1.7,max:2.2}},{name:"Phosphorus",unit:"mg/dL",range:{min:2.5,max:4.5}}]},{id:"cardiac",name:"Cardiac Markers",category:"Biochemistry",parameters:[{name:"Troponin I",unit:"ng/mL",range:{min:0,max:.04}},{name:"Troponin T",unit:"ng/mL",range:{min:0,max:.01}},{name:"CK-MB",unit:"ng/mL",range:{min:0,max:5}},{name:"CPK (Total)",unit:"U/L",range:{min:30,max:200}},{name:"LDH",unit:"U/L",range:{min:140,max:280}},{name:"Myoglobin",unit:"ng/mL",range:{min:0,max:110}}]},{id:"coagulation",name:"Coagulation Profile",category:"Hematology",parameters:[{name:"PT (Prothrombin Time)",unit:"seconds",range:{min:11,max:13.5}},{name:"INR",unit:"",range:{min:.8,max:1.2}},{name:"APTT",unit:"seconds",range:{min:25,max:35}},{name:"Bleeding Time",unit:"minutes",range:{min:1,max:5}},{name:"Clotting Time",unit:"minutes",range:{min:5,max:10}}]},{id:"urine-routine",name:"Urine Routine Examination",category:"Clinical Pathology",parameters:[{name:"Color",unit:"",range:{min:"Pale Yellow",max:"Amber"}},{name:"Appearance",unit:"",range:{min:"Clear",max:"Clear"}},{name:"Specific Gravity",unit:"",range:{min:1.005,max:1.03}},{name:"pH",unit:"",range:{min:4.5,max:8}},{name:"Protein",unit:"",range:{min:"Nil",max:"Nil"}},{name:"Glucose",unit:"",range:{min:"Nil",max:"Nil"}},{name:"Ketones",unit:"",range:{min:"Negative",max:"Negative"}},{name:"Blood",unit:"",range:{min:"Nil",max:"Nil"}},{name:"Pus Cells",unit:"/HPF",range:{min:0,max:5}},{name:"RBC",unit:"/HPF",range:{min:0,max:2}},{name:"Epithelial Cells",unit:"/HPF",range:{min:"Few",max:"Few"}},{name:"Bacteria",unit:"",range:{min:"Absent",max:"Absent"}}]},{id:"vitamin-d",name:"Vitamin D (25-OH)",category:"Endocrinology",parameters:[{name:"Vitamin D Total",unit:"ng/mL",range:{min:30,max:100},interpretation:"Deficient: <20, Insufficient: 20-30, Sufficient: 30-100"}]},{id:"iron-studies",name:"Iron Studies",category:"Hematology",parameters:[{name:"Serum Iron",unit:"g/dL",range:{min:60,max:170}},{name:"TIBC",unit:"g/dL",range:{min:250,max:450}},{name:"Transferrin Saturation",unit:"%",range:{min:20,max:50}},{name:"Serum Ferritin",unit:"ng/mL",range:{min:30,max:400}}]}],v5=[{name:"All Tests",value:"all"},{name:"Hematology",value:"Hematology"},{name:"Biochemistry",value:"Biochemistry"},{name:"Endocrinology",value:"Endocrinology"},{name:"Clinical Pathology",value:"Clinical Pathology"}];function w5(){const r=Da(),[e,s]=j.useState(""),[l,h]=j.useState(null),[g,y]=j.useState(!1),[C,A]=j.useState({}),[N,I]=j.useState([]),[T,k]=j.useState(!1),[U,X]=j.useState(!1),[z,ae]=j.useState(!1),[fe,B]=j.useState("all"),[W,te]=j.useState(!1),[ne,ce]=j.useState(null),[G,J]=j.useState(!1),[Q,Ce]=j.useState(!1),[Z,se]=j.useState([]),[ge,Ae]=j.useState(""),[Y,V]=j.useState("overview"),{patients:ue,loading:ye}=fu(),{medications:tt}=Vh(),{logs:Ke}=RN(),ht=ue.filter(ee=>ee.hhid.toLowerCase().includes(e.toLowerCase())||ee.name.toLowerCase().includes(e.toLowerCase())),ze=ee=>tt.filter(ke=>ke.patientHHID===ee),Be=ee=>Ke.filter(ke=>ke.patientHHID===ee).sort((ke,Pe)=>new Date(Pe.timestamp)-new Date(ke.timestamp)),_e=(ee,ke,Pe)=>{let nt=0;return ee.status==="critical"&&(nt+=40),ee.age>65&&(nt+=20),ke.length>5&&(nt+=15),ee.allergies&&(nt+=10),Pe.forEach(lt=>{lt.parameters?.forEach(In=>{if(In.value){const gs=parseFloat(In.value);(gs<In.range.min||gs>In.range.max)&&(nt+=5)}})}),Math.min(nt,100)},st=(ee,ke,Pe)=>{const nt=[];return ee.status==="critical"&&nt.push({severity:"high",type:"Patient Status",message:"Patient in critical condition - requires immediate attention",icon:sh,color:"text-red-600"}),ee.allergies&&nt.push({severity:"high",type:"Allergies",message:`Active allergies: ${ee.allergies}`,icon:Io,color:"text-orange-600"}),ke.length>5&&nt.push({severity:"medium",type:"Polypharmacy",message:`Patient on ${ke.length} medications - monitor for interactions`,icon:fi,color:"text-yellow-600"}),nt},Le=(ee,ke,Pe)=>{const nt=[];return ke.length>5&&nt.push({category:"Medication Management",priority:"High",suggestion:"Consider medication reconciliation to reduce polypharmacy risk",action:"Schedule pharmacist review"}),ee.age>50&&nt.push({category:"Preventive Care",priority:"Medium",suggestion:"Annual cardiac and metabolic screening recommended",action:"Schedule ECG and lipid profile"}),nt},Ye=ee=>[],rt=(ee,ke)=>{if(ee.length===0)return 100;const Pe=ee.filter(pi=>pi.status==="active"),nt=ke.filter(pi=>{const Gt=new Date(pi.timestamp);return(new Date-Gt)/(1e3*60*60*24)<=7}),lt=Pe.length*7*2,In=nt.length,gs=Math.min(In/lt*100,100);return Math.round(gs)},wt=(ee,ke)=>{const Pe={recoveryLikelihood:"Good",estimatedStay:"5-7 days",complications:"Low risk",confidenceScore:85};return ee.status==="critical"&&(Pe.recoveryLikelihood="Guarded",Pe.estimatedStay="10-14 days",Pe.complications="Moderate risk",Pe.confidenceScore=70),Pe},Et=(ee,ke,Pe)=>`${ee.name}, ${ee.age}Y ${ee.gender}, currently ${ee.status} with ${ke.filter(nt=>nt.status==="active").length} active medications. Recent laboratory findings show ${Pe.length} test(s) on record. Primary diagnosis: ${ee.diagnosis||"Not specified"}.`,pt=()=>{J(!0),setTimeout(()=>{const ee=ze(l.hhid),ke=Be(l.hhid),Pe=l.labTests||[],nt={riskScore:_e(l,ee,Pe),alerts:st(l,ee),recommendations:Le(l,ee),drugInteractions:Ye(),adherenceScore:rt(ee,ke),predictedOutcome:wt(l),summary:Et(l,ee,Pe)};ce(nt),J(!1),te(!0)},2e3)},it=()=>{if(!ge.trim())return;const ee={type:"user",text:ge,timestamp:new Date().toISOString()};se([...Z,ee]),Ae(""),setTimeout(()=>{const ke=de(ge,l);se(Pe=>[...Pe,{type:"ai",text:ke,timestamp:new Date().toISOString()}])},1e3)},de=(ee,ke)=>{const Pe=ee.toLowerCase();if(Pe.includes("allergy")||Pe.includes("allergies"))return ke.allergies?`Patient has documented allergies: ${ke.allergies}. Please avoid these medications.`:"No documented allergies on record.";if(Pe.includes("medication")||Pe.includes("drug")){const nt=ze(ke.hhid);return`Patient is currently on ${nt.length} medications: ${nt.map(lt=>lt.drugName).join(", ")}.`}if(Pe.includes("risk")||Pe.includes("score")){const nt=_e(ke,ze(ke.hhid),ke.labTests||[]);return`Patient risk score is ${nt}/100. ${nt>70?"High risk - requires close monitoring.":nt>40?"Moderate risk - standard monitoring.":"Low risk - routine care."}`}return`Based on ${ke.name}'s record, I recommend reviewing the AI Insights panel for comprehensive analysis.`},Ge=ee=>{h(ee),te(!1),ce(null),se([]),X(!1)},He=()=>{A({name:l.name,age:l.age,gender:l.gender,weight:l.weight,height:l.height,ward:l.ward,bed:l.bed,status:l.status,diagnosis:l.diagnosis||"",provisionalDiagnosis:l.provisionalDiagnosis||"",allergies:l.allergies||"",chiefComplaints:l.chiefComplaints||"",historyOfIllness:l.historyOfIllness||"",pastMedicalHistory:l.pastMedicalHistory||"",familyHistory:l.familyHistory||"",admissionDate:l.admissionDate||"",dischargeDate:l.dischargeDate||""}),I(l.labTests&&l.labTests.length>0?JSON.parse(JSON.stringify(l.labTests)):[]),y(!0)},mt=ee=>{A({...C,[ee.target.name]:ee.target.value})},vt=()=>{ae(!0)},be=ee=>{const ke={type:ee.name,date:new Date().toISOString().split("T")[0],parameters:ee.parameters.map(Pe=>({name:Pe.name,value:"",unit:Pe.unit,range:{min:Pe.range.min,max:Pe.range.max}}))};I([...N,ke]),ae(!1)},Ie=fe==="all"?vy:vy.filter(ee=>ee.category===fe),Nt=ee=>{I(N.filter((ke,Pe)=>Pe!==ee))},je=(ee,ke)=>{const Pe=[...N];Pe[ee].type=ke,I(Pe)},Tn=(ee,ke)=>{const Pe=[...N];Pe[ee].date=ke,I(Pe)},De=(ee,ke,Pe,nt)=>{const lt=[...N];Pe==="min"||Pe==="max"?lt[ee].parameters[ke].range[Pe]=parseFloat(nt)||0:lt[ee].parameters[ke][Pe]=nt,I(lt)},ft=async()=>{k(!0);try{const ee=await Q4(l.id,C,N,"Admin User");if(ee.success){alert(" Patient details updated successfully!"),y(!1);const ke={...l,...C,labTests:N};h(ke)}else alert(` Error: ${ee.error}`)}catch(ee){console.error("Update error:",ee),alert(" Failed to update patient. Please try again.")}finally{k(!1)}};return ye?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"relative w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 sm:mb-6",children:[u.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-blue-200"}),u.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-t-blue-600 animate-spin"})]}),u.jsx("p",{className:"text-slate-700 font-bold text-base sm:text-lg mb-2",children:"Loading Patient Records"}),u.jsx("p",{className:"text-slate-500 text-xs sm:text-sm",children:"Please wait..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[u.jsx("div",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-30",children:u.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4",children:u.jsxs("div",{className:"flex items-center justify-between gap-2",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(et,{variant:"outline",onClick:()=>r("/dashboard"),size:"sm",className:"shrink-0",children:[u.jsx(cl,{size:16}),u.jsx("span",{className:"hidden sm:inline ml-2",children:"Back"})]}),l&&u.jsx(et,{variant:"outline",onClick:()=>X(!U),size:"sm",className:"lg:hidden shrink-0",children:u.jsx(a1,{size:16})})]}),u.jsxs("div",{className:"flex-1 min-w-0 text-center lg:text-left",children:[u.jsx("h1",{className:"text-sm sm:text-lg md:text-xl font-bold text-slate-900 truncate",children:"Patient Records"}),u.jsx("p",{className:"text-xs text-slate-500 hidden sm:block",children:"AI-Powered EMR System"})]}),u.jsxs("div",{className:"hidden sm:flex items-center gap-2 shrink-0",children:[u.jsxs(Ze,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-xs px-2 py-1",children:[u.jsx(gi,{size:12,className:"mr-1"}),"HIPAA"]}),u.jsxs(Ze,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-xs px-2 py-1",children:[u.jsx(vo,{size:12,className:"mr-1"}),"AI"]})]})]})})}),u.jsx(hl,{children:U&&u.jsxs(u.Fragment,{children:[u.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>X(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden"}),u.jsxs(Oe.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25},className:"fixed left-0 top-0 bottom-0 w-80 bg-white shadow-2xl z-50 overflow-y-auto lg:hidden",children:[u.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-bold",children:"Patient Directory"}),u.jsxs("p",{className:"text-xs text-blue-100",children:[ht.length," patients"]})]}),u.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-white/20 rounded-lg",children:u.jsx(_a,{size:20})})]}),u.jsxs("div",{className:"p-3",children:[u.jsxs("div",{className:"relative mb-3",children:[u.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx(Je,{placeholder:"Search...",value:e,onChange:ee=>s(ee.target.value),className:"pl-10 h-10"})]}),u.jsx("div",{className:"space-y-2",children:ht.map(ee=>u.jsxs("div",{onClick:()=>Ge(ee),className:`p-3 rounded-xl cursor-pointer border-2 ${l?.hhid===ee.hhid?"bg-blue-50 border-blue-500":"bg-white border-slate-200 active:bg-slate-50"}`,children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${l?.hhid===ee.hhid?"bg-blue-600 text-white":"bg-slate-200 text-slate-700"}`,children:ee.name[0]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-sm truncate",children:ee.name}),u.jsx("p",{className:"text-xs text-slate-600 font-mono",children:ee.hhid})]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("span",{className:"text-slate-600",children:[ee.age,"Y  ",ee.sex]}),u.jsx(Ze,{variant:ee.status==="critical"?"destructive":"default",className:"text-[10px]",children:ee.status})]})]},ee.hhid))})]})]})]})}),u.jsx("div",{className:"p-3 sm:p-6 max-w-[1600px] mx-auto",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[u.jsx("div",{className:"hidden lg:block lg:col-span-3",children:u.jsxs(Tt,{className:"border-2 border-blue-200 shadow-xl sticky top-24",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4 rounded-t-xl",children:[u.jsxs("h2",{className:"text-sm font-bold flex items-center gap-2",children:[u.jsx(Cs,{size:18}),"Patient Directory"]}),u.jsxs("p",{className:"text-xs text-blue-100 mt-1",children:[ht.length," patients"]})]}),u.jsxs(Mt,{className:"p-3",children:[u.jsxs("div",{className:"relative mb-3",children:[u.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),u.jsx(Je,{placeholder:"Search...",value:e,onChange:ee=>s(ee.target.value),className:"pl-10 h-10"})]}),u.jsx("div",{className:"space-y-2 max-h-[calc(100vh-320px)] overflow-y-auto",children:ht.map(ee=>u.jsxs("div",{onClick:()=>Ge(ee),className:`p-3 rounded-xl cursor-pointer border-2 ${l?.hhid===ee.hhid?"bg-blue-50 border-blue-500":"bg-white border-slate-200 hover:border-blue-300"}`,children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${l?.hhid===ee.hhid?"bg-blue-600 text-white":"bg-slate-200 text-slate-700"}`,children:ee.name[0]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-sm truncate",children:ee.name}),u.jsx("p",{className:"text-xs text-slate-600 font-mono",children:ee.hhid})]})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("span",{className:"text-slate-600",children:[ee.age,"Y  ",ee.sex]}),u.jsx(Ze,{variant:ee.status==="critical"?"destructive":"default",className:"text-[10px]",children:ee.status})]})]},ee.hhid))})]})]})}),u.jsx("div",{className:"lg:col-span-9",children:l?u.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[u.jsx(Tt,{className:"border-2 border-blue-200 shadow-lg",children:u.jsx(Mt,{className:"p-3 sm:p-4",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto",children:[u.jsxs(et,{size:"sm",onClick:He,className:"bg-blue-600 h-9 shrink-0",children:[u.jsx(hE,{size:14,className:"mr-1 sm:mr-2"}),u.jsx("span",{className:"text-xs sm:text-sm",children:"Edit"})]}),u.jsx(et,{size:"sm",variant:"outline",onClick:pt,disabled:G,className:"border-2 border-purple-300 h-9 shrink-0",children:G?u.jsxs(u.Fragment,{children:[u.jsx(n2,{size:14,className:"mr-1 sm:mr-2 animate-spin"}),u.jsx("span",{className:"text-xs sm:text-sm",children:"Analyzing..."})]}):u.jsxs(u.Fragment,{children:[u.jsx(vo,{size:14,className:"mr-1 sm:mr-2"}),u.jsx("span",{className:"text-xs sm:text-sm",children:"AI Insights"})]})}),u.jsxs(et,{size:"sm",variant:"outline",onClick:()=>Ce(!Q),className:"border-2 border-indigo-300 h-9 shrink-0",children:[u.jsx(fE,{size:14,className:"mr-1 sm:mr-2"}),u.jsx("span",{className:"text-xs sm:text-sm hidden sm:inline",children:"AI Assistant"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 justify-end sm:justify-start",children:[u.jsxs(et,{size:"sm",variant:"ghost",className:"h-9 shrink-0",children:[u.jsx(mE,{size:14,className:"sm:mr-2"}),u.jsx("span",{className:"hidden sm:inline text-xs",children:"Export"})]}),u.jsxs(et,{size:"sm",variant:"ghost",className:"h-9 shrink-0",children:[u.jsx(Ey,{size:14,className:"sm:mr-2"}),u.jsx("span",{className:"hidden sm:inline text-xs",children:"Print"})]})]})]})})}),W&&ne&&u.jsxs(Tt,{className:"border-2 border-purple-300 shadow-2xl bg-gradient-to-br from-purple-50 to-pink-50",children:[u.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-3 sm:p-4 rounded-t-xl",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[u.jsx(vo,{size:20}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-base sm:text-lg font-bold",children:"AI Clinical Insights"}),u.jsx("p",{className:"text-xs text-purple-100 hidden sm:block",children:"Powered by ML"})]})]}),u.jsx(et,{size:"sm",variant:"ghost",onClick:()=>te(!1),className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:u.jsx(_a,{size:16})})]})}),u.jsxs(Mt,{className:"p-3 sm:p-6",children:[u.jsxs("div",{className:"mb-4 sm:mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[u.jsx("h3",{className:"font-bold text-sm sm:text-base text-slate-900",children:"Risk Assessment"}),u.jsxs(Ze,{className:`${ne.riskScore>70?"bg-red-600":ne.riskScore>40?"bg-yellow-600":"bg-green-600"} text-white px-3 py-1`,children:[ne.riskScore,"/100"]})]}),u.jsx("div",{className:"h-2 sm:h-3 bg-slate-200 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-1000 ${ne.riskScore>70?"bg-red-600":ne.riskScore>40?"bg-yellow-600":"bg-green-600"}`,style:{width:`${ne.riskScore}%`}})}),u.jsx("p",{className:"text-xs text-slate-600 mt-2",children:ne.riskScore>70?"High risk - Requires immediate attention":ne.riskScore>40?"Moderate risk - Standard monitoring":"Low risk - Routine care sufficient"})]}),ne.alerts.length>0&&u.jsxs("div",{className:"mb-4 sm:mb-6",children:[u.jsxs("h3",{className:"font-bold text-sm sm:text-base mb-2 sm:mb-3",children:["Clinical Alerts (",ne.alerts.length,")"]}),u.jsx("div",{className:"space-y-2",children:ne.alerts.map((ee,ke)=>u.jsx("div",{className:`p-2 sm:p-3 rounded-lg border-l-4 ${ee.severity==="high"?"bg-red-50 border-l-red-600":ee.severity==="medium"?"bg-yellow-50 border-l-yellow-600":"bg-blue-50 border-l-blue-600"}`,children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(ee.icon,{className:ee.color,size:16}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-semibold text-xs sm:text-sm",children:ee.type}),u.jsx("p",{className:"text-xs text-slate-700 mt-0.5",children:ee.message})]})]})},ke))})]}),ne.recommendations.length>0&&u.jsxs("div",{className:"mb-4 sm:mb-6",children:[u.jsxs("h3",{className:"font-bold text-sm sm:text-base mb-2 sm:mb-3",children:["Recommendations (",ne.recommendations.length,")"]}),u.jsx("div",{className:"space-y-2",children:ne.recommendations.map((ee,ke)=>u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("p",{className:"font-semibold text-xs sm:text-sm",children:ee.category}),u.jsx(Ze,{className:`${ee.priority==="High"?"bg-red-600":ee.priority==="Medium"?"bg-yellow-600":"bg-green-600"} text-white text-[10px]`,children:ee.priority})]}),u.jsx("p",{className:"text-xs text-slate-700 mb-2",children:ee.suggestion}),u.jsxs("p",{className:"text-xs text-blue-700 font-semibold",children:["Action: ",ee.action]})]},ke))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 mb-4",children:[u.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border-2 border-green-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(nn,{className:"text-green-600",size:16}),u.jsx("p",{className:"text-xs font-semibold",children:"Adherence"})]}),u.jsxs("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:[ne.adherenceScore,"%"]})]}),u.jsxs("div",{className:"bg-white rounded-lg p-3 sm:p-4 border-2 border-blue-200",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(r1,{className:"text-blue-600",size:16}),u.jsx("p",{className:"text-xs font-semibold",children:"Outlook"})]}),u.jsx("p",{className:"text-base sm:text-lg font-bold text-blue-600",children:ne.predictedOutcome.recoveryLikelihood})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg p-3 sm:p-4 border-2 border-purple-300",children:[u.jsxs("p",{className:"text-xs font-semibold text-purple-900 mb-2 flex items-center gap-2",children:[u.jsx(z0,{size:14}),"AI Summary"]}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:ne.summary})]})]})]}),Q&&u.jsxs(Tt,{className:"border-2 border-indigo-300 shadow-2xl",children:[u.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-600 text-white p-3 sm:p-4 rounded-t-xl",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(z0,{size:20}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-base font-bold",children:"AI Assistant"}),u.jsx("p",{className:"text-xs text-indigo-100",children:"Ask about this patient"})]})]}),u.jsx(et,{size:"sm",variant:"ghost",onClick:()=>Ce(!1),className:"text-white hover:bg-white/20 h-8 w-8 p-0",children:u.jsx(_a,{size:16})})]})}),u.jsxs(Mt,{className:"p-3 sm:p-4",children:[u.jsx("div",{className:"h-60 sm:h-80 overflow-y-auto mb-3 space-y-2",children:Z.length===0?u.jsxs("div",{className:"text-center py-8 text-slate-500 text-sm",children:[u.jsx(z0,{size:40,className:"mx-auto mb-2 text-slate-300"}),u.jsxs("p",{children:["Ask me anything about ",l.name]})]}):Z.map((ee,ke)=>u.jsx("div",{className:`flex ${ee.type==="user"?"justify-end":"justify-start"}`,children:u.jsx("div",{className:`max-w-[80%] p-2 sm:p-3 rounded-lg ${ee.type==="user"?"bg-blue-600 text-white":"bg-slate-100 text-slate-900"}`,children:u.jsx("p",{className:"text-xs sm:text-sm",children:ee.text})})},ke))}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Je,{value:ge,onChange:ee=>Ae(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&it(),placeholder:"Type your question...",className:"flex-1"}),u.jsx(et,{onClick:it,size:"sm",children:"Send"})]})]})]}),u.jsxs(Tt,{className:"border-2 border-blue-200 shadow-xl",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-3 sm:p-5 rounded-t-xl",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-white/20 w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center font-bold text-lg sm:text-2xl",children:l.name[0]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg sm:text-2xl font-bold",children:l.name}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.jsx(Ze,{className:"bg-white/20 text-white font-mono text-xs",children:l.hhid}),u.jsxs("span",{className:"text-blue-100 text-xs sm:text-sm",children:[l.age,"Y  ",l.gender]})]})]})]}),u.jsx(Ze,{className:`${l.status==="critical"?"bg-red-500":l.status==="stable"?"bg-green-500":"bg-yellow-500"} text-white px-3 py-1.5 text-xs sm:text-sm self-start sm:self-auto`,children:l.status.toUpperCase()})]}),u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 bg-white/10 rounded-lg p-2 sm:p-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-100 mb-0.5",children:"Weight"}),u.jsxs("p",{className:"font-bold text-sm sm:text-lg",children:[l.weight," kg"]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-100 mb-0.5",children:"Height"}),u.jsxs("p",{className:"font-bold text-sm sm:text-lg",children:[l.height," cm"]})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-100 mb-0.5",children:"BMI"}),u.jsx("p",{className:"font-bold text-sm sm:text-lg",children:(l.weight/(l.height/100)**2).toFixed(1)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-100 mb-0.5",children:"Meds"}),u.jsx("p",{className:"font-bold text-sm sm:text-lg",children:ze(l.hhid).filter(ee=>ee.status==="active").length})]})]})]}),u.jsxs(Mt,{className:"p-3 sm:p-6",children:[u.jsx("div",{className:"flex gap-1 sm:gap-2 mb-4 sm:mb-6 border-b-2 border-slate-200 overflow-x-auto",children:["overview","medications","labs","history"].map(ee=>u.jsx("button",{onClick:()=>V(ee),className:`px-3 sm:px-4 py-2 text-xs sm:text-sm font-semibold capitalize transition-all whitespace-nowrap ${Y===ee?"text-blue-600 border-b-2 border-blue-600 -mb-[2px]":"text-slate-600"}`,children:ee},ee))}),Y==="overview"&&u.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[u.jsx(Yd,{label:"Admission",value:l.admissionDate?new Date(l.admissionDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):"N/A",icon:Om}),u.jsx(Yd,{label:"Ward",value:`${l.ward}  ${l.bed}`,icon:Fn}),u.jsx(Yd,{label:"Status",value:l.isActive!==!1?"Active":"Discharged",icon:Fn}),u.jsx(Yd,{label:"Days",value:l.admissionDate?Math.floor((new Date-new Date(l.admissionDate))/(1e3*60*60*24)):"N/A",icon:Qc})]}),l.diagnosis&&u.jsx("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-xl p-3 sm:p-4",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(wo,{className:"text-blue-600 mt-1",size:18}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-xs sm:text-sm text-blue-900 mb-1",children:"Diagnosis"}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-800",children:l.diagnosis})]})]})}),l.allergies&&u.jsx("div",{className:"bg-red-50 border-2 border-red-300 rounded-xl p-3 sm:p-4",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(Io,{className:"text-red-600 mt-1",size:18}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-xs sm:text-sm text-red-900 mb-1",children:" ALLERGIES"}),u.jsx("p",{className:"text-xs sm:text-sm text-red-800 font-semibold",children:l.allergies})]})]})})]}),Y==="medications"&&u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-base sm:text-lg mb-3 sm:mb-4",children:["Prescribed Medications (",ze(l.hhid).length,")"]}),ze(l.hhid).length===0?u.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-50 rounded-lg",children:[u.jsx(fi,{size:40,className:"mx-auto text-slate-300 mb-2 sm:mb-3"}),u.jsx("p",{className:"text-sm sm:text-base text-slate-600 font-semibold",children:"No medications"})]}):u.jsx("div",{className:"space-y-2 sm:space-y-3",children:ze(l.hhid).map(ee=>u.jsxs("div",{className:"border-2 border-slate-200 rounded-xl p-3 sm:p-4 bg-white",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-sm sm:text-lg",children:ee.drugName}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-xs sm:text-sm text-slate-600",children:[u.jsx("span",{className:"font-semibold",children:ee.dose}),u.jsx("span",{children:""}),u.jsx("span",{children:ee.frequency}),u.jsx("span",{children:""}),u.jsx("span",{children:ee.route})]})]}),u.jsx(Ze,{variant:ee.status==="active"?"default":"secondary",className:"text-xs",children:ee.status})]}),ee.instructions&&u.jsxs("p",{className:"text-xs text-slate-600 italic bg-slate-50 p-2 rounded mt-2",children:[" ",ee.instructions]})]},ee.id))})]}),Y==="labs"&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-base sm:text-lg mb-3 sm:mb-4",children:"Laboratory Investigations"}),!l.labTests||l.labTests.length===0?u.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-50 rounded-lg",children:[u.jsx(ul,{size:40,className:"mx-auto text-slate-300 mb-2 sm:mb-3"}),u.jsx("p",{className:"text-sm sm:text-base text-slate-600 font-semibold",children:"No lab tests"})]}):u.jsx("div",{className:"space-y-3 sm:space-y-4",children:l.labTests.map((ee,ke)=>u.jsxs("div",{className:"border-2 border-slate-200 rounded-xl p-3 sm:p-5 bg-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[u.jsx("h4",{className:"font-bold text-sm sm:text-lg",children:ee.type}),u.jsx(Ze,{variant:"outline",className:"text-xs",children:ee.date})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3",children:ee.parameters.map((Pe,nt)=>{const lt=parseFloat(Pe.value),In=lt&&(lt<Pe.range.min||lt>Pe.range.max);return u.jsxs("div",{className:`p-2 sm:p-3 rounded-lg border-2 ${In?"bg-red-50 border-red-300":"bg-green-50 border-green-300"}`,children:[u.jsx("p",{className:"text-xs font-semibold text-slate-600 mb-1",children:Pe.name}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("p",{className:`text-lg sm:text-xl font-bold ${In?"text-red-700":"text-green-700"}`,children:Pe.value||"N/A"}),u.jsx("span",{className:"text-xs text-slate-600",children:Pe.unit}),Pe.value&&u.jsx("span",{className:"text-base sm:text-lg",children:In?"":""})]}),u.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["Normal: ",Pe.range.min,"-",Pe.range.max]})]},nt)})})]},ke))})]}),Y==="history"&&u.jsxs("div",{children:[u.jsxs("h3",{className:"font-bold text-base sm:text-lg mb-3 sm:mb-4",children:["Administration History (",Be(l.hhid).length,")"]}),Be(l.hhid).length===0?u.jsxs("div",{className:"text-center py-8 sm:py-12 bg-slate-50 rounded-lg",children:[u.jsx(Fn,{size:40,className:"mx-auto text-slate-300 mb-2 sm:mb-3"}),u.jsx("p",{className:"text-sm sm:text-base text-slate-600 font-semibold",children:"No records"})]}):u.jsx("div",{className:"space-y-2 max-h-[400px] sm:max-h-[600px] overflow-y-auto",children:Be(l.hhid).map((ee,ke)=>u.jsxs("div",{className:`border-l-4 rounded-r-lg p-3 sm:p-4 ${ee.status==="administered"?"border-l-green-500 bg-green-50":"border-l-red-500 bg-red-50"}`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-sm sm:text-base",children:ee.drugName}),u.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mt-0.5",children:[ee.dose,"  ",ee.route]})]}),u.jsxs(Ze,{variant:"outline",className:"text-xs",children:[ee.status==="administered"?u.jsx(nn,{size:12,className:"mr-1 text-green-600"}):u.jsx(ih,{size:12,className:"mr-1 text-red-600"}),ee.status]})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs text-slate-500",children:[u.jsxs("span",{children:[u.jsx(Qc,{size:12,className:"inline mr-1"}),new Date(ee.timestamp).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})]}),u.jsxs("span",{children:[u.jsx(wo,{size:12,className:"inline mr-1"}),ee.nurseName]})]})]},ke))})]})]})]})]}):u.jsx(Tt,{className:"border-2 border-dashed border-slate-300 shadow-xl",children:u.jsxs(Mt,{className:"p-12 sm:p-20 text-center",children:[u.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-indigo-100 w-20 h-20 sm:w-28 sm:h-28 rounded-full mx-auto mb-4 sm:mb-6 flex items-center justify-center",children:u.jsx(ul,{size:48,className:"text-blue-600"})}),u.jsx("h3",{className:"text-lg sm:text-2xl font-bold text-slate-900 mb-2",children:"No Patient Selected"}),u.jsx("p",{className:"text-sm sm:text-base text-slate-600 max-w-md mx-auto mb-4",children:"Select a patient from the directory to view their complete medical records"}),u.jsxs(et,{onClick:()=>X(!0),className:"lg:hidden bg-blue-600 mt-4",children:[u.jsx(Cs,{size:16,className:"mr-2"}),"Select Patient"]})]})})})]})}),u.jsx(ey,{open:g,onOpenChange:y,children:u.jsxs(t1,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[u.jsx(n1,{children:u.jsx(s1,{className:"text-xl sm:text-2xl",children:"Edit Patient Record"})}),u.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-base sm:text-lg mb-3",children:"Basic Information"}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Name *"}),u.jsx(Je,{name:"name",value:C.name||"",onChange:mt})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Age *"}),u.jsx(Je,{type:"number",name:"age",value:C.age||"",onChange:mt})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Gender *"}),u.jsxs("select",{name:"gender",value:C.gender||"",onChange:mt,className:"w-full h-10 border rounded-md px-3",children:[u.jsx("option",{value:"Male",children:"Male"}),u.jsx("option",{value:"Female",children:"Female"}),u.jsx("option",{value:"Other",children:"Other"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Status *"}),u.jsxs("select",{name:"status",value:C.status||"",onChange:mt,className:"w-full h-10 border rounded-md px-3",children:[u.jsx("option",{value:"stable",children:"Stable"}),u.jsx("option",{value:"critical",children:"Critical"}),u.jsx("option",{value:"moderate",children:"Moderate"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Weight (kg)"}),u.jsx(Je,{type:"number",name:"weight",value:C.weight||"",onChange:mt})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Height (cm)"}),u.jsx(Je,{type:"number",name:"height",value:C.height||"",onChange:mt})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Ward"}),u.jsx(Je,{name:"ward",value:C.ward||"",onChange:mt})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Bed"}),u.jsx(Je,{name:"bed",value:C.bed||"",onChange:mt})]})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-base sm:text-lg mb-3",children:"Clinical Information"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Diagnosis"}),u.jsx(hi,{name:"diagnosis",value:C.diagnosis||"",onChange:mt,rows:2})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Allergies "}),u.jsx(Je,{name:"allergies",value:C.allergies||"",onChange:mt,placeholder:"e.g., Penicillin, Latex"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs sm:text-sm font-semibold mb-1 block",children:"Chief Complaints"}),u.jsx(hi,{name:"chiefComplaints",value:C.chiefComplaints||"",onChange:mt,rows:2})]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h3",{className:"font-bold text-base sm:text-lg",children:"Laboratory Tests"}),u.jsxs(et,{onClick:vt,size:"sm",variant:"outline",children:[u.jsx(Xd,{size:14,className:"mr-2"}),"Add Test"]})]}),N.length===0?u.jsxs("div",{className:"text-center py-6 bg-slate-50 rounded-lg border-2 border-dashed border-slate-300",children:[u.jsx(ul,{size:40,className:"mx-auto text-slate-300 mb-2"}),u.jsx("p",{className:"text-sm text-slate-600",children:"No lab tests added"})]}):u.jsx("div",{className:"space-y-3",children:N.map((ee,ke)=>u.jsxs("div",{className:"border-2 border-slate-200 rounded-lg p-3 sm:p-4 bg-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Test Type"}),u.jsx(Je,{value:ee.type,onChange:Pe=>je(ke,Pe.target.value),className:"text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-semibold mb-1 block",children:"Date"}),u.jsx(Je,{type:"date",value:ee.date,onChange:Pe=>Tn(ke,Pe.target.value),className:"text-sm"})]})]}),u.jsx(et,{variant:"ghost",size:"sm",onClick:()=>Nt(ke),className:"text-red-500 hover:bg-red-50 ml-2",children:u.jsx(Sy,{size:16})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Parameters:"}),ee.parameters.map((Pe,nt)=>u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-2 p-2 bg-slate-50 rounded",children:[u.jsx("div",{className:"sm:col-span-2",children:u.jsx(Je,{value:Pe.name,onChange:lt=>De(ke,nt,"name",lt.target.value),placeholder:"Parameter",className:"text-xs h-8"})}),u.jsx("div",{children:u.jsx(Je,{value:Pe.value,onChange:lt=>De(ke,nt,"value",lt.target.value),placeholder:"Value",className:"text-xs h-8"})}),u.jsx("div",{children:u.jsx(Je,{value:Pe.unit,onChange:lt=>De(ke,nt,"unit",lt.target.value),placeholder:"Unit",className:"text-xs h-8"})}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx(Je,{type:"number",value:Pe.range.min,onChange:lt=>De(ke,nt,"min",lt.target.value),placeholder:"Min",className:"text-xs h-8"}),u.jsx(Je,{type:"number",value:Pe.range.max,onChange:lt=>De(ke,nt,"max",lt.target.value),placeholder:"Max",className:"text-xs h-8"})]})]},nt))]})]},ke))})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[u.jsx(et,{variant:"outline",onClick:()=>y(!1),disabled:T,className:"flex-1",children:"Cancel"}),u.jsx(et,{onClick:ft,disabled:T,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:T?u.jsxs(u.Fragment,{children:[u.jsx(n2,{className:"mr-2 animate-spin",size:16}),"Saving..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Cy,{className:"mr-2",size:16}),"Save Changes"]})})]})]})]})}),u.jsx(ey,{open:z,onOpenChange:ae,children:u.jsxs(t1,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[u.jsx(n1,{children:u.jsx(s1,{children:"Select Lab Test Template"})}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"text-sm font-semibold mb-2 block",children:"Filter by Category"}),u.jsxs("select",{value:fe,onChange:ee=>B(ee.target.value),className:"w-full h-10 border rounded-md px-3",children:[u.jsx("option",{value:"all",children:"All Categories"}),v5.map(ee=>u.jsx("option",{value:ee.value,children:ee.label},ee.value))]})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:Ie.map((ee,ke)=>u.jsxs("div",{onClick:()=>be(ee),className:"p-4 border-2 border-slate-200 rounded-lg cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition-all",children:[u.jsx("h4",{className:"font-bold text-sm mb-1",children:ee.name}),u.jsx(Ze,{variant:"outline",className:"text-xs mb-2",children:ee.category}),u.jsxs("p",{className:"text-xs text-slate-600",children:[ee.parameters.length," parameters"]})]},ke))})]})})]})}function Yd({label:r,value:e,icon:s}){return u.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-lg p-2 sm:p-3",children:[u.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mb-1",children:[u.jsx(s,{size:14,className:"text-blue-600"}),u.jsx("p",{className:"text-[10px] sm:text-xs text-slate-600 font-semibold",children:r})]}),u.jsx("p",{className:"text-xs sm:text-sm font-bold text-slate-900 truncate",children:e})]})}const N5=(r=100)=>{const[e,s]=j.useState([]),[l,h]=j.useState(!0);return j.useEffect(()=>{const g=ja(er,"auditLogs"),y=Rh(g,Mh("timestamp","desc"),KE(r)),C=Dh(y,A=>{const N=A.docs.map(I=>({id:I.id,...I.data(),timestamp:I.data().timestamp?.toDate()||new Date}));s(N),h(!1)});return()=>C()},[r]),{logs:e,loading:l}};function C5(){const r=Da(),[e,s]=j.useState(""),[l,h]=j.useState("all"),[g,y]=j.useState("all"),{logs:C,loading:A}=N5(500),N=C.filter(U=>{const X=U.action.toLowerCase().includes(e.toLowerCase())||U.targetName.toLowerCase().includes(e.toLowerCase())||U.performedBy.toLowerCase().includes(e.toLowerCase())||U.targetId.toLowerCase().includes(e.toLowerCase()),z=l==="all"||U.eventType.includes(l),ae=g==="all"||U.status===g;return X&&z&&ae}),I=U=>U.includes("medication")?fi:U.includes("patient")?Rr:U.includes("system")?gi:Fn,T=U=>{switch(U){case"success":return{variant:"default",icon:nn,color:"text-green-600"};case"failed":return{variant:"destructive",icon:ih,color:"text-red-600"};case"warning":return{variant:"secondary",icon:sh,color:"text-amber-600"};default:return{variant:"outline",icon:Fn,color:"text-slate-600"}}},k=U=>{switch(U){case"nurse":return"bg-pink-100 text-pink-700 border-pink-300";case"pharmacist":return"bg-green-100 text-green-700 border-green-300";case"doctor":return"bg-blue-100 text-blue-700 border-blue-300";case"admin":return"bg-purple-100 text-purple-700 border-purple-300";default:return"bg-slate-100 text-slate-700 border-slate-300"}};return A?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-slate-200 border-t-slate-600 mx-auto mb-4"}),u.jsx("p",{className:"text-slate-600 font-semibold",children:"Loading audit logs..."})]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 p-3 sm:p-4 md:p-6",children:[u.jsxs(et,{variant:"outline",onClick:()=>r("/"),className:"mb-4 hover:bg-slate-100",children:[u.jsx(cl,{size:16,className:"mr-2"}),"Back to Home"]}),u.jsx("div",{className:"mb-4 sm:mb-6 animate-in slide-in-from-top duration-500",children:u.jsxs("div",{className:"bg-gradient-to-r from-slate-700 via-gray-800 to-slate-900 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 sm:w-64 h-32 sm:h-64 bg-white/5 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"relative z-10",children:u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"bg-white/20 p-2 sm:p-3 rounded-xl backdrop-blur-sm animate-bounce",children:u.jsx(gi,{className:"text-white",size:24})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-white",children:"Audit Log"}),u.jsx("p",{className:"text-white/90 text-xs sm:text-sm",children:"Complete system activity tracking & monitoring"})]})]})})]})}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[{label:"Total Events",value:C.length,icon:Fn,color:"from-blue-500 to-cyan-600"},{label:"Success",value:C.filter(U=>U.status==="success").length,icon:nn,color:"from-green-500 to-emerald-600"},{label:"Failed",value:C.filter(U=>U.status==="failed").length,icon:ih,color:"from-red-500 to-rose-600"},{label:"Today",value:C.filter(U=>new Date(U.timestamp).toDateString()===new Date().toDateString()).length,icon:Om,color:"from-purple-500 to-violet-600"}].map((U,X)=>u.jsx(Tt,{className:"border-2 border-slate-200 shadow-md hover:shadow-lg transition-all",children:u.jsxs(Mt,{className:"p-4",children:[u.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${U.color} flex items-center justify-center mb-2`,children:u.jsx(U.icon,{className:"text-white",size:20})}),u.jsx("p",{className:"text-2xl font-bold text-slate-900",children:U.value}),u.jsx("p",{className:"text-xs text-slate-500 font-medium",children:U.label})]})},X))}),u.jsx(Tt,{className:"border-2 border-slate-200 shadow-xl mb-6",children:u.jsxs(Mt,{className:"p-4 sm:p-6",children:[u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1",children:[u.jsx(Cs,{size:14}),"Search"]}),u.jsxs("div",{className:"relative",children:[u.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),u.jsx(Je,{placeholder:"Search logs...",value:e,onChange:U=>s(U.target.value),className:"pl-10 h-10 border-2"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1",children:[u.jsx(Ay,{size:14}),"Event Type"]}),u.jsxs("select",{value:l,onChange:U=>h(U.target.value),className:"w-full h-10 border-2 border-slate-200 rounded-md px-3 focus:border-blue-500 outline-none",children:[u.jsx("option",{value:"all",children:"All Events"}),u.jsx("option",{value:"patient",children:"Patient Events"}),u.jsx("option",{value:"medication",children:"Medication Events"}),u.jsx("option",{value:"system",children:"System Events"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1",children:[u.jsx(Fn,{size:14}),"Status"]}),u.jsxs("select",{value:g,onChange:U=>y(U.target.value),className:"w-full h-10 border-2 border-slate-200 rounded-md px-3 focus:border-green-500 outline-none",children:[u.jsx("option",{value:"all",children:"All Status"}),u.jsx("option",{value:"success",children:"Success"}),u.jsx("option",{value:"failed",children:"Failed"}),u.jsx("option",{value:"warning",children:"Warning"})]})]})]}),u.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[u.jsxs("p",{className:"text-slate-600",children:["Showing ",u.jsx("span",{className:"font-bold text-slate-900",children:N.length})," of ",C.length," events"]}),u.jsx(et,{size:"sm",variant:"outline",onClick:()=>{s(""),h("all"),y("all")},children:"Clear Filters"})]})]})}),u.jsx(Tt,{className:"border-2 border-slate-200 shadow-xl",children:u.jsx(Mt,{className:"p-0",children:u.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:N.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(ul,{size:64,className:"mx-auto text-slate-300 mb-4"}),u.jsx("p",{className:"text-slate-500 font-semibold",children:"No audit logs found"}),u.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your filters"})]}):u.jsx("div",{className:"divide-y divide-slate-200",children:N.map((U,X)=>{const z=I(U.eventType),ae=T(U.status),fe=ae.icon;return u.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"bg-slate-100 p-2 rounded-lg shrink-0",children:u.jsx(z,{className:"text-slate-600",size:20})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:U.action}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[u.jsx(Ze,{variant:"outline",className:"font-mono",children:U.targetId}),u.jsx("span",{className:"text-slate-600",children:U.targetName})]})]}),u.jsxs(Ze,{variant:ae.variant,className:"shrink-0 flex items-center gap-1",children:[u.jsx(fe,{size:12}),U.status]})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Rr,{size:12}),U.performedBy]}),u.jsx(Ze,{className:`${k(U.performedByRole)} text-xs`,children:U.performedByRole}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Om,{size:12}),new Date(U.timestamp).toLocaleString("en-IN")]})]}),U.details&&Object.keys(U.details).length>0&&u.jsxs("details",{className:"mt-2",children:[u.jsx("summary",{className:"text-xs text-blue-600 cursor-pointer hover:underline",children:"View Details"}),u.jsx("pre",{className:"mt-2 text-xs bg-slate-100 p-2 rounded overflow-x-auto",children:JSON.stringify(U.details,null,2)})]})]})]})},U.id)})})})})})]})}function E5(){return u.jsxs("footer",{className:"bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 text-white py-8 mt-auto border-t-4 border-blue-500 shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-orange-500/10 rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 relative z-10",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6 mb-6",children:[u.jsxs("div",{className:"flex flex-col items-center lg:items-start gap-3",children:[u.jsxs("div",{className:"flex items-center gap-3 text-base sm:text-lg",children:[u.jsx("span",{className:"text-slate-300 font-medium",children:"Made with"}),u.jsx(_h,{className:"text-red-500 fill-red-500 animate-pulse",size:22}),u.jsx("span",{className:"text-slate-300 font-medium",children:"in"}),u.jsxs("div",{className:"relative group cursor-pointer",children:[u.jsxs("svg",{width:"48",height:"32",viewBox:"0 0 48 32",className:"rounded shadow-lg hover:shadow-xl transition-all hover:scale-110 transform duration-300",children:[u.jsx("rect",{width:"48",height:"10.67",fill:"#FF9933"}),u.jsx("rect",{y:"10.67",width:"48",height:"10.67",fill:"#FFFFFF"}),u.jsx("rect",{y:"21.33",width:"48",height:"10.67",fill:"#138808"}),u.jsx("circle",{cx:"24",cy:"16",r:"4.5",fill:"none",stroke:"#000080",strokeWidth:"0.5"}),u.jsx("circle",{cx:"24",cy:"16",r:"3",fill:"none",stroke:"#000080",strokeWidth:"0.4"}),[...Array(24)].map((r,e)=>{const s=e*15*Math.PI/180,l=24+3*Math.cos(s),h=16+3*Math.sin(s),g=24+4.5*Math.cos(s),y=16+4.5*Math.sin(s);return u.jsx("line",{x1:l,y1:h,x2:g,y2:y,stroke:"#000080",strokeWidth:"0.4"},e)}),u.jsx("circle",{cx:"24",cy:"16",r:"0.8",fill:"#000080"})]}),u.jsxs("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 bg-slate-700 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-xl pointer-events-none",children:["Proudly Made in India ",u.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-slate-700 rotate-45"})]})]})]}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-400 text-center lg:text-left",children:"Empowering healthcare with IoT technology"})]}),u.jsxs("div",{className:"flex flex-col items-center gap-3",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 text-sm sm:text-base",children:[u.jsx("span",{className:"text-slate-400",children:"Created by"}),u.jsxs("a",{href:"https://github.com/harshitpamar",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-blue-400 hover:text-blue-300 transition-colors hover:underline flex items-center gap-2",children:[u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})}),"Harshit Parmar"]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("a",{href:"https://github.com/harshit21pamar",target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-white transition-all hover:scale-110 transform","aria-label":"GitHub",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),u.jsx("a",{href:"https://linkedin.com/in/harshitpamar",target:"_blank",rel:"noopener noreferrer",className:"text-slate-400 hover:text-blue-400 transition-all hover:scale-110 transform","aria-label":"LinkedIn",children:u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),u.jsx("a",{href:"mailto:harshit@example.com",className:"text-slate-400 hover:text-red-400 transition-all hover:scale-110 transform","aria-label":"Email",children:u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),u.jsx("polyline",{points:"22,6 12,13 2,6"})]})})]})]}),u.jsxs("div",{className:"flex flex-col items-center lg:items-end gap-3",children:[u.jsx("span",{className:"text-xs sm:text-sm text-slate-400",children:"In association with"}),u.jsxs("a",{href:"https://in.ivao.aero",target:"_blank",rel:"noopener noreferrer",className:"group relative",children:[u.jsx("div",{className:"bg-white rounded-xl p-3 shadow-lg hover:shadow-2xl transition-all hover:scale-110 transform duration-300",children:u.jsxs("svg",{width:"120",height:"48",viewBox:"0 0 120 48",className:"drop-shadow-md",children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"shieldGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[u.jsx("stop",{offset:"0%",stopColor:"#0066CC"}),u.jsx("stop",{offset:"100%",stopColor:"#004999"})]})}),u.jsx("path",{d:"M60 4 L20 12 L20 24 C20 38 28 42 60 44 C92 42 100 38 100 24 L100 12 Z",fill:"url(#shieldGradient)",stroke:"#003366",strokeWidth:"1"}),u.jsx("text",{x:"60",y:"32",fill:"white",fontSize:"20",fontWeight:"bold",fontFamily:"Arial, sans-serif",textAnchor:"middle",letterSpacing:"1",children:"IVAO"}),u.jsxs("g",{transform:"translate(60, 12)",children:[u.jsx("path",{d:"M0,-4 L-1,-2 L-1,2 L0,4 L1,2 L1,-2 Z",fill:"white"}),u.jsx("path",{d:"M-8,-1 L0,-2 L0,0 L-8,1 Z",fill:"white"}),u.jsx("path",{d:"M8,-1 L0,-2 L0,0 L8,1 Z",fill:"white"}),u.jsx("path",{d:"M-3,2 L0,2 L0,5 L-3,4 Z",fill:"white"}),u.jsx("path",{d:"M3,2 L0,2 L0,5 L3,4 Z",fill:"white"}),u.jsx("path",{d:"M-0.5,4 L0.5,4 L0.5,7 L-0.5,7 Z",fill:"white"})]})]})}),u.jsxs("div",{className:"absolute -bottom-12 left-1/2 transform -translate-x-1/2 bg-slate-700 text-white text-xs px-4 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap shadow-xl pointer-events-none z-50",children:["International Virtual Aviation Organisation",u.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-slate-700 rotate-45"})]})]}),u.jsx("p",{className:"text-xs text-slate-400 text-center lg:text-right",children:"Virtual Aviation Network"})]})]}),u.jsx("div",{className:"border-t border-slate-700 mb-4"}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 text-xs sm:text-sm text-slate-400",children:[u.jsxs("span",{children:[" ",new Date().getFullYear()]}),u.jsx("span",{className:"font-bold text-blue-400",children:"OmniGate Hospital"}),u.jsx("span",{className:"hidden sm:inline",children:""}),u.jsx("span",{children:"IoT-Enabled Bedside Guardian"}),u.jsx("span",{className:"hidden sm:inline",children:""}),u.jsx("span",{children:"All Rights Reserved"})]}),u.jsx("p",{className:"text-xs text-slate-500",children:"Built by Team OmniGate  Made for Healthcare Excellence"})]})]})]})}function A5(){return u.jsxs("div",{className:"min-h-screen flex flex-col",children:[u.jsx("main",{className:"flex-1",children:u.jsx(_E,{})}),u.jsx(E5,{})]})}function S5(){const r=Da(),e=TE(),[s,l]=j.useState(new Date),[h,g]=j.useState(!1),[y]=j.useState("nurse"),[C,A]=j.useState(3),[N,I]=j.useState(!1),[T,k]=j.useState(null),[U,X]=j.useState(!1),[z,ae]=j.useState(window.innerWidth>=1024),{patients:fe}=fu(),{medications:B}=Vh(),{logs:W}=RN();j.useEffect(()=>{const Z=setInterval(()=>l(new Date),1e3);return()=>clearInterval(Z)},[]),j.useEffect(()=>{const Z=()=>{ae(window.innerWidth>=1024)};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[]),j.useEffect(()=>{const Z=se=>{(se.metaKey||se.ctrlKey)&&se.key==="k"&&(se.preventDefault(),X(!0)),se.key==="Escape"&&X(!1)};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[]);const te=Z=>{r(Z),window.innerWidth<1024&&g(!1),X(!1)},ne={totalPatients:fe.length,criticalPatients:fe.filter(Z=>Z.status==="critical").length,stablePatients:fe.filter(Z=>Z.status==="stable").length,activeMedications:B.filter(Z=>Z.status==="active").length,pendingMedications:B.filter(Z=>Z.status==="pending").length,todayAdministrations:W.filter(Z=>new Date(Z.timestamp).toDateString()===new Date().toDateString()).length,bedOccupancy:85,availableDoctors:12,efficiency:94},ce=[{label:"Main",items:[{icon:pE,label:"Dashboard",path:"/dashboard",color:"blue",badge:null},{icon:Wd,label:"Patients",path:"/patient-records",color:"green",badge:ne.totalPatients}]},{label:"Operations",items:[{icon:Hc,label:"Registration",path:"/patient-registration",color:"purple"},{icon:fi,label:"Medications",path:"/nurse",color:"orange",badge:ne.pendingMedications>0?ne.pendingMedications:null},{icon:wo,label:"Pharmacy",path:"/pharmacist",color:"cyan"}]},{label:"System",items:[{icon:gi,label:"Audit Log",path:"/audit-log",color:"amber"},{icon:bE,label:"Settings",path:"/settings",color:"slate"}]}];fe.slice(0,6);const G=W.slice(0,8),J=fe.filter(Z=>Z.status==="critical"),Q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Ce={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex",children:[u.jsx(hl,{children:h&&!z&&u.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>g(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40"})}),u.jsxs(Oe.aside,{initial:!1,animate:{x:z||h?0:-280,width:N?80:280},transition:{type:"spring",stiffness:300,damping:30},className:"fixed lg:sticky top-0 left-0 h-screen bg-slate-900 text-white flex flex-col shadow-2xl z-50",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-900 to-slate-950 opacity-50"}),u.jsx("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"radial-gradient(circle at 1px 1px, white 1px, transparent 0)",backgroundSize:"40px 40px"}}),u.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),u.jsxs("div",{className:"p-5 border-b border-slate-800 flex items-center justify-between relative z-10",children:[!N&&u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 p-2.5 rounded-xl shadow-lg",children:u.jsx(Fn,{size:22,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-white",children:"OmniGate"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Hospital System"})]})]}),N&&u.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 p-2.5 rounded-xl shadow-lg mx-auto",children:u.jsx(Fn,{size:22,className:"text-white"})}),u.jsx("button",{onClick:()=>I(!N),className:"hidden lg:block p-2 hover:bg-slate-800 rounded-lg transition-colors",children:N?u.jsx(gE,{size:18}):u.jsx(xE,{size:18})}),u.jsx("button",{onClick:()=>g(!1),className:"lg:hidden p-2 hover:bg-slate-800 rounded-lg transition-colors",children:u.jsx(_a,{size:20})})]}),u.jsx("nav",{className:"flex-1 py-4 overflow-y-auto relative z-10 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:u.jsx("div",{className:"space-y-6 px-2",children:ce.map((Z,se)=>u.jsxs("div",{children:[!N&&u.jsx("div",{className:"px-3 mb-2",children:u.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:Z.label})}),u.jsx("div",{className:"space-y-1",children:Z.items.map((ge,Ae)=>{const Y=e.pathname===ge.path;return u.jsxs(Oe.button,{whileHover:{scale:1.02,x:4},whileTap:{scale:.98},onClick:()=>te(ge.path),className:`w-full flex items-center gap-3 px-3 py-3 text-sm rounded-xl transition-all relative group ${Y?"text-white bg-slate-800 shadow-lg":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[Y&&u.jsx(Oe.div,{layoutId:"activeTab",className:`absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 rounded-r-full ${ge.color==="blue"?"bg-blue-500":ge.color==="green"?"bg-green-500":ge.color==="purple"?"bg-purple-500":ge.color==="orange"?"bg-orange-500":ge.color==="cyan"?"bg-cyan-500":ge.color==="amber"?"bg-amber-500":"bg-slate-500"}`,transition:{type:"spring",stiffness:500,damping:30}}),u.jsxs("div",{className:`p-2 rounded-lg transition-all relative ${Y?ge.color==="blue"?"bg-blue-500/20 text-blue-400":ge.color==="green"?"bg-green-500/20 text-green-400":ge.color==="purple"?"bg-purple-500/20 text-purple-400":ge.color==="orange"?"bg-orange-500/20 text-orange-400":ge.color==="cyan"?"bg-cyan-500/20 text-cyan-400":ge.color==="amber"?"bg-amber-500/20 text-amber-400":"bg-slate-500/20 text-slate-400":"bg-slate-700/50 text-slate-400 group-hover:bg-slate-700"}`,children:[u.jsx(ge.icon,{size:18}),ge.badge&&u.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center font-bold",children:ge.badge})]}),!N&&u.jsx("span",{className:"font-medium flex-1 text-left",children:ge.label})]},Ae)})})]},se))})}),!N&&u.jsx("div",{className:"p-4 border-t border-slate-800 relative z-10",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-xl p-3 mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(fl,{size:16,className:"text-blue-400"}),u.jsx("p",{className:"text-xs font-semibold text-slate-300",children:"Quick Actions"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>X(!0),className:"p-2 bg-slate-800/50 hover:bg-slate-800 rounded-lg text-xs text-slate-300 hover:text-white transition-colors",children:[u.jsx(Cs,{size:14,className:"mx-auto mb-1"}),"Search"]}),u.jsxs("button",{className:"p-2 bg-slate-800/50 hover:bg-slate-800 rounded-lg text-xs text-slate-300 hover:text-white transition-colors",children:[u.jsx(yE,{size:14,className:"mx-auto mb-1"}),"Help"]})]})]})}),u.jsx("div",{className:"p-4 border-t border-slate-800 relative z-10",children:u.jsx("div",{className:`flex items-center ${N?"justify-center":"justify-between"} gap-3`,children:N?u.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-full flex items-center justify-center text-sm font-bold shadow-lg relative",children:["HP",u.jsx("span",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-slate-900 rounded-full"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[u.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-full flex items-center justify-center text-sm font-bold shadow-lg flex-shrink-0 relative",children:["HP",u.jsx("span",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-slate-900 rounded-full"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-semibold truncate",children:"Harshit Pamar"}),u.jsxs("p",{className:"text-xs text-slate-400 capitalize flex items-center gap-1",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),y]})]})]}),u.jsx("button",{onClick:()=>{localStorage.removeItem("isAuthenticated"),localStorage.removeItem("username"),r("/login")},className:"p-2 hover:bg-red-500/20 rounded-lg text-red-400 transition-colors flex-shrink-0",children:u.jsx(vE,{size:18})})]})})})]}),u.jsx(hl,{children:U&&u.jsxs(u.Fragment,{children:[u.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>X(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]"}),u.jsx(Oe.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},className:"fixed top-20 left-1/2 -translate-x-1/2 w-full max-w-2xl z-[70] px-4",children:u.jsxs(Tt,{className:"border-2 border-slate-300 shadow-2xl",children:[u.jsx("div",{className:"p-4 border-b border-slate-200",children:u.jsxs("div",{className:"relative",children:[u.jsx(Cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),u.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search patients, medications, records... (Ctrl+K)",className:"w-full pl-11 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),u.jsx("div",{className:"p-2 max-h-96 overflow-y-auto",children:u.jsxs("div",{className:"space-y-1",children:[u.jsx("p",{className:"px-3 py-2 text-xs font-semibold text-slate-500 uppercase",children:"Quick Actions"}),[{icon:Hc,label:"New Patient Registration",path:"/patient-registration"},{icon:Wd,label:"View All Patients",path:"/patient-records"},{icon:fi,label:"Medication Administration",path:"/nurse"},{icon:gi,label:"Audit Log",path:"/audit-log"}].map((Z,se)=>u.jsxs("button",{onClick:()=>te(Z.path),className:"w-full flex items-center gap-3 px-3 py-2.5 hover:bg-slate-50 rounded-lg transition-colors text-left",children:[u.jsx(Z.icon,{size:18,className:"text-slate-600"}),u.jsx("span",{className:"text-sm font-medium text-slate-900",children:Z.label}),u.jsx(qd,{size:16,className:"ml-auto text-slate-400"})]},se))]})})]})})]})}),u.jsxs("main",{className:"flex-1 overflow-y-auto bg-slate-50 w-full lg:w-auto",children:[u.jsxs(Oe.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-white border-b border-slate-200 px-3 sm:px-6 py-3 sm:py-4 flex items-center justify-between sticky top-0 z-30 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[u.jsx("button",{onClick:()=>g(!0),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors lg:hidden shrink-0",children:u.jsx(a1,{size:20})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h1",{className:"text-base sm:text-xl md:text-2xl font-bold text-slate-900 truncate",children:"Dashboard"}),u.jsxs("div",{className:"hidden sm:flex items-center gap-2 mt-0.5",children:[u.jsx(Oe.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"w-2 h-2 bg-green-500 rounded-full"}),u.jsx("p",{className:"text-xs text-slate-600",children:"All systems operational"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 shrink-0",children:[u.jsxs("button",{onClick:()=>X(!0),className:"hidden md:flex items-center gap-2 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors text-sm text-slate-600",children:[u.jsx(Cs,{size:16}),u.jsx("span",{children:"Search"}),u.jsx("kbd",{className:"ml-2 px-2 py-0.5 bg-white border border-slate-300 rounded text-xs",children:"K"})]}),u.jsxs("div",{className:"hidden md:block text-right bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[u.jsx("p",{className:"text-sm font-bold text-slate-900 font-mono",children:s.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),u.jsx("p",{className:"text-[10px] text-slate-500",children:s.toLocaleDateString("en-IN",{day:"2-digit",month:"short"})})]}),u.jsxs(Oe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative p-2 sm:p-2.5 bg-slate-50 rounded-lg border border-slate-200 hover:bg-slate-100 transition-colors",children:[u.jsx(wE,{size:18,className:"text-slate-700"}),C>0&&u.jsx(Oe.span,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},className:"absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-red-500 text-white text-[10px] sm:text-xs rounded-full flex items-center justify-center font-bold",children:C})]}),u.jsx("button",{onClick:()=>X(!0),className:"md:hidden p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:u.jsx(Cs,{size:18})})]})]}),u.jsxs(Oe.div,{variants:Q,initial:"hidden",animate:"visible",className:"p-3 sm:p-6 space-y-4 sm:space-y-6",children:[u.jsxs(Oe.div,{variants:Q,className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[u.jsx(Oe.div,{variants:Ce,whileHover:{scale:1.02,y:-4},children:u.jsxs(Tt,{className:"border border-slate-200 shadow-sm overflow-hidden relative",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/5 rounded-full blur-2xl"}),u.jsxs(Mt,{className:"p-3 sm:p-5 relative z-10",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[u.jsx(Oe.div,{whileHover:{rotate:360},transition:{duration:.6},className:"bg-blue-50 p-2 sm:p-2.5 rounded-lg",children:u.jsx(Wd,{size:18,className:"text-blue-600"})}),u.jsxs(Ze,{variant:"outline",className:"text-[10px] sm:text-xs text-green-600 border-green-600 hidden sm:flex items-center gap-1",children:[u.jsx(r1,{size:10}),"+12%"]})]}),u.jsx(Oe.h3,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"text-xl sm:text-3xl font-bold text-slate-900 mb-0.5 sm:mb-1",children:ne.totalPatients}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600",children:"Total Patients"})]})]})}),u.jsx(Oe.div,{variants:Ce,whileHover:{scale:1.02,y:-4},children:u.jsxs(Tt,{className:"border border-red-200 shadow-sm bg-red-50/30 overflow-hidden relative",children:[u.jsx(Oe.div,{animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{repeat:1/0,duration:2},className:"absolute top-0 right-0 w-32 h-32 bg-red-500/10 rounded-full blur-2xl"}),u.jsxs(Mt,{className:"p-3 sm:p-5 relative z-10",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[u.jsx(Oe.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{repeat:1/0,duration:2,repeatDelay:1},className:"bg-red-100 p-2 sm:p-2.5 rounded-lg",children:u.jsx(Io,{size:18,className:"text-red-600"})}),u.jsx(Oe.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:1},children:u.jsx(Ze,{variant:"destructive",className:"text-[10px] sm:text-xs",children:"URGENT"})})]}),u.jsx(Oe.h3,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.3},className:"text-xl sm:text-3xl font-bold text-slate-900 mb-0.5 sm:mb-1",children:ne.criticalPatients}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600",children:"Critical"})]})]})}),u.jsx(Oe.div,{variants:Ce,whileHover:{scale:1.02,y:-4},children:u.jsxs(Tt,{className:"border border-slate-200 shadow-sm overflow-hidden relative",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/5 rounded-full blur-2xl"}),u.jsxs(Mt,{className:"p-3 sm:p-5 relative z-10",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[u.jsx(Oe.div,{whileHover:{rotate:360},transition:{duration:.6},className:"bg-purple-50 p-2 sm:p-2.5 rounded-lg",children:u.jsx(fi,{size:18,className:"text-purple-600"})}),u.jsxs(Ze,{variant:"outline",className:"text-[10px] sm:text-xs text-slate-600 hidden sm:flex",children:[ne.pendingMedications," pending"]})]}),u.jsx(Oe.h3,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.4},className:"text-xl sm:text-3xl font-bold text-slate-900 mb-0.5 sm:mb-1",children:ne.activeMedications}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600",children:"Active Meds"})]})]})}),u.jsx(Oe.div,{variants:Ce,whileHover:{scale:1.02,y:-4},children:u.jsxs(Tt,{className:"border border-slate-200 shadow-sm overflow-hidden relative",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/5 rounded-full blur-2xl"}),u.jsxs(Mt,{className:"p-3 sm:p-5 relative z-10",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[u.jsx(Oe.div,{whileHover:{scale:1.2},className:"bg-green-50 p-2 sm:p-2.5 rounded-lg",children:u.jsx(nn,{size:18,className:"text-green-600"})}),u.jsx(Ze,{variant:"outline",className:"text-[10px] sm:text-xs text-green-600 border-green-600",children:"Today"})]}),u.jsx(Oe.h3,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.5},className:"text-xl sm:text-3xl font-bold text-slate-900 mb-0.5 sm:mb-1",children:ne.todayAdministrations}),u.jsx("p",{className:"text-xs sm:text-sm text-slate-600",children:"Doses Given"})]})]})})]}),J.length>0&&u.jsx(Oe.div,{variants:Ce,children:u.jsxs(Tt,{className:"border-0 shadow-xl bg-gradient-to-r from-red-50 to-pink-50 overflow-hidden",children:[u.jsx(Oe.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},className:"bg-gradient-to-r from-red-500 to-pink-600 text-white p-4 sm:p-5",children:u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Oe.div,{animate:{rotate:[0,-10,10,-10,0]},transition:{repeat:1/0,duration:2},className:"bg-white/20 p-2 sm:p-3 rounded-xl backdrop-blur-sm",children:u.jsx(Io,{size:20})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-base sm:text-xl font-bold",children:"Critical Alerts"}),u.jsxs("p",{className:"text-red-100 text-xs sm:text-sm",children:[J.length," patients need immediate attention"]})]})]}),u.jsx(Oe.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>te("/patient-records"),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg backdrop-blur-sm font-medium transition-colors text-sm w-full sm:w-auto",children:"View All"})]})}),u.jsx(Mt,{className:"p-3 sm:p-6",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:J.map((Z,se)=>u.jsxs(Oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:se*.1},whileHover:{scale:1.03,y:-4},onClick:()=>te("/patient-records"),className:"bg-white border-2 border-red-200 rounded-xl p-3 sm:p-4 cursor-pointer shadow-sm hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h4",{className:"font-bold text-slate-900 text-sm sm:text-base truncate",children:Z.name}),u.jsxs("p",{className:"text-xs text-slate-600 font-mono",children:["HHID: ",Z.hhid]})]}),u.jsx(Ze,{variant:"destructive",className:"text-[10px] sm:text-xs ml-2",children:"CRITICAL"})]}),u.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[u.jsxs("span",{className:"text-slate-600 truncate",children:[Z.ward,"  Bed ",Z.bed]}),u.jsx(qd,{size:16,className:"text-red-500 shrink-0"})]})]},se))})})]})}),u.jsx(Oe.div,{variants:Ce,children:u.jsxs(Tt,{className:"border-0 shadow-xl bg-white/70 backdrop-blur-xl rounded-3xl overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-100 px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl",children:u.jsx(Fn,{size:20,className:"text-white"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"System Health"})]})}),u.jsx(Mt,{className:"p-6 space-y-4",children:[{label:"Bed Occupancy",value:ne.bedOccupancy,max:100,gradient:"from-blue-500 to-cyan-500"},{label:"Staff Available",value:ne.availableDoctors,max:15,gradient:"from-emerald-500 to-teal-500"},{label:"Efficiency",value:ne.efficiency,max:100,gradient:"from-purple-500 to-pink-500"}].map((Z,se)=>u.jsxs(Oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:se*.1},children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-semibold text-slate-700",children:Z.label}),u.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[Z.value,Z.max===100?"%":`/${Z.max}`]})]}),u.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:u.jsx(Oe.div,{initial:{width:0},animate:{width:`${Z.value/Z.max*100}%`},transition:{duration:1,delay:se*.2},className:`h-full rounded-full bg-gradient-to-r ${Z.gradient} shadow-lg`})})]},se))})]})}),u.jsx(Oe.div,{variants:Ce,children:u.jsxs(Tt,{className:"border-0 shadow-xl bg-white/70 backdrop-blur-xl rounded-3xl overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-100 px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-gradient-to-br from-amber-500 to-orange-500 rounded-xl",children:u.jsx(wy,{size:20,className:"text-white"})}),u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Quick Actions"})]})}),u.jsx(Mt,{className:"p-4 space-y-2",children:[{icon:Hc,label:"New Patient",path:"/patient-registration",gradient:"from-blue-500 to-cyan-500"},{icon:fi,label:"Give Medication",path:"/nurse",gradient:"from-purple-500 to-pink-500"},{icon:Cs,label:"Search Records",path:"/patient-records",gradient:"from-emerald-500 to-teal-500"},{icon:gi,label:"Audit Log",path:"/audit-log",gradient:"from-amber-500 to-orange-500"}].map((Z,se)=>u.jsxs(Oe.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:se*.1},whileHover:{scale:1.03,x:5},whileTap:{scale:.97},onClick:()=>te(Z.path),className:`w-full flex items-center gap-3 p-3 rounded-2xl bg-gradient-to-r ${Z.gradient} text-white shadow-lg hover:shadow-xl transition-all`,children:[u.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-sm rounded-xl",children:u.jsx(Z.icon,{size:18})}),u.jsx("span",{className:"font-semibold flex-1 text-left",children:Z.label}),u.jsx(qd,{size:16})]},se))})]})}),u.jsx(Oe.div,{variants:Ce,children:u.jsxs(Tt,{className:"border-0 shadow-xl bg-white/70 backdrop-blur-xl rounded-3xl overflow-hidden",children:[u.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-100 px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Oe.div,{animate:{rotate:360},transition:{repeat:1/0,duration:3,ease:"linear"},className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl",children:u.jsx(Fn,{size:20,className:"text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Live Activity"}),u.jsx("p",{className:"text-xs text-slate-600",children:"Real-time updates"})]})]}),u.jsxs(Ze,{className:"bg-emerald-100 text-emerald-700 border-emerald-200",children:[u.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse mr-1"}),"Live"]})]})}),u.jsx(Mt,{className:"p-4",children:u.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:G.map((Z,se)=>u.jsxs(Oe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:se*.05},className:"flex items-center gap-3 p-3 bg-gradient-to-r from-slate-50 to-purple-50 rounded-2xl border border-purple-100",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center",children:u.jsx(nn,{size:18,className:"text-white"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-sm text-slate-900 truncate",children:Z.drugName}),u.jsxs("p",{className:"text-xs text-slate-600",children:["Patient: ",Z.patientHHID,"  ",Z.nurseName]})]}),u.jsx("span",{className:"text-xs text-slate-500 font-mono",children:new Date(Z.timestamp).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]},se))})})]})})]})]})]})}function _5(){const r=Da(),[e,s]=j.useState(""),[l,h]=j.useState(""),[g,y]=j.useState(!1),[C,A]=j.useState(""),[N,I]=j.useState(!1),T=k=>{k.preventDefault(),A(""),I(!0),setTimeout(()=>{e==="Harshit"&&l==="Admin"?(localStorage.setItem("isAuthenticated","true"),localStorage.setItem("username",e),r("/dashboard")):(A("Invalid username or password"),I(!1))},1e3)};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800 flex items-center justify-center p-4 relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx(Oe.div,{animate:{scale:[1,1.2,1],rotate:[0,90,0],opacity:[.1,.2,.1]},transition:{repeat:1/0,duration:10},className:"absolute top-20 left-20 w-96 h-96 bg-white rounded-full blur-3xl"}),u.jsx(Oe.div,{animate:{scale:[1.2,1,1.2],rotate:[90,0,90],opacity:[.1,.2,.1]},transition:{repeat:1/0,duration:15},className:"absolute bottom-20 right-20 w-96 h-96 bg-pink-300 rounded-full blur-3xl"}),u.jsx(Oe.div,{animate:{y:[0,-30,0],opacity:[.05,.15,.05]},transition:{repeat:1/0,duration:8},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-cyan-300 rounded-full blur-3xl"})]}),u.jsx(Oe.div,{animate:{y:[0,-20,0],rotate:[0,10,0]},transition:{repeat:1/0,duration:5},className:"absolute top-10 left-10 text-white/20",children:u.jsx(_h,{size:40})}),u.jsx(Oe.div,{animate:{y:[0,20,0],rotate:[0,-10,0]},transition:{repeat:1/0,duration:6,delay:1},className:"absolute bottom-10 right-10 text-white/20",children:u.jsx(Fn,{size:50})}),u.jsx(Oe.div,{animate:{y:[0,-15,0],x:[0,10,0]},transition:{repeat:1/0,duration:7,delay:.5},className:"absolute top-1/4 right-20 text-white/20",children:u.jsx(gi,{size:35})}),u.jsx(Oe.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5},className:"w-full max-w-md relative z-10",children:u.jsxs(Tt,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-xl overflow-hidden",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 p-6 sm:p-8 text-center relative overflow-hidden",children:[u.jsx(Oe.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:3},className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),u.jsx(Oe.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,delay:.2},className:"inline-flex items-center justify-center w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl mb-4 shadow-lg relative z-10",children:u.jsx(Fn,{size:40,className:"text-white"})}),u.jsx(Oe.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-bold text-white mb-2 relative z-10",children:"OmniGate"}),u.jsx(Oe.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-blue-100 text-sm relative z-10",children:"Hospital Management System"})]}),u.jsx(Mt,{className:"p-6 sm:p-8",children:u.jsxs(Oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2 text-center",children:"Welcome Back"}),u.jsx("p",{className:"text-slate-600 text-sm text-center mb-6",children:"Sign in to access your dashboard"}),u.jsxs("form",{onSubmit:T,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Username"}),u.jsxs("div",{className:"relative",children:[u.jsx(Rr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),u.jsx("input",{type:"text",value:e,onChange:k=>s(k.target.value),placeholder:"Enter your username",className:"w-full pl-11 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx(To,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),u.jsx("input",{type:g?"text":"password",value:l,onChange:k=>h(k.target.value),placeholder:"Enter your password",className:"w-full pl-11 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0}),u.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:g?u.jsx(NE,{size:20}):u.jsx(CE,{size:20})})]})]}),C&&u.jsx(Oe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:C}),u.jsx(Oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:N,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 rounded-lg shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:N?u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(Oe.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),u.jsx("span",{children:"Signing in..."})]}):"Sign In"})]}),u.jsx(Oe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(fl,{size:16,className:"text-blue-600 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"text-xs text-blue-800",children:[u.jsx("p",{className:"font-semibold mb-1",children:"Demo Credentials:"}),u.jsxs("p",{className:"font-mono",children:["Username: ",u.jsx("span",{className:"font-bold",children:"Harshit"})]}),u.jsxs("p",{className:"font-mono",children:["Password: ",u.jsx("span",{className:"font-bold",children:"Admin"})]})]})]})})]})}),u.jsx("div",{className:"bg-slate-50 px-6 py-4 text-center border-t border-slate-200",children:u.jsx("p",{className:"text-xs text-slate-500",children:" 2026 OmniGate Hospital System. All rights reserved."})})]})})]})}function T5(){return u.jsx(IE,{children:u.jsxs(RE,{children:[u.jsx(Er,{path:"/",element:u.jsx(sA,{})}),u.jsxs(Er,{element:u.jsx(A5,{}),children:[u.jsx(Er,{path:"/nurse",element:u.jsx(b5,{})}),u.jsx(Er,{path:"/pharmacist",element:u.jsx(y5,{})}),u.jsx(Er,{path:"/patient-registration",element:u.jsx(NI,{})}),u.jsx(Er,{path:"/patient-records",element:u.jsx(w5,{})}),u.jsx(Er,{path:"/audit-log",element:u.jsx(C5,{})})," ",u.jsx(Er,{path:"/dashboard",element:u.jsx(S5,{})})," ",u.jsx(Er,{path:"/login",element:u.jsx(_5,{})})," "]})]})})}s3.createRoot(document.getElementById("root")).render(u.jsx(j.StrictMode,{children:u.jsx(T5,{})}));
